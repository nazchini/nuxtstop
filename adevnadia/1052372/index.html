<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>React components composition: how to get it right</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>React components composition: how to get it right</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/webdev" class="tag" data-v-70afb46a>
          #webdev
        </a><a href="/nuxtstop/t/react" class="tag" data-v-70afb46a>
          #react
        </a><a href="/nuxtstop/t/tutorial" class="tag" data-v-70afb46a>
          #tutorial
        </a><a href="/nuxtstop/t/javascript" class="tag" data-v-70afb46a>
          #javascript
        </a></div> <!----> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            74
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            14
          </span></div> <time data-v-70afb46a>Apr 12</time></div></header> <div class="content" data-v-70afb46a><p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xj5KVzdc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3lpldl5ad57paun1lxrm.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xj5KVzdc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3lpldl5ad57paun1lxrm.png" alt="Image description" loading="lazy" width="880" height="563"></a></p>

<p>One of the most interesting and challenging things in React is not mastering some advanced techniques for state management or how to use Context properly. More complicated to get right is how and when we should separate our code into independent components and how to compose them properly. I often see developers falling into two traps: either they are not extracting them soon enough, and end up with huge components “monoliths” that do way too many things at the same time, and that are a nightmare to maintain. Or, especially after they have been burned a few times by the previous pattern, they extract components way too early, which results in a complicated combination of multiple abstractions, over-engineered code and again, a nightmare to maintain.</p>

<p>What I want to do today, is to offer a few techniques and rules, that could help identify when and how to extract components on time and how not to fall into an over-engineering trap. But first, let’s refresh some basics: what is composition and which compositions patterns are available to us?</p>

<h2>
  <a name="react-components-composition-patterns" href="#react-components-composition-patterns">
  </a>
  React components composition patterns
</h2>

<h3>
  <a name="simple-components" href="#simple-components">
  </a>
  Simple components
</h3>

<p>Simple components are a basic building block of React. They can accept props, have some state, and can be quite complicated despite their name. A <code>Button</code> component that accepts <code>title</code> and <code>onClick</code> properties and renders a button tag is a simple component.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">onClick</span> <span class="p">})</span> <span class="o">=></span> <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClick</span><span class="si">}</span><span class="p">></span><span class="si">{</span><span class="nx">title</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">>;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Any component can render other components - that’s composition. A <code>Navigation</code> component that renders that <code>Button</code> - also a simple component, that composes other components:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">Navigation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;></span>
      // Rendering out Button component in Navigation component. Composition!
      <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">title</span><span class="p">=</span><span class="s">"Create"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClickHandler</span><span class="si">}</span> <span class="p">/></span>
      ... // some other navigation code
    <span class="p">&lt;/></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>With those components and their composition, we can implement as complicated UI as we want. Technically, we don’t even need any other patterns and techniques, all of them are just nice-to-haves that just improve code reuse or solve only specific use cases.</p>

<h3>
  <a name="container-components" href="#container-components">
  </a>
  Container components
</h3>

<p>Container components is a more advanced composition technique. The only difference from simple components is that they, among other props, allow passing special prop <code>children</code>, for which React has its own syntax. If our <code>Button</code> from the previous example accepted not <code>title</code> but <code>children</code> it would be written like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="c1">// the code is exactly the same! just replace "title" with "children"</span>
<span class="kd">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">onClick</span> <span class="p">})</span> <span class="o">=></span> <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClick</span><span class="si">}</span><span class="p">></span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">>;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Which is no different from <code>title</code> from <code>Button</code> perspective. The difference is on the consumer side, <code>children</code> syntax is special and looks like your normal HTML tags:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">Navigation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;></span>
      <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClickHandler</span><span class="si">}</span><span class="p">></span>Create<span class="p">&lt;/</span><span class="nc">Button</span><span class="p">></span>
      ... // some other navigation code
    <span class="p">&lt;/></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Anything can go into <code>children</code>. We can, for example, add an <code>Icon</code> component there in addition to text, and then <code>Navigation</code> has a composition of <code>Button</code> and <code>Icon</code> components:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">Navigation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;></span>
      <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClickHandler</span><span class="si">}</span><span class="p">></span>
        <span class="p">&lt;</span><span class="err">!--</span> <span class="na">Icon</span> <span class="na">component</span> <span class="na">is</span> <span class="na">rendered</span> <span class="na">inside</span> <span class="na">button</span><span class="err">,</span> <span class="na">but</span> <span class="na">button</span> <span class="na">doesn</span><span class="err">'</span><span class="na">t</span> <span class="na">know</span> <span class="err">--</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nc">Icon</span> <span class="p">/></span>
        <span class="p">&lt;</span><span class="nt">span</span><span class="p">></span>Create<span class="p">&lt;/</span><span class="nt">span</span><span class="p">></span>
      <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">></span>
      ...
      // some other navigation code
    <span class="p">&lt;/></span>
  )
}
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><code>Navigation</code> controls what goes into <code>children</code>, from <code>Button</code>’s perspective it just renders whatever the consumer wants.</p>

<p>We’re going to look more into practical examples of this technique further in the article.</p>

<p>There are other composition patterns, like <a href="https://www.developerway.com/posts/higher-order-components-in-react-hooks-era">higher-order components</a>, <a href="https://www.developerway.com/posts/react-component-as-prop-the-right-way">passing components as props</a> or <a href="https://www.developerway.com/posts/how-to-write-performant-react-apps-with-context">context</a>, but those should be used only for very specific use cases. Simple components and container components are the two major pillars of React development, and it’s better to perfect the use of those before trying to introduce more advanced techniques.</p>

<p>Now, that you know them, you’re ready to implement as complicated UI as you can possibly need!</p>

<p>Okay, I’m joking, I'm not going to do a “how to draw an owl” type of article here 😅</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--TaB5R1uR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3zgp5uj2v1igg85wduaj.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--TaB5R1uR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3zgp5uj2v1igg85wduaj.jpeg" alt="Image description" loading="lazy" width="500" height="407"></a></p>

<p>It’s time for some rules and guidelines so that we can actually <del>draw that owl</del> build complicated React apps with ease.</p>

<h2>
  <a name="when-is-it-a-good-time-to-extract-components" href="#when-is-it-a-good-time-to-extract-components">
  </a>
  When is it a good time to extract components?
</h2>

<p>The core React development and decomposition rules that I like to follow, and the more I code, the more strongly I feel about them, are:</p>

<ul>
<li>always start implementation from the top</li>
<li>extract components only when there is an actual need for it</li>
<li>always start from “simple” components, introduce other composition techniques only when there is an actual need for them</li>
</ul>

<p>Any attempt to think “in advance” or start “bottom-up“ from small re-usable components always ends up either in over-complicated components API or in components that are missing half of the necessary functionality.</p>

<p>And the very first rule for when a component needs to be decomposed into smaller ones is <strong>when a component is too big</strong>. A good size for a component for me is when it can fit on the screen of my laptop entirely. If I need to scroll to read through the component’s code - it’s a clear sign that it’s too big.</p>

<p>Let’s start coding now, to see how can this looks in practice. We are going to implement a typical Jira page from scratch today, no less (well, sort of, at least we’re going to start 😅).</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--T53aFqdU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1izkmzd59d5e2gv27hy.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--T53aFqdU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1izkmzd59d5e2gv27hy.png" alt="Image description" loading="lazy" width="880" height="610"></a></p>

<p>This is a screen of an issue page from my personal project where I keep my favourite recipes found online 🍣. In there we need to implement, as you can see:</p>

<ul>
<li>top bar with logo, some menus, “create” button and a search bar</li>
<li>sidebar on the left, with the project name, collapsable “planning” and “development” sections with items inside (also divided into groups), with an unnamed section with menu items underneath</li>
<li>a big “page content” section, where all the information about the current issue is shown</li>
</ul>

<p>So let’s start coding all of this in just one big component to start with. It’s probably going to look something like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">JiraIssuePage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"app"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"top-bar"</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"logo"</span><span class="p">></span>logo<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-menu"</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Your work<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Projects<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Filters<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Dashboards<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>People<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Apps<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"create-button"</span><span class="p">></span>Create<span class="p">&lt;/</span><span class="nt">button</span><span class="p">></span>
        more top bar items here like search bar and profile menu
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-content"</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar"</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-header"</span><span class="p">></span>ELS project<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section-title"</span><span class="p">></span>Planning<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"board-picker"</span><span class="p">></span>ELS board<span class="p">&lt;/</span><span class="nt">button</span><span class="p">></span>

            <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">></span>
              <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Roadmap<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
              <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Backlog<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
              <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Kanban board<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
              <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Reports<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
              <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Roadmap<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
            <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">></span>

            <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">></span>
              <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Issues<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
              <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Components<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
            <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">></span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">></span>sidebar development section<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
          other sections
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"page-content"</span><span class="p">></span>... here there will be a lot of code for issue view<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now, I haven’t implemented even half of the necessary items there, not to mention any logic, and the component is already way too big to read through it in one glance. See it in <a href="https://codesandbox.io/s/jira-page-one-big-component-twe6l8?file=/src/jira-issue-page.tsx">codesandbox</a>. That’s good and expected! So before going any further, it’s time split it into more manageable pieces.</p>

<p>The only thing that I need to do for it, is just to create a few new components and copy-paste code into them. I don’t have any use-cases for any of the advanced techniques (yet), so everything is going to be a simple component.</p>

<p>I’m going to create a <code>Topbar</code> component, which will have everything topbar related, <code>Sidebar</code> component, for everything sidebar related, as you can guess, and <code>Issue</code> component for the main part that we’re not going to touch today. That way our main <code>JiraIssuePage</code> component is left with this code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">JiraIssuePage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"app"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nc">Topbar</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-content"</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nc">Sidebar</span> <span class="p">/></span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"page-content"</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nc">Issue</span> <span class="p">/></span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now let’s take a look at the new <code>Topbar</code> component implementation:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Topbar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"top-bar"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"logo"</span><span class="p">></span>logo<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-menu"</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Your work<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Projects<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Filters<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Dashboards<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>People<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">></span>Apps<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"create-button"</span><span class="p">></span>Create<span class="p">&lt;/</span><span class="nt">button</span><span class="p">></span>
      more top bar items here like search bar and profile menu
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>If I implemented all the items there (search bar, all sub-menus, icons on the right), this component also would’ve been too big, so it also needs to be split. And this one is arguably a more interesting case than the previous one. Because, technically, I can just extract <code>MainMenu</code> component from it to make it small enough.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Topbar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"top-bar"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"logo"</span><span class="p">></span>logo<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nc">MainMenu</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"create-button"</span><span class="p">></span>Create<span class="p">&lt;/</span><span class="nt">button</span><span class="p">></span>
      more top bar items here like search bar and profile menu
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>But extracting only <code>MainMenu</code> made the <code>Topbar</code> component slightly <em>harder</em> to read for me. Before, when I looked at the <code>Topbar</code>, I could describe it as “a component that implements various things in the topbar”, and focus on the details only when I need to. Now the description would be “a component that implements various things in the topbar AND composes some random <code>MainMenu</code> component”. The reading flow is ruined.</p>

<p>This leads me to my second rule of components decomposition: when extracting smaller components, don’t stop halfway. A component should be described either as a “component that implements various stuff” or as a “component that composes various components together”, not both.</p>

<p>Therefore, a much better implementatioin of the <code>Topbar</code> component would look like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Topbar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"top-bar"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nc">Logo</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nc">MainMenu</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nc">Create</span> <span class="p">/></span>
      more top bar components here like SearchBar and ProfileMenu
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Much easier to read now!</p>

<p>And exactly the same story with the <code>Sidebar</code> component - way too big if I’d implemented all the items, so need to split it:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Sidebar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nc">Header</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nc">PlanningSection</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nc">DevelopmentSection</span> <span class="p">/></span>
      other sidebar sections
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>See the full example in <a href="https://codesandbox.io/s/jira-page-splitting-into-components-yje3qe?file=/src/jira-issue-page.tsx">the codesandbox</a>.</p>

<p>And then just repeat those steps every time a component becomes too big. In theory, we can implement this entire Jira page using nothing more than simple components.</p>

<h2>
  <a name="when-is-it-time-to-introduce-container-components" href="#when-is-it-time-to-introduce-container-components">
  </a>
  When is it time to introduce Container Components?
</h2>

<p>Now the fun part - let’s take a look at when we should introduce some advanced techniques and why. Starting with Container components.</p>

<p>First, let’s take a look at the design again. More specifically - at the Planning and Development sections in the sidebar menu.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--tekp_SvZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ctc186xmpiwkujn89644.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--tekp_SvZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ctc186xmpiwkujn89644.png" alt="Image description" loading="lazy" width="880" height="610"></a></p>

<p>Those not only share the same design for the title, but also the same behaviour: click on the title collapses the section, and in “collapsed” mode the mini-arrow icon appears. And we implemented it as two different components - <code>PlanningSection</code> and <code>DevelopmentSection</code>. I could, of course, just implement the “collapse” logic in both of them, it's just a matter of a simple state after all:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">PlanningSection</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isCollapsed</span><span class="p">,</span> <span class="nx">setIsCollapsed</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=></span> <span class="nx">setIsCollapsed</span><span class="p">(</span><span class="o">!</span><span class="nx">isCollapsed</span><span class="p">)</span><span class="si">}</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section-title"</span><span class="p">></span>
        Planning
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>

      <span class="si">{</span><span class="o">!</span><span class="nx">isCollapsed</span> <span class="o">&&</span> <span class="p">&lt;></span>...all the rest of the code<span class="p">&lt;/></span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>But:</p>

<ul>
<li>it’s quite a lot of repetition even between those two components</li>
<li>content of those sections is actually different for every project type or page type, so even more repetition in the nearest future</li>
</ul>

<p>Ideally, I want to encapsulate the logic of collapsed/expanded behavior and the design for the title, while leaving different sections full control over the items that go inside. This is a perfect use case for the Container components. I can just extract everything from the code example above into a component and pass menu items as <code>children</code>. We’ll have a <code>CollapsableSection</code> component:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">CollapsableSection</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">title</span> <span class="p">})</span> <span class="o">=></span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isCollapsed</span><span class="p">,</span> <span class="nx">setIsCollapsed</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section-title"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=></span> <span class="nx">setIsCollapsed</span><span class="p">(</span><span class="o">!</span><span class="nx">isCollapsed</span><span class="p">)</span><span class="si">}</span><span class="p">></span>
        <span class="si">{</span><span class="nx">title</span><span class="si">}</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>

      <span class="si">{</span><span class="o">!</span><span class="nx">isCollapsed</span> <span class="o">&&</span> <span class="p">&lt;></span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/></span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>and <code>PlanningSection</code> (and <code>DevelopmentSection</code> and all other future sections) will become just this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">PlanningSection</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">CollapsableSection</span> <span class="na">title</span><span class="p">=</span><span class="s">"Planning"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"board-picker"</span><span class="p">></span>ELS board<span class="p">&lt;/</span><span class="nt">button</span><span class="p">></span>

      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">></span>... all the menu items here<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">></span>
    <span class="p">&lt;/</span><span class="nc">CollapsableSection</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>A very similar story is going to be with our root <code>JiraIssuePage</code> component. Right now it looks like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">JiraIssuePage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"app"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nc">Topbar</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-content"</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nc">Sidebar</span> <span class="p">/></span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"page-content"</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nc">Issue</span> <span class="p">/></span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>But as soon as we start implementing other pages that are accessible from the sidebar, we’ll see that they all follow exactly the same pattern - sidebar and topbar stay the same, and only the “page content” area changes. Thanks to the decomposition work we did before we can just copy-paste that layout on every single page - it’s not that much code after all. But since all of them are exactly the same, it would be good to just extract the code that implements all the common parts and leave only components that change to the specific pages. Yet again a perfect case for the “container” component:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">JiraPageLayout</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"app"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nc">Topbar</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-content"</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nc">Sidebar</span> <span class="p">/></span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"page-content"</span><span class="p">></span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>And our <code>JiraIssuePage</code> (and future <code>JiraProjectPage</code>, <code>JiraComponentsPage</code>, etc, all the future pages accessible from the sidebar) becomes just this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">JiraIssuePage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">JiraPageLayout</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nc">Issue</span> <span class="p">/></span>
    <span class="p">&lt;/</span><span class="nc">JiraPageLayout</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>If I wanted to summarise the rule in just one sentence, it could be this: extract Container components when there is a need to share some visual or behavioural logic that wraps elements that still need to be under “consumer” control.</p>

<h3>
  <a name="container-components-performance-use-case" href="#container-components-performance-use-case">
  </a>
  Container components - performance use case
</h3>

<p>Another very important use case for Container components is improving the performance of components. Technically performance is off-topic a bit for the conversation about composition, but it would be a crime not to mention it here.</p>

<p>In actual Jira the Sidebar component is draggable - you can resize it by dragging it left and right by its edge. How would we implement something like this? Probably we’d introduce a <code>Handle</code> component, some state for the <code>width</code> of the sidebar, and then listen to the “mousemove” event. A rudimentary implementation would look something like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Sidebar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">width</span><span class="p">,</span> <span class="nx">setWidth</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">240</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">startMoving</span><span class="p">,</span> <span class="nx">setStartMoving</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">ref</span> <span class="o">=</span> <span class="nx">useRef</span><span class="o">&lt;</span><span class="nx">HTMLDivElement</span><span class="o">></span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=></span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">changeWidth</span> <span class="o">=</span> <span class="p">(</span><span class="na">e</span><span class="p">:</span> <span class="nx">MouseEvent</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">startMoving</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

      <span class="kd">const</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">left</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">wi</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">left</span><span class="p">;</span>

      <span class="nx">setWidth</span><span class="p">(</span><span class="nx">wi</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">mousemove</span><span class="dl">'</span><span class="p">,</span> <span class="nx">changeWidth</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=></span> <span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">mousemove</span><span class="dl">'</span><span class="p">,</span> <span class="nx">changeWidth</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">startMoving</span><span class="p">,</span> <span class="nx">ref</span><span class="p">]);</span>

  <span class="kd">const</span> <span class="nx">onStartMoving</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
    <span class="nx">setStartMoving</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">onEndMoving</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
    <span class="nx">setStartMoving</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar"</span> <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="nx">ref</span><span class="si">}</span> <span class="na">onMouseLeave</span><span class="p">=</span><span class="si">{</span><span class="nx">onEndMoving</span><span class="si">}</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">width</span><span class="p">}</span><span class="s2">px`</span> <span class="p">}</span><span class="si">}</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nc">Handle</span> <span class="na">onMouseDown</span><span class="p">=</span><span class="si">{</span><span class="nx">onStartMoving</span><span class="si">}</span> <span class="na">onMouseUp</span><span class="p">=</span><span class="si">{</span><span class="nx">onEndMoving</span><span class="si">}</span> <span class="p">/></span>
      ... the rest of the code
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>There is, however, a problem here: every time we move the mouse we trigger a state update, which in turn will trigger re-rendering of the entire <code>Sidebar</code> component. While on our rudimentary sidebar it’s not noticeable, it could make the “dragging” of it visibly laggy when the component becomes more complicated. Container components are a perfect solution for it: all we need is to extract all the heavy state operations in a Container component and pass everything else through <code>children</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">DraggableSidebar</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">}:</span> <span class="p">{</span> <span class="nl">children</span><span class="p">:</span> <span class="nx">ReactNode</span> <span class="p">})</span> <span class="o">=></span> <span class="p">{</span>
  <span class="c1">// all the state management code as before</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span>
      <span class="na">className</span><span class="p">=</span><span class="s">"sidebar"</span>
      <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="nx">ref</span><span class="si">}</span>
      <span class="na">onMouseLeave</span><span class="p">=</span><span class="si">{</span><span class="nx">onEndMoving</span><span class="si">}</span>
      <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">width</span><span class="p">}</span><span class="s2">px`</span> <span class="p">}</span><span class="si">}</span>
    <span class="p">></span>
      <span class="p">&lt;</span><span class="nc">Handle</span> <span class="na">onMouseDown</span><span class="p">=</span><span class="si">{</span><span class="nx">onStartMoving</span><span class="si">}</span> <span class="na">onMouseUp</span><span class="p">=</span><span class="si">{</span><span class="nx">onEndMoving</span><span class="si">}</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="err">!--</span> <span class="na">children</span> <span class="na">will</span> <span class="na">not</span> <span class="na">be</span> <span class="na">affected</span> <span class="na">by</span> <span class="na">this</span> <span class="na">component</span><span class="err">'</span><span class="na">s</span> <span class="na">re-renders</span> <span class="err">--</span><span class="p">></span>
      <span class="si">{</span><span class="nx">children</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  );
};
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>And our <code>Sidebar</code> component will turn into this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Sidebar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">DraggableSidebar</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nc">Header</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nc">PlanningSection</span> <span class="p">/></span>
      <span class="p">&lt;</span><span class="nc">DevelopmentSection</span> <span class="p">/></span>
      other Sections
    <span class="p">&lt;/</span><span class="nc">DraggableSidebar</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>That way <code>DraggableSidebar</code> component will still re-render on every state change, but it will be super cheap since it’s just one div. And everything that is coming in <code>children</code> will not be affected by this component’s state updates.</p>

<p>See all the examples of container components in <a href="https://codesandbox.io/s/jira-page-container-components-wrb88p?file=/src/components/sidebar.tsx">this codesandbox</a>. And to compare the bad re-renders use case, <a href="https://codesandbox.io/s/jira-page-container-components-with-bad-rerenders-6ipo1x?file=/src/components/sidebar.tsx">see this codesandbox</a>. Pay attention to the console output while dragging the sidebar in those examples - <code>PlanningSection</code> component logs constantly in the “bad” implementation and only once in the “good” one.</p>

<p>And if you want to know more about various patterns and how they influence react performance, you might find those articles interesting: <a href="https://www.developerway.com/posts/how-to-write-performant-react-code">How to write performant React code: rules, patterns, do's and don'ts</a>, <a href="https://www.developerway.com/posts/why-custom-react-hooks-could-destroy-your-app-performance">Why custom react hooks could destroy your app performance</a>, <a href="https://www.developerway.com/posts/how-to-write-performant-react-apps-with-context">How to write performant React apps with Context</a></p>

<h2>
  <a name="does-this-state-belong-to-this-component" href="#does-this-state-belong-to-this-component">
  </a>
  Does this state belong to this component?
</h2>

<p>Another thing, other than size, that can signal that a component should be extracted, is state management. Or, to be precise, state management that is irrelevant to the component’s functionality. Let me show you what I mean.</p>

<p>One of the items in the sidebar in real Jira is “Add shortcut” item, which opens a modal dialog when you click on it. How would you implement it in our app? The modal dialog itself is obviously going to be its own component, but where you’d introduce the state that opens it? Something like this?<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">SomeSection</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">showAddShortcuts</span><span class="p">,</span> <span class="nx">setShowAddShortcuts</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=></span> <span class="nx">setShowAddShortcuts</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="si">}</span><span class="p">></span>Add shortcuts<span class="p">&lt;/</span><span class="nt">span</span><span class="p">></span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">></span>
      <span class="si">{</span><span class="nx">showAddShortcuts</span> <span class="o">&&</span> <span class="p">&lt;</span><span class="nc">ModalDialog</span> <span class="na">onClose</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=></span> <span class="nx">setShowAddShortcuts</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="si">}</span> <span class="p">/></span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>You can see something like this everywhere, and there is nothing criminal in this implementation. But if I was implementing it, and if I wanted to make this component perfect from the composition perspective, I would extract this state and components related to it outside. And the reason is simple - this state has nothing to do with the <code>SomeSection</code> component. This state controls a modal dialog that appears when you click on shortcuts item. This makes the reading of this component slightly harder for me - I see a component that is “section”, and next line - some random state that has nothing to do with “section”. So instead of the implementation above, I would extract the item and the state that actually belongs to this item into its own component:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">AddShortcutItem</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">showAddShortcuts</span><span class="p">,</span> <span class="nx">setShowAddShortcuts</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;></span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=></span> <span class="nx">setShowAddShortcuts</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="si">}</span><span class="p">></span>Add shortcuts<span class="p">&lt;/</span><span class="nt">span</span><span class="p">></span>
      <span class="si">{</span><span class="nx">showAddShortcuts</span> <span class="o">&&</span> <span class="p">&lt;</span><span class="nc">ModalDialog</span> <span class="na">onClose</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=></span> <span class="nx">setShowAddShortcuts</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="si">}</span> <span class="p">/></span><span class="si">}</span>
    <span class="p">&lt;/></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>And the section component becomes much simpler as a bonus:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">OtherSection</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">></span>
      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">></span>
          <span class="p">&lt;</span><span class="nc">AddShortcutItem</span> <span class="p">/></span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">></span>
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">></span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>See it in <a href="https://codesandbox.io/s/jira-page-add-shortcuts-dialog-wb3iq8?file=/src/components/sidebar.tsx">the codesandbox</a>.</p>

<p>By the same logic, in the <code>Topbar</code> component I would move the future state that controls menus to a <code>SomeDropdownMenu</code> component, all search-related state to <code>Search</code> component, and everything related to opening “create issue” dialog to the <code>CreateIssue</code> component.</p>

<h2>
  <a name="what-makes-a-good-component" href="#what-makes-a-good-component">
  </a>
  What makes a good component?
</h2>

<p>One last thing before closing for today. In the summary I want to write “the secret of writing scalable apps in React is to extract good components at the right time”. We covered the “right time” already, but what exactly is a “good component”? After everything that we covered about composition by now, I think I’m ready to write a definition and a few rules here.</p>

<p>A “good component” is a component that I can easily read and understand what it does from the first glance.</p>

<p>A “good component” should have a good self-describing name. <code>Sidebar</code> for a component that renders sidebar is a good name. <code>CreateIssue</code> for a component that handles issue creation is a good name. <code>SidebarController</code> for a component that renders sidebar items specific for “Issues” page is not a good name (the name indicates that the component is of some generic purpose, not specific to a particular page).</p>

<p>A “good component” doesn’t do things that are irrelevant to its declared purpose. <code>Topbar</code> component that only renders items in the top bar and controls only topbar behaviour is a good component. <code>Sidebar</code> component, that controls the state of various modal dialogs is not the best component.</p>

<h2>
  <a name="closing-bullet-points" href="#closing-bullet-points">
  </a>
  Closing bullet points
</h2>

<p>Now I can write it 😄! The secret of writing scalable apps in React is to extract good components at the right time, nothing more.</p>

<p><strong>What makes a good component?</strong></p>

<ul>
<li>size, that allows reading it without scrolling</li>
<li>name, that indicates what it does</li>
<li>no irrelevant state management</li>
<li>easy-to-read implementation</li>
</ul>

<p><strong>When is it time to split a component into smaller ones?</strong></p>

<ul>
<li>when a component is too big</li>
<li>when a component performs heavy state management operations that might affect performance</li>
<li>when a component manages an irrelevant state</li>
</ul>

<p><strong>What are the general components composition rules?</strong></p>

<ul>
<li>always start implementation from the very top</li>
<li>extract components only when you have an actual usecase for it, not in advance</li>
<li>always start with the Simple components, introduce advanced techniques only when they are actually needed, not in advance</li>
</ul>

<p>That is all for today, hope you enjoyed the reading and found it useful! See ya next time ✌🏼</p>

<p>...</p>

<p>Originally published at <a href="https://www.developerway.com">https://www.developerway.com</a>. The website has more articles like this 😉</p>

<p><a href="https://www.developerway.com">Subscribe to the newsletter</a>, <a href="https://www.linkedin.com/in/adevnadia/">connect on LinkedIn</a> or <a href="https://twitter.com/adevnadia">follow on Twitter</a> to get notified as soon as the next article comes out.</p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/adevnadia/react-components-composition-how-to-get-it-right-4mgn" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(s,n,a,t){return t.type_of="article",t.id=1052372,t.title="React components composition: how to get it right",t.description="One of the most interesting and challenging things in React is not mastering some advanced...",t.readable_publish_date="Apr 12",t.slug="react-components-composition-how-to-get-it-right-4mgn",t.path="/adevnadia/react-components-composition-how-to-get-it-right-4mgn",t.url="https://dev.to/adevnadia/react-components-composition-how-to-get-it-right-4mgn",t.comments_count=14,t.public_reactions_count=74,t.collection_id=s,t.published_timestamp=n,t.positive_reactions_count=74,t.cover_image=s,t.social_image="https://dev.to/social_previews/article/1052372.png",t.canonical_url="https://www.developerway.com/posts/components-composition-how-to-get-it-right",t.created_at=n,t.edited_at="2022-04-12T03:27:18Z",t.crossposted_at=s,t.published_at=n,t.last_comment_at="2022-05-25T06:03:35Z",t.reading_time_minutes=14,t.tag_list="webdev, react, tutorial, javascript",t.tags=["webdev","react","tutorial","javascript"],t.body_html='<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xj5KVzdc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3lpldl5ad57paun1lxrm.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xj5KVzdc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3lpldl5ad57paun1lxrm.png" alt="Image description" loading="lazy" width="880" height="563"></a></p>\n\n<p>One of the most interesting and challenging things in React is not mastering some advanced techniques for state management or how to use Context properly. More complicated to get right is how and when we should separate our code into independent components and how to compose them properly. I often see developers falling into two traps: either they are not extracting them soon enough, and end up with huge components “monoliths” that do way too many things at the same time, and that are a nightmare to maintain. Or, especially after they have been burned a few times by the previous pattern, they extract components way too early, which results in a complicated combination of multiple abstractions, over-engineered code and again, a nightmare to maintain.</p>\n\n<p>What I want to do today, is to offer a few techniques and rules, that could help identify when and how to extract components on time and how not to fall into an over-engineering trap. But first, let’s refresh some basics: what is composition and which compositions patterns are available to us?</p>\n\n<h2>\n  <a name="react-components-composition-patterns" href="#react-components-composition-patterns">\n  </a>\n  React components composition patterns\n</h2>\n\n<h3>\n  <a name="simple-components" href="#simple-components">\n  </a>\n  Simple components\n</h3>\n\n<p>Simple components are a basic building block of React. They can accept props, have some state, and can be quite complicated despite their name. A <code>Button</code> component that accepts <code>title</code> and <code>onClick</code> properties and renders a button tag is a simple component.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">onClick</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClick</span><span class="si">}</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">title</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Any component can render other components - that’s composition. A <code>Navigation</code> component that renders that <code>Button</code> - also a simple component, that composes other components:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">Navigation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;&gt;</span>\n      // Rendering out Button component in Navigation component. Composition!\n      <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">title</span><span class="p">=</span><span class="s">"Create"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClickHandler</span><span class="si">}</span> <span class="p">/&gt;</span>\n      ... // some other navigation code\n    <span class="p">&lt;/&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>With those components and their composition, we can implement as complicated UI as we want. Technically, we don’t even need any other patterns and techniques, all of them are just nice-to-haves that just improve code reuse or solve only specific use cases.</p>\n\n<h3>\n  <a name="container-components" href="#container-components">\n  </a>\n  Container components\n</h3>\n\n<p>Container components is a more advanced composition technique. The only difference from simple components is that they, among other props, allow passing special prop <code>children</code>, for which React has its own syntax. If our <code>Button</code> from the previous example accepted not <code>title</code> but <code>children</code> it would be written like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="c1">// the code is exactly the same! just replace "title" with "children"</span>\n<span class="kd">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">onClick</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClick</span><span class="si">}</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Which is no different from <code>title</code> from <code>Button</code> perspective. The difference is on the consumer side, <code>children</code> syntax is special and looks like your normal HTML tags:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">Navigation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClickHandler</span><span class="si">}</span><span class="p">&gt;</span>Create<span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>\n      ... // some other navigation code\n    <span class="p">&lt;/&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Anything can go into <code>children</code>. We can, for example, add an <code>Icon</code> component there in addition to text, and then <code>Navigation</code> has a composition of <code>Button</code> and <code>Icon</code> components:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">Navigation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onClickHandler</span><span class="si">}</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="err">!--</span> <span class="na">Icon</span> <span class="na">component</span> <span class="na">is</span> <span class="na">rendered</span> <span class="na">inside</span> <span class="na">button</span><span class="err">,</span> <span class="na">but</span> <span class="na">button</span> <span class="na">doesn</span><span class="err">\'</span><span class="na">t</span> <span class="na">know</span> <span class="err">--</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nc">Icon</span> <span class="p">/&gt;</span>\n        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Create<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>\n      <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>\n      ...\n      // some other navigation code\n    <span class="p">&lt;/&gt;</span>\n  )\n}\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><code>Navigation</code> controls what goes into <code>children</code>, from <code>Button</code>’s perspective it just renders whatever the consumer wants.</p>\n\n<p>We’re going to look more into practical examples of this technique further in the article.</p>\n\n<p>There are other composition patterns, like <a href="https://www.developerway.com/posts/higher-order-components-in-react-hooks-era">higher-order components</a>, <a href="https://www.developerway.com/posts/react-component-as-prop-the-right-way">passing components as props</a> or <a href="https://www.developerway.com/posts/how-to-write-performant-react-apps-with-context">context</a>, but those should be used only for very specific use cases. Simple components and container components are the two major pillars of React development, and it’s better to perfect the use of those before trying to introduce more advanced techniques.</p>\n\n<p>Now, that you know them, you’re ready to implement as complicated UI as you can possibly need!</p>\n\n<p>Okay, I’m joking, I\'m not going to do a “how to draw an owl” type of article here 😅</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--TaB5R1uR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3zgp5uj2v1igg85wduaj.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--TaB5R1uR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3zgp5uj2v1igg85wduaj.jpeg" alt="Image description" loading="lazy" width="500" height="407"></a></p>\n\n<p>It’s time for some rules and guidelines so that we can actually <del>draw that owl</del> build complicated React apps with ease.</p>\n\n<h2>\n  <a name="when-is-it-a-good-time-to-extract-components" href="#when-is-it-a-good-time-to-extract-components">\n  </a>\n  When is it a good time to extract components?\n</h2>\n\n<p>The core React development and decomposition rules that I like to follow, and the more I code, the more strongly I feel about them, are:</p>\n\n<ul>\n<li>always start implementation from the top</li>\n<li>extract components only when there is an actual need for it</li>\n<li>always start from “simple” components, introduce other composition techniques only when there is an actual need for them</li>\n</ul>\n\n<p>Any attempt to think “in advance” or start “bottom-up“ from small re-usable components always ends up either in over-complicated components API or in components that are missing half of the necessary functionality.</p>\n\n<p>And the very first rule for when a component needs to be decomposed into smaller ones is <strong>when a component is too big</strong>. A good size for a component for me is when it can fit on the screen of my laptop entirely. If I need to scroll to read through the component’s code - it’s a clear sign that it’s too big.</p>\n\n<p>Let’s start coding now, to see how can this looks in practice. We are going to implement a typical Jira page from scratch today, no less (well, sort of, at least we’re going to start 😅).</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--T53aFqdU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1izkmzd59d5e2gv27hy.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--T53aFqdU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1izkmzd59d5e2gv27hy.png" alt="Image description" loading="lazy" width="880" height="610"></a></p>\n\n<p>This is a screen of an issue page from my personal project where I keep my favourite recipes found online 🍣. In there we need to implement, as you can see:</p>\n\n<ul>\n<li>top bar with logo, some menus, “create” button and a search bar</li>\n<li>sidebar on the left, with the project name, collapsable “planning” and “development” sections with items inside (also divided into groups), with an unnamed section with menu items underneath</li>\n<li>a big “page content” section, where all the information about the current issue is shown</li>\n</ul>\n\n<p>So let’s start coding all of this in just one big component to start with. It’s probably going to look something like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">JiraIssuePage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"app"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"top-bar"</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"logo"</span><span class="p">&gt;</span>logo<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-menu"</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Your work<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Projects<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Filters<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Dashboards<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>People<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Apps<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"create-button"</span><span class="p">&gt;</span>Create<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>\n        more top bar items here like search bar and profile menu\n      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-content"</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar"</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-header"</span><span class="p">&gt;</span>ELS project<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section-title"</span><span class="p">&gt;</span>Planning<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"board-picker"</span><span class="p">&gt;</span>ELS board<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>\n\n            <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">&gt;</span>\n              <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Roadmap<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n              <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Backlog<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n              <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Kanban board<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n              <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Reports<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n              <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Roadmap<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n            <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>\n\n            <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">&gt;</span>\n              <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Issues<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n              <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Components<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n              <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n            <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>\n          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">&gt;</span>sidebar development section<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n          other sections\n        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"page-content"</span><span class="p">&gt;</span>... here there will be a lot of code for issue view<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now, I haven’t implemented even half of the necessary items there, not to mention any logic, and the component is already way too big to read through it in one glance. See it in <a href="https://codesandbox.io/s/jira-page-one-big-component-twe6l8?file=/src/jira-issue-page.tsx">codesandbox</a>. That’s good and expected! So before going any further, it’s time split it into more manageable pieces.</p>\n\n<p>The only thing that I need to do for it, is just to create a few new components and copy-paste code into them. I don’t have any use-cases for any of the advanced techniques (yet), so everything is going to be a simple component.</p>\n\n<p>I’m going to create a <code>Topbar</code> component, which will have everything topbar related, <code>Sidebar</code> component, for everything sidebar related, as you can guess, and <code>Issue</code> component for the main part that we’re not going to touch today. That way our main <code>JiraIssuePage</code> component is left with this code:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">JiraIssuePage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"app"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Topbar</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-content"</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nc">Sidebar</span> <span class="p">/&gt;</span>\n        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"page-content"</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nc">Issue</span> <span class="p">/&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now let’s take a look at the new <code>Topbar</code> component implementation:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Topbar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"top-bar"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"logo"</span><span class="p">&gt;</span>logo<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-menu"</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Your work<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Projects<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Filters<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Dashboards<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>People<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span><span class="p">&gt;</span>Apps<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"create-button"</span><span class="p">&gt;</span>Create<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>\n      more top bar items here like search bar and profile menu\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>If I implemented all the items there (search bar, all sub-menus, icons on the right), this component also would’ve been too big, so it also needs to be split. And this one is arguably a more interesting case than the previous one. Because, technically, I can just extract <code>MainMenu</code> component from it to make it small enough.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Topbar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"top-bar"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"logo"</span><span class="p">&gt;</span>logo<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">MainMenu</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"create-button"</span><span class="p">&gt;</span>Create<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>\n      more top bar items here like search bar and profile menu\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>But extracting only <code>MainMenu</code> made the <code>Topbar</code> component slightly <em>harder</em> to read for me. Before, when I looked at the <code>Topbar</code>, I could describe it as “a component that implements various things in the topbar”, and focus on the details only when I need to. Now the description would be “a component that implements various things in the topbar AND composes some random <code>MainMenu</code> component”. The reading flow is ruined.</p>\n\n<p>This leads me to my second rule of components decomposition: when extracting smaller components, don’t stop halfway. A component should be described either as a “component that implements various stuff” or as a “component that composes various components together”, not both.</p>\n\n<p>Therefore, a much better implementatioin of the <code>Topbar</code> component would look like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Topbar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"top-bar"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Logo</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nc">MainMenu</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Create</span> <span class="p">/&gt;</span>\n      more top bar components here like SearchBar and ProfileMenu\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Much easier to read now!</p>\n\n<p>And exactly the same story with the <code>Sidebar</code> component - way too big if I’d implemented all the items, so need to split it:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Sidebar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Header</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nc">PlanningSection</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nc">DevelopmentSection</span> <span class="p">/&gt;</span>\n      other sidebar sections\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>See the full example in <a href="https://codesandbox.io/s/jira-page-splitting-into-components-yje3qe?file=/src/jira-issue-page.tsx">the codesandbox</a>.</p>\n\n<p>And then just repeat those steps every time a component becomes too big. In theory, we can implement this entire Jira page using nothing more than simple components.</p>\n\n<h2>\n  <a name="when-is-it-time-to-introduce-container-components" href="#when-is-it-time-to-introduce-container-components">\n  </a>\n  When is it time to introduce Container Components?\n</h2>\n\n<p>Now the fun part - let’s take a look at when we should introduce some advanced techniques and why. Starting with Container components.</p>\n\n<p>First, let’s take a look at the design again. More specifically - at the Planning and Development sections in the sidebar menu.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--tekp_SvZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ctc186xmpiwkujn89644.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--tekp_SvZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ctc186xmpiwkujn89644.png" alt="Image description" loading="lazy" width="880" height="610"></a></p>\n\n<p>Those not only share the same design for the title, but also the same behaviour: click on the title collapses the section, and in “collapsed” mode the mini-arrow icon appears. And we implemented it as two different components - <code>PlanningSection</code> and <code>DevelopmentSection</code>. I could, of course, just implement the “collapse” logic in both of them, it\'s just a matter of a simple state after all:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">PlanningSection</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">isCollapsed</span><span class="p">,</span> <span class="nx">setIsCollapsed</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">setIsCollapsed</span><span class="p">(</span><span class="o">!</span><span class="nx">isCollapsed</span><span class="p">)</span><span class="si">}</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section-title"</span><span class="p">&gt;</span>\n        Planning\n      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n\n      <span class="si">{</span><span class="o">!</span><span class="nx">isCollapsed</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;&gt;</span>...all the rest of the code<span class="p">&lt;/&gt;</span><span class="si">}</span>\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>But:</p>\n\n<ul>\n<li>it’s quite a lot of repetition even between those two components</li>\n<li>content of those sections is actually different for every project type or page type, so even more repetition in the nearest future</li>\n</ul>\n\n<p>Ideally, I want to encapsulate the logic of collapsed/expanded behavior and the design for the title, while leaving different sections full control over the items that go inside. This is a perfect use case for the Container components. I can just extract everything from the code example above into a component and pass menu items as <code>children</code>. We’ll have a <code>CollapsableSection</code> component:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">CollapsableSection</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">title</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">isCollapsed</span><span class="p">,</span> <span class="nx">setIsCollapsed</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>\n\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section-title"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">setIsCollapsed</span><span class="p">(</span><span class="o">!</span><span class="nx">isCollapsed</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>\n        <span class="si">{</span><span class="nx">title</span><span class="si">}</span>\n      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n\n      <span class="si">{</span><span class="o">!</span><span class="nx">isCollapsed</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;&gt;</span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/&gt;</span><span class="si">}</span>\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>and <code>PlanningSection</code> (and <code>DevelopmentSection</code> and all other future sections) will become just this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">PlanningSection</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nc">CollapsableSection</span> <span class="na">title</span><span class="p">=</span><span class="s">"Planning"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">"board-picker"</span><span class="p">&gt;</span>ELS board<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>\n\n      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">&gt;</span>... all the menu items here<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>\n    <span class="p">&lt;/</span><span class="nc">CollapsableSection</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>A very similar story is going to be with our root <code>JiraIssuePage</code> component. Right now it looks like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">JiraIssuePage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"app"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Topbar</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-content"</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nc">Sidebar</span> <span class="p">/&gt;</span>\n        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"page-content"</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nc">Issue</span> <span class="p">/&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>But as soon as we start implementing other pages that are accessible from the sidebar, we’ll see that they all follow exactly the same pattern - sidebar and topbar stay the same, and only the “page content” area changes. Thanks to the decomposition work we did before we can just copy-paste that layout on every single page - it’s not that much code after all. But since all of them are exactly the same, it would be good to just extract the code that implements all the common parts and leave only components that change to the specific pages. Yet again a perfect case for the “container” component:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">JiraPageLayout</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"app"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Topbar</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"main-content"</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nc">Sidebar</span> <span class="p">/&gt;</span>\n        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"page-content"</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>And our <code>JiraIssuePage</code> (and future <code>JiraProjectPage</code>, <code>JiraComponentsPage</code>, etc, all the future pages accessible from the sidebar) becomes just this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">JiraIssuePage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nc">JiraPageLayout</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Issue</span> <span class="p">/&gt;</span>\n    <span class="p">&lt;/</span><span class="nc">JiraPageLayout</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>If I wanted to summarise the rule in just one sentence, it could be this: extract Container components when there is a need to share some visual or behavioural logic that wraps elements that still need to be under “consumer” control.</p>\n\n<h3>\n  <a name="container-components-performance-use-case" href="#container-components-performance-use-case">\n  </a>\n  Container components - performance use case\n</h3>\n\n<p>Another very important use case for Container components is improving the performance of components. Technically performance is off-topic a bit for the conversation about composition, but it would be a crime not to mention it here.</p>\n\n<p>In actual Jira the Sidebar component is draggable - you can resize it by dragging it left and right by its edge. How would we implement something like this? Probably we’d introduce a <code>Handle</code> component, some state for the <code>width</code> of the sidebar, and then listen to the “mousemove” event. A rudimentary implementation would look something like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Sidebar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">width</span><span class="p">,</span> <span class="nx">setWidth</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">240</span><span class="p">);</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">startMoving</span><span class="p">,</span> <span class="nx">setStartMoving</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>\n  <span class="kd">const</span> <span class="nx">ref</span> <span class="o">=</span> <span class="nx">useRef</span><span class="o">&lt;</span><span class="nx">HTMLDivElement</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>\n\n  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>\n    <span class="kd">const</span> <span class="nx">changeWidth</span> <span class="o">=</span> <span class="p">(</span><span class="na">e</span><span class="p">:</span> <span class="nx">MouseEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">startMoving</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>\n      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>\n\n      <span class="kd">const</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">left</span><span class="p">;</span>\n      <span class="kd">const</span> <span class="nx">wi</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">left</span><span class="p">;</span>\n\n      <span class="nx">setWidth</span><span class="p">(</span><span class="nx">wi</span><span class="p">);</span>\n    <span class="p">};</span>\n\n    <span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">\'</span><span class="s1">mousemove</span><span class="dl">\'</span><span class="p">,</span> <span class="nx">changeWidth</span><span class="p">);</span>\n\n    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="dl">\'</span><span class="s1">mousemove</span><span class="dl">\'</span><span class="p">,</span> <span class="nx">changeWidth</span><span class="p">);</span>\n  <span class="p">},</span> <span class="p">[</span><span class="nx">startMoving</span><span class="p">,</span> <span class="nx">ref</span><span class="p">]);</span>\n\n  <span class="kd">const</span> <span class="nx">onStartMoving</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="nx">setStartMoving</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>\n  <span class="p">};</span>\n\n  <span class="kd">const</span> <span class="nx">onEndMoving</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="nx">setStartMoving</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>\n  <span class="p">};</span>\n\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar"</span> <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="nx">ref</span><span class="si">}</span> <span class="na">onMouseLeave</span><span class="p">=</span><span class="si">{</span><span class="nx">onEndMoving</span><span class="si">}</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">width</span><span class="p">}</span><span class="s2">px`</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Handle</span> <span class="na">onMouseDown</span><span class="p">=</span><span class="si">{</span><span class="nx">onStartMoving</span><span class="si">}</span> <span class="na">onMouseUp</span><span class="p">=</span><span class="si">{</span><span class="nx">onEndMoving</span><span class="si">}</span> <span class="p">/&gt;</span>\n      ... the rest of the code\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>There is, however, a problem here: every time we move the mouse we trigger a state update, which in turn will trigger re-rendering of the entire <code>Sidebar</code> component. While on our rudimentary sidebar it’s not noticeable, it could make the “dragging” of it visibly laggy when the component becomes more complicated. Container components are a perfect solution for it: all we need is to extract all the heavy state operations in a Container component and pass everything else through <code>children</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">DraggableSidebar</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">}:</span> <span class="p">{</span> <span class="nl">children</span><span class="p">:</span> <span class="nx">ReactNode</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="c1">// all the state management code as before</span>\n\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span>\n      <span class="na">className</span><span class="p">=</span><span class="s">"sidebar"</span>\n      <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="nx">ref</span><span class="si">}</span>\n      <span class="na">onMouseLeave</span><span class="p">=</span><span class="si">{</span><span class="nx">onEndMoving</span><span class="si">}</span>\n      <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">width</span><span class="p">}</span><span class="s2">px`</span> <span class="p">}</span><span class="si">}</span>\n    <span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Handle</span> <span class="na">onMouseDown</span><span class="p">=</span><span class="si">{</span><span class="nx">onStartMoving</span><span class="si">}</span> <span class="na">onMouseUp</span><span class="p">=</span><span class="si">{</span><span class="nx">onEndMoving</span><span class="si">}</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="err">!--</span> <span class="na">children</span> <span class="na">will</span> <span class="na">not</span> <span class="na">be</span> <span class="na">affected</span> <span class="na">by</span> <span class="na">this</span> <span class="na">component</span><span class="err">\'</span><span class="na">s</span> <span class="na">re-renders</span> <span class="err">--</span><span class="p">&gt;</span>\n      <span class="si">{</span><span class="nx">children</span><span class="si">}</span>\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  );\n};\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>And our <code>Sidebar</code> component will turn into this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Sidebar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nc">DraggableSidebar</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nc">Header</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nc">PlanningSection</span> <span class="p">/&gt;</span>\n      <span class="p">&lt;</span><span class="nc">DevelopmentSection</span> <span class="p">/&gt;</span>\n      other Sections\n    <span class="p">&lt;/</span><span class="nc">DraggableSidebar</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>That way <code>DraggableSidebar</code> component will still re-render on every state change, but it will be super cheap since it’s just one div. And everything that is coming in <code>children</code> will not be affected by this component’s state updates.</p>\n\n<p>See all the examples of container components in <a href="https://codesandbox.io/s/jira-page-container-components-wrb88p?file=/src/components/sidebar.tsx">this codesandbox</a>. And to compare the bad re-renders use case, <a href="https://codesandbox.io/s/jira-page-container-components-with-bad-rerenders-6ipo1x?file=/src/components/sidebar.tsx">see this codesandbox</a>. Pay attention to the console output while dragging the sidebar in those examples - <code>PlanningSection</code> component logs constantly in the “bad” implementation and only once in the “good” one.</p>\n\n<p>And if you want to know more about various patterns and how they influence react performance, you might find those articles interesting: <a href="https://www.developerway.com/posts/how-to-write-performant-react-code">How to write performant React code: rules, patterns, do\'s and don\'ts</a>, <a href="https://www.developerway.com/posts/why-custom-react-hooks-could-destroy-your-app-performance">Why custom react hooks could destroy your app performance</a>, <a href="https://www.developerway.com/posts/how-to-write-performant-react-apps-with-context">How to write performant React apps with Context</a></p>\n\n<h2>\n  <a name="does-this-state-belong-to-this-component" href="#does-this-state-belong-to-this-component">\n  </a>\n  Does this state belong to this component?\n</h2>\n\n<p>Another thing, other than size, that can signal that a component should be extracted, is state management. Or, to be precise, state management that is irrelevant to the component’s functionality. Let me show you what I mean.</p>\n\n<p>One of the items in the sidebar in real Jira is “Add shortcut” item, which opens a modal dialog when you click on it. How would you implement it in our app? The modal dialog itself is obviously going to be its own component, but where you’d introduce the state that opens it? Something like this?<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">SomeSection</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">showAddShortcuts</span><span class="p">,</span> <span class="nx">setShowAddShortcuts</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>\n\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">setShowAddShortcuts</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>Add shortcuts<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>\n      <span class="si">{</span><span class="nx">showAddShortcuts</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nc">ModalDialog</span> <span class="na">onClose</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">setShowAddShortcuts</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>You can see something like this everywhere, and there is nothing criminal in this implementation. But if I was implementing it, and if I wanted to make this component perfect from the composition perspective, I would extract this state and components related to it outside. And the reason is simple - this state has nothing to do with the <code>SomeSection</code> component. This state controls a modal dialog that appears when you click on shortcuts item. This makes the reading of this component slightly harder for me - I see a component that is “section”, and next line - some random state that has nothing to do with “section”. So instead of the implementation above, I would extract the item and the state that actually belongs to this item into its own component:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">AddShortcutItem</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">showAddShortcuts</span><span class="p">,</span> <span class="nx">setShowAddShortcuts</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>\n\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;&gt;</span>\n      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">setShowAddShortcuts</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>Add shortcuts<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>\n      <span class="si">{</span><span class="nx">showAddShortcuts</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nc">ModalDialog</span> <span class="na">onClose</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">setShowAddShortcuts</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>\n    <span class="p">&lt;/&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>And the section component becomes much simpler as a bonus:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">OtherSection</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"sidebar-section"</span><span class="p">&gt;</span>\n      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">className</span><span class="p">=</span><span class="s">"section-menu"</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>\n          <span class="p">&lt;</span><span class="nc">AddShortcutItem</span> <span class="p">/&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>\n      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>\n    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n  <span class="p">);</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>See it in <a href="https://codesandbox.io/s/jira-page-add-shortcuts-dialog-wb3iq8?file=/src/components/sidebar.tsx">the codesandbox</a>.</p>\n\n<p>By the same logic, in the <code>Topbar</code> component I would move the future state that controls menus to a <code>SomeDropdownMenu</code> component, all search-related state to <code>Search</code> component, and everything related to opening “create issue” dialog to the <code>CreateIssue</code> component.</p>\n\n<h2>\n  <a name="what-makes-a-good-component" href="#what-makes-a-good-component">\n  </a>\n  What makes a good component?\n</h2>\n\n<p>One last thing before closing for today. In the summary I want to write “the secret of writing scalable apps in React is to extract good components at the right time”. We covered the “right time” already, but what exactly is a “good component”? After everything that we covered about composition by now, I think I’m ready to write a definition and a few rules here.</p>\n\n<p>A “good component” is a component that I can easily read and understand what it does from the first glance.</p>\n\n<p>A “good component” should have a good self-describing name. <code>Sidebar</code> for a component that renders sidebar is a good name. <code>CreateIssue</code> for a component that handles issue creation is a good name. <code>SidebarController</code> for a component that renders sidebar items specific for “Issues” page is not a good name (the name indicates that the component is of some generic purpose, not specific to a particular page).</p>\n\n<p>A “good component” doesn’t do things that are irrelevant to its declared purpose. <code>Topbar</code> component that only renders items in the top bar and controls only topbar behaviour is a good component. <code>Sidebar</code> component, that controls the state of various modal dialogs is not the best component.</p>\n\n<h2>\n  <a name="closing-bullet-points" href="#closing-bullet-points">\n  </a>\n  Closing bullet points\n</h2>\n\n<p>Now I can write it 😄! The secret of writing scalable apps in React is to extract good components at the right time, nothing more.</p>\n\n<p><strong>What makes a good component?</strong></p>\n\n<ul>\n<li>size, that allows reading it without scrolling</li>\n<li>name, that indicates what it does</li>\n<li>no irrelevant state management</li>\n<li>easy-to-read implementation</li>\n</ul>\n\n<p><strong>When is it time to split a component into smaller ones?</strong></p>\n\n<ul>\n<li>when a component is too big</li>\n<li>when a component performs heavy state management operations that might affect performance</li>\n<li>when a component manages an irrelevant state</li>\n</ul>\n\n<p><strong>What are the general components composition rules?</strong></p>\n\n<ul>\n<li>always start implementation from the very top</li>\n<li>extract components only when you have an actual usecase for it, not in advance</li>\n<li>always start with the Simple components, introduce advanced techniques only when they are actually needed, not in advance</li>\n</ul>\n\n<p>That is all for today, hope you enjoyed the reading and found it useful! See ya next time ✌🏼</p>\n\n<p>...</p>\n\n<p>Originally published at <a href="https://www.developerway.com">https://www.developerway.com</a>. The website has more articles like this 😉</p>\n\n<p><a href="https://www.developerway.com">Subscribe to the newsletter</a>, <a href="https://www.linkedin.com/in/adevnadia/">connect on LinkedIn</a> or <a href="https://twitter.com/adevnadia">follow on Twitter</a> to get notified as soon as the next article comes out.</p>\n\n',t.body_markdown='\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3lpldl5ad57paun1lxrm.png)\n\n\nOne of the most interesting and challenging things in React is not mastering some advanced techniques for state management or how to use Context properly. More complicated to get right is how and when we should separate our code into independent components and how to compose them properly. I often see developers falling into two traps: either they are not extracting them soon enough, and end up with huge components “monoliths” that do way too many things at the same time, and that are a nightmare to maintain. Or, especially after they have been burned a few times by the previous pattern, they extract components way too early, which results in a complicated combination of multiple abstractions, over-engineered code and again, a nightmare to maintain.\n\nWhat I want to do today, is to offer a few techniques and rules, that could help identify when and how to extract components on time and how not to fall into an over-engineering trap. But first, let’s refresh some basics: what is composition and which compositions patterns are available to us?\n\n## React components composition patterns\n\n### Simple components\n\nSimple components are a basic building block of React. They can accept props, have some state, and can be quite complicated despite their name. A `Button` component that accepts `title` and `onClick` properties and renders a button tag is a simple component.\n\n```tsx\nconst Button = ({ title, onClick }) => <button onClick={onClick}>{title}</button>;\n```\n\nAny component can render other components - that’s composition. A `Navigation` component that renders that `Button` - also a simple component, that composes other components:\n\n```tsx\nconst Navigation = () => {\n  return (\n    <>\n      // Rendering out Button component in Navigation component. Composition!\n      <Button title="Create" onClick={onClickHandler} />\n      ... // some other navigation code\n    </>\n  );\n};\n```\n\nWith those components and their composition, we can implement as complicated UI as we want. Technically, we don’t even need any other patterns and techniques, all of them are just nice-to-haves that just improve code reuse or solve only specific use cases.\n\n### Container components\n\nContainer components is a more advanced composition technique. The only difference from simple components is that they, among other props, allow passing special prop `children`, for which React has its own syntax. If our `Button` from the previous example accepted not `title` but `children` it would be written like this:\n\n```tsx\n// the code is exactly the same! just replace "title" with "children"\nconst Button = ({ children, onClick }) => <button onClick={onClick}>{children}</button>;\n```\n\nWhich is no different from `title` from `Button` perspective. The difference is on the consumer side, `children` syntax is special and looks like your normal HTML tags:\n\n```tsx\nconst Navigation = () => {\n  return (\n    <>\n      <Button onClick={onClickHandler}>Create</Button>\n      ... // some other navigation code\n    </>\n  );\n};\n```\n\nAnything can go into `children`. We can, for example, add an `Icon` component there in addition to text, and then `Navigation` has a composition of `Button` and `Icon` components:\n\n```tsx\nconst Navigation = () => {\n  return (\n    <>\n      <Button onClick={onClickHandler}>\n        \x3c!-- Icon component is rendered inside button, but button doesn\'t know --\x3e\n        <Icon />\n        <span>Create</span>\n      </Button>\n      ...\n      // some other navigation code\n    </>\n  )\n}\n```\n\n`Navigation` controls what goes into `children`, from `Button`’s perspective it just renders whatever the consumer wants.\n\nWe’re going to look more into practical examples of this technique further in the article.\n\nThere are other composition patterns, like <a href="https://www.developerway.com/posts/higher-order-components-in-react-hooks-era">higher-order components</a>, <a href="https://www.developerway.com/posts/react-component-as-prop-the-right-way">passing components as props</a> or <a href="https://www.developerway.com/posts/how-to-write-performant-react-apps-with-context">context</a>, but those should be used only for very specific use cases. Simple components and container components are the two major pillars of React development, and it’s better to perfect the use of those before trying to introduce more advanced techniques.\n\nNow, that you know them, you’re ready to implement as complicated UI as you can possibly need!\n\nOkay, I’m joking, I\'m not going to do a “how to draw an owl” type of article here 😅\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3zgp5uj2v1igg85wduaj.jpeg)\n\n\nIt’s time for some rules and guidelines so that we can actually ~~draw that owl~~ build complicated React apps with ease.\n\n## When is it a good time to extract components?\n\nThe core React development and decomposition rules that I like to follow, and the more I code, the more strongly I feel about them, are:\n\n- always start implementation from the top\n- extract components only when there is an actual need for it\n- always start from “simple” components, introduce other composition techniques only when there is an actual need for them\n\nAny attempt to think “in advance” or start “bottom-up“ from small re-usable components always ends up either in over-complicated components API or in components that are missing half of the necessary functionality.\n\nAnd the very first rule for when a component needs to be decomposed into smaller ones is **when a component is too big**. A good size for a component for me is when it can fit on the screen of my laptop entirely. If I need to scroll to read through the component’s code - it’s a clear sign that it’s too big.\n\nLet’s start coding now, to see how can this looks in practice. We are going to implement a typical Jira page from scratch today, no less (well, sort of, at least we’re going to start 😅).\n\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1izkmzd59d5e2gv27hy.png)\n\n\nThis is a screen of an issue page from my personal project where I keep my favourite recipes found online 🍣. In there we need to implement, as you can see:\n\n- top bar with logo, some menus, “create” button and a search bar\n- sidebar on the left, with the project name, collapsable “planning” and “development” sections with items inside (also divided into groups), with an unnamed section with menu items underneath\n- a big “page content” section, where all the information about the current issue is shown\n\nSo let’s start coding all of this in just one big component to start with. It’s probably going to look something like this:\n\n```tsx\nexport const JiraIssuePage = () => {\n  return (\n    <div className="app">\n      <div className="top-bar">\n        <div className="logo">logo</div>\n        <ul className="main-menu">\n          <li>\n            <a href="#">Your work</a>\n          </li>\n          <li>\n            <a href="#">Projects</a>\n          </li>\n          <li>\n            <a href="#">Filters</a>\n          </li>\n          <li>\n            <a href="#">Dashboards</a>\n          </li>\n          <li>\n            <a href="#">People</a>\n          </li>\n          <li>\n            <a href="#">Apps</a>\n          </li>\n        </ul>\n        <button className="create-button">Create</button>\n        more top bar items here like search bar and profile menu\n      </div>\n      <div className="main-content">\n        <div className="sidebar">\n          <div className="sidebar-header">ELS project</div>\n          <div className="sidebar-section">\n            <div className="sidebar-section-title">Planning</div>\n            <button className="board-picker">ELS board</button>\n\n            <ul className="section-menu">\n              <li>\n                <a href="#">Roadmap</a>\n              </li>\n              <li>\n                <a href="#">Backlog</a>\n              </li>\n              <li>\n                <a href="#">Kanban board</a>\n              </li>\n              <li>\n                <a href="#">Reports</a>\n              </li>\n              <li>\n                <a href="#">Roadmap</a>\n              </li>\n            </ul>\n\n            <ul className="section-menu">\n              <li>\n                <a href="#">Issues</a>\n              </li>\n              <li>\n                <a href="#">Components</a>\n              </li>\n            </ul>\n          </div>\n          <div className="sidebar-section">sidebar development section</div>\n          other sections\n        </div>\n        <div className="page-content">... here there will be a lot of code for issue view</div>\n      </div>\n    </div>\n  );\n};\n```\n\nNow, I haven’t implemented even half of the necessary items there, not to mention any logic, and the component is already way too big to read through it in one glance. See it in <a href="https://codesandbox.io/s/jira-page-one-big-component-twe6l8?file=/src/jira-issue-page.tsx">codesandbox</a>. That’s good and expected! So before going any further, it’s time split it into more manageable pieces.\n\nThe only thing that I need to do for it, is just to create a few new components and copy-paste code into them. I don’t have any use-cases for any of the advanced techniques (yet), so everything is going to be a simple component.\n\nI’m going to create a `Topbar` component, which will have everything topbar related, `Sidebar` component, for everything sidebar related, as you can guess, and `Issue` component for the main part that we’re not going to touch today. That way our main `JiraIssuePage` component is left with this code:\n\n```tsx\nexport const JiraIssuePage = () => {\n  return (\n    <div className="app">\n      <Topbar />\n      <div className="main-content">\n        <Sidebar />\n        <div className="page-content">\n          <Issue />\n        </div>\n      </div>\n    </div>\n  );\n};\n```\n\nNow let’s take a look at the new `Topbar` component implementation:\n\n```tsx\nexport const Topbar = () => {\n  return (\n    <div className="top-bar">\n      <div className="logo">logo</div>\n      <ul className="main-menu">\n        <li>\n          <a href="#">Your work</a>\n        </li>\n        <li>\n          <a href="#">Projects</a>\n        </li>\n        <li>\n          <a href="#">Filters</a>\n        </li>\n        <li>\n          <a href="#">Dashboards</a>\n        </li>\n        <li>\n          <a href="#">People</a>\n        </li>\n        <li>\n          <a href="#">Apps</a>\n        </li>\n      </ul>\n      <button className="create-button">Create</button>\n      more top bar items here like search bar and profile menu\n    </div>\n  );\n};\n```\n\nIf I implemented all the items there (search bar, all sub-menus, icons on the right), this component also would’ve been too big, so it also needs to be split. And this one is arguably a more interesting case than the previous one. Because, technically, I can just extract `MainMenu` component from it to make it small enough.\n\n```tsx\nexport const Topbar = () => {\n  return (\n    <div className="top-bar">\n      <div className="logo">logo</div>\n      <MainMenu />\n      <button className="create-button">Create</button>\n      more top bar items here like search bar and profile menu\n    </div>\n  );\n};\n```\n\nBut extracting only `MainMenu` made the `Topbar` component slightly _harder_ to read for me. Before, when I looked at the `Topbar`, I could describe it as “a component that implements various things in the topbar”, and focus on the details only when I need to. Now the description would be “a component that implements various things in the topbar AND composes some random `MainMenu` component”. The reading flow is ruined.\n\nThis leads me to my second rule of components decomposition: when extracting smaller components, don’t stop halfway. A component should be described either as a “component that implements various stuff” or as a “component that composes various components together”, not both.\n\nTherefore, a much better implementatioin of the `Topbar` component would look like this:\n\n```tsx\nexport const Topbar = () => {\n  return (\n    <div className="top-bar">\n      <Logo />\n      <MainMenu />\n      <Create />\n      more top bar components here like SearchBar and ProfileMenu\n    </div>\n  );\n};\n```\n\nMuch easier to read now!\n\nAnd exactly the same story with the `Sidebar` component - way too big if I’d implemented all the items, so need to split it:\n\n```tsx\nexport const Sidebar = () => {\n  return (\n    <div className="sidebar">\n      <Header />\n      <PlanningSection />\n      <DevelopmentSection />\n      other sidebar sections\n    </div>\n  );\n};\n```\n\nSee the full example in <a href="https://codesandbox.io/s/jira-page-splitting-into-components-yje3qe?file=/src/jira-issue-page.tsx">the codesandbox</a>.\n\nAnd then just repeat those steps every time a component becomes too big. In theory, we can implement this entire Jira page using nothing more than simple components.\n\n## When is it time to introduce Container Components?\n\nNow the fun part - let’s take a look at when we should introduce some advanced techniques and why. Starting with Container components.\n\nFirst, let’s take a look at the design again. More specifically - at the Planning and Development sections in the sidebar menu.\n\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ctc186xmpiwkujn89644.png)\n\n\nThose not only share the same design for the title, but also the same behaviour: click on the title collapses the section, and in “collapsed” mode the mini-arrow icon appears. And we implemented it as two different components - `PlanningSection` and `DevelopmentSection`. I could, of course, just implement the “collapse” logic in both of them, it\'s just a matter of a simple state after all:\n\n```tsx\nconst PlanningSection = () => {\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  return (\n    <div className="sidebar-section">\n      <div onClick={() => setIsCollapsed(!isCollapsed)} className="sidebar-section-title">\n        Planning\n      </div>\n\n      {!isCollapsed && <>...all the rest of the code</>}\n    </div>\n  );\n};\n```\n\nBut:\n\n- it’s quite a lot of repetition even between those two components\n- content of those sections is actually different for every project type or page type, so even more repetition in the nearest future\n\nIdeally, I want to encapsulate the logic of collapsed/expanded behavior and the design for the title, while leaving different sections full control over the items that go inside. This is a perfect use case for the Container components. I can just extract everything from the code example above into a component and pass menu items as `children`. We’ll have a `CollapsableSection` component:\n\n```tsx\nconst CollapsableSection = ({ children, title }) => {\n  const [isCollapsed, setIsCollapsed] = useState(false);\n\n  return (\n    <div className="sidebar-section">\n      <div className="sidebar-section-title" onClick={() => setIsCollapsed(!isCollapsed)}>\n        {title}\n      </div>\n\n      {!isCollapsed && <>{children}</>}\n    </div>\n  );\n};\n```\n\nand `PlanningSection` (and `DevelopmentSection` and all other future sections) will become just this:\n\n```tsx\nconst PlanningSection = () => {\n  return (\n    <CollapsableSection title="Planning">\n      <button className="board-picker">ELS board</button>\n\n      <ul className="section-menu">... all the menu items here</ul>\n    </CollapsableSection>\n  );\n};\n```\n\nA very similar story is going to be with our root `JiraIssuePage` component. Right now it looks like this:\n\n```tsx\nexport const JiraIssuePage = () => {\n  return (\n    <div className="app">\n      <Topbar />\n      <div className="main-content">\n        <Sidebar />\n        <div className="page-content">\n          <Issue />\n        </div>\n      </div>\n    </div>\n  );\n};\n```\n\nBut as soon as we start implementing other pages that are accessible from the sidebar, we’ll see that they all follow exactly the same pattern - sidebar and topbar stay the same, and only the “page content” area changes. Thanks to the decomposition work we did before we can just copy-paste that layout on every single page - it’s not that much code after all. But since all of them are exactly the same, it would be good to just extract the code that implements all the common parts and leave only components that change to the specific pages. Yet again a perfect case for the “container” component:\n\n```tsx\nconst JiraPageLayout = ({ children }) => {\n  return (\n    <div className="app">\n      <Topbar />\n      <div className="main-content">\n        <Sidebar />\n        <div className="page-content">{children}</div>\n      </div>\n    </div>\n  );\n};\n```\n\nAnd our `JiraIssuePage` (and future `JiraProjectPage`, `JiraComponentsPage`, etc, all the future pages accessible from the sidebar) becomes just this:\n\n```tsx\nexport const JiraIssuePage = () => {\n  return (\n    <JiraPageLayout>\n      <Issue />\n    </JiraPageLayout>\n  );\n};\n```\n\nIf I wanted to summarise the rule in just one sentence, it could be this: extract Container components when there is a need to share some visual or behavioural logic that wraps elements that still need to be under “consumer” control.\n\n### Container components - performance use case\n\nAnother very important use case for Container components is improving the performance of components. Technically performance is off-topic a bit for the conversation about composition, but it would be a crime not to mention it here.\n\nIn actual Jira the Sidebar component is draggable - you can resize it by dragging it left and right by its edge. How would we implement something like this? Probably we’d introduce a `Handle` component, some state for the `width` of the sidebar, and then listen to the “mousemove” event. A rudimentary implementation would look something like this:\n\n```tsx\nexport const Sidebar = () => {\n  const [width, setWidth] = useState(240);\n  const [startMoving, setStartMoving] = useState(false);\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!ref.current) return;\n    const changeWidth = (e: MouseEvent) => {\n      if (!startMoving) return;\n      if (!ref.current) return;\n\n      const left = ref.current.getBoundingClientRect().left;\n      const wi = e.clientX - left;\n\n      setWidth(wi);\n    };\n\n    ref.current.addEventListener(\'mousemove\', changeWidth);\n\n    return () => ref.current?.removeEventListener(\'mousemove\', changeWidth);\n  }, [startMoving, ref]);\n\n  const onStartMoving = () => {\n    setStartMoving(true);\n  };\n\n  const onEndMoving = () => {\n    setStartMoving(false);\n  };\n\n  return (\n    <div className="sidebar" ref={ref} onMouseLeave={onEndMoving} style={{ width: `${width}px` }}>\n      <Handle onMouseDown={onStartMoving} onMouseUp={onEndMoving} />\n      ... the rest of the code\n    </div>\n  );\n};\n```\n\nThere is, however, a problem here: every time we move the mouse we trigger a state update, which in turn will trigger re-rendering of the entire `Sidebar` component. While on our rudimentary sidebar it’s not noticeable, it could make the “dragging” of it visibly laggy when the component becomes more complicated. Container components are a perfect solution for it: all we need is to extract all the heavy state operations in a Container component and pass everything else through `children`.\n\n```tsx\nconst DraggableSidebar = ({ children }: { children: ReactNode }) => {\n  // all the state management code as before\n\n  return (\n    <div\n      className="sidebar"\n      ref={ref}\n      onMouseLeave={onEndMoving}\n      style={{ width: `${width}px` }}\n    >\n      <Handle onMouseDown={onStartMoving} onMouseUp={onEndMoving} />\n      \x3c!-- children will not be affected by this component\'s re-renders --\x3e\n      {children}\n    </div>\n  );\n};\n```\n\nAnd our `Sidebar` component will turn into this:\n\n```tsx\nexport const Sidebar = () => {\n  return (\n    <DraggableSidebar>\n      <Header />\n      <PlanningSection />\n      <DevelopmentSection />\n      other Sections\n    </DraggableSidebar>\n  );\n};\n```\n\nThat way `DraggableSidebar` component will still re-render on every state change, but it will be super cheap since it’s just one div. And everything that is coming in `children` will not be affected by this component’s state updates.\n\nSee all the examples of container components in <a href="https://codesandbox.io/s/jira-page-container-components-wrb88p?file=/src/components/sidebar.tsx">this codesandbox</a>. And to compare the bad re-renders use case, <a href="https://codesandbox.io/s/jira-page-container-components-with-bad-rerenders-6ipo1x?file=/src/components/sidebar.tsx">see this codesandbox</a>. Pay attention to the console output while dragging the sidebar in those examples - `PlanningSection` component logs constantly in the “bad” implementation and only once in the “good” one.\n\nAnd if you want to know more about various patterns and how they influence react performance, you might find those articles interesting: <a href="https://www.developerway.com/posts/how-to-write-performant-react-code">How to write performant React code: rules, patterns, do\'s and don\'ts</a>, <a href="https://www.developerway.com/posts/why-custom-react-hooks-could-destroy-your-app-performance">Why custom react hooks could destroy your app performance</a>, <a href="https://www.developerway.com/posts/how-to-write-performant-react-apps-with-context">How to write performant React apps with Context</a>\n\n## Does this state belong to this component?\n\nAnother thing, other than size, that can signal that a component should be extracted, is state management. Or, to be precise, state management that is irrelevant to the component’s functionality. Let me show you what I mean.\n\nOne of the items in the sidebar in real Jira is “Add shortcut” item, which opens a modal dialog when you click on it. How would you implement it in our app? The modal dialog itself is obviously going to be its own component, but where you’d introduce the state that opens it? Something like this?\n\n```tsx\nconst SomeSection = () => {\n  const [showAddShortcuts, setShowAddShortcuts] = useState(false);\n\n  return (\n    <div className="sidebar-section">\n      <ul className="section-menu">\n        <li>\n          <span onClick={() => setShowAddShortcuts(true)}>Add shortcuts</span>\n        </li>\n      </ul>\n      {showAddShortcuts && <ModalDialog onClose={() => setShowAddShortcuts(false)} />}\n    </div>\n  );\n};\n```\n\nYou can see something like this everywhere, and there is nothing criminal in this implementation. But if I was implementing it, and if I wanted to make this component perfect from the composition perspective, I would extract this state and components related to it outside. And the reason is simple - this state has nothing to do with the `SomeSection` component. This state controls a modal dialog that appears when you click on shortcuts item. This makes the reading of this component slightly harder for me - I see a component that is “section”, and next line - some random state that has nothing to do with “section”. So instead of the implementation above, I would extract the item and the state that actually belongs to this item into its own component:\n\n```tsx\nconst AddShortcutItem = () => {\n  const [showAddShortcuts, setShowAddShortcuts] = useState(false);\n\n  return (\n    <>\n      <span onClick={() => setShowAddShortcuts(true)}>Add shortcuts</span>\n      {showAddShortcuts && <ModalDialog onClose={() => setShowAddShortcuts(false)} />}\n    </>\n  );\n};\n```\n\nAnd the section component becomes much simpler as a bonus:\n\n```tsx\nconst OtherSection = () => {\n  return (\n    <div className="sidebar-section">\n      <ul className="section-menu">\n        <li>\n          <AddShortcutItem />\n        </li>\n      </ul>\n    </div>\n  );\n};\n```\n\nSee it in <a href="https://codesandbox.io/s/jira-page-add-shortcuts-dialog-wb3iq8?file=/src/components/sidebar.tsx">the codesandbox</a>.\n\nBy the same logic, in the `Topbar` component I would move the future state that controls menus to a `SomeDropdownMenu` component, all search-related state to `Search` component, and everything related to opening “create issue” dialog to the `CreateIssue` component.\n\n## What makes a good component?\n\nOne last thing before closing for today. In the summary I want to write “the secret of writing scalable apps in React is to extract good components at the right time”. We covered the “right time” already, but what exactly is a “good component”? After everything that we covered about composition by now, I think I’m ready to write a definition and a few rules here.\n\nA “good component” is a component that I can easily read and understand what it does from the first glance.\n\nA “good component” should have a good self-describing name. `Sidebar` for a component that renders sidebar is a good name. `CreateIssue` for a component that handles issue creation is a good name. `SidebarController` for a component that renders sidebar items specific for “Issues” page is not a good name (the name indicates that the component is of some generic purpose, not specific to a particular page).\n\nA “good component” doesn’t do things that are irrelevant to its declared purpose. `Topbar` component that only renders items in the top bar and controls only topbar behaviour is a good component. `Sidebar` component, that controls the state of various modal dialogs is not the best component.\n\n## Closing bullet points\n\nNow I can write it 😄! The secret of writing scalable apps in React is to extract good components at the right time, nothing more.\n\n**What makes a good component?**\n\n- size, that allows reading it without scrolling\n- name, that indicates what it does\n- no irrelevant state management\n- easy-to-read implementation\n\n**When is it time to split a component into smaller ones?**\n\n- when a component is too big\n- when a component performs heavy state management operations that might affect performance\n- when a component manages an irrelevant state\n\n**What are the general components composition rules?**\n\n- always start implementation from the very top\n- extract components only when you have an actual usecase for it, not in advance\n- always start with the Simple components, introduce advanced techniques only when they are actually needed, not in advance\n\nThat is all for today, hope you enjoyed the reading and found it useful! See ya next time ✌🏼\n\n...\n\nOriginally published at [https://www.developerway.com](https://www.developerway.com). The website has more articles like this 😉\n\n[Subscribe to the newsletter](https://www.developerway.com), [connect on LinkedIn](https://www.linkedin.com/in/adevnadia/) or [follow on Twitter](https://twitter.com/adevnadia) to get notified as soon as the next article comes out.',t.user={name:"Nadia Makarevich",username:a,twitter_username:a,github_username:a,website_url:"https://www.developerway.com",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--JnKvtJkQ--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/762035/1f7fe6e4-1e60-4c01-80cc-532142263682.jpg",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--j3FZXwJO--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/762035/1f7fe6e4-1e60-4c01-80cc-532142263682.jpg"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:t}},error:s,state:{currentArticle:t},serverRendered:!0,routePath:"/adevnadia/1052372",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:s}}}}(null,"2022-04-12T03:26:36Z","adevnadia",{})</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
