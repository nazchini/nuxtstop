<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Hexagons and Beyond: Responsive Grid Patterns, Sans Media Queries</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Hexagons and Beyond: Responsive Grid Patterns, Sans Media Queries</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/css" class="tag" data-v-70afb46a>
          #css
        </a><a href="/nuxtstop/t/html" class="tag" data-v-70afb46a>
          #html
        </a><a href="/nuxtstop/t/webdev" class="tag" data-v-70afb46a>
          #webdev
        </a><a href="/nuxtstop/t/tutorial" class="tag" data-v-70afb46a>
          #tutorial
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--eRapv-Zr--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0pa111ja39j0eni3da6.png" alt="Hexagons and Beyond: Responsive Grid Patterns, Sans Media Queries" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            89
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            11
          </span></div> <time data-v-70afb46a>Jun 9 '21</time></div></header> <div class="content" data-v-70afb46a><p>Since the rise of Flexbox and CSS Grid, everyone is claming the same: "float is dead!", "stop using float!" but I'm here to resurrect our old friend float to create complex and responsive layouts that you cannot achieve using flexbox and CSS grid. All this without any single media query.</p>

<p>I know, it's hard to believe. So let's start with a working demo:</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/zYoZBOy?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>This is a fully responsive hexagon grid made without media queries, JavaScript, or a ton of hacky CSS. Resize the demo screen and see the magic. In addition to being responsive, the grid also scales. For example, we can chuck more hexagons in there by adding more divs, and control both the sizing and spacing using CSS variables.</p>

<p>Cool, right? And this is only one example among many grids we will build in the same manner.</p>

<p><sub>This article is a generic version of a previous one where I only talked about hexagon shapes: <a href="https://dev.to/afif/responsive-hexagon-grid-without-media-query-57g7">https://dev.to/afif/responsive-hexagon-grid-without-media-query-57g7</a></sub></p>


<hr>

<h2>
  <a name="making-a-grid-of-hexagons" href="#making-a-grid-of-hexagons">
  </a>
  Making a grid of hexagons
</h2>

<p>First, we create our hexagon shape. This task is fairly easy using <code>clip-path</code>. We will consider a variable <code>S</code> that will define the dimension of our element. Bennett Feely's <a href="https://bennettfeely.com/clippy/">Clippy</a> is a great online generator for clip paths.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--lWe56Si2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/hex-clip-path.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--lWe56Si2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/hex-clip-path.png" alt="Hexagon shape" loading="lazy"></a></p>

<p>Each hexagon is an <code>inline-block</code> element. The markup can go something like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main"</span><span class="nt">></span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">></span>
    <span class="nt">&lt;div>&lt;/div></span>
    <span class="nt">&lt;div>&lt;/div></span>
    <span class="nt">&lt;div>&lt;/div></span>
    <span class="c">&lt;!--etc. --></span>
  <span class="nt">&lt;/div></span>
<span class="nt">&lt;/div></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>…and the CSS:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span> <span class="c">/* we will talk about this later ... */</span>
  <span class="py">--s</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>  <span class="c">/* size  */</span>
  <span class="py">--m</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>   <span class="c">/* margin */</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span> <span class="c">/* disable white space between inline block element */</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="nt">div</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">);</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">);</span>
  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">1.1547</span><span class="p">);</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="n">initial</span><span class="p">;</span> <span class="c">/* we reset the font-size if we want to add some content */</span>
  <span class="nl">clip-path</span><span class="p">:</span> <span class="n">polygon</span><span class="p">(</span><span class="m">0%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">0%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">100%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">0%</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Nothing complex so far. We have a main element that holds a container which, in turn, holds the hexagons. Since we are dealing with <code>inline-block</code>, we need to fight the common white space issue (using the <code>font-size</code> trick) and we consider some margin (defined with the variable <code>M</code>) to control the space.</p>

<p>Here’s the result so far:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0A6Mf8XK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/CefrNYpk.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0A6Mf8XK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/CefrNYpk.png" alt="" loading="lazy"></a></p>

<p>Every other row needs some negative offset so the rows overlap rather than stack directly on top of each other. That offset will be equal to 25% of the element height (see Figure 1). We apply that offset to <code>margin-bottom</code> to get the following:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.container</span> <span class="nt">div</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">);</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">);</span>
  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">1.1547</span><span class="p">);</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="n">initial</span><span class="p">;</span>
  <span class="nl">clip-path</span><span class="p">:</span> <span class="n">polygon</span><span class="p">(</span><span class="m">0%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">0%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">100%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">0%</span><span class="p">);</span>
  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">0.2886</span><span class="p">);</span> <span class="c">/* some negative margin to create overlap */</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>…and the result becomes:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--vsF7rvXt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619908434242_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--vsF7rvXt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619908434242_image.png" alt="" loading="lazy"></a></p>

<p>Now the real trick is how we can shift the second row to get a perfect hexagon grid. We've already scrunched things to the point where the rows overlap each other vertically, but what we need is to push every other row toward the right so the hexagons stagger rather than overlap. Here's where <code>float</code> and <code>shape-outside</code> come into play.</p>

<p>Did you wonder why we have a <code>.main</code> element wrapping our container and having <code>display: flex</code> ? That <code>div</code> is also a part of the trick. In a <a href="https://dev.to/afif/float-an-element-to-the-bottom-corner-342n">previous article</a>, I used float and I needed that flexbox container in order to be able to use <code>height: 100%</code>. I will be doing the same thing here.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">));</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>I am using the <code>container::before</code> pseudo-element to create a float element that take up all the height at the left of the grid, and that has a width equal to half a hexagon (plus its margin). We get the following result:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--2lNYVg6C--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/PTuQEwm8.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--2lNYVg6C--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/PTuQEwm8.png" alt="" loading="lazy"></a></p>

<p>Now, we can reach for <code>shape-outside</code>. Let's take a quick refresher on what it does:</p>

<blockquote>
<p>The <code>shape-outside</code> CSS property defines a shape—which may be non-rectangular—around which adjacent <strong>inline content</strong> should wrap. By default, inline content wraps around its margin box; shape-outside provides a way to customize this wrapping, making it possible to wrap text around complex objects rather than simple boxes. <sup><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/shape-outside">ref</a></sup></p>
</blockquote>

<p>Notice "inline content" in the definition. This explains exactly why the hexagons need to be <code>inline-block</code> elements. But to understand what kind of shape we need, let's zoom into the pattern.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--aiuhqz9W--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910028475_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--aiuhqz9W--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910028475_image.png" alt="" loading="lazy"></a></p>

<p>What's cool about <code>shape-outside</code> is that it actually works with gradients. But what kind of gradient fits our situation?</p>

<p>If, for example, we have 10 rows of hexagons, we only need to shift means every even row. Seen differently, we need to shift every second row so we need a kind of repetition — perfect for a repeating gradient!</p>

<p>We'll create a gradient with two colors:</p>

<ul>
<li>A transparent one to create the “free space” while allowing the first row to stay in place (illustrated by the blue arrow above).</li>
<li>An opaque color to shift the second row to the right so the hexagons aren’t directly stacked on top of one another (illustrated by the green arrow).</li>
</ul>

<p>Our <code>shape-outside</code> value will look like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nt">shape-outside</span><span class="o">:</span> <span class="nt">repeating-linear-gradient</span><span class="o">(</span><span class="err">#0000</span> <span class="err">0</span> <span class="nt">A</span><span class="o">,</span> <span class="err">#000</span> <span class="err">0</span> <span class="nt">B</span><span class="o">);</span> <span class="c">/* #0000 = transparent */</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now, let's find the value of <code>A</code> and <code>B</code>. <code>B</code> will simply be equal to the height of two rows since our logic need to repeat each two rows.</p>

<p>The height of two rows is equal to the height of two hexagons (including their margins), minus twice the overlap (<code>2*Height + 4*M - 2*Height*25% = 1.5*Height + 4*M</code>). Or, expressed in CSS with <code>calc()</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nt">calc</span><span class="o">(</span><span class="err">1</span><span class="o">.</span><span class="err">732</span> <span class="o">*</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--s</span><span class="o">)</span> <span class="o">+</span> <span class="err">4</span> <span class="o">*</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--m</span><span class="o">))</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>That's a lot! So, let's hold all of this in a CSS custom property, <code>F</code>.</p>

<p>The value of <code>A</code> (defined by the blue arrow in the previous figure) needs to be at least equal to the size of one hexagon, but it can also be bigger. In order to push the second row over to the right, we need few pixel of opaque color so <code>A</code> can simply be equal to <code>B - Xpx</code>, where <code>X</code> is a small value.</p>

<p>We end up with something like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nt">shape-outside</span><span class="o">:</span> <span class="nt">repeating-linear-gradient</span><span class="o">(</span><span class="err">#0000</span> <span class="err">0</span> <span class="nt">calc</span><span class="o">(</span><span class="nt">var</span><span class="o">(</span><span class="nt">--f</span><span class="o">)</span> <span class="nt">-</span> <span class="err">3</span><span class="nt">px</span><span class="o">),</span><span class="err">#000</span> <span class="err">0</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--f</span><span class="o">));</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>And the following result:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--nqF2D4j3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910864415_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--nqF2D4j3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910864415_image.png" alt="" loading="lazy"></a></p>

<p>See that? Our repeating linear gradient's shape is pushing every other row to the right by one half the width of a hexagon to offset the pattern.</p>

<p>Let's put that all together:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span><span class="n">flex</span><span class="p">;</span>
  <span class="py">--s</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>  <span class="c">/* size  */</span>
  <span class="py">--m</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>    <span class="c">/* margin */</span>
  <span class="py">--f</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">1.732</span> <span class="err">+</span> <span class="m">4</span> <span class="err">*</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="m">1px</span><span class="p">);</span> 
<span class="p">}</span>

<span class="nc">.container</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span> <span class="c">/* disable white space between inline block element */</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="nt">div</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">);</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">);</span>
  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">1.1547</span><span class="p">);</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span><span class="n">initial</span><span class="p">;</span>
  <span class="nl">clip-path</span><span class="p">:</span> <span class="n">polygon</span><span class="p">(</span><span class="m">0%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">0%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">100%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">0%</span><span class="p">);</span>
  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">0.2885</span><span class="p">);</span>
<span class="p">}</span>

<span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="p">/</span> <span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">));</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">120%</span><span class="p">;</span> 
  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">repeating-linear-gradient</span><span class="p">(</span><span class="m">#0000</span> <span class="m">0</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span> <span class="n">-</span> <span class="m">3px</span><span class="p">),</span> <span class="m">#000</span> <span class="m">0</span> <span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">));</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>That's it! With no more than 15 CSS declarations, we have a responsive grid that fit nicely into all the screen sizes and we can easily adjust things by simply controling two variables.</p>

<p>You may have noticed that I am adding <code>-1px</code> to the variable <code>F</code>. Since we are dealing with calculation that involve decimals, the rounding may give us bad results. To avoid this we add or remove few pixels. I am also using <code>120%</code> instead of <code>100%</code> for the height of the floated element for similar reasons. There is no particular logic with theses values; we simply adjust them to make sure to cover most of the cases without any misaligning our shapes.</p>


<hr>

<h2>
  <a name="want-more-shapes" href="#want-more-shapes">
  </a>
  Want more shapes?
</h2>

<p>We can do more than hexagons with this approach! Let’s create a "rhombus" grid instead. Again, we start with our <code>clip-path</code> to create the shape:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ZhkvsxUN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/rhombus-clip-path.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ZhkvsxUN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/rhombus-clip-path.png" alt="Rhombus clip-path shape" loading="lazy"></a></p>

<p>The code is basically the same. What's changing are the calculations and values. Find below a table that will illustrate the changes.</p>

<div class="table-wrapper-paragraph"><table>
<thead>
<tr>
<th></th>
<th>Hexagon grid</th>
<th>Rhombus grid</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>height</code></td>
<td><code>calc(var(--s)*1.1547)</code></td>
<td><code>var(--s)</code></td>
</tr>
<tr>
<td><code>clip-path</code></td>
<td><code>polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%)</code></td>
<td><code>polygon(50% 0, 100% 50%, 50% 100%, 0 50%)</code></td>
</tr>
<tr>
<td><code>margin-bottom</code></td>
<td><code>calc(var(--m) - var(--s)*0.2885)</code></td>
<td><code>calc(var(--m) - var(--s)*0.5)</code></td>
</tr>
<tr>
<td><code>--f</code></td>
<td><code>calc(var(--s)*1.7324 + 4*var(--m))</code></td>
<td><code>calc(var(--s) + 4*var(--m))</code></td>
</tr>
</tbody>
</table></div>

<p>And we’re done! A mere four changes to our code gets us a completely new grid but with a different shape.</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/MWbpjvw?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>


<hr>

<h2>
  <a name="just-how-flexible-is-this" href="#just-how-flexible-is-this">
  </a>
  Just how flexible is this?
</h2>

<p>We saw how we were able to make the hexagon and rhombus grids using the exact same code structure, but different calculations. </p>

<p>Let me blow your mind with another idea: What about making that calculation a variable so that we can easily switch between different grids without changing the code? We can certainly do that!</p>

<p>We'll use an octagonal shape because it's more of a generic shape from that we can use to create other shapes (a hexagon, a rhombus, a rectangle, etc.) simply by changing a few values.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Jb1lb-pA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/octagon-clip-path.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Jb1lb-pA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/octagon-clip-path.png" alt="Octagon shape clip-path" loading="lazy"></a></p>

<p>Our octagon is defined with four variables:</p>

<ul>
<li>
<code>S</code>: the width.</li>
<li>
<code>R</code>: the ratio that will help us defines the height based on the width.</li>
<li>
<code>hc</code> and <code>vc</code> : both of these will control our <code>clip-path</code> values and the shape we want to get. <code>hc</code> will be based on the width while <code>vc</code> on the height</li>
</ul>

<p>I know it looks hefty, but the <code>clip-path</code> is defined using eight points (like shown in the figure). Adding some CSS variables, we get this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nt">clip-path</span><span class="o">:</span> <span class="nt">polygon</span><span class="o">(</span>
   <span class="nt">var</span><span class="o">(</span><span class="nt">--hc</span><span class="o">)</span> <span class="err">0</span><span class="o">,</span> <span class="nt">calc</span><span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--hc</span><span class="o">))</span> <span class="err">0</span><span class="o">,</span> <span class="c">/* 2 points at the top */</span>
   <span class="err">100</span><span class="o">%</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--vc</span><span class="o">),</span><span class="err">100</span><span class="o">%</span> <span class="nt">calc</span><span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--vc</span><span class="o">)),</span> <span class="c">/* 2 points at the right */</span>
   <span class="nt">calc</span><span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--hc</span><span class="o">))</span> <span class="err">100</span><span class="o">%,</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--hc</span><span class="o">)</span> <span class="err">100</span><span class="o">%,</span> <span class="c">/* 2 points at the bottom */</span>
   <span class="err">0</span> <span class="nt">calc</span><span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--vc</span><span class="o">)),</span><span class="err">0</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--vc</span><span class="o">)</span> <span class="c">/* 2 points at the left */</span>
<span class="o">);</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This is what we're aiming for:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zYxWTRRz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619961411571_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zYxWTRRz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619961411571_image.png" alt="" loading="lazy"></a></p>

<p>Let’s zoom in to identify the different values:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--LCVvFzqb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619963939847_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--LCVvFzqb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619963939847_image.png" alt="" loading="lazy"></a></p>

<p>The overlap between each row (illustrated by the red arrow) can be expressed using the vc variable which gives us a <code>margin-bottom</code> equal to <code>M - vc</code> (where <code>M</code> is our margin).</p>

<p>In addition to the margin we applied between our element, we also need an additional horizontal margin (illustrated by the yellow arrow) equal to <code>S - 2*hc</code>. Let's define another variable for the horizontal margin (<code>MH</code>) that is equal to <code>M + (S - 2*hc)/2</code>.</p>

<p>The height of two rows is equal to twice the size of a shape (plus the margin), minus twice the overlap, or <code>2*(S + 2*M) - 2*vc</code>.</p>

<p>Let's update our table of values to see how we're calculating things between the different grids:</p>

<div class="table-wrapper-paragraph"><table>
<thead>
<tr>
<th></th>
<th>Hexagon grid</th>
<th>Rhombus grid</th>
<th>Octagon grid</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>height</code></td>
<td><code>calc(var(--s)*1.1547)</code></td>
<td><code>var(--s)</code></td>
<td><code>calc(var(--s)*var(--r)))</code></td>
</tr>
<tr>
<td><code>clip-path</code></td>
<td><code>polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%)</code></td>
<td><code>polygon(50% 0, 100% 50%, 50% 100%, 0 50%)</code></td>
<td><code>polygon(var(--hc) 0, calc(100% - var(--hc)) 0,100% var(--vc),100% calc(100% - var(--vc)), calc(100% - var(--hc)) 100%,var(--hc) 100%,0 calc(100% - var(--vc)),0 var(--vc))</code></td>
</tr>
<tr>
<td><code>--mh</code></td>
<td>–</td>
<td>–</td>
<td><code>calc(var(--m) + (var(--s) - 2*var(--hc))/2)</code></td>
</tr>
<tr>
<td><code>margin</code></td>
<td><code>var(--m)</code></td>
<td><code>var(--m)</code></td>
<td><code>var(--m) var(--mh)</code></td>
</tr>
<tr>
<td><code>margin-bottom</code></td>
<td><code>calc(var(--m) - var(--s)*0.2885)</code></td>
<td><code>calc(var(--m) - var(--s)*0.5)</code></td>
<td><code>calc(var(--m) - var(--vc))</code></td>
</tr>
<tr>
<td><code>--f</code></td>
<td><code>calc(var(--s)*1.7324 + 4*var(--m))</code></td>
<td><code>calc(var(--s) + 4*var(--m))</code></td>
<td><code>calc(2*var(--s) + 4*var(--m) - 2*var(--vc))</code></td>
</tr>
</tbody>
</table></div>

<p>Alright, let’s update our CSS with those adjustments:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
  <span class="py">--s</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>  <span class="c">/* size  */</span>
  <span class="py">--r</span><span class="p">:</span> <span class="m">1</span><span class="p">;</span> <span class="c">/* ratio */</span>

  <span class="c">/* clip-path parameter */</span>
  <span class="py">--hc</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span> 
  <span class="py">--vc</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>

  <span class="py">--m</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span> <span class="c">/* vertical margin */</span>
  <span class="py">--mh</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="err">+</span> <span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="n">-</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--hc</span><span class="p">))/</span><span class="m">2</span><span class="p">);</span> <span class="c">/* horizontal margin */</span>
  <span class="py">--f</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">4</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--vc</span><span class="p">)</span> <span class="n">-</span> <span class="m">2px</span><span class="p">);</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span> <span class="c">/* disable white space between inline block element */</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="nt">div</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">);</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">);</span>
  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--r</span><span class="p">));</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="n">initial</span><span class="p">;</span>
  <span class="nl">clip-path</span><span class="p">:</span> <span class="n">polygon</span><span class="p">(</span> <span class="p">...</span> <span class="p">);</span>
  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--vc</span><span class="p">));</span>
<span class="p">}</span>

<span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">));</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">120%</span><span class="p">;</span> 
  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">repeating-linear-gradient</span><span class="p">(</span><span class="m">#0000</span> <span class="m">0</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span> <span class="n">-</span> <span class="m">3px</span><span class="p">),</span><span class="m">#000</span> <span class="m">0</span> <span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">));</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>As we can see, the code structure is the same. We simply added more variable to control the shape and extend the <code>margin</code> property.</p>

<p>And below a working example. Adjust the different variables to control the shape while having a fully responsive grid:</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/MWpExVW?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>An interactive demo, you say? You bet!</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/NWpaJMJ?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>To make things easier, I am expressing the <code>vc</code> and <code>hc</code> as percetange of the width and height so we can easily scale our elements without breaking the <code>clip-path</code></p>

<p>From the above we can easily get the initial hexagonal grid:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--z-KbJ-xA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967785492_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--z-KbJ-xA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967785492_image.png" alt="" loading="lazy"></a></p>

<p>The rhombus grid:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--6s4UbiqA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967852929_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--6s4UbiqA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967852929_image.png" alt="" loading="lazy"></a></p>

<p>And yet another hexagon grid:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--TZNf-Uau--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/vm8u1y_Y.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--TZNf-Uau--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/vm8u1y_Y.png" alt="" loading="lazy"></a></p>

<p>A masonry-like grid:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--sUGpWNxm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968042870_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--sUGpWNxm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968042870_image.png" alt="" loading="lazy"></a></p>

<p>And a checkerboard while we are at it:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oM1VzgIC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968097777_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oM1VzgIC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968097777_image.png" alt="" loading="lazy"></a></p>

<p>A lot of possibilities to create a responsive grid with any kind of shape! All we have to do is adjust few variables.</p>


<hr>

<h3>
  <a name="fixing-the-alignment" href="#fixing-the-alignment">
  </a>
  Fixing the alignment
</h3>

<p>Let's try to control the alignment of our shapes. Since we are dealing with <code>inline-block</code> elements, we're dealing with default left alignment and some empty space at the end, depending on viewport width.</p>

<p>Notice that we alternate between two kind of grids based on the screen width: </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kQdj3TZu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620174099369_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kQdj3TZu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620174099369_image.png" alt="" loading="lazy"></a></p>

<ul>
<li>Grid #1: A different number of items per row (N, N-1,N, N-1, etc.)</li>
<li>Grid #2: The same number of items per row (N, N, N, N, etc.)</li>
</ul>

<p>It would be good to always have one of the grid all the time (either #1 or #2) and center everything so that the free space is equally divided on both sides.</p>

<p>In order to get the first grid in the figure above, the container width needs to be a multiplier of the size of one shape, plus its margin, or <code>N*(S + 2*MH)</code>, where <code>N</code> is an integer value.</p>

<p>This may sound impossible with CSS, but it's indeed possible. I made it using CSS grid:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>
  <span class="py">grid-template-columns</span><span class="p">:</span> <span class="nb">repeat</span><span class="p">(</span><span class="n">auto-fit</span><span class="p">,</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)));</span>
  <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="p">{</span>
  <span class="nl">grid-column</span><span class="p">:</span> <span class="m">1</span><span class="p">/</span><span class="m">-1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><code>.main</code> is now a grid container. Using <code>grid-template-columns</code>, I define the column width (as previously explained) and use the <code>auto-fit</code> value to get as many columns as possible into the available space. Then, the <code>.container</code> spans all of the grid columns using <code>1/-1</code> — which means that the width of our container will be a mutiplier of one column size.</p>

<p>All it takes to center things is <code>justify-content: center</code>.</p>

<p>Yes, CSS is magic!</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/poeWYqv?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>Resize the demo and notice that not only do we have the first grid from the figure, but everything is perfectly centered as well.</p>

<p>But wait, we removed <code>display: flex</code> and swapped in <code>display: grid</code>… so how is the percentage-based height of the float still working? I had said that using a flex container was the key for that, no?</p>

<p>Well, turns out CSS grid sports that feature too. From <a href="https://www.w3.org/TR/css-grid-1/#algo-overview">the specification</a>:</p>

<blockquote>
<p>Once the size of each grid area is thus established, the grid items are laid out into their respective containing blocks. The grid area’s width and height are considered definite for this purpose.<br>
Note: Since formulas calculated using only definite sizes, such as the stretch fit formula, are also definite, the size of a grid item which is stretched is also considered definite.</p>
</blockquote>

<p>A grid item has a <code>stretch</code> alignment by default, so its height is definite, meaning using a percentage as a height inside it is perfectly valid.</p>

<p>Let's say we instead want the second grid in the figure — we simply add an extra column with a width equal to half the width of the other columns:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>
  <span class="py">grid-template-columns</span><span class="p">:</span> <span class="nb">repeat</span><span class="p">(</span><span class="n">auto-fit</span><span class="p">,</span><span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)))</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">));</span>
  <span class="nl">justify-content</span> <span class="p">:</span><span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><iframe height="600" src="https://codepen.io/t_afif/embed/rNyGRbM?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>Now, in addition to a fully responsive grid that is flexible enough to take custom shapes, everything is perfectly centred!</p>


<hr>

<h2>
  <a name="wait-one-more-a-pyramidal-grid" href="#wait-one-more-a-pyramidal-grid">
  </a>
  Wait, one more: a pyramidal grid
</h2>

<p>Let's take everything we've learned and build another amazing grid. This time, we’ll transform the grid we just made into a pyramidal one.</p>

<p>Consider that, unlike the grid we've made so far, the number of elements is important especially for the responsive part. It’s required to know the number of elements and more precesily the number of rows.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--7RW0y9Nk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/different-pyramid.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--7RW0y9Nk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/different-pyramid.png" alt="" loading="lazy"></a></p>

<p>It doesn't mean we need a bunch of hardcoded values; rather we use an extra variable to adjust things based on the number of rows.</p>

<p>The logic is based on the number of rows because different numbers of elements may give us the same number of rows. For example, there are five rows when we have between 11 and 15 elements, even if the last row is not fully occupied. Having between 16 and 21 elements gives us six rows, and so on. The number of rows is our new variable.</p>

<p>Before digging into the geometry and the math here is a working demo:</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/gOmjZOO?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>Notice that most of the code is the same as what we’ve done in the previous examples. So let's focus on the new properties that we’ve added:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>
  <span class="py">--nr</span><span class="p">:</span> <span class="m">5</span><span class="p">;</span>  <span class="c">/* number of rows */</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="p">{</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--nr</span><span class="p">)</span><span class="err">*</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)));</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.container</span><span class="nd">::before</span> <span class="o">,</span>
<span class="nc">.container</span> <span class="nt">i</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">50%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span><span class="p">);</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span><span class="err">*</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--nr</span><span class="p">)</span> <span class="n">-</span> <span class="m">1</span><span class="p">)/</span><span class="m">2</span><span class="p">);</span>
  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span> <span class="nb">right</span><span class="p">,</span> <span class="m">#000</span> <span class="m">50%</span><span class="p">,</span> <span class="m">#0000</span> <span class="m">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="nt">i</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span><span class="nb">right</span><span class="p">;</span>
  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span> <span class="nb">left</span><span class="p">,</span> <span class="m">#000</span> <span class="m">50%</span><span class="p">,</span> <span class="m">#0000</span> <span class="m">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><code>NR</code> is our variable for the number of rows. The width of the container needs to be equal to the last row of the pyramid to make sure it hold all the elements. If you check the previous figure, you'll see that the number of the items contained in the last row is simply equal to the number of rows, which means the formula is: <code>NR* (S + 2*MH)</code>.</p>

<p>You may have also noticed that we also added an <code>&lt;i></code> element in there. We did that because we need two floating elements where we will apply <code>shape-outside</code>.</p>

<p>To understand why we need two floating elements let's see what is done behind the scenes:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--AzCdlFuA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/behind-the-scenes.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--AzCdlFuA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/behind-the-scenes.png" alt="" loading="lazy"></a></p>

<p>The blue elements are our floating elements. Each one is having a width equal to half the container size, minus half a shape size, plus margin. The height is equal to four rows in our case, and to <code>NR - 1</code> in a more generic case. Earlier, we defined the height of two rows, <code>F</code>, so the height of one row is <code>F/2</code>. That's how we landed at <code>height: calc(var(--f)*(var(--nr) - 1)/2</code>.</p>

<p>Now that we have the size of our elements, we need to apply a gradient to our shape-outside.</p>

<p>The purple coloration in the figure above is the restricted area for our elements (it need to be an opaque color). The remaining area is the free space where the elements can flow (it need to be a transparent color). This can be done using a diagonal gradient:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nt">shape-outside</span><span class="o">:</span> <span class="nt">linear-gradient</span><span class="o">(</span><span class="nt">to</span> <span class="nt">bottom</span> <span class="nt">right</span><span class="o">,</span> <span class="err">#000</span> <span class="err">50</span><span class="o">%,</span> <span class="err">#0000</span> <span class="err">0</span><span class="o">);</span> 
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>We simply change right with left for the other floated element. You have probably noticed that this is not responsive. In fact, go ahead and adjust the viewport width of the demo and see just how unresponsive this is.</p>

<p>We have a couple of options to get responsive:</p>

<ol>
<li>We can fall back to the first grid when the container width is smaller than the viewport width. It's a bit tricky to code, but it allows us to preserve the same size for our elements.</li>
<li>We can reduce the size of our elements in order to keep the pyramidal grid. This is easier to code using the percentage-based value trick, but that could result in super tiny elements on smaller screen sizes.</li>
</ol>

<p>Let's go with the first solution. We like a good challenge, right?</p>

<p>To get the pyramidal grid, we needed two floated element. The initial grid needed just one floated element. Luckily, our structure allows us to have three floated elements without needing to add more elements to the markup, thanks to pseudo-elements. We will use <code>container::before</code>, <code>i::before</code>, <code>i::after</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="c">/* Same as before... */</span>

<span class="c">/* The initial grid */</span>
<span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">));</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">120%</span><span class="p">;</span> 
  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">repeating-linear-gradient</span><span class="p">(</span><span class="m">#0000</span> <span class="m">0</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span> <span class="n">-</span> <span class="m">3px</span><span class="p">),</span><span class="m">#000</span> <span class="m">0</span> <span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">));</span>
<span class="p">}</span>

<span class="c">/* The pyramidal grid */</span>
<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::before</span> <span class="o">,</span>
<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::after</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">50%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span><span class="p">);</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span><span class="err">*</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--nr</span><span class="p">)</span> <span class="n">-</span> <span class="m">1</span><span class="p">)/</span><span class="m">2</span><span class="p">);</span>
  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span> <span class="nb">right</span><span class="p">,</span><span class="m">#000</span> <span class="m">50%</span><span class="p">,</span><span class="m">#0000</span> <span class="m">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::after</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span><span class="nb">right</span><span class="p">;</span>
  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span> <span class="nb">left</span><span class="p">,</span><span class="m">#000</span> <span class="m">50%</span><span class="p">,</span><span class="m">#0000</span> <span class="m">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now we need a trick that lets us use either the first floated element or the other two, but not all of them at the same time. This condition should be based on the width of our container:</p>

<ul>
<li>If the container width is bigger than the width of the last row, we can have our pyramid and use the floated elements inside of <code>&lt;i></code>.</li>
<li>If the container width is smaller than the width of the last row, we switch to the other grid and use the first floated element.</li>
</ul>

<p>We can use <code>clamp()</code> for this! It's sort of like a conditional function that sets a minimum and maximum range and, within that range, we provide it an "ideal" value to use between those points. This way, we can "switch" between grids using our formulas as clamped values, and still avoid using media queries.</p>

<p>Our code will look like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>
  <span class="c">/* the other variables won't change*/</span>
  <span class="py">--lw</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--nr</span><span class="p">)</span><span class="err">*</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)));</span> <span class="c">/* width of last row */</span>
<span class="p">}</span>

<span class="nc">.container</span> <span class="p">{</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--lw</span><span class="p">);</span>
<span class="p">}</span>

<span class="c">/* The initial grid */</span>
<span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">0px</span><span class="p">,</span> <span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--lw</span><span class="p">)</span> <span class="n">-</span> <span class="m">100%</span><span class="p">)</span><span class="err">*</span><span class="m">1000</span><span class="p">,</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)));</span>
<span class="p">}</span>

<span class="c">/* The pyramidal grid */</span>
<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::before</span><span class="o">,</span>
<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::after</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">0px</span><span class="p">,</span> <span class="p">(</span><span class="m">100%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--lw</span><span class="p">)</span> <span class="err">+</span> <span class="m">1px</span><span class="p">)</span><span class="err">*</span><span class="m">1000</span><span class="p">,</span> <span class="n">calc</span><span class="p">(</span><span class="m">50%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span><span class="p">));</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>On larger screens, the width of the container (<code>LW</code>) is now equal to its <code>max-width</code>, so <code>100% == LW</code>. That means that the width of <code>.container::before</code> is equal to <code>0px</code> (and results in this floated element becoming disabled).</p>

<p>For the other floating elements, we clamp the width:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nt">width</span><span class="o">:</span> <span class="nt">clamp</span><span class="o">(</span><span class="err">0</span><span class="nt">px</span><span class="o">,</span> <span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--lw</span><span class="o">)</span> <span class="o">+</span> <span class="err">1</span><span class="nt">px</span><span class="o">)*</span><span class="err">1000</span><span class="o">,</span> <span class="nt">calc</span><span class="o">(</span><span class="err">50</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--mh</span><span class="o">)</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--s</span><span class="o">)/</span><span class="err">2</span><span class="o">));</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>…where the middle value <code>((100% - LW + 1px)*1000)</code> is equal to <code>(0 + 1px)*1000 = 1000px</code> (an intentionally large, but arbitrary value). It gets clamped to <code>calc(50% - var(--mh) - var(--s)/2)</code>. In other words, these floated elements are enabled with the correct width (the one we defined previously)</p>

<p>Voilà! we have a pyramidal shape on large screen.</p>

<p>Now, when the container width get smaller, <code>LW</code> is going to be greater than <code>100%</code>. So, <code>(LW - 100%)</code> will be positive. Multiplied by a big value, it's clamped to <code>calc(var(--s)/2 + var(--mh))</code>, which enables the first floated element. For the other float elements, <code>(100% - LW + 1px)</code> resolves to a negative value and is clamped to <code>0px</code>, which disables the float elements.</p>

<p>Resize the below demo and see how we switch between both grids</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/zYZEXRp?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>Let's try adding more elements:</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/zYZEXaR?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>See that? Things are scaling perfectly. We can also combine this with the CSS grid alignment trick we used earlier:</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/WNpZWaG?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>Do you think “float” is such a bad thing now?</p>

<p>Want invert the pyramid?</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1x3i9f0S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620991346257_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1x3i9f0S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620991346257_image.png" alt="" loading="lazy"></a></p>

<p>Like illustrated with the above figure, two changes to the previous code can invert our pyramid:</p>

<ul>
<li>I change the direction of the gradient from <code>to bottom left|right</code> to <code>to top left|right</code>,</li>
<li>I add a <code>margin-top</code> equal to the height of one row.</li>
</ul>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/MWpEdJG?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>And, hey, we can swap between both pyramid easily:</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/bGqoyrr?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

<p>Isn't this beautiful? We have a responsive pyramidal grid with custom shapes that we can easily invert and that fallback to another responsive grid on small screen while everything is perfectly centred. All this without a single media query or JavaScript, but instead using the often overlooked float property.</p>

<p>You will probably notice some missalignment in some particular cases. Yes, it's again some rounding issue related to the calculation we are doing and the fact that we are trying to make this generic with the interactive demos. To rectify this, we simply adjust few values manually (epsecially the percentage of the gradient) until we get back a perfect alignment.</p>


<hr>

<h2>
  <a name="thats-a-float-wrap" href="#thats-a-float-wrap">
  </a>
  That's a <del>float</del> wrap!
</h2>

<p>There we have it: combining <code>float</code> with <code>shape-outside</code> can help us make complex, flexible and responsive layouts — long live float!</p>

<p>The article ends here but this is only the beginning. I provided you with the layout and now you can easily put any content inside the divs, apply a background, shadows, animations, etc.</p>

<p><iframe height="600" src="https://codepen.io/t_afif/embed/mdWBYqE?height=600&default-tab=result&embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width:100%">
</iframe>
</p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/afif/hexagons-and-beyond-responsive-grid-patterns-sans-media-queries-1nb4" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(s,a,n,e){return a.type_of="article",a.id=722862,a.title="Hexagons and Beyond: Responsive Grid Patterns, Sans Media Queries",a.description='Since the rise of Flexbox and CSS Grid, everyone is claming the same: "float is dead!", "stop using f...',a.readable_publish_date="Jun 9 '21",a.slug="hexagons-and-beyond-responsive-grid-patterns-sans-media-queries-1nb4",a.path="/this-is-learning/hexagons-and-beyond-responsive-grid-patterns-sans-media-queries-1nb4",a.url="https://dev.to/this-is-learning/hexagons-and-beyond-responsive-grid-patterns-sans-media-queries-1nb4",a.comments_count=11,a.public_reactions_count=89,a.collection_id=s,a.published_timestamp=n,a.positive_reactions_count=89,a.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--eRapv-Zr--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0pa111ja39j0eni3da6.png",a.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s---b5jMYno--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0pa111ja39j0eni3da6.png",a.canonical_url="https://css-tricks.com/hexagons-and-beyond-flexible-responsive-grid-patterns-sans-media-queries/",a.created_at="2021-06-09T11:01:18Z",a.edited_at="2021-06-09T14:14:11Z",a.crossposted_at=s,a.published_at=n,a.last_comment_at="2022-02-14T22:42:49Z",a.reading_time_minutes=18,a.tag_list="css, html, webdev, tutorial",a.tags=["css","html","webdev","tutorial"],a.body_html='<p>Since the rise of Flexbox and CSS Grid, everyone is claming the same: "float is dead!", "stop using float!" but I\'m here to resurrect our old friend float to create complex and responsive layouts that you cannot achieve using flexbox and CSS grid. All this without any single media query.</p>\n\n<p>I know, it\'s hard to believe. So let\'s start with a working demo:</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/zYoZBOy?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>This is a fully responsive hexagon grid made without media queries, JavaScript, or a ton of hacky CSS. Resize the demo screen and see the magic. In addition to being responsive, the grid also scales. For example, we can chuck more hexagons in there by adding more divs, and control both the sizing and spacing using CSS variables.</p>\n\n<p>Cool, right? And this is only one example among many grids we will build in the same manner.</p>\n\n<p><sub>This article is a generic version of a previous one where I only talked about hexagon shapes: <a href="https://dev.to/afif/responsive-hexagon-grid-without-media-query-57g7">https://dev.to/afif/responsive-hexagon-grid-without-media-query-57g7</a></sub></p>\n\n\n<hr>\n\n<h2>\n  <a name="making-a-grid-of-hexagons" href="#making-a-grid-of-hexagons">\n  </a>\n  Making a grid of hexagons\n</h2>\n\n<p>First, we create our hexagon shape. This task is fairly easy using <code>clip-path</code>. We will consider a variable <code>S</code> that will define the dimension of our element. Bennett Feely\'s <a href="https://bennettfeely.com/clippy/">Clippy</a> is a great online generator for clip paths.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--lWe56Si2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/hex-clip-path.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--lWe56Si2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/hex-clip-path.png" alt="Hexagon shape" loading="lazy"></a></p>\n\n<p>Each hexagon is an <code>inline-block</code> element. The markup can go something like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>\n    <span class="nt">&lt;div&gt;&lt;/div&gt;</span>\n    <span class="nt">&lt;div&gt;&lt;/div&gt;</span>\n    <span class="nt">&lt;div&gt;&lt;/div&gt;</span>\n    <span class="c">&lt;!--etc. --&gt;</span>\n  <span class="nt">&lt;/div&gt;</span>\n<span class="nt">&lt;/div&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>…and the CSS:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span> <span class="c">/* we will talk about this later ... */</span>\n  <span class="py">--s</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>  <span class="c">/* size  */</span>\n  <span class="py">--m</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>   <span class="c">/* margin */</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="p">{</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span> <span class="c">/* disable white space between inline block element */</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="nt">div</span> <span class="p">{</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">);</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">);</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">1.1547</span><span class="p">);</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="n">initial</span><span class="p">;</span> <span class="c">/* we reset the font-size if we want to add some content */</span>\n  <span class="nl">clip-path</span><span class="p">:</span> <span class="n">polygon</span><span class="p">(</span><span class="m">0%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">0%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">100%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">0%</span><span class="p">);</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Nothing complex so far. We have a main element that holds a container which, in turn, holds the hexagons. Since we are dealing with <code>inline-block</code>, we need to fight the common white space issue (using the <code>font-size</code> trick) and we consider some margin (defined with the variable <code>M</code>) to control the space.</p>\n\n<p>Here’s the result so far:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0A6Mf8XK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/CefrNYpk.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0A6Mf8XK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/CefrNYpk.png" alt="" loading="lazy"></a></p>\n\n<p>Every other row needs some negative offset so the rows overlap rather than stack directly on top of each other. That offset will be equal to 25% of the element height (see Figure 1). We apply that offset to <code>margin-bottom</code> to get the following:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.container</span> <span class="nt">div</span> <span class="p">{</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">);</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">);</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">1.1547</span><span class="p">);</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="n">initial</span><span class="p">;</span>\n  <span class="nl">clip-path</span><span class="p">:</span> <span class="n">polygon</span><span class="p">(</span><span class="m">0%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">0%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">100%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">0%</span><span class="p">);</span>\n  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">0.2886</span><span class="p">);</span> <span class="c">/* some negative margin to create overlap */</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>…and the result becomes:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--vsF7rvXt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619908434242_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--vsF7rvXt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619908434242_image.png" alt="" loading="lazy"></a></p>\n\n<p>Now the real trick is how we can shift the second row to get a perfect hexagon grid. We\'ve already scrunched things to the point where the rows overlap each other vertically, but what we need is to push every other row toward the right so the hexagons stagger rather than overlap. Here\'s where <code>float</code> and <code>shape-outside</code> come into play.</p>\n\n<p>Did you wonder why we have a <code>.main</code> element wrapping our container and having <code>display: flex</code> ? That <code>div</code> is also a part of the trick. In a <a href="https://dev.to/afif/float-an-element-to-the-bottom-corner-342n">previous article</a>, I used float and I needed that flexbox container in order to be able to use <code>height: 100%</code>. I will be doing the same thing here.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>\n  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">));</span>\n  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>I am using the <code>container::before</code> pseudo-element to create a float element that take up all the height at the left of the grid, and that has a width equal to half a hexagon (plus its margin). We get the following result:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--2lNYVg6C--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/PTuQEwm8.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--2lNYVg6C--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/PTuQEwm8.png" alt="" loading="lazy"></a></p>\n\n<p>Now, we can reach for <code>shape-outside</code>. Let\'s take a quick refresher on what it does:</p>\n\n<blockquote>\n<p>The <code>shape-outside</code> CSS property defines a shape—which may be non-rectangular—around which adjacent <strong>inline content</strong> should wrap. By default, inline content wraps around its margin box; shape-outside provides a way to customize this wrapping, making it possible to wrap text around complex objects rather than simple boxes. <sup><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/shape-outside">ref</a></sup></p>\n</blockquote>\n\n<p>Notice "inline content" in the definition. This explains exactly why the hexagons need to be <code>inline-block</code> elements. But to understand what kind of shape we need, let\'s zoom into the pattern.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--aiuhqz9W--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910028475_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--aiuhqz9W--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910028475_image.png" alt="" loading="lazy"></a></p>\n\n<p>What\'s cool about <code>shape-outside</code> is that it actually works with gradients. But what kind of gradient fits our situation?</p>\n\n<p>If, for example, we have 10 rows of hexagons, we only need to shift means every even row. Seen differently, we need to shift every second row so we need a kind of repetition — perfect for a repeating gradient!</p>\n\n<p>We\'ll create a gradient with two colors:</p>\n\n<ul>\n<li>A transparent one to create the “free space” while allowing the first row to stay in place (illustrated by the blue arrow above).</li>\n<li>An opaque color to shift the second row to the right so the hexagons aren’t directly stacked on top of one another (illustrated by the green arrow).</li>\n</ul>\n\n<p>Our <code>shape-outside</code> value will look like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nt">shape-outside</span><span class="o">:</span> <span class="nt">repeating-linear-gradient</span><span class="o">(</span><span class="err">#0000</span> <span class="err">0</span> <span class="nt">A</span><span class="o">,</span> <span class="err">#000</span> <span class="err">0</span> <span class="nt">B</span><span class="o">);</span> <span class="c">/* #0000 = transparent */</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now, let\'s find the value of <code>A</code> and <code>B</code>. <code>B</code> will simply be equal to the height of two rows since our logic need to repeat each two rows.</p>\n\n<p>The height of two rows is equal to the height of two hexagons (including their margins), minus twice the overlap (<code>2*Height + 4*M - 2*Height*25% = 1.5*Height + 4*M</code>). Or, expressed in CSS with <code>calc()</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nt">calc</span><span class="o">(</span><span class="err">1</span><span class="o">.</span><span class="err">732</span> <span class="o">*</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--s</span><span class="o">)</span> <span class="o">+</span> <span class="err">4</span> <span class="o">*</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--m</span><span class="o">))</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>That\'s a lot! So, let\'s hold all of this in a CSS custom property, <code>F</code>.</p>\n\n<p>The value of <code>A</code> (defined by the blue arrow in the previous figure) needs to be at least equal to the size of one hexagon, but it can also be bigger. In order to push the second row over to the right, we need few pixel of opaque color so <code>A</code> can simply be equal to <code>B - Xpx</code>, where <code>X</code> is a small value.</p>\n\n<p>We end up with something like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nt">shape-outside</span><span class="o">:</span> <span class="nt">repeating-linear-gradient</span><span class="o">(</span><span class="err">#0000</span> <span class="err">0</span> <span class="nt">calc</span><span class="o">(</span><span class="nt">var</span><span class="o">(</span><span class="nt">--f</span><span class="o">)</span> <span class="nt">-</span> <span class="err">3</span><span class="nt">px</span><span class="o">),</span><span class="err">#000</span> <span class="err">0</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--f</span><span class="o">));</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>And the following result:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--nqF2D4j3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910864415_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--nqF2D4j3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910864415_image.png" alt="" loading="lazy"></a></p>\n\n<p>See that? Our repeating linear gradient\'s shape is pushing every other row to the right by one half the width of a hexagon to offset the pattern.</p>\n\n<p>Let\'s put that all together:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>\n  <span class="nl">display</span><span class="p">:</span><span class="n">flex</span><span class="p">;</span>\n  <span class="py">--s</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>  <span class="c">/* size  */</span>\n  <span class="py">--m</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>    <span class="c">/* margin */</span>\n  <span class="py">--f</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">1.732</span> <span class="err">+</span> <span class="m">4</span> <span class="err">*</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="m">1px</span><span class="p">);</span> \n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="p">{</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span> <span class="c">/* disable white space between inline block element */</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="nt">div</span> <span class="p">{</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">);</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">);</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">1.1547</span><span class="p">);</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>\n  <span class="nl">font-size</span><span class="p">:</span><span class="n">initial</span><span class="p">;</span>\n  <span class="nl">clip-path</span><span class="p">:</span> <span class="n">polygon</span><span class="p">(</span><span class="m">0%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">0%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">100%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">75%</span><span class="p">,</span> <span class="m">100%</span> <span class="m">25%</span><span class="p">,</span> <span class="m">50%</span> <span class="m">0%</span><span class="p">);</span>\n  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">*</span> <span class="m">0.2885</span><span class="p">);</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>\n  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="p">/</span> <span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">));</span>\n  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">120%</span><span class="p">;</span> \n  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">repeating-linear-gradient</span><span class="p">(</span><span class="m">#0000</span> <span class="m">0</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span> <span class="n">-</span> <span class="m">3px</span><span class="p">),</span> <span class="m">#000</span> <span class="m">0</span> <span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">));</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>That\'s it! With no more than 15 CSS declarations, we have a responsive grid that fit nicely into all the screen sizes and we can easily adjust things by simply controling two variables.</p>\n\n<p>You may have noticed that I am adding <code>-1px</code> to the variable <code>F</code>. Since we are dealing with calculation that involve decimals, the rounding may give us bad results. To avoid this we add or remove few pixels. I am also using <code>120%</code> instead of <code>100%</code> for the height of the floated element for similar reasons. There is no particular logic with theses values; we simply adjust them to make sure to cover most of the cases without any misaligning our shapes.</p>\n\n\n<hr>\n\n<h2>\n  <a name="want-more-shapes" href="#want-more-shapes">\n  </a>\n  Want more shapes?\n</h2>\n\n<p>We can do more than hexagons with this approach! Let’s create a "rhombus" grid instead. Again, we start with our <code>clip-path</code> to create the shape:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ZhkvsxUN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/rhombus-clip-path.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ZhkvsxUN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/rhombus-clip-path.png" alt="Rhombus clip-path shape" loading="lazy"></a></p>\n\n<p>The code is basically the same. What\'s changing are the calculations and values. Find below a table that will illustrate the changes.</p>\n\n<div class="table-wrapper-paragraph"><table>\n<thead>\n<tr>\n<th></th>\n<th>Hexagon grid</th>\n<th>Rhombus grid</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>height</code></td>\n<td><code>calc(var(--s)*1.1547)</code></td>\n<td><code>var(--s)</code></td>\n</tr>\n<tr>\n<td><code>clip-path</code></td>\n<td><code>polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%)</code></td>\n<td><code>polygon(50% 0, 100% 50%, 50% 100%, 0 50%)</code></td>\n</tr>\n<tr>\n<td><code>margin-bottom</code></td>\n<td><code>calc(var(--m) - var(--s)*0.2885)</code></td>\n<td><code>calc(var(--m) - var(--s)*0.5)</code></td>\n</tr>\n<tr>\n<td><code>--f</code></td>\n<td><code>calc(var(--s)*1.7324 + 4*var(--m))</code></td>\n<td><code>calc(var(--s) + 4*var(--m))</code></td>\n</tr>\n</tbody>\n</table></div>\n\n<p>And we’re done! A mere four changes to our code gets us a completely new grid but with a different shape.</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/MWbpjvw?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n\n<hr>\n\n<h2>\n  <a name="just-how-flexible-is-this" href="#just-how-flexible-is-this">\n  </a>\n  Just how flexible is this?\n</h2>\n\n<p>We saw how we were able to make the hexagon and rhombus grids using the exact same code structure, but different calculations. </p>\n\n<p>Let me blow your mind with another idea: What about making that calculation a variable so that we can easily switch between different grids without changing the code? We can certainly do that!</p>\n\n<p>We\'ll use an octagonal shape because it\'s more of a generic shape from that we can use to create other shapes (a hexagon, a rhombus, a rectangle, etc.) simply by changing a few values.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Jb1lb-pA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/octagon-clip-path.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Jb1lb-pA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/octagon-clip-path.png" alt="Octagon shape clip-path" loading="lazy"></a></p>\n\n<p>Our octagon is defined with four variables:</p>\n\n<ul>\n<li>\n<code>S</code>: the width.</li>\n<li>\n<code>R</code>: the ratio that will help us defines the height based on the width.</li>\n<li>\n<code>hc</code> and <code>vc</code> : both of these will control our <code>clip-path</code> values and the shape we want to get. <code>hc</code> will be based on the width while <code>vc</code> on the height</li>\n</ul>\n\n<p>I know it looks hefty, but the <code>clip-path</code> is defined using eight points (like shown in the figure). Adding some CSS variables, we get this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nt">clip-path</span><span class="o">:</span> <span class="nt">polygon</span><span class="o">(</span>\n   <span class="nt">var</span><span class="o">(</span><span class="nt">--hc</span><span class="o">)</span> <span class="err">0</span><span class="o">,</span> <span class="nt">calc</span><span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--hc</span><span class="o">))</span> <span class="err">0</span><span class="o">,</span> <span class="c">/* 2 points at the top */</span>\n   <span class="err">100</span><span class="o">%</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--vc</span><span class="o">),</span><span class="err">100</span><span class="o">%</span> <span class="nt">calc</span><span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--vc</span><span class="o">)),</span> <span class="c">/* 2 points at the right */</span>\n   <span class="nt">calc</span><span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--hc</span><span class="o">))</span> <span class="err">100</span><span class="o">%,</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--hc</span><span class="o">)</span> <span class="err">100</span><span class="o">%,</span> <span class="c">/* 2 points at the bottom */</span>\n   <span class="err">0</span> <span class="nt">calc</span><span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--vc</span><span class="o">)),</span><span class="err">0</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--vc</span><span class="o">)</span> <span class="c">/* 2 points at the left */</span>\n<span class="o">);</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This is what we\'re aiming for:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zYxWTRRz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619961411571_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zYxWTRRz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619961411571_image.png" alt="" loading="lazy"></a></p>\n\n<p>Let’s zoom in to identify the different values:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--LCVvFzqb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619963939847_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--LCVvFzqb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619963939847_image.png" alt="" loading="lazy"></a></p>\n\n<p>The overlap between each row (illustrated by the red arrow) can be expressed using the vc variable which gives us a <code>margin-bottom</code> equal to <code>M - vc</code> (where <code>M</code> is our margin).</p>\n\n<p>In addition to the margin we applied between our element, we also need an additional horizontal margin (illustrated by the yellow arrow) equal to <code>S - 2*hc</code>. Let\'s define another variable for the horizontal margin (<code>MH</code>) that is equal to <code>M + (S - 2*hc)/2</code>.</p>\n\n<p>The height of two rows is equal to twice the size of a shape (plus the margin), minus twice the overlap, or <code>2*(S + 2*M) - 2*vc</code>.</p>\n\n<p>Let\'s update our table of values to see how we\'re calculating things between the different grids:</p>\n\n<div class="table-wrapper-paragraph"><table>\n<thead>\n<tr>\n<th></th>\n<th>Hexagon grid</th>\n<th>Rhombus grid</th>\n<th>Octagon grid</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>height</code></td>\n<td><code>calc(var(--s)*1.1547)</code></td>\n<td><code>var(--s)</code></td>\n<td><code>calc(var(--s)*var(--r)))</code></td>\n</tr>\n<tr>\n<td><code>clip-path</code></td>\n<td><code>polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%)</code></td>\n<td><code>polygon(50% 0, 100% 50%, 50% 100%, 0 50%)</code></td>\n<td><code>polygon(var(--hc) 0, calc(100% - var(--hc)) 0,100% var(--vc),100% calc(100% - var(--vc)), calc(100% - var(--hc)) 100%,var(--hc) 100%,0 calc(100% - var(--vc)),0 var(--vc))</code></td>\n</tr>\n<tr>\n<td><code>--mh</code></td>\n<td>–</td>\n<td>–</td>\n<td><code>calc(var(--m) + (var(--s) - 2*var(--hc))/2)</code></td>\n</tr>\n<tr>\n<td><code>margin</code></td>\n<td><code>var(--m)</code></td>\n<td><code>var(--m)</code></td>\n<td><code>var(--m) var(--mh)</code></td>\n</tr>\n<tr>\n<td><code>margin-bottom</code></td>\n<td><code>calc(var(--m) - var(--s)*0.2885)</code></td>\n<td><code>calc(var(--m) - var(--s)*0.5)</code></td>\n<td><code>calc(var(--m) - var(--vc))</code></td>\n</tr>\n<tr>\n<td><code>--f</code></td>\n<td><code>calc(var(--s)*1.7324 + 4*var(--m))</code></td>\n<td><code>calc(var(--s) + 4*var(--m))</code></td>\n<td><code>calc(2*var(--s) + 4*var(--m) - 2*var(--vc))</code></td>\n</tr>\n</tbody>\n</table></div>\n\n<p>Alright, let’s update our CSS with those adjustments:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>\n  <span class="py">--s</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>  <span class="c">/* size  */</span>\n  <span class="py">--r</span><span class="p">:</span> <span class="m">1</span><span class="p">;</span> <span class="c">/* ratio */</span>\n\n  <span class="c">/* clip-path parameter */</span>\n  <span class="py">--hc</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span> \n  <span class="py">--vc</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>\n\n  <span class="py">--m</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span> <span class="c">/* vertical margin */</span>\n  <span class="py">--mh</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="err">+</span> <span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="n">-</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--hc</span><span class="p">))/</span><span class="m">2</span><span class="p">);</span> <span class="c">/* horizontal margin */</span>\n  <span class="py">--f</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">4</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--vc</span><span class="p">)</span> <span class="n">-</span> <span class="m">2px</span><span class="p">);</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="p">{</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span> <span class="c">/* disable white space between inline block element */</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="nt">div</span> <span class="p">{</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">);</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">);</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--r</span><span class="p">));</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="n">initial</span><span class="p">;</span>\n  <span class="nl">clip-path</span><span class="p">:</span> <span class="n">polygon</span><span class="p">(</span> <span class="p">...</span> <span class="p">);</span>\n  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--m</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--vc</span><span class="p">));</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>\n  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">));</span>\n  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">120%</span><span class="p">;</span> \n  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">repeating-linear-gradient</span><span class="p">(</span><span class="m">#0000</span> <span class="m">0</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span> <span class="n">-</span> <span class="m">3px</span><span class="p">),</span><span class="m">#000</span> <span class="m">0</span> <span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">));</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>As we can see, the code structure is the same. We simply added more variable to control the shape and extend the <code>margin</code> property.</p>\n\n<p>And below a working example. Adjust the different variables to control the shape while having a fully responsive grid:</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/MWpExVW?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>An interactive demo, you say? You bet!</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/NWpaJMJ?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>To make things easier, I am expressing the <code>vc</code> and <code>hc</code> as percetange of the width and height so we can easily scale our elements without breaking the <code>clip-path</code></p>\n\n<p>From the above we can easily get the initial hexagonal grid:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--z-KbJ-xA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967785492_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--z-KbJ-xA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967785492_image.png" alt="" loading="lazy"></a></p>\n\n<p>The rhombus grid:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--6s4UbiqA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967852929_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--6s4UbiqA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967852929_image.png" alt="" loading="lazy"></a></p>\n\n<p>And yet another hexagon grid:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--TZNf-Uau--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/vm8u1y_Y.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--TZNf-Uau--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/vm8u1y_Y.png" alt="" loading="lazy"></a></p>\n\n<p>A masonry-like grid:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--sUGpWNxm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968042870_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--sUGpWNxm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968042870_image.png" alt="" loading="lazy"></a></p>\n\n<p>And a checkerboard while we are at it:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oM1VzgIC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968097777_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oM1VzgIC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968097777_image.png" alt="" loading="lazy"></a></p>\n\n<p>A lot of possibilities to create a responsive grid with any kind of shape! All we have to do is adjust few variables.</p>\n\n\n<hr>\n\n<h3>\n  <a name="fixing-the-alignment" href="#fixing-the-alignment">\n  </a>\n  Fixing the alignment\n</h3>\n\n<p>Let\'s try to control the alignment of our shapes. Since we are dealing with <code>inline-block</code> elements, we\'re dealing with default left alignment and some empty space at the end, depending on viewport width.</p>\n\n<p>Notice that we alternate between two kind of grids based on the screen width: </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kQdj3TZu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620174099369_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kQdj3TZu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620174099369_image.png" alt="" loading="lazy"></a></p>\n\n<ul>\n<li>Grid #1: A different number of items per row (N, N-1,N, N-1, etc.)</li>\n<li>Grid #2: The same number of items per row (N, N, N, N, etc.)</li>\n</ul>\n\n<p>It would be good to always have one of the grid all the time (either #1 or #2) and center everything so that the free space is equally divided on both sides.</p>\n\n<p>In order to get the first grid in the figure above, the container width needs to be a multiplier of the size of one shape, plus its margin, or <code>N*(S + 2*MH)</code>, where <code>N</code> is an integer value.</p>\n\n<p>This may sound impossible with CSS, but it\'s indeed possible. I made it using CSS grid:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>\n  <span class="py">grid-template-columns</span><span class="p">:</span> <span class="nb">repeat</span><span class="p">(</span><span class="n">auto-fit</span><span class="p">,</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)));</span>\n  <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="p">{</span>\n  <span class="nl">grid-column</span><span class="p">:</span> <span class="m">1</span><span class="p">/</span><span class="m">-1</span><span class="p">;</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><code>.main</code> is now a grid container. Using <code>grid-template-columns</code>, I define the column width (as previously explained) and use the <code>auto-fit</code> value to get as many columns as possible into the available space. Then, the <code>.container</code> spans all of the grid columns using <code>1/-1</code> — which means that the width of our container will be a mutiplier of one column size.</p>\n\n<p>All it takes to center things is <code>justify-content: center</code>.</p>\n\n<p>Yes, CSS is magic!</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/poeWYqv?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>Resize the demo and notice that not only do we have the first grid from the figure, but everything is perfectly centered as well.</p>\n\n<p>But wait, we removed <code>display: flex</code> and swapped in <code>display: grid</code>… so how is the percentage-based height of the float still working? I had said that using a flex container was the key for that, no?</p>\n\n<p>Well, turns out CSS grid sports that feature too. From <a href="https://www.w3.org/TR/css-grid-1/#algo-overview">the specification</a>:</p>\n\n<blockquote>\n<p>Once the size of each grid area is thus established, the grid items are laid out into their respective containing blocks. The grid area’s width and height are considered definite for this purpose.<br>\nNote: Since formulas calculated using only definite sizes, such as the stretch fit formula, are also definite, the size of a grid item which is stretched is also considered definite.</p>\n</blockquote>\n\n<p>A grid item has a <code>stretch</code> alignment by default, so its height is definite, meaning using a percentage as a height inside it is perfectly valid.</p>\n\n<p>Let\'s say we instead want the second grid in the figure — we simply add an extra column with a width equal to half the width of the other columns:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>\n  <span class="py">grid-template-columns</span><span class="p">:</span> <span class="nb">repeat</span><span class="p">(</span><span class="n">auto-fit</span><span class="p">,</span><span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)))</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">));</span>\n  <span class="nl">justify-content</span> <span class="p">:</span><span class="nb">center</span><span class="p">;</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/rNyGRbM?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>Now, in addition to a fully responsive grid that is flexible enough to take custom shapes, everything is perfectly centred!</p>\n\n\n<hr>\n\n<h2>\n  <a name="wait-one-more-a-pyramidal-grid" href="#wait-one-more-a-pyramidal-grid">\n  </a>\n  Wait, one more: a pyramidal grid\n</h2>\n\n<p>Let\'s take everything we\'ve learned and build another amazing grid. This time, we’ll transform the grid we just made into a pyramidal one.</p>\n\n<p>Consider that, unlike the grid we\'ve made so far, the number of elements is important especially for the responsive part. It’s required to know the number of elements and more precesily the number of rows.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--7RW0y9Nk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/different-pyramid.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--7RW0y9Nk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/different-pyramid.png" alt="" loading="lazy"></a></p>\n\n<p>It doesn\'t mean we need a bunch of hardcoded values; rather we use an extra variable to adjust things based on the number of rows.</p>\n\n<p>The logic is based on the number of rows because different numbers of elements may give us the same number of rows. For example, there are five rows when we have between 11 and 15 elements, even if the last row is not fully occupied. Having between 16 and 21 elements gives us six rows, and so on. The number of rows is our new variable.</p>\n\n<p>Before digging into the geometry and the math here is a working demo:</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/gOmjZOO?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>Notice that most of the code is the same as what we’ve done in the previous examples. So let\'s focus on the new properties that we’ve added:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>\n  <span class="py">--nr</span><span class="p">:</span> <span class="m">5</span><span class="p">;</span>  <span class="c">/* number of rows */</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="p">{</span>\n  <span class="nl">max-width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--nr</span><span class="p">)</span><span class="err">*</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)));</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span><span class="nd">::before</span> <span class="o">,</span>\n<span class="nc">.container</span> <span class="nt">i</span> <span class="p">{</span>\n  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">50%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span><span class="p">);</span>\n  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span><span class="err">*</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--nr</span><span class="p">)</span> <span class="n">-</span> <span class="m">1</span><span class="p">)/</span><span class="m">2</span><span class="p">);</span>\n  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span> <span class="nb">right</span><span class="p">,</span> <span class="m">#000</span> <span class="m">50%</span><span class="p">,</span> <span class="m">#0000</span> <span class="m">0</span><span class="p">);</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="nt">i</span> <span class="p">{</span>\n  <span class="nl">float</span><span class="p">:</span><span class="nb">right</span><span class="p">;</span>\n  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span> <span class="nb">left</span><span class="p">,</span> <span class="m">#000</span> <span class="m">50%</span><span class="p">,</span> <span class="m">#0000</span> <span class="m">0</span><span class="p">);</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><code>NR</code> is our variable for the number of rows. The width of the container needs to be equal to the last row of the pyramid to make sure it hold all the elements. If you check the previous figure, you\'ll see that the number of the items contained in the last row is simply equal to the number of rows, which means the formula is: <code>NR* (S + 2*MH)</code>.</p>\n\n<p>You may have also noticed that we also added an <code>&lt;i&gt;</code> element in there. We did that because we need two floating elements where we will apply <code>shape-outside</code>.</p>\n\n<p>To understand why we need two floating elements let\'s see what is done behind the scenes:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--AzCdlFuA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/behind-the-scenes.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--AzCdlFuA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/behind-the-scenes.png" alt="" loading="lazy"></a></p>\n\n<p>The blue elements are our floating elements. Each one is having a width equal to half the container size, minus half a shape size, plus margin. The height is equal to four rows in our case, and to <code>NR - 1</code> in a more generic case. Earlier, we defined the height of two rows, <code>F</code>, so the height of one row is <code>F/2</code>. That\'s how we landed at <code>height: calc(var(--f)*(var(--nr) - 1)/2</code>.</p>\n\n<p>Now that we have the size of our elements, we need to apply a gradient to our shape-outside.</p>\n\n<p>The purple coloration in the figure above is the restricted area for our elements (it need to be an opaque color). The remaining area is the free space where the elements can flow (it need to be a transparent color). This can be done using a diagonal gradient:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nt">shape-outside</span><span class="o">:</span> <span class="nt">linear-gradient</span><span class="o">(</span><span class="nt">to</span> <span class="nt">bottom</span> <span class="nt">right</span><span class="o">,</span> <span class="err">#000</span> <span class="err">50</span><span class="o">%,</span> <span class="err">#0000</span> <span class="err">0</span><span class="o">);</span> \n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>We simply change right with left for the other floated element. You have probably noticed that this is not responsive. In fact, go ahead and adjust the viewport width of the demo and see just how unresponsive this is.</p>\n\n<p>We have a couple of options to get responsive:</p>\n\n<ol>\n<li>We can fall back to the first grid when the container width is smaller than the viewport width. It\'s a bit tricky to code, but it allows us to preserve the same size for our elements.</li>\n<li>We can reduce the size of our elements in order to keep the pyramidal grid. This is easier to code using the percentage-based value trick, but that could result in super tiny elements on smaller screen sizes.</li>\n</ol>\n\n<p>Let\'s go with the first solution. We like a good challenge, right?</p>\n\n<p>To get the pyramidal grid, we needed two floated element. The initial grid needed just one floated element. Luckily, our structure allows us to have three floated elements without needing to add more elements to the markup, thanks to pseudo-elements. We will use <code>container::before</code>, <code>i::before</code>, <code>i::after</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="c">/* Same as before... */</span>\n\n<span class="c">/* The initial grid */</span>\n<span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>\n  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">));</span>\n  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">120%</span><span class="p">;</span> \n  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">repeating-linear-gradient</span><span class="p">(</span><span class="m">#0000</span> <span class="m">0</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span> <span class="n">-</span> <span class="m">3px</span><span class="p">),</span><span class="m">#000</span> <span class="m">0</span> <span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">));</span>\n<span class="p">}</span>\n\n<span class="c">/* The pyramidal grid */</span>\n<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::before</span> <span class="o">,</span>\n<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::after</span> <span class="p">{</span>\n  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">50%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span><span class="p">);</span>\n  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--f</span><span class="p">)</span><span class="err">*</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--nr</span><span class="p">)</span> <span class="n">-</span> <span class="m">1</span><span class="p">)/</span><span class="m">2</span><span class="p">);</span>\n  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span> <span class="nb">right</span><span class="p">,</span><span class="m">#000</span> <span class="m">50%</span><span class="p">,</span><span class="m">#0000</span> <span class="m">0</span><span class="p">);</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::after</span> <span class="p">{</span>\n  <span class="nl">float</span><span class="p">:</span><span class="nb">right</span><span class="p">;</span>\n  <span class="py">shape-outside</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span> <span class="nb">left</span><span class="p">,</span><span class="m">#000</span> <span class="m">50%</span><span class="p">,</span><span class="m">#0000</span> <span class="m">0</span><span class="p">);</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now we need a trick that lets us use either the first floated element or the other two, but not all of them at the same time. This condition should be based on the width of our container:</p>\n\n<ul>\n<li>If the container width is bigger than the width of the last row, we can have our pyramid and use the floated elements inside of <code>&lt;i&gt;</code>.</li>\n<li>If the container width is smaller than the width of the last row, we switch to the other grid and use the first floated element.</li>\n</ul>\n\n<p>We can use <code>clamp()</code> for this! It\'s sort of like a conditional function that sets a minimum and maximum range and, within that range, we provide it an "ideal" value to use between those points. This way, we can "switch" between grids using our formulas as clamped values, and still avoid using media queries.</p>\n\n<p>Our code will look like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.main</span> <span class="p">{</span>\n  <span class="c">/* the other variables won\'t change*/</span>\n  <span class="py">--lw</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--nr</span><span class="p">)</span><span class="err">*</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)</span> <span class="err">+</span> <span class="m">2</span><span class="err">*</span><span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)));</span> <span class="c">/* width of last row */</span>\n<span class="p">}</span>\n\n<span class="nc">.container</span> <span class="p">{</span>\n  <span class="nl">max-width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--lw</span><span class="p">);</span>\n<span class="p">}</span>\n\n<span class="c">/* The initial grid */</span>\n<span class="nc">.container</span><span class="nd">::before</span> <span class="p">{</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">0px</span><span class="p">,</span> <span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--lw</span><span class="p">)</span> <span class="n">-</span> <span class="m">100%</span><span class="p">)</span><span class="err">*</span><span class="m">1000</span><span class="p">,</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span> <span class="err">+</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)));</span>\n<span class="p">}</span>\n\n<span class="c">/* The pyramidal grid */</span>\n<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::before</span><span class="o">,</span>\n<span class="nc">.container</span> <span class="nt">i</span><span class="nd">::after</span> <span class="p">{</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">0px</span><span class="p">,</span> <span class="p">(</span><span class="m">100%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--lw</span><span class="p">)</span> <span class="err">+</span> <span class="m">1px</span><span class="p">)</span><span class="err">*</span><span class="m">1000</span><span class="p">,</span> <span class="n">calc</span><span class="p">(</span><span class="m">50%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--mh</span><span class="p">)</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--s</span><span class="p">)/</span><span class="m">2</span><span class="p">));</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>On larger screens, the width of the container (<code>LW</code>) is now equal to its <code>max-width</code>, so <code>100% == LW</code>. That means that the width of <code>.container::before</code> is equal to <code>0px</code> (and results in this floated element becoming disabled).</p>\n\n<p>For the other floating elements, we clamp the width:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nt">width</span><span class="o">:</span> <span class="nt">clamp</span><span class="o">(</span><span class="err">0</span><span class="nt">px</span><span class="o">,</span> <span class="o">(</span><span class="err">100</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--lw</span><span class="o">)</span> <span class="o">+</span> <span class="err">1</span><span class="nt">px</span><span class="o">)*</span><span class="err">1000</span><span class="o">,</span> <span class="nt">calc</span><span class="o">(</span><span class="err">50</span><span class="o">%</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--mh</span><span class="o">)</span> <span class="nt">-</span> <span class="nt">var</span><span class="o">(</span><span class="nt">--s</span><span class="o">)/</span><span class="err">2</span><span class="o">));</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>…where the middle value <code>((100% - LW + 1px)*1000)</code> is equal to <code>(0 + 1px)*1000 = 1000px</code> (an intentionally large, but arbitrary value). It gets clamped to <code>calc(50% - var(--mh) - var(--s)/2)</code>. In other words, these floated elements are enabled with the correct width (the one we defined previously)</p>\n\n<p>Voilà! we have a pyramidal shape on large screen.</p>\n\n<p>Now, when the container width get smaller, <code>LW</code> is going to be greater than <code>100%</code>. So, <code>(LW - 100%)</code> will be positive. Multiplied by a big value, it\'s clamped to <code>calc(var(--s)/2 + var(--mh))</code>, which enables the first floated element. For the other float elements, <code>(100% - LW + 1px)</code> resolves to a negative value and is clamped to <code>0px</code>, which disables the float elements.</p>\n\n<p>Resize the below demo and see how we switch between both grids</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/zYZEXRp?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>Let\'s try adding more elements:</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/zYZEXaR?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>See that? Things are scaling perfectly. We can also combine this with the CSS grid alignment trick we used earlier:</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/WNpZWaG?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>Do you think “float” is such a bad thing now?</p>\n\n<p>Want invert the pyramid?</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1x3i9f0S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620991346257_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1x3i9f0S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620991346257_image.png" alt="" loading="lazy"></a></p>\n\n<p>Like illustrated with the above figure, two changes to the previous code can invert our pyramid:</p>\n\n<ul>\n<li>I change the direction of the gradient from <code>to bottom left|right</code> to <code>to top left|right</code>,</li>\n<li>I add a <code>margin-top</code> equal to the height of one row.</li>\n</ul>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/MWpEdJG?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>And, hey, we can swap between both pyramid easily:</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/bGqoyrr?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n<p>Isn\'t this beautiful? We have a responsive pyramidal grid with custom shapes that we can easily invert and that fallback to another responsive grid on small screen while everything is perfectly centred. All this without a single media query or JavaScript, but instead using the often overlooked float property.</p>\n\n<p>You will probably notice some missalignment in some particular cases. Yes, it\'s again some rounding issue related to the calculation we are doing and the fact that we are trying to make this generic with the interactive demos. To rectify this, we simply adjust few values manually (epsecially the percentage of the gradient) until we get back a perfect alignment.</p>\n\n\n<hr>\n\n<h2>\n  <a name="thats-a-float-wrap" href="#thats-a-float-wrap">\n  </a>\n  That\'s a <del>float</del> wrap!\n</h2>\n\n<p>There we have it: combining <code>float</code> with <code>shape-outside</code> can help us make complex, flexible and responsive layouts — long live float!</p>\n\n<p>The article ends here but this is only the beginning. I provided you with the layout and now you can easily put any content inside the divs, apply a background, shadows, animations, etc.</p>\n\n<p><iframe height="600" src="https://codepen.io/t_afif/embed/mdWBYqE?height=600&amp;default-tab=result&amp;embed-version=2" scrolling="no" frameborder="no" allowtransparency="true" loading="lazy" style="width: 100%;">\n</iframe>\n</p>\n\n',a.body_markdown="Since the rise of Flexbox and CSS Grid, everyone is claming the same: \"float is dead!\", \"stop using float!\" but I'm here to resurrect our old friend float to create complex and responsive layouts that you cannot achieve using flexbox and CSS grid. All this without any single media query.\n\nI know, it's hard to believe. So let's start with a working demo:\n\n{% codepen https://codepen.io/t_afif/pen/zYoZBOy %}\n\nThis is a fully responsive hexagon grid made without media queries, JavaScript, or a ton of hacky CSS. Resize the demo screen and see the magic. In addition to being responsive, the grid also scales. For example, we can chuck more hexagons in there by adding more divs, and control both the sizing and spacing using CSS variables.\n\nCool, right? And this is only one example among many grids we will build in the same manner.\n\n<sub>This article is a generic version of a previous one where I only talked about hexagon shapes: https://dev.to/afif/responsive-hexagon-grid-without-media-query-57g7</sub>\n\n----\n\n## Making a grid of hexagons\n\nFirst, we create our hexagon shape. This task is fairly easy using `clip-path`. We will consider a variable `S` that will define the dimension of our element. Bennett Feely's [Clippy](https://bennettfeely.com/clippy/) is a great online generator for clip paths.\n\n![Hexagon shape](https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/hex-clip-path.png)\n\nEach hexagon is an `inline-block` element. The markup can go something like this:\n\n```html\n<div class=\"main\">\n  <div class=\"container\">\n    <div></div>\n    <div></div>\n    <div></div>\n    \x3c!--etc. --\x3e\n  </div>\n</div>\n```\n\n…and the CSS:\n\n```css\n.main {\n  display: flex; /* we will talk about this later ... */\n  --s: 100px;  /* size  */\n  --m: 4px;   /* margin */\n}\n\n.container {\n  font-size: 0; /* disable white space between inline block element */\n}\n\n.container div {\n  width: var(--s);\n  margin: var(--m);\n  height: calc(var(--s) * 1.1547);\n  display: inline-block;\n  font-size: initial; /* we reset the font-size if we want to add some content */\n  clip-path: polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%);\n}\n```\n\nNothing complex so far. We have a main element that holds a container which, in turn, holds the hexagons. Since we are dealing with `inline-block`, we need to fight the common white space issue (using the `font-size` trick) and we consider some margin (defined with the variable `M`) to control the space.\n\nHere’s the result so far:\n\n![](https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/CefrNYpk.png)\n\nEvery other row needs some negative offset so the rows overlap rather than stack directly on top of each other. That offset will be equal to 25% of the element height (see Figure 1). We apply that offset to `margin-bottom` to get the following:\n\n```css\n.container div {\n  width: var(--s);\n  margin: var(--m);\n  height: calc(var(--s) * 1.1547);\n  display: inline-block;\n  font-size: initial;\n  clip-path: polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%);\n  margin-bottom: calc(var(--m) - var(--s) * 0.2886); /* some negative margin to create overlap */\n}\n```\n\n…and the result becomes:\n\n![](https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619908434242_image.png)\n\nNow the real trick is how we can shift the second row to get a perfect hexagon grid. We've already scrunched things to the point where the rows overlap each other vertically, but what we need is to push every other row toward the right so the hexagons stagger rather than overlap. Here's where `float` and `shape-outside` come into play.\n\nDid you wonder why we have a `.main` element wrapping our container and having `display: flex` ? That `div` is also a part of the trick. In a [previous article](https://dev.to/afif/float-an-element-to-the-bottom-corner-342n), I used float and I needed that flexbox container in order to be able to use `height: 100%`. I will be doing the same thing here.\n\n```css\n.container::before {\n  content: \"\";\n  width: calc(var(--s)/2 + var(--m));\n  float: left;\n  height: 100%;\n}\n```\n\nI am using the `container::before` pseudo-element to create a float element that take up all the height at the left of the grid, and that has a width equal to half a hexagon (plus its margin). We get the following result:\n\n![](https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/PTuQEwm8.png)\n\nNow, we can reach for `shape-outside`. Let's take a quick refresher on what it does:\n\n>The `shape-outside` CSS property defines a shape—which may be non-rectangular—around which adjacent **inline content** should wrap. By default, inline content wraps around its margin box; shape-outside provides a way to customize this wrapping, making it possible to wrap text around complex objects rather than simple boxes. <sup>[ref](https://developer.mozilla.org/en-US/docs/Web/CSS/shape-outside)</sup>\n\nNotice \"inline content\" in the definition. This explains exactly why the hexagons need to be `inline-block` elements. But to understand what kind of shape we need, let's zoom into the pattern.\n\n![](https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910028475_image.png)\n\nWhat's cool about `shape-outside` is that it actually works with gradients. But what kind of gradient fits our situation?\n\nIf, for example, we have 10 rows of hexagons, we only need to shift means every even row. Seen differently, we need to shift every second row so we need a kind of repetition — perfect for a repeating gradient!\n\nWe'll create a gradient with two colors:\n\n* A transparent one to create the “free space” while allowing the first row to stay in place (illustrated by the blue arrow above).\n* An opaque color to shift the second row to the right so the hexagons aren’t directly stacked on top of one another (illustrated by the green arrow).\n\nOur `shape-outside` value will look like this:\n\n```css\nshape-outside: repeating-linear-gradient(#0000 0 A, #000 0 B); /* #0000 = transparent */\n```\n\nNow, let's find the value of `A` and `B`. `B` will simply be equal to the height of two rows since our logic need to repeat each two rows.\n\nThe height of two rows is equal to the height of two hexagons (including their margins), minus twice the overlap (`2*Height + 4*M - 2*Height*25% = 1.5*Height + 4*M`). Or, expressed in CSS with `calc()`:\n\n```css\ncalc(1.732 * var(--s) + 4 * var(--m))\n```\n\nThat's a lot! So, let's hold all of this in a CSS custom property, `F`.\n\nThe value of `A` (defined by the blue arrow in the previous figure) needs to be at least equal to the size of one hexagon, but it can also be bigger. In order to push the second row over to the right, we need few pixel of opaque color so `A` can simply be equal to `B - Xpx`, where `X` is a small value.\n\nWe end up with something like this:\n\n```css\nshape-outside: repeating-linear-gradient(#0000 0 calc(var(--f) - 3px),#000 0 var(--f));\n```\n\nAnd the following result:\n\n![](https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619910864415_image.png)\n\nSee that? Our repeating linear gradient's shape is pushing every other row to the right by one half the width of a hexagon to offset the pattern.\n\nLet's put that all together:\n\n```css\n.main {\n  display:flex;\n  --s: 100px;  /* size  */\n  --m: 4px;    /* margin */\n  --f: calc(var(--s) * 1.732 + 4 * var(--m) - 1px); \n}\n\n.container {\n  font-size: 0; /* disable white space between inline block element */\n}\n\n.container div {\n  width: var(--s);\n  margin: var(--m);\n  height: calc(var(--s) * 1.1547);\n  display: inline-block;\n  font-size:initial;\n  clip-path: polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%);\n  margin-bottom: calc(var(--m) - var(--s) * 0.2885);\n}\n\n.container::before {\n  content: \"\";\n  width: calc(var(--s) / 2 + var(--m));\n  float: left;\n  height: 120%; \n  shape-outside: repeating-linear-gradient(#0000 0 calc(var(--f) - 3px), #000 0 var(--f));\n}\n```\n\nThat's it! With no more than 15 CSS declarations, we have a responsive grid that fit nicely into all the screen sizes and we can easily adjust things by simply controling two variables.\n\nYou may have noticed that I am adding `-1px` to the variable `F`. Since we are dealing with calculation that involve decimals, the rounding may give us bad results. To avoid this we add or remove few pixels. I am also using `120%` instead of `100%` for the height of the floated element for similar reasons. There is no particular logic with theses values; we simply adjust them to make sure to cover most of the cases without any misaligning our shapes.\n\n----\n\n## Want more shapes?\n\nWe can do more than hexagons with this approach! Let’s create a \"rhombus\" grid instead. Again, we start with our `clip-path` to create the shape:\n\n![Rhombus clip-path shape](https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/rhombus-clip-path.png)\n\nThe code is basically the same. What's changing are the calculations and values. Find below a table that will illustrate the changes.\n\n|    |\tHexagon grid | \tRhombus grid|\n| ------------- |-------------| -----|\n| `height`     | `calc(var(--s)*1.1547)` | `var(--s)` |\n| `clip-path` | `polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%)` | `polygon(50% 0, 100% 50%, 50% 100%, 0 50%)` |\n| `margin-bottom` | `calc(var(--m) - var(--s)*0.2885)` | `calc(var(--m) - var(--s)*0.5)` |\n| `--f` | `calc(var(--s)*1.7324 + 4*var(--m))` | `calc(var(--s) + 4*var(--m))` |\n\n\nAnd we’re done! A mere four changes to our code gets us a completely new grid but with a different shape.\n\n{% codepen https://codepen.io/t_afif/pen/MWbpjvw %}\n\n---\n\n## Just how flexible is this?\n\nWe saw how we were able to make the hexagon and rhombus grids using the exact same code structure, but different calculations. \n\nLet me blow your mind with another idea: What about making that calculation a variable so that we can easily switch between different grids without changing the code? We can certainly do that!\n\nWe'll use an octagonal shape because it's more of a generic shape from that we can use to create other shapes (a hexagon, a rhombus, a rectangle, etc.) simply by changing a few values.\n\n![Octagon shape clip-path](https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/octagon-clip-path.png)\n\nOur octagon is defined with four variables:\n\n* `S`: the width.\n* `R`: the ratio that will help us defines the height based on the width.\n* `hc` and `vc` : both of these will control our `clip-path` values and the shape we want to get. `hc` will be based on the width while `vc` on the height\n\nI know it looks hefty, but the `clip-path` is defined using eight points (like shown in the figure). Adding some CSS variables, we get this:\n\n```css\nclip-path: polygon(\n   var(--hc) 0, calc(100% - var(--hc)) 0, /* 2 points at the top */\n   100% var(--vc),100% calc(100% - var(--vc)), /* 2 points at the right */\n   calc(100% - var(--hc)) 100%, var(--hc) 100%, /* 2 points at the bottom */\n   0 calc(100% - var(--vc)),0 var(--vc) /* 2 points at the left */\n);\n```\n\nThis is what we're aiming for:\n\n![](https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619961411571_image.png)\n\nLet’s zoom in to identify the different values:\n\n![](https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619963939847_image.png)\n\nThe overlap between each row (illustrated by the red arrow) can be expressed using the vc variable which gives us a `margin-bottom` equal to `M - vc` (where `M` is our margin).\n\nIn addition to the margin we applied between our element, we also need an additional horizontal margin (illustrated by the yellow arrow) equal to `S - 2*hc`. Let's define another variable for the horizontal margin (`MH`) that is equal to `M + (S - 2*hc)/2`.\n\nThe height of two rows is equal to twice the size of a shape (plus the margin), minus twice the overlap, or `2*(S + 2*M) - 2*vc`.\n\nLet's update our table of values to see how we're calculating things between the different grids:\n\n| | Hexagon grid | Rhombus grid | Octagon grid |\n|---|---|---|---|\n| `height` | `calc(var(--s)*1.1547)` | `var(--s)` | `calc(var(--s)*var(--r)))` |\n| `clip-path` | `polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%)` | `polygon(50% 0, 100% 50%, 50% 100%, 0 50%)` | `polygon(var(--hc) 0, calc(100% - var(--hc)) 0,100% var(--vc),100% calc(100% - var(--vc)), calc(100% - var(--hc)) 100%,var(--hc) 100%,0 calc(100% - var(--vc)),0 var(--vc))` |\n| `--mh` | – | – | `calc(var(--m) + (var(--s) - 2*var(--hc))/2)` |\n| `margin` | `var(--m)` | `var(--m)` | `var(--m) var(--mh)` |\n| `margin-bottom` | `calc(var(--m) - var(--s)*0.2885)` | `calc(var(--m) - var(--s)*0.5)` | `calc(var(--m) - var(--vc))` |\n| `--f` | `calc(var(--s)*1.7324 + 4*var(--m))` | `calc(var(--s) + 4*var(--m))` | `calc(2*var(--s) + 4*var(--m) - 2*var(--vc))` |\n\nAlright, let’s update our CSS with those adjustments:\n\n```css\n.main {\n  display: flex;\n  --s: 100px;  /* size  */\n  --r: 1; /* ratio */\n\n  /* clip-path parameter */\n  --hc: 20px; \n  --vc: 30px;\n\n  --m: 4px; /* vertical margin */\n  --mh: calc(var(--m) + (var(--s) - 2*var(--hc))/2); /* horizontal margin */\n  --f: calc(2*var(--s) + 4*var(--m) - 2*var(--vc) - 2px);\n}\n\n.container {\n  font-size: 0; /* disable white space between inline block element */\n}\n\n.container div {\n  width: var(--s);\n  margin: var(--m) var(--mh);\n  height: calc(var(--s)*var(--r));\n  display: inline-block;\n  font-size: initial;\n  clip-path: polygon( ... );\n  margin-bottom: calc(var(--m) - var(--vc));\n}\n\n.container::before {\n  content: \"\";\n  width: calc(var(--s)/2 + var(--mh));\n  float: left;\n  height: 120%; \n  shape-outside: repeating-linear-gradient(#0000 0 calc(var(--f) - 3px),#000 0 var(--f));\n}\n```\n\nAs we can see, the code structure is the same. We simply added more variable to control the shape and extend the `margin` property.\n\nAnd below a working example. Adjust the different variables to control the shape while having a fully responsive grid:\n\n{% codepen https://codepen.io/t_afif/pen/MWpExVW %}\n\nAn interactive demo, you say? You bet!\n\n{% codepen https://codepen.io/t_afif/pen/NWpaJMJ %}\n\nTo make things easier, I am expressing the `vc` and `hc` as percetange of the width and height so we can easily scale our elements without breaking the `clip-path`\n\nFrom the above we can easily get the initial hexagonal grid:\n\n![](https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967785492_image.png)\n\nThe rhombus grid:\n\n![](https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619967852929_image.png)\n\nAnd yet another hexagon grid:\n\n![](https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/vm8u1y_Y.png)\n\nA masonry-like grid:\n\n![](https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968042870_image.png)\n\nAnd a checkerboard while we are at it:\n\n![](https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1619968097777_image.png)\n\nA lot of possibilities to create a responsive grid with any kind of shape! All we have to do is adjust few variables.\n\n---\n\n### Fixing the alignment\n\nLet's try to control the alignment of our shapes. Since we are dealing with `inline-block` elements, we're dealing with default left alignment and some empty space at the end, depending on viewport width.\n\nNotice that we alternate between two kind of grids based on the screen width: \n\n![](https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620174099369_image.png)\n\n* Grid #1: A different number of items per row (N, N-1,N, N-1, etc.)\n* Grid #2: The same number of items per row (N, N, N, N, etc.)\n\nIt would be good to always have one of the grid all the time (either #1 or #2) and center everything so that the free space is equally divided on both sides.\n\nIn order to get the first grid in the figure above, the container width needs to be a multiplier of the size of one shape, plus its margin, or `N*(S + 2*MH)`, where `N` is an integer value.\n\nThis may sound impossible with CSS, but it's indeed possible. I made it using CSS grid:\n\n```css\n.main {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, calc(var(--s) + 2*var(--mh)));\n  justify-content: center;\n}\n\n.container {\n  grid-column: 1/-1;\n}\n```\n\n`.main` is now a grid container. Using `grid-template-columns`, I define the column width (as previously explained) and use the `auto-fit` value to get as many columns as possible into the available space. Then, the `.container` spans all of the grid columns using `1/-1` — which means that the width of our container will be a mutiplier of one column size.\n\nAll it takes to center things is `justify-content: center`.\n\nYes, CSS is magic!\n\n{% codepen https://codepen.io/t_afif/pen/poeWYqv %}\n\nResize the demo and notice that not only do we have the first grid from the figure, but everything is perfectly centered as well.\n\nBut wait, we removed `display: flex` and swapped in `display: grid`… so how is the percentage-based height of the float still working? I had said that using a flex container was the key for that, no?\n\nWell, turns out CSS grid sports that feature too. From [the specification](https://www.w3.org/TR/css-grid-1/#algo-overview):\n\n>Once the size of each grid area is thus established, the grid items are laid out into their respective containing blocks. The grid area’s width and height are considered definite for this purpose.\nNote: Since formulas calculated using only definite sizes, such as the stretch fit formula, are also definite, the size of a grid item which is stretched is also considered definite.\n\nA grid item has a `stretch` alignment by default, so its height is definite, meaning using a percentage as a height inside it is perfectly valid.\n\nLet's say we instead want the second grid in the figure — we simply add an extra column with a width equal to half the width of the other columns:\n\n```css\n.main {\n  display: grid;\n  grid-template-columns: repeat(auto-fit,calc(var(--s) + 2*var(--mh))) calc(var(--s)/2 + var(--mh));\n  justify-content :center;\n}\n```\n\n{% codepen https://codepen.io/t_afif/pen/rNyGRbM %}\n\nNow, in addition to a fully responsive grid that is flexible enough to take custom shapes, everything is perfectly centred!\n\n---\n\n## Wait, one more: a pyramidal grid\n\nLet's take everything we've learned and build another amazing grid. This time, we’ll transform the grid we just made into a pyramidal one.\n\nConsider that, unlike the grid we've made so far, the number of elements is important especially for the responsive part. It’s required to know the number of elements and more precesily the number of rows.\n\n![](https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/different-pyramid.png)\n\nIt doesn't mean we need a bunch of hardcoded values; rather we use an extra variable to adjust things based on the number of rows.\n\nThe logic is based on the number of rows because different numbers of elements may give us the same number of rows. For example, there are five rows when we have between 11 and 15 elements, even if the last row is not fully occupied. Having between 16 and 21 elements gives us six rows, and so on. The number of rows is our new variable.\n\nBefore digging into the geometry and the math here is a working demo:\n\n{% codepen https://codepen.io/t_afif/pen/gOmjZOO %}\n\nNotice that most of the code is the same as what we’ve done in the previous examples. So let's focus on the new properties that we’ve added:\n\n```css\n.main {\n  --nr: 5;  /* number of rows */\n}\n\n.container {\n  max-width: calc(var(--nr)*(var(--s) + 2*var(--mh)));\n  margin: 0 auto;\n}\n\n.container::before ,\n.container i {\n  content: \"\";\n  width: calc(50% - var(--mh) - var(--s)/2);\n  float: left;\n  height: calc(var(--f)*(var(--nr) - 1)/2);\n  shape-outside: linear-gradient(to bottom right, #000 50%, #0000 0);\n}\n\n.container i {\n  float:right;\n  shape-outside: linear-gradient(to bottom left, #000 50%, #0000 0);\n}\n```\n\n`NR` is our variable for the number of rows. The width of the container needs to be equal to the last row of the pyramid to make sure it hold all the elements. If you check the previous figure, you'll see that the number of the items contained in the last row is simply equal to the number of rows, which means the formula is: `NR* (S + 2*MH)`.\n\nYou may have also noticed that we also added an `<i>` element in there. We did that because we need two floating elements where we will apply `shape-outside`.\n\nTo understand why we need two floating elements let's see what is done behind the scenes:\n\n![](https://i0.wp.com/css-tricks.com/wp-content/uploads/2021/05/behind-the-scenes.png)\n\nThe blue elements are our floating elements. Each one is having a width equal to half the container size, minus half a shape size, plus margin. The height is equal to four rows in our case, and to `NR - 1` in a more generic case. Earlier, we defined the height of two rows, `F`, so the height of one row is `F/2`. That's how we landed at `height: calc(var(--f)*(var(--nr) - 1)/2`.\n\nNow that we have the size of our elements, we need to apply a gradient to our shape-outside.\n\nThe purple coloration in the figure above is the restricted area for our elements (it need to be an opaque color). The remaining area is the free space where the elements can flow (it need to be a transparent color). This can be done using a diagonal gradient:\n\n```css\nshape-outside: linear-gradient(to bottom right, #000 50%, #0000 0); \n```\n\nWe simply change right with left for the other floated element. You have probably noticed that this is not responsive. In fact, go ahead and adjust the viewport width of the demo and see just how unresponsive this is.\n\nWe have a couple of options to get responsive:\n\n1. We can fall back to the first grid when the container width is smaller than the viewport width. It's a bit tricky to code, but it allows us to preserve the same size for our elements.\n2. We can reduce the size of our elements in order to keep the pyramidal grid. This is easier to code using the percentage-based value trick, but that could result in super tiny elements on smaller screen sizes.\n\nLet's go with the first solution. We like a good challenge, right?\n\nTo get the pyramidal grid, we needed two floated element. The initial grid needed just one floated element. Luckily, our structure allows us to have three floated elements without needing to add more elements to the markup, thanks to pseudo-elements. We will use `container::before`, `i::before`, `i::after`:\n\n```css\n/* Same as before... */\n\n/* The initial grid */\n.container::before {\n  content: \"\";\n  width: calc(var(--s)/2 + var(--mh));\n  float: left;\n  height: 120%; \n  shape-outside: repeating-linear-gradient(#0000 0 calc(var(--f) - 3px),#000 0 var(--f));\n}\n\n/* The pyramidal grid */\n.container i::before ,\n.container i::after {\n  content: \"\";\n  width: calc(50% - var(--mh) - var(--s)/2);\n  float: left;\n  height: calc(var(--f)*(var(--nr) - 1)/2);\n  shape-outside: linear-gradient(to bottom right,#000 50%,#0000 0);\n}\n\n.container i::after {\n  float:right;\n  shape-outside: linear-gradient(to bottom left,#000 50%,#0000 0);\n}\n```\n\nNow we need a trick that lets us use either the first floated element or the other two, but not all of them at the same time. This condition should be based on the width of our container:\n\n* If the container width is bigger than the width of the last row, we can have our pyramid and use the floated elements inside of `<i>`.\n* If the container width is smaller than the width of the last row, we switch to the other grid and use the first floated element.\n\nWe can use `clamp()` for this! It's sort of like a conditional function that sets a minimum and maximum range and, within that range, we provide it an \"ideal\" value to use between those points. This way, we can \"switch\" between grids using our formulas as clamped values, and still avoid using media queries.\n\nOur code will look like this:\n\n```css\n.main {\n  /* the other variables won't change*/\n  --lw: calc(var(--nr)*(var(--s) + 2*var(--mh))); /* width of last row */\n}\n\n.container {\n  max-width: var(--lw);\n}\n\n/* The initial grid */\n.container::before {\n  width: clamp(0px, (var(--lw) - 100%)*1000, calc(var(--s)/2 + var(--mh)));\n}\n\n/* The pyramidal grid */\n.container i::before,\n.container i::after {\n  width: clamp(0px, (100% - var(--lw) + 1px)*1000, calc(50% - var(--mh) - var(--s)/2));\n}\n```\n\nOn larger screens, the width of the container (`LW`) is now equal to its `max-width`, so `100% == LW`. That means that the width of `.container::before` is equal to `0px` (and results in this floated element becoming disabled).\n\nFor the other floating elements, we clamp the width:\n\n```css\nwidth: clamp(0px, (100% - var(--lw) + 1px)*1000, calc(50% - var(--mh) - var(--s)/2));\n```\n\n…where the middle value `((100% - LW + 1px)*1000)` is equal to `(0 + 1px)*1000 = 1000px` (an intentionally large, but arbitrary value). It gets clamped to `calc(50% - var(--mh) - var(--s)/2)`. In other words, these floated elements are enabled with the correct width (the one we defined previously)\n\nVoilà! we have a pyramidal shape on large screen.\n\nNow, when the container width get smaller, `LW` is going to be greater than `100%`. So, `(LW - 100%)` will be positive. Multiplied by a big value, it's clamped to `calc(var(--s)/2 + var(--mh))`, which enables the first floated element. For the other float elements, `(100% - LW + 1px)` resolves to a negative value and is clamped to `0px`, which disables the float elements.\n\nResize the below demo and see how we switch between both grids\n\n{% codepen https://codepen.io/t_afif/pen/zYZEXRp %}\n\nLet's try adding more elements:\n\n{% codepen https://codepen.io/t_afif/pen/zYZEXaR %}\n\nSee that? Things are scaling perfectly. We can also combine this with the CSS grid alignment trick we used earlier:\n\n{% codepen https://codepen.io/t_afif/pen/WNpZWaG %}\n\nDo you think “float” is such a bad thing now?\n\nWant invert the pyramid?\n\n![](https://i2.wp.com/css-tricks.com/wp-content/uploads/2021/05/s_07A03AC602CD604A1A84FE537FD07A78FDA8B04BD4AF14DED8BF2087D58EB481_1620991346257_image.png)\n\nLike illustrated with the above figure, two changes to the previous code can invert our pyramid:\n\n* I change the direction of the gradient from `to bottom left|right` to `to top left|right`,\n* I add a `margin-top` equal to the height of one row.\n\n{% codepen https://codepen.io/t_afif/pen/MWpEdJG %}\n\nAnd, hey, we can swap between both pyramid easily:\n\n{% codepen https://codepen.io/t_afif/pen/bGqoyrr %}\n\nIsn't this beautiful? We have a responsive pyramidal grid with custom shapes that we can easily invert and that fallback to another responsive grid on small screen while everything is perfectly centred. All this without a single media query or JavaScript, but instead using the often overlooked float property.\n\nYou will probably notice some missalignment in some particular cases. Yes, it's again some rounding issue related to the calculation we are doing and the fact that we are trying to make this generic with the interactive demos. To rectify this, we simply adjust few values manually (epsecially the percentage of the gradient) until we get back a perfect alignment.\n\n---\n\n\n## That's a <del>float</del> wrap!\n\nThere we have it: combining `float` with `shape-outside` can help us make complex, flexible and responsive layouts — long live float!\n\nThe article ends here but this is only the beginning. I provided you with the layout and now you can easily put any content inside the divs, apply a background, shadows, animations, etc.\n\n{% codepen https://codepen.io/t_afif/pen/mdWBYqE %}",a.user={name:"Temani Afif",username:"afif",twitter_username:"ChallengesCss",github_username:"Afif13",website_url:"http://support.temani-afif.com/",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--aDsPd8BD--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/577896/343fde9f-609b-419b-95d1-07d16b320a37.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--h8DxsnjW--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/577896/343fde9f-609b-419b-95d1-07d16b320a37.png"},a.organization={name:"This is Learning",username:e,slug:e,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--Y_qiuPkj--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/3314/dc73eb74-08f9-4592-b599-c08f2bb14b4d.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--YUtYH_M_--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/3314/dc73eb74-08f9-4592-b599-c08f2bb14b4d.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:a}},error:s,state:{currentArticle:a},serverRendered:!0,routePath:"/afif/722862",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:s}}}}(null,{},"2021-06-09T13:21:25Z","this-is-learning")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
