<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Learn how to Dynamically Add App Features with AWS AppConfig Feature Flags (+ Linux 101)</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Learn how to Dynamically Add App Features with AWS AppConfig Feature Flags (+ Linux 101)</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/aws" class="tag" data-v-70afb46a>
          #aws
        </a><a href="/nuxtstop/t/linux" class="tag" data-v-70afb46a>
          #linux
        </a><a href="/nuxtstop/t/javascript" class="tag" data-v-70afb46a>
          #javascript
        </a><a href="/nuxtstop/t/cloud" class="tag" data-v-70afb46a>
          #cloud
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xA0-zIMz--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fzm2ylnqon008hpmhrj0.png" alt="Learn how to Dynamically Add App Features with AWS AppConfig Feature Flags (+ Linux 101)" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            10
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            0
          </span></div> <time data-v-70afb46a>Jun 13</time></div></header> <div class="content" data-v-70afb46a><p>How's it going everyone? üëã Welcome back to the <b>Tech Stack Playbook</b>, your guide to apps, software, and tech (but in a fun way I promise).</p>

<p>This past week, I attended a really eye-opening AWS workshop put on for AWS Community Builders on a very interesting service I had not used before, called AppConfig. As described in the documentation, <a href="https://docs.aws.amazon.com/appconfig/latest/userguide/what-is-appconfig.html">AWS AppConfig</a> is a service that lets developers create, manage, and quickly deploy application changes, modifications, features, or patches which are running on Amazon EC2 (Elastic Cloud Compute), AWS Lambda, containers, mobile apps, or IoT devices. </p>

<p>In this blog post, I'll go through the workshop, the code I used to run everything, screenshots of the deployment process, and I will also go through how to use Linux and an Amazon EC2 instance to deploy all of the code in a VM (virtual machine).</p>

<p>What we will build is a simple Airbnb-for-Cribs home rental application and switch in an image viewer carousel for each listed home via AWS AppConfig. Here's what it will look like (unfortunately, IRL mansions are not included):</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kH578JIR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zcyldsnymlt6i5nnavoq.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kH578JIR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zcyldsnymlt6i5nnavoq.png" alt="Image description" loading="lazy" width="880" height="575"></a></p>

<p>I have the starter repo that AWS created linked on my GitHub here under the branch <code>initial</code>. I also have the <code>final</code> branch code for reference as well.<br>
</p>
<div class="ltag-github-readme-tag">
  <div class="readme-overview">
    <h2>
      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--566lAguM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev.to/assets/github-logo-5a155e1f9a670af7944dd5e12375bc76ed542ea80224905ecaf878b9157cdefc.svg" alt="GitHub logo" loading="lazy">
      <a href="https://github.com/BrianHHough">
        BrianHHough
      </a> / <a style="font-weight:600" href="https://github.com/BrianHHough/AWSAppConfigWorkshop">
        AWSAppConfigWorkshop
      </a>
    </h2>
    <h3>
      Exploration of the AWS AppConfig service for dynamic feature changes to a web application. The workshop uses AWS AppSync, AWS Amplify, AWS EC2, DynamoDB. The app's tech stack is: HTML, CSS, JavaScript.
    </h3>
  </div>
  <div class="ltag-github-body">
    
<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/6922f5f0d25ee3d5d55788622f53287a5dfa040998aef428021b292ec674a4ba/68747470733a2f2f6465762d746f2d75706c6f6164732e73332e616d617a6f6e6177732e636f6d2f75706c6f6164732f61727469636c65732f667a6d32796c6e716f6e30303868706d68726a302e706e67"><img src="https://camo.githubusercontent.com/6922f5f0d25ee3d5d55788622f53287a5dfa040998aef428021b292ec674a4ba/68747470733a2f2f6465762d746f2d75706c6f6164732e73332e616d617a6f6e6177732e636f6d2f75706c6f6164732f61727469636c65732f667a6d32796c6e716f6e30303868706d68726a302e706e67" alt="AWS AppConfig Workshop" data-canonical-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fzm2ylnqon008hpmhrj0.png" style="max-width:100%"></a></p>
<h1 dir="auto">
AWS AppConfig Workshop Repo</h1>
<p dir="auto">Exploration of the AWS AppConfig service for dynamic feature changes to a web application. The workshop uses AWS AppSync, AWS Amplify, AWS EC2, DynamoDB. The app's tech stack is: HTML, CSS, JavaScript.</p>
<h2 dir="auto">
There are 2 branches:</h2>
<ul dir="auto">
<li>
<code>final</code> = includes the script calling the AWS Lambda function connected to AWS AppConfig</li>
<li>
<code>initial</code> = is the starter repo (if you are following along, start on this branch)</li>
</ul>
<h2 dir="auto">
Follow along to the following blog post for steps on how to proceed:</h2>
<p dir="auto"><i>In Progress</i></p>
</article></div>



</div>
<br>
  <div class="gh-btn-container"><a class="gh-btn" href="https://github.com/BrianHHough/AWSAppConfigWorkshop">View on GitHub</a></div>
<br>
</div>
<br>


<p>If you're excited, read on!</p>

<h2>
  <a name="building-for-scale-in-the-cloud" href="#building-for-scale-in-the-cloud">
  </a>
  ‚òÅÔ∏è Building for Scale (in the Cloud)
</h2>

<p>Let's take a step back, to talk about scale. "Building for scale" is something a lot of people talk about, but very seldom do we ever plan for scale to happen in the ways we want. Becoming an "overnight success" could take months, years, or even decades in some cases. We rarely ever know when "hitting scale" will take place, so we have to future-proof tech so that it will scale with our needs, when we need them. </p>

<p>Imagine releasing a feature to a million plus member base. What if the feature includes a breaking change with a bug that decreases use by 60% per week per user. That could be disastrous. We want to get ahead of these issues, which is why AWS AppConfig can help us analyze a feature pushed to a select (but growing) number of users over time so that we can adapt to the change, see what it does to our user base, and adjust accordingly.</p>

<p>When you think about "building for scale," of course one of the top companies that comes to my mind is Facebook (...I mean, Meta...still not used to saying that). In Meta's 2022 Q1 2022 Earnings Report, the company reported a whopping 2.94 billion Monthly Active Users as of March 31, 2022 (<a href="https://investor.fb.com/investor-events/event-details/2022/Q1-2022-Earnings/default.aspx">Meta Q1 2022 Earnings Report</a>).</p>

<p>One of the interviews that stands out in my mind in particular is Reid Hoffman's Masters of Scale interview with Meta CEO Mark Zuckerberg. Back in 2017, Mark Zuckerberg shared a bit more of the context behind his "move fast and break things" mantra that has allowed him to build the largest social media platform on the planet.</p>

<p>Mark shared that:</p>

<blockquote>
<p>"At any given point in time, there isn't just one version of Facebook running, there are probably 10,000. Any engineer at the company can basically decide that they want to test something. There are some rules on sensitive things, but in general, an engineer can test something, and they can launch a version of Facebook not to the whole community, but maybe to 10,000 people or 50,000 people‚Äîwhatever is necessary to get a good test of an experience. (<a href="https://www.entrepreneur.com/article/294242">Entrepreneur</a>)"</p>
</blockquote>

<h3>
  <a name="check-out-the-interview-here" href="#check-out-the-interview-here">
  </a>
  Check out the interview here:
</h3>


<div class="crayons-card c-embed text-styles text-styles--secondary">
      <div class="c-embed__cover">
        <a href="https://art19.com/shows/masters-of-scale/episodes/83f96210-9287-4cca-a4db-6a5b518942f9" class="c-link s:max-w-50 align-middle" target="_blank" rel="noopener noreferrer">
          <img alt="" src="https://res.cloudinary.com/practicaldev/image/fetch/s--l0rhNlQP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://content.production.cdn.art19.com/images/f0/dd/b7/02/f0ddb702-9415-4e4e-bde3-077f70375882/2fda96216c3ac5dcb1f29d84c56e216742739fe49a8293e17d9cdb14418ca32b62c809d8f7c87a2ab36e4d32793c87b80deb138550eb9a30eed7796ca559e33a.jpeg" height="880" loading="lazy" class="m-0" width="880">
        </a>
      </div>
    <div class="c-embed__body">
      <h2 class="fs-xl lh-tight">
        <a href="https://art19.com/shows/masters-of-scale/episodes/83f96210-9287-4cca-a4db-6a5b518942f9" target="_blank" rel="noopener noreferrer" class="c-link">
          4. Imperfect is perfect, w/Facebook's Mark Zuckerberg
        </a>
      </h2>
        <p class="truncate-at-3">
          If you‚Äôre Steve Jobs, you can wait for your product to be perfect. For the rest of us, If you‚Äôre not embarrassed by your first product release, you‚Äôve released it too late. Imperfect is perfect. Why? Because your assumptions about what people want are never exactly right. Most entrepreneurs create great products through a tight feedback loop with real customers using a real product. So don‚Äôt fear imperfections; they won‚Äôt make or break your company. What will make or break you is speed. And no one knows this better than Facebook‚Äôs Mark Zuckerberg. He shares the origin story of his mantra ‚Äúmove fast and break things‚Äù and how this ethos applied as Facebook evolved from student project to tech giant.

Read a transcript of this episode:¬†https://mastersofscale.com

Subscribe to the Masters of Scale weekly newsletter:¬†http://eepurl.com/dlirtX
        </p>
      <div class="color-secondary fs-s flex items-center">
          <img alt="favicon" class="c-embed__favicon m-0 mr-2 radius-0" src="https://res.cloudinary.com/practicaldev/image/fetch/s--yNSRub9u--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://webapp.production.cdn.art19.com/ember-app/assets/images/favicons/favicon-32x32-0b27c861c231edaca0794e8b27175509.png" loading="lazy" width="32" height="32">
        art19.com
      </div>
    </div>
</div>


<p>You might think, why would you want something like this? All the users have different user experiences? Isn't that counter-intuitive to UI/UX testing, agile development, and scaling?</p>

<p>Not necessarily... because, let's say you are testing the incorporation of a feature or experience. Sure you can test it in controlled environments, but those are still, controlled. What is more optimal is to test real people, using your app in a real way, without the impression of being under a microscope, so you can really understand if the feature "hits" or resonates with the expected user base at the expected time.</p>

<p>To this day, I have always wondered how dynamic feature adds or dynamic user testing actually works in production. Thanks to the AWS Community Builders Program, I was able to see something like this in action, which is what I will be sharing with you today.</p>

<h2>
  <a name="intro-to-aws-appconfig" href="#intro-to-aws-appconfig">
  </a>
  ‚òÅÔ∏è Intro to AWS AppConfig
</h2>

<p>With AWS AppConfig, we are going to add in a feature called "Photo Slider" which will allow users to switch between photos in the app for each crib. However, it will not be visible to everyone all at once as soon as the feature is pushed. </p>

<p>AWS AppConfig allows us to set the launch deployment details, where we can release to 1% of users, then 5%, then 10%, and so on. It can be risky to release a new feature to users all at once, so we need to account for that. AWS AppConfig has a feature called "Feature Flags" that can allow us to pull the switch on a feature if something unexpected or disastrous happens in the app and allow us to revert back near-instantly.</p>

<h2>
  <a name="where-does-aws-appconfig-fit" href="#where-does-aws-appconfig-fit">
  </a>
  ‚òÅÔ∏è Where does AWS AppConfig fit?
</h2>

<p>In this architecture diagram provided by the AWS team, it outlines where everything "lives." </p>

<ul>
<li>Deployment; via AWS Amplify</li>
<li>Database: via DynamoDB</li>
<li>Front-end: via HTML, CS, and JS</li>
<li>AppConfig: connected via a AWS Lambda function to the front-end</li>
</ul>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oobzKCrV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8g7r0a9i1e6kgzcwzeq0.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oobzKCrV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8g7r0a9i1e6kgzcwzeq0.png" alt="Image description" loading="lazy" width="815" height="465"></a><br>
Source: AWS </p>
<h2>
  <a name="set-up-a-feature-flag" href="#set-up-a-feature-flag">
  </a>
  ‚òÅÔ∏è Set up a Feature Flag
</h2>

<p>In the AWS Console, you will navigate over to the <strong>AWS AppConfig</strong> service.</p>

<ul>
<li>Click <strong>Get Started</strong>
</li>
<li>In "Create Application" page, name your app: <code>AWSomeCribRentals</code>
</li>
<li>Add a description: <code>This is for feature flags related to the AWSomeCribRentals app</code>
</li>
<li>Click <strong>Create application</strong>
</li>
</ul>

<p>This will be our container for all flags related to our application. Think of it like a wrapper.</p>

<p>We then must create a <strong>configuration profile</strong> within the AppConfig application. This lets us define the Feature Flag type and set-up. You can think of it as an element within the wrapper (i.e. you could have multiple Configuration Profiles, perhaps even multiple feature flags within the same profile, which all sits within the AppConfig Application).</p>

<ul>
<li>Let's name the config profile of our feature addition of a card: <code>CardFeatureFlag</code>
</li>
<li>Add a description: <code>related to card</code>
</li>
</ul>

<p>We will then add a new flag by clicking <strong>Add new flag</strong> which will be a short-term flag, as we will deprecate it in the future granted everything is a success:</p>

<ul>
<li>Name: <code>showcarousel</code>
</li>
<li>Description: <code>this will let users swipe through images than only showing them one per Crib</code>
</li>
<li>Select: <code>short-term-flag</code>
</li>
<li>Click <strong>Create flag</strong> to create our first Feature Flag with AWS AppConfig</li>
<li>Click <strong>Save new version</strong> to proceed.</li>
</ul>
<h2>
  <a name="update-the-photo-pagination-for-the-feature-flag" href="#update-the-photo-pagination-for-the-feature-flag">
  </a>
  ‚òÅÔ∏è Update the Photo Pagination for the Feature Flag
</h2>

<p>Navigate to the <strong>CardFeatureFlag</strong> that we just created and click <strong>Add new flag</strong></p>

<ul>
<li>Name: <code>pagination</code>
</li>
<li>Description: <code>change how many homes returned on the page</code>
</li>
<li>Attributes: <code>number</code>
</li>
<li>Type: <code>number</code>
</li>
<li>Value: <code>8</code>
</li>
<li>Required Value: [‚úÖ]</li>
<li>Constraint: <code>5 minumum</code> and <code>12 maximum</code>
</li>
<li>Click <strong>Create flag</strong>
</li>
</ul>

<p>Turn the pagination flag <strong>on</strong> with the switch and then press <strong>save new version</strong></p>
<h2>
  <a name="deploy-the-feature-flag" href="#deploy-the-feature-flag">
  </a>
  ‚òÅÔ∏è Deploy the Feature Flag
</h2>

<p>You should see something like this, which tells us we have two Feature Flags (<strong>pagination</strong> which is switched on, and <strong>showcarousel</strong> which is turned off) added to the Configuration Profile <strong>CardFeatureFlag</strong></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s---my-0MLT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/re9n1geszp6moqzkss3r.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s---my-0MLT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/re9n1geszp6moqzkss3r.png" alt="Image description" loading="lazy" width="880" height="656"></a></p>

<p>We want to deploy this, so here is what we will do:</p>

<ul>
<li>Click <strong>Start deployment</strong>
</li>
<li>Click <strong>Create Environment</strong> </li>
<li>Name the environment: <code>Beta</code>
</li>
</ul>

<p>Next we will want to create a Deployment Strategy. It's important to consider factors like the <strong>Bake time:</strong> the amount of time AppConfig monitors for CloudWatch alarms before advancing to the next deployment or step, such as rolling back a feature.</p>

<p>There are 3 pre-defined options available: <code>AppConfig.AllAtOnce</code> ‚Äî instant deployment to all, <code>AppConfig.Linear50PercentEvery30Seconds</code> ‚Äî deploys to half of target every 30 seconds and deploy time is 1 minute (i.e. useful for testing or demos), and <code>AppConfig.Canary10Percent20Minutes (AWS Recommended)</code> ‚Äî deploys slowly over time (i.e. useful for production workload).</p>

<p>We will, however, <strong>Create deployment strategy</strong>:</p>

<ul>
<li>Name: <code>FFWorkshop_Deployment</code>
</li>
<li>Type: <code>Linear</code>
</li>
<li>Step percentage: <code>10</code>
</li>
<li>Deployment time: <code>1 minute</code>
</li>
<li>Bake time: <code>1 minute</code>g</li>
</ul>

<p>Select <strong>Create deployment strategy</strong> and then <strong>Start deployment</strong> which will take about a couple of minutes to fully release. It will ultimately look like this when it's been deployed fully:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FWPs186m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/d6ng18jrmv1fvuhe997c.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FWPs186m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/d6ng18jrmv1fvuhe997c.png" alt="Image description" loading="lazy" width="880" height="591"></a></p>
<h2>
  <a name="configure-aws-lambda" href="#configure-aws-lambda">
  </a>
  ‚òÅÔ∏è Configure AWS Lambda
</h2>

<p><strong><a href="https://aws.amazon.com/lambda/">AWS Lambda</a> functions</strong> are private functions that run in the cloud and allow you to run code without the need to run a server. You simply need to call a script to connect with them and then you can run compute without needing to provision a back-end for it.</p>

<blockquote>
<p>For some background context on AWS Lambda, check out Parts 1 and 2 of my "Serverless Workflows with Step Functions and Lambda" here:</p>

<p><iframe width="710" height="399" src="https://www.youtube.com/embed/deKOfl6FHPg" allowfullscreen loading="lazy">
</iframe>
<br>
<iframe width="710" height="399" src="https://www.youtube.com/embed/qEkkZzbmykQ" allowfullscreen loading="lazy">
</iframe>
</p>


</blockquote>

<p>To set up Lambda for our project, we will:</p>

<ul>
<li>Navigate to <strong>AWS Lambda</strong>
</li>
<li>Click <strong>Create Function</strong>
</li>
<li>Name: <code>FF_Lambda</code>
</li>
<li>Runtime: <code>Node.js 14.x</code>
</li>
<li>Click <strong>Create function</strong>
</li>
</ul>

<p>In the code editor, add this code (generously provided to us by AWS) which allows us to toggle the Feature Flag on and off:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">aws-sdk</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">docClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">DynamoDB</span><span class="p">.</span><span class="nx">DocumentClient</span><span class="p">();</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>

    <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
        <span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span>
            <span class="dl">"</span><span class="s2">http://localhost:2772/applications/AWSomeCribRentals/environments/Beta/configurations/CardFeatureFlag</span><span class="dl">"</span><span class="p">,</span>
            <span class="nx">resolve</span>
        <span class="p">);</span>
    <span class="p">});</span>

    <span class="kd">let</span> <span class="nx">configData</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="nx">chunk</span> <span class="o">=></span> <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=></span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=></span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">parsedConfigData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">configData</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">DynamoParams</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">TableName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">AWSCribsRentalMansions</span><span class="dl">'</span>
    <span class="p">};</span>

<span class="c1">//Fetching the listings from DynamoDB</span>

    <span class="k">async</span> <span class="kd">function</span> <span class="nx">listItems</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">docClient</span><span class="p">.</span><span class="nx">scan</span><span class="p">(</span><span class="nx">DynamoParams</span><span class="p">).</span><span class="nx">promise</span><span class="p">();</span>
            <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">err</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="c1">//Checking for the Caraousel Feature Flag</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">parsedConfigData</span><span class="p">.</span><span class="nx">showcarousel</span><span class="p">.</span><span class="nx">enabled</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">returnhtml</span> <span class="o">=</span> <span class="s2">``</span><span class="p">;</span>

        <span class="k">try</span> <span class="p">{</span>

            <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">listItems</span><span class="p">();</span>

            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">parsedConfigData</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">number</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;div class="col-md-4 mt-4">
                &lt;div class="card profile-card-5">
                    &lt;div class="card-img-block">

                        &lt;div class="slideshow-container">`</span><span class="p">;</span>

                <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Image</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;div class="mySlides`</span> <span class="o">+</span> <span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">`">
                    &lt;img class="card-img-top" style="height: 300px;" src="`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Image</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">`" style="width:100%">
                  &lt;/div>`</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;/div>`</span><span class="p">;</span>

                <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Image</span><span class="p">.</span><span class="nx">length</span> <span class="o">></span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;a class="prev" onclick="plusSlides(-1, `</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">`)">&amp#10094;&lt;/a>
                            &lt;a class="next" onclick="plusSlides(1, `</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">`)">&amp#10095;&lt;/a>`</span><span class="p">;</span>
                <span class="p">}</span>

                    <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;/div>
                    &lt;div class="card-body pt-0">
                    &lt;h5 class="card-title">`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Name</span> <span class="o">+</span> <span class="s2">` &lt;span style="font-size: 0.7em;color:rgb(255, 64, 64)">(`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Location</span> <span class="o">+</span> <span class="s2">`)&lt;/span>&lt;/h5>
                    &lt;p class="card-text">`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s2">`&lt;/p>
                    &lt;a class="btn btn-primary"style="display: inline" href="#">Check Availability&lt;/a>
                    &lt;span style="float: right;cursor: pointer;" onclick="favoriteStar(this)">&lt;span class="fa fa-star">&lt;/span>&lt;/span>
                  &lt;/div>
                &lt;/div>
            &lt;/div>`</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="p">{</span>
                <span class="na">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
                <span class="na">body</span><span class="p">:</span> <span class="nx">returnhtml</span><span class="p">,</span>
            <span class="p">};</span>

        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">error</span><span class="p">:</span> <span class="nx">err</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

        <span class="kd">let</span> <span class="nx">returnhtml</span> <span class="o">=</span> <span class="s2">``</span><span class="p">;</span>

        <span class="k">try</span> <span class="p">{</span>

            <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">listItems</span><span class="p">();</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">dynamo db data: </span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>

<span class="c1">//Checking for Pagination Numbers</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">parsedConfigData</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">number</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;div class="col-md-4 mt-4">
                &lt;div class="card profile-card-5">
                    &lt;div class="card-img-block">
                    &lt;img class="card-img-top" style="height: 300px;" src="`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Image</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">`" style="width:100%"
                        alt="Card image cap" style="height: 300px;">
                    &lt;/div>
                    &lt;div class="card-body pt-0">
                    &lt;h5 class="card-title">`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Name</span> <span class="o">+</span> <span class="s2">` &lt;span style="font-size: 0.7em;color:rgb(255, 64, 64)">(`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Location</span> <span class="o">+</span> <span class="s2">`)&lt;/span>&lt;/h5>
                    &lt;p class="card-text">`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s2">`&lt;/p>
                    &lt;a class="btn btn-primary"style="display: inline" href="#">Check Availability&lt;/a>
                    &lt;span style="float: right;cursor: pointer;" onclick="favoriteStar(this)">&lt;span class="fa fa-star">&lt;/span>&lt;/span>
                  &lt;/div>
                &lt;/div>
            &lt;/div>`</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="p">{</span>
                <span class="na">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
                <span class="na">body</span><span class="p">:</span> <span class="nx">returnhtml</span><span class="p">,</span>
            <span class="p">};</span>

        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">error</span><span class="p">:</span> <span class="nx">err</span>
            <span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now we will want to add a layer to our Lambda Function (scroll to the bottom of the page and find <strong>Add a layer</strong>)</p>

<ul>
<li>Select <code>AWS-AppConfig-Extension</code>
</li>
<li>Click <strong>Add</strong>
</li>
</ul>

<p>If all goes well, it should look like this:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8d2A7saT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s3asabluhej5b9ne91jr.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8d2A7saT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s3asabluhej5b9ne91jr.png" alt="Image description" loading="lazy" width="880" height="591"></a></p>
<h4>
  <a name="warning" href="#warning">
  </a>
  ‚ö†Ô∏è Warning
</h4>

<p>If you do not see <code>AWS-AppConfig-Extension</code> in the drop-down of AWS-provided layers...make sure you are actually in Node.js 14.x version of runtime (not 16.x like below). At the time of making this blog post, Node.js 16.x has not been configured to allow for the AppConfig extension yet.<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--k7e1c42M--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/v0naf5k30r5m6s7od8of.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--k7e1c42M--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/v0naf5k30r5m6s7od8of.png" alt="Image description" loading="lazy" width="880" height="594"></a></p>
<h2>
  <a name="set-up-the-aws-lambda-function-url" href="#set-up-the-aws-lambda-function-url">
  </a>
  ‚òÅÔ∏è Set up the AWS Lambda Function URL
</h2>

<p>One of the amazing benefits of AWS Lambda is the ability to add HTTPS endpoints to any serverless function we launch in Lambda, as well as configure CORS headers if we wish.</p>

<p>Under the function overview:</p>

<ul>
<li>Click <strong>Configuration</strong>
</li>
<li>Click <strong>Function URL</strong> and then <strong>Create Function URL</strong>
</li>
<li>Auth Type: <code>NONE</code>
</li>
<li>Configure cross-origin resource sharing (CORS) [‚úÖ]</li>
<li>We will include the wildcat <code>*</code> for this demo for <code>Allow origin</code>, <code>Expose headers</code>, <code>Allow headers</code>, and <code>Allow methods</code>...but you would want to configure more secure methods of connection for origin/headers in production.</li>
<li>Click <strong>Save</strong> and save the Function URL for later.</li>
</ul>

<p>Next, we need to update the Execution Role to ensure our Lambda function has the right IAM permissions to access AppConfig using the AWS best practice and principle of "least privilege." Basically, don't allow more permissions than are required for the need/resource.</p>

<ul>
<li>Go to <strong>IAM (Identity and Access Management)</strong>
</li>
<li>Select <strong>Policies</strong>
</li>
<li>Go to <strong>Create Policy</strong>, then <strong>Choose a service</strong> and select <strong>AppConfig</strong>. </li>
<li>For Actions, select <strong>All AppConfig actions</strong>
</li>
<li>For Resources, select <strong>All Resources</strong>
</li>
<li>Click <strong>Next</strong> to proceed through the steps and then at the end under name, write <code>AppConfigAllAccess</code> to name this IAM role.</li>
</ul>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--7PltLXiQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lnv21b4fu3g1g4ahtu7h.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--7PltLXiQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lnv21b4fu3g1g4ahtu7h.png" alt="Image description" loading="lazy" width="880" height="594"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ir3L9nP1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hpjdjsnpufcezc28luco.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ir3L9nP1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hpjdjsnpufcezc28luco.png" alt="Image description" loading="lazy" width="880" height="591"></a></p>

<p>Next, we will attach these policies to our Lambda Function: </p>

<ul>
<li>AmplifyFullAccess</li>
<li>AppConfigFullAccess</li>
<li>AppConfigAllAccess - this is the one we just made</li>
<li>AmazonDynamoDBFullAccess</li>
</ul>

<p>The screen will look like this when you update the function and attached the policies successfully:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--KJSreCdi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a2on8neuuzjtgo3y20qr.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--KJSreCdi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a2on8neuuzjtgo3y20qr.png" alt="Image description" loading="lazy" width="880" height="596"></a></p>
<h2>
  <a name="create-and-populate-a-dynamodb-table-using-an-ec2-instance-vm" href="#create-and-populate-a-dynamodb-table-using-an-ec2-instance-vm">
  </a>
  ‚òÅÔ∏è Create and Populate a DynamoDB Table using an EC2 Instance (VM)
</h2>

<p>This was a very eye-opening part for me because the workshop had a lot of elements where a single user would be completing the upload/scripts from their computer. But what if you wanted to do it from a Virtual Machine because you have a different AWS Profile on your computer you don't want to overwrite/mess with? Or what if you wanted multiple people to have access to the same server files/items?</p>

<p>You can configure an EC2 server and run all the commands as you would on your normal computer, but instead on a rented server/computer, in the cloud!</p>

<p><a href="https://i.giphy.com/media/SACoDGYTvVNhZYNb5a/giphy.gif" class="article-body-image-wrapper"><img src="https://i.giphy.com/media/SACoDGYTvVNhZYNb5a/giphy.gif" loading="lazy" width="480" height="360" data-animated="true"></a></p>

<p>This is where the real fun starts...</p>

<p>First, we'll set up an EC2 instance so that we can get a real-time server running and that we can SSH into.</p>

<ul>
<li>Navigate to the <strong>EC2</strong> service in the AWS list of tools</li>
<li><strong>Launch an instance</strong></li>
<li>Choose: <code>t2.medium</code> (this will give us a little bit more power than the <code>t2.micro</code> BUT be cognizant that the <code>t2.medium</code> server will incur costs. If you do not want to incur costs, choose a <code>t2.micro</code> server instead).</li>
<li>Turn on all public access to the server (this is just for demo/testing purposes, so if you are going into production, you would want to lock down the server).</li>
<li>Once you confirm all the settings, save your keypair to your Computer/drive (this is important that you do not lose this), and click <strong>Launch</strong>
</li>
</ul>

<p>The server will look like this once it is running:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--_HLUHiej--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0vuydjkyrp2bdz3x1ci.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--_HLUHiej--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0vuydjkyrp2bdz3x1ci.png" alt="Image description" loading="lazy" width="880" height="590"></a></p>
<h2>
  <a name="create-the-dynamodb-table-from-within-an-ec2-server-using-linux" href="#create-the-dynamodb-table-from-within-an-ec2-server-using-linux">
  </a>
  ‚òÅÔ∏è Create the DynamoDB Table from within an EC2 Server Using Linux
</h2>

<p>EC2 forces you to <code>chmod 400</code> of the keypair so only your user can read/edit the file ‚Äî anyone else would need to <code>sudo</code>. Make sure that the path does link to your terminal (Mac) or PowerShell (Windows). <strong>TIP</strong>: You can easily drag and drop a file from the Finder or Windows Explorer into your command line to automatically generate the file path.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">chmod </span>400 /User/FF_Workshop_Keypair.cer
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now we will SSH into the server with the keypair and Public DNS.</p>

<ul>
<li>We will use <code>ec2-user</code> in the first part because this is an EC2 Instance</li>
<li>We will then pull the Public IPv4 DNS of the EC2 instance which you will see in the above screenshot on the right for the Instance Summary: <code>ec2-3-82-148-71.compute-1.amazonaws.com</code>
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>ssh <span class="nt">-i</span> /User/FF_Workshop_Keypair.cer ec2-user@ec2-3-82-148-71.compute-1.amazonaws.com
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>It will look like this if you are successfully signed into the server:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--krztd525--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qkh43rfpe9bigd5rgegg.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--krztd525--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qkh43rfpe9bigd5rgegg.png" alt="Image description" loading="lazy" width="880" height="286"></a></p>

<p>Now we need to configure <code>aws</code> inside of the server.</p>

<p>The elements we will need to configure attributes for are: Default Region, Access Key ID, Secret Access Key, and AWS Session Token. These were generated for us via the AWS Event Bridge, but without it being set up for us, we would need to configure the aws profile (link to more about this in the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html">AWS docs</a>)</p>

<p>We will write <code>aws configure</code> and enter, and then copy and paste all of these values into the command line and press enter when prompted for each one. And then under output format, put <code>json</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">AWS_DEFAULT_REGION</span><span class="o">=</span>us-east-1
<span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>MSIA...MQ5U
<span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>YI2d...JuZU
<span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span>IQoJ...wef4

</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>It will look like this:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ON-QHFgP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8un5ph4nym4lkif2l8q5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ON-QHFgP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8un5ph4nym4lkif2l8q5.png" alt="Image description" loading="lazy" width="709" height="105"></a></p>
<h2>
  <a name="next-you-have-to-make-sure-the-right-aws-account-is-active-for-the-session-in-the-command-line" href="#next-you-have-to-make-sure-the-right-aws-account-is-active-for-the-session-in-the-command-line">
  </a>
  ‚òÅÔ∏è  Next, you have to make sure the right AWS account is active for the session in the command line
</h2>

<p>Right now, you have configured AWS above but it‚Äôs not set up to connect to anything‚Ä¶we know this because if we then try to do: <code>aws sts get-caller-identity</code> we will get the following error: Or code snippet:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--qftGbt-V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o1zj2d58ndq07xuwbex.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--qftGbt-V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o1zj2d58ndq07xuwbex.png" alt="Image description" loading="lazy" width="754" height="84"></a><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>An error occurred <span class="o">(</span>InvalidClientTokenId<span class="o">)</span> when calling the GetCallerIdentity operation: The security token included <span class="k">in </span>the request is invalid.
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>To fix this, we need to add in the credentials into the command line as environmental variables and export (print) them into the profile for AWS in the Linux instance (same values as before):<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nb">export </span><span class="nv">AWS_DEFAULT_REGION</span><span class="o">=</span>us-east-1
<span class="nb">export </span><span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>MSIA...MQ5U
<span class="nb">export </span><span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>YI2d...JuZU
<span class="nb">export </span><span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span>IQoJ...wef4
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>We can verify that the environmental variables are saved to our Linux session with <code>printenv AWS_DEFAULT_REGION</code> or <code>printenv AWS_ACCESS_KEY_ID</code></p>

<p>If the output prints what we entered in previously, then it worked!</p>

<p>To validate that our AWS account is authenticated/synced, type <code>aws sts get-caller-identity</code>. If this worked correctly, you should see a print out of something like the below:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--JewwaJmg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5n56eyi6848rl10ol7op.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--JewwaJmg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5n56eyi6848rl10ol7op.png" alt="Image description" loading="lazy" width="716" height="126"></a><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"Account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"354789352487"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"UserId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AROAVFGYX4QT3O2UKAPLI:MasterKey"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"Arn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:sts::354789352487:assumed-role/TeamRole/MasterKey"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In our AWS account, in the top right, you'll see the right Account # (the same as in "Account" in the terminal). <br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--AoXksWUZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mwyklmsi39xuxgvt3w9y.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--AoXksWUZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mwyklmsi39xuxgvt3w9y.png" alt="Image description" loading="lazy" width="494" height="89"></a></p>

<p>Alright we did it!</p>

<p>To further validate this, if we use <code>aws ec2 describe-instances</code> then we should get a print out of the instances we are running or have terminated:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--BYvrFaeK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eckxhty17fjrrvc5s8i9.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--BYvrFaeK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eckxhty17fjrrvc5s8i9.png" alt="Image description" loading="lazy" width="880" height="654"></a></p>
<h2>
  <a name="now-we-populate-the-dynamodb-table-to-hold-image-links-and-home-information" href="#now-we-populate-the-dynamodb-table-to-hold-image-links-and-home-information">
  </a>
  ‚òÅÔ∏è Now we populate the DynamoDB Table to hold image links and home information
</h2>

<p>While we have our SSH link open to our server and running, let's open up another terminal window. This is because we cannot upload a local file from within the server (remember, we are in a virtual machine there...so we are in a completely different computer that doesn't recognize our local directories on our computer).</p>

<p>We need to upload a file to the server and then call it that way to communicate with DynamoDB. We will use the <code>scp</code> (Secure Copy Protocol) command in Linux, which is used to copy/send/retrieve files securely between servers.</p>

<p>For us, the script we will run is this below: we reference a IAM key-pair certificate file <code>FF_Workshop_Keypair.cer</code> file on our computer and then the <code>AWSCribsRentalMansions.json</code> file on our computer and then our EC2 AMI‚Äôs Public IPv4 DNS <code>ec2-3-82-148-71.compute-1.amazonaws.com</code> and declare that we will put it as a loose-hanging file in the server at position: <code>/</code> .</p>

<p>The linux command is:</p>

<ul>
<li>1st part is the path to the secret key file</li>
<li>2nd part is the path to the file we want to upload</li>
<li>3rd part is <code>ec2-user</code> because it's an AMI EC2 "at" the Public IPv4 DNS URL <code>ec2-3-82-148-71.compute-1.amazonaws.com</code>
</li>
<li>4th part is a <code>~</code> since we want to upload it as a loose-hanging file in the server.
</li>
</ul>
<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>scp <span class="nt">-i</span> /Users/FF_Workshop_Keypair.cer /Users/AWSCribsRentalMansions.json  ec2-user@ec2-3-82-148-71.compute-1.amazonaws.com:~
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>


<p>If all goes well, you should see a 100% printed below the script you entered.</p>

<p>Now, let's test if the file was uploaded in our server. Switch back to the terminal window where we SSH'ed into the server. If we do an <code>ls</code> from the root directory, we should now see the <code>json</code> file!</p>

<p>Now we will populate the DynamoDB table with our file uploaded to the EC2 instance:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>aws dynamodb batch-write-item <span class="nt">--request-items</span> file://AWSCribsRentalMansions.json
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>It will look like this (don't worry that it says "Unprocessed Items" - this is normal ‚ò∫Ô∏è):<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--m1PIwXkC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/55uydqm0loczvez1er5g.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--m1PIwXkC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/55uydqm0loczvez1er5g.png" alt="Image description" loading="lazy" width="766" height="189"></a></p>

<p>Let's check if DynamoDB really did receive all of the files like our command line told us. If it worked successfully, it will look like this:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--HqUv2Ymj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/njpbfmgprdt8phno1zlk.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--HqUv2Ymj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/njpbfmgprdt8phno1zlk.png" alt="Image description" loading="lazy" width="880" height="315"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--fC6kzYan--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/95gw70lsasw73i3147q6.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fC6kzYan--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/95gw70lsasw73i3147q6.png" alt="Image description" loading="lazy" width="880" height="431"></a></p>

<p>Nice!! The files are all there!</p>
<h2>
  <a name="set-up-website-on-aws-with-aws-amplify-and-aws-codecommit" href="#set-up-website-on-aws-with-aws-amplify-and-aws-codecommit">
  </a>
  ‚òÅÔ∏è Set up website on AWS with AWS Amplify and AWS CodeCommit
</h2>

<p>We will need 2 specific tools to hold our code and then to push our code to the internet with a link users can access.</p>

<ul>
<li>
<strong>AWS Amplify</strong>: for delivering the front-end</li>
<li>
<strong>AWS CodeCommit</strong>: hold the code to deploy to Amplify</li>
</ul>

<p>In our <code>index.html</code> file in the repo (check out my <strong><a href="https://github.com/BrianHHough/AWSAppConfigWorkshop/tree/initial">starter repo here</a></strong> from the code provided by AWS), we will need add the Lambda function calling AppConfig into the <code>&lt;script></code> tag of the <code>index.html</code> file.</p>

<p>We will turn this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="c">&lt;!-- api call to populate cribs --></span> -->
<span class="nt">&lt;script></span>
     <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">lamba-url-here</span><span class="dl">'</span><span class="p">)</span>
     <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=></span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
     <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">populateCribsHere</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerHTML</span><span class="o">=</span><span class="nx">data</span><span class="p">;</span>
            <span class="nx">setUI</span><span class="p">();</span>
  <span class="p">});</span>
<span class="nt">&lt;/script></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Into this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="c">&lt;!-- api call to populate cribs --></span> -->
<span class="nt">&lt;script></span>
        <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://2v35t2ppjx4vh7ygjzip7nauji0yzmxl.lambda-url.us-east-1.on.aws/</span><span class="dl">'</span><span class="p">)</span>
     <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=></span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
     <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">populateCribsHere</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerHTML</span><span class="o">=</span><span class="nx">data</span><span class="p">;</span>
            <span class="nx">setUI</span><span class="p">();</span>
  <span class="p">});</span>
<span class="nt">&lt;/script></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Remember that Lambda Function URL we got from before? We will put that into the <code>lamba-url-here</code>. We can get that here:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xB16JKi4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ztzmju7x1fmu0dc3ixrc.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xB16JKi4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ztzmju7x1fmu0dc3ixrc.png" alt="Image description" loading="lazy" width="880" height="646"></a></p>
<h2>
  <a name="use-aws-codecommit-to-host-private-git-repo" href="#use-aws-codecommit-to-host-private-git-repo">
  </a>
  ‚òÅÔ∏è Use AWS CodeCommit to Host Private Git Repo
</h2>

<p><a href="https://aws.amazon.com/codecommit/">AWS CodeCommit</a> is a secure, highly scalable, managed source control service that hosts private Git repositories.</p>

<ul>
<li>Go to <strong>CodeCommit</strong>
</li>
<li>Click <strong>Create a Repository</strong>
</li>
<li>Name: <code>AWSomeCribRepo</code>
</li>
<li>Description: <code>This holds the code of my AWSomeCribRepo project</code>
</li>
<li>Click <strong>Create</strong>
</li>
</ul>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--BxDinyUU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xekcxwp4rq4wl4ba3v9l.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--BxDinyUU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xekcxwp4rq4wl4ba3v9l.png" alt="Image description" loading="lazy" width="880" height="625"></a></p>

<p>After the repo is created, we need to add our code to this CodeCommit repo. We will see a couple different methods for how to Connect. We will choose the <code>HTTPS (GRC)</code> method.</p>

<blockquote>
<p>HTTPS (GRC) is the protocol to use with git-remote-codecommit (GRC). This utility provides a simple method for pushing and pulling code from CodeCommit repositories by extending Git. It is the recommended method for supporting connections made with federated access, identity providers, and temporary credentials.</p>
</blockquote>

<p>What we really want to do is <code>pip install git-remote-codecommit</code> to install the git-remote-code-commit framework, BUT, we don't have <code>pip</code> installed yet. We need Python to run pip so let's check if it's installed:</p>

<ul>
<li>Run <code>python --version</code> ‚Äî for me, the output is <code>Python 2.7.18</code> and it should be added since this is an EC2 instance.</li>
<li>To install pip, run <code>sudo yum install python-pip</code> </li>
</ul>

<p>It should look like this if it's successfully installed:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OyZ2Ha4R--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kg5vjiz0c359l7p6a74a.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OyZ2Ha4R--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kg5vjiz0c359l7p6a74a.png" alt="Image description" loading="lazy" width="880" height="752"></a></p>

<ul>
<li>Now that pip is installed, let‚Äôs run the command we wanted to initially: <code>pip install git-remote-codecommit</code>.</li>
</ul>

<p>It should look like this if all goes well:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--KJ42BOnN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/o5irrhuqb3uycz9hf2ro.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--KJ42BOnN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/o5irrhuqb3uycz9hf2ro.png" alt="Image description" loading="lazy" width="880" height="476"></a></p>

<p>Now we want to clone the repository to our EC2 instance with this command: <code>git clone codecommit::us-east-1://AWSomeCribRepo</code>. However, we don‚Äôt have git yet in our server, so we‚Äôll install git this way:</p>

<ul>
<li>Run this command: <code>sudo yum install git</code>
</li>
</ul>

<p>If all goes well, it will look like this:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--pD2R2-p_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n1s69x0oku3vd5b2ltws.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--pD2R2-p_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n1s69x0oku3vd5b2ltws.png" alt="Image description" loading="lazy" width="880" height="909"></a><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--EsiZZUqr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9dijpf6y4lzyu4ftl87i.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--EsiZZUqr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9dijpf6y4lzyu4ftl87i.png" alt="Image description" loading="lazy" width="880" height="884"></a></p>

<ul>
<li><p>We will verify the installation went through with: <code>git --version</code> ‚Äî if it worked, you will see a print out like <code>git version 2.32.0</code><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--SSvVTarb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1wvkquiwbju1q4i8vk7.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--SSvVTarb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1wvkquiwbju1q4i8vk7.png" alt="Image description" loading="lazy" width="728" height="80"></a></p></li>
<li><p>Now we will finally run: <code>codecommit::us-east-1://AWSomeCribRepo</code> ‚Äî this will clone the empty repo into our server. When we do ls we see the blue folder in there:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--5HoEVuXo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/e31yg6g0oqsfgtr77rjv.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--5HoEVuXo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/e31yg6g0oqsfgtr77rjv.png" alt="Image description" loading="lazy" width="880" height="316"></a></p></li>
</ul>

<p>‚ú® Amazing job! We now have a link to our AWS CodeCommit Repo (in our AWS Environment) and our EC2 server. Especially cool because this is now OUR computer, but a virtual machine.</p>
<h2>
  <a name="how-do-we-upload-a-folders-contents-locally-our-code-repo-into-a-code-repo-in-our-ec2-instance-using-linux" href="#how-do-we-upload-a-folders-contents-locally-our-code-repo-into-a-code-repo-in-our-ec2-instance-using-linux">
  </a>
  ‚òÅÔ∏è How do we upload a folder‚Äôs contents locally (our code repo) into a code repo in our EC2 instance using Linux?
</h2>

<p>Linux can be a bit confusing here but what we essentially will be doing is using a 2nd terminal window to connect to our SSH'ed terminal window, and then use that to connect to AWS. Don't worry... we will get there üòä </p>

<p>We will use <code>scp</code> to upload the file contents WITHIN our local folder and serve that content INTO the folder that is our AWS CodeCommit-connected folder.</p>

<ul>
<li>We will use <code>scp</code> (secure copy protocol)</li>
<li>We use the -r flag (to recursively go through all the files)</li>
<li>We will input the path of our Keypair</li>
<li>We will then input the path of our folder and because it's the contents WITHIN it, we add the wildcard <code>/*</code> after the folder name</li>
<li>We will then input the EC2 instance with <code>ec2-user</code> and <code>@</code> and then our EC2's Public IPv4 DNS value.
</li>
</ul>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>scp -r -i  /Users/FF_Workshop_Keypair.cer /Users/AWSAppConfigWorkshop/*  ec2-user@ec2-3-82-148-71.compute-1.amazonaws.com:~/AWSomeCribRepo
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>


<p>You can see how the commands work between the 1st and 2nd terminal windows. On the right (connected to our local computer), we serve the files to the server. Then on the left (connected to the EC2 instance), we check to see if the files were in fact uploaded.</p>
<h4>
  <a name="note-in-the-screenshot-it-says-raw-amazonawscomtest-endraw-but-this-was-taken-while-i-was-testing-linux-you-will-want-that-part-to-read-raw-amazonawscomawsomecribrepo-endraw-like-what-is-referenced-in-the-above-code-snippet" href="#note-in-the-screenshot-it-says-raw-amazonawscomtest-endraw-but-this-was-taken-while-i-was-testing-linux-you-will-want-that-part-to-read-raw-amazonawscomawsomecribrepo-endraw-like-what-is-referenced-in-the-above-code-snippet">
  </a>
  ‚ö†Ô∏è NOTE: in the screenshot, it says <code>...amazonaws.com:~/test</code> but this was taken while I was testing Linux üòä. You will want that part to read <code>amazonaws.com:~/AWSomeCribRepo</code> like what is referenced in the above code snippet:
</h4>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Mkc1FSRU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qtgqq9kwi76coq1nacaz.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Mkc1FSRU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qtgqq9kwi76coq1nacaz.png" alt="Image description" loading="lazy" width="880" height="581"></a></p>
<h2>
  <a name="now-we-will-push-the-code-to-aws-code-commit" href="#now-we-will-push-the-code-to-aws-code-commit">
  </a>
  ‚òÅÔ∏è Now we will push the code to AWS Code Commit
</h2>

<p>Back in our SSH'ed terminal window, we will want to make sure we are in our <code>AWSomeCribRepo</code> and run the commands to send the repo into AWS CodeCommit:</p>

<ul>
<li>Run: <code>cd AWSomeCribRepo</code>
</li>
<li>Add all the files in the directory to git with <code>git add -A</code>
</li>
<li>Create a commit message: <code>git commit -m "commit from EC2"</code>
</li>
<li>Push the code to AWS CodeCommit: <code>git push</code>
</li>
</ul>

<p>When you do the <code>git push</code>, you will see output like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>Enumerating objects: 1847, <span class="k">done</span><span class="nb">.</span>
Counting objects: 100% <span class="o">(</span>1847/1847<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
Delta compression using up to 2 threads
Compressing objects: 100% <span class="o">(</span>1845/1845<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
Writing objects: 100% <span class="o">(</span>1847/1847<span class="o">)</span>, 3.99 MiB | 4.68 MiB/s, <span class="k">done</span><span class="nb">.</span>
Total 1847 <span class="o">(</span>delta 213<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>, pack-reused 0
To codecommit::us-east-1://AWSomeCribRepo
 <span class="k">*</span> <span class="o">[</span>new branch]      master -> master
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--hv_lC8gh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8zxjxcmt7vho8ny34wsv.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--hv_lC8gh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8zxjxcmt7vho8ny34wsv.png" alt="Image description" loading="lazy" width="517" height="156"></a></p>

<h4>
  <a name="important-if-you-run-into-this-type-of-error-after-raw-git-push-endraw-" href="#important-if-you-run-into-this-type-of-error-after-raw-git-push-endraw-">
  </a>
  ‚ö†Ô∏è IMPORTANT: If you run into this type of error after <code>git push</code>:
</h4>

<blockquote>

<pre class="highlight shell"><code>fatal: unable to access <span class="s1">'https://git-codecommit.us-east-1.amazonaws.com/v1/repos/AWSomeCribRepo/'</span>: The requested URL returned error: 403
</code></pre>


<p>Or looks like this in the command line: <br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Kcm1U1fu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/sxvqqwl25uso2gum58k4.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Kcm1U1fu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/sxvqqwl25uso2gum58k4.png" alt="Image description" loading="lazy" width="745" height="58"></a></p>

<p>It‚Äôs probably because your configuration environmental variables aren‚Äôt set correctly in the EC2 server. </p>

<p>These are provided to us thanks the AWS EventBridge for the workshop, but you can retrieve these as part of your AWS Account. You need to make sure you are "logged in" or authenticated in the EC2 instance for the push command to know which AWS Account's CodeCommit to push to. Imagine you push your code to a stranger's CodeCommit... (that would be so bad...). This is to make sure we are truly authenticated in the right place to then send our code to the right destination.</p>


<pre class="highlight shell"><code><span class="nv">AWS_DEFAULT_REGION</span><span class="o">=</span>us-east-1
<span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>MSIA...MQ5U
<span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>YI2d...JuZU
<span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span>IQoJ...wef4
</code></pre>


<p>Confirm that <code>aws sts get-caller-identity</code> returns a value like this:</p>


<pre class="highlight shell"><code><span class="o">{</span>
    <span class="s2">"Account"</span>: <span class="s2">"354789352487"</span>, 
    <span class="s2">"UserId"</span>: <span class="s2">"AROAVFGYX4QT3O2UKAPLI:MasterKey"</span>, 
    <span class="s2">"Arn"</span>: <span class="s2">"arn:aws:sts::354789352487:assumed-role/TeamRole/MasterKey"</span>
<span class="o">}</span>
</code></pre>


<p>Now when you do the <code>git push</code>, you will see output like this:</p>


<pre class="highlight shell"><code>Enumerating objects: 1847, <span class="k">done</span><span class="nb">.</span>
Counting objects: 100% <span class="o">(</span>1847/1847<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
Delta compression using up to 2 threads
Compressing objects: 100% <span class="o">(</span>1845/1845<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
Writing objects: 100% <span class="o">(</span>1847/1847<span class="o">)</span>, 3.99 MiB | 4.68 MiB/s, <span class="k">done</span><span class="nb">.</span>
Total 1847 <span class="o">(</span>delta 213<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>, pack-reused 0
To codecommit::us-east-1://AWSomeCribRepo
 <span class="k">*</span> <span class="o">[</span>new branch]      master -> master
</code></pre>


<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--GH7ZwvxE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llm1qqq508l5vz47qnim.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--GH7ZwvxE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llm1qqq508l5vz47qnim.png" alt="Image description" loading="lazy" width="517" height="156"></a></p>
</blockquote>

<p>Back in the AWS Console, CodeCommit will now go from this:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--EHNycjRz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1x3w7d2a0mey6smwlls8.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--EHNycjRz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1x3w7d2a0mey6smwlls8.png" alt="Image description" loading="lazy" width="880" height="432"></a></p>

<p>To this:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--LPSOC_Ea--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5abeekku95g4edfvro6p.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--LPSOC_Ea--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5abeekku95g4edfvro6p.png" alt="Image description" loading="lazy" width="880" height="455"></a></p>

<p>‚ú® You have now created a repository for your website with files uploaded from your computer, to your EC2 instance, and now to AWS. Next, you will connect this repository to AWS Amplify to host your website with a real URL.</p>
<h2>
  <a name="host-your-website-on-aws-amplify" href="#host-your-website-on-aws-amplify">
  </a>
  üöÄ Host your Website on AWS Amplify
</h2>

<p>One of the best benefits of <a href="https://aws.amazon.com/amplify/">AWS Amplify</a> when running deployments is the ability to see the various stages of the build process. This becomes very helpful when there are errors or you need to check the validation of a build, the logs include a great amount of detail, and of course you can roll in a vast amount of tools and AWS features thanks to Amplify and it's framework to abstract complexity from deployments.</p>

<p>To accomplish this we will:</p>

<ul>
<li>Go to the <strong>AWS Amplify</strong> service in the AWS Console</li>
<li>Go to <strong>All apps</strong>
</li>
<li>Select <strong>New App</strong> and in the drop-down, select <strong>Host web app</strong>
> <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--w6q5MhEe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hsmd7lpti5qdi28ffbob.png" alt="Image description" loading="lazy" width="880" height="329">
</li>
<li>Select <strong>AWS CodeCommit</strong> and then <strong>Continue</strong> to advance
> <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--WZFrp7bM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mdrd9gewivwpyherw9ku.png" alt="Image description" loading="lazy" width="880" height="478">
</li>
<li>Select <code>AWSomeCribRepo</code>in the CodeCommit dropdown and then <strong>Next</strong>
> <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--MjtGtLNB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hfk60pac3j49ljpdjjnt.png" alt="Image description" loading="lazy" width="880" height="369">
</li>
<li>In the <strong>Configure build settings</strong> make sure to click <strong>‚úÖ Allow AWS Amplify to automatically deploy all files hosted in your project root directory</strong> and then press <strong>Next</strong>.
<img src="https://res.cloudinary.com/practicaldev/image/fetch/s--uJt0QH5v--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aml77p5rrtm9sk4ktae8.png" alt="Image description" loading="lazy" width="880" height="513">
</li>
<li>Now click <strong>Save and deploy</strong>
> <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--_peEpN21--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ztc1ckh5wanli20xxufb.png" alt="Image description" loading="lazy" width="880" height="444">
</li>
</ul>

<p>AWS Amplify will then go through it‚Äôs 4 stages of deployment automatically for us</p>

<ul>
<li>Provision</li>
<li>Build</li>
<li>Deploy</li>
<li>Verify</li>
</ul>

<p>It will go from this:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--K77AO3Ha--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wi344g6ulu8vzxj585rr.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--K77AO3Ha--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wi344g6ulu8vzxj585rr.png" alt="Image description" loading="lazy" width="880" height="507"></a></p>

<p>‚ú® To this: <br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0EQyqY4n--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/84y9ni4b1vi1045cua8h.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0EQyqY4n--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/84y9ni4b1vi1045cua8h.png" alt="Image description" loading="lazy" width="880" height="563"></a></p>

<p>When our site is building, it will go from this:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0WaDuYWJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qnsitonfl3rhqfzidjyo.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0WaDuYWJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qnsitonfl3rhqfzidjyo.png" alt="Image description" loading="lazy" width="880" height="507"></a></p>

<p>‚ú® To this:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--NCxs42U7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3nhmx0yl657zpuyamsjh.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--NCxs42U7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3nhmx0yl657zpuyamsjh.png" alt="Image description" loading="lazy" width="880" height="607"></a></p>
<h2>
  <a name="using-feature-flags" href="#using-feature-flags">
  </a>
  ‚òÅÔ∏è Using Feature Flags
</h2>

<p>If you notice in the deployed version, it doesn't show that carousel feature we created AppConfig for in the first place... where did it go? Wasn't it supposed to appear there?</p>

<p>We haven't turned it on yet üòä </p>

<p>So what we are going to now do is turn on and deploy the carousel Feature Flag to launch this feature. We will then put on an operational toggle to ensure that during spikes in usage, it will limit the number of homes displayed on the homepage. This will help to optimize our performance with fewer queries on our DynamoDB table at peak times. </p>

<ul>
<li>Go to <strong>AppConfig</strong>
</li>
<li>Select our app <code>AWSomeCribRentals</code>
</li>
<li>Click on the Feature Flag we created: <code>CardFeatureFlag</code> (notice that the CardFeature Flag is OFF for the <code>showcarousel</code> Flag as shown below)</li>
</ul>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kuQ4tmLs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9d81u6lkx4lvqzl410ub.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kuQ4tmLs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9d81u6lkx4lvqzl410ub.png" alt="Image description" loading="lazy" width="880" height="656"></a></p>

<ul>
<li>Toggle the <code>showcarousel</code> flag ON and then <strong>Save new version</strong>
</li>
<li>Click <strong>Start Deployment</strong> and configure the elements</li>
<li>Environment: <code>Beta</code> - we set this up earlier</li>
<li>Hosted configuration version: 2</li>
<li>Deployment strategy: <code>FFWorkshop_Deployment</code> </li>
<li>Description: <code>Switching showcarousel feature on gradually for users</code>
</li>
<li>Click <strong>Start deployment</strong>
</li>
</ul>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--26-xxNmZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h9lb2yb8pb48bzcgcv3s.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--26-xxNmZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h9lb2yb8pb48bzcgcv3s.png" alt="Image description" loading="lazy" width="880" height="650"></a></p>

<p>The deployment (this is technically Deployment #2 because we already deployed earlier on this Feature Flag) will look like this as it builds and gives you data about the deployment like so until its state reaches 100%:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ObcHnZQJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0hwozcx4lgskjlcipnxk.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ObcHnZQJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0hwozcx4lgskjlcipnxk.png" alt="Image description" loading="lazy" width="880" height="655"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--mPROsMG1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aeytc0k4jr1jcgw09bke.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--mPROsMG1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aeytc0k4jr1jcgw09bke.png" alt="Image description" loading="lazy" width="880" height="652"></a></p>
<h2>
  <a name="viola-check-out-the-updated-changes-to-our-app" href="#viola-check-out-the-updated-changes-to-our-app">
  </a>
  ‚ú® Viola! Check out the updated changes to our app:
</h2>

<p>Notice the carousel? This is now a feature that users will begin to see in our application:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--JQoXQmFX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kbbk5mipwbtqlkyo7b2q.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--JQoXQmFX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kbbk5mipwbtqlkyo7b2q.png" alt="Image description" loading="lazy" width="880" height="575"></a></p>

<p>Here is a video of the deployed AppConfig Feature Flag in action live on the URL:<br>
<iframe src="https://player.vimeo.com/video/719701137" width="710" height="399" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen loading="lazy">
</iframe>
</p>

<h2>
  <a name="operational-feature-flags" href="#operational-feature-flags">
  </a>
  ‚òÅÔ∏è Operational Feature Flags
</h2>

<p>This above is an example of a feature add that we will definitely add to our site and keep. However, let's say we wanted to throttle the number of requests coming back to users when they search for something or want a certain type of data. </p>

<p>Remember our <code>pagination</code> Feature Flag in <code>CardFeatureFlag</code> that we configured earlier? Well, if we want to adjust how many results are returned in the pagination results (i.e. to improve performance when there is a lot of traffic), we can do this by:</p>

<ul>
<li>Navigate to <strong>AppConfig</strong>
</li>
<li>Click on the <strong>CardFeatureFlag</strong> that we set up</li>
<li>Select the <strong>pagination</strong> flag</li>
<li>Click <strong>Edit</strong>
</li>
<li>Change the number in the <strong>value</strong> to: 6</li>
<li>Click <strong>Confirm</strong>
</li>
<li>Ensure this flag's toggle is turned <strong>ON</strong>
</li>
<li>Click <strong>Save new version</strong>
</li>
<li>Click <strong>Start deployment</strong>
</li>
<li>Keep the same settings as you did in Deployment #2 above, and especially make sure the Deployment Strategy says: <code>FFWorkshop_Deployment</code>
</li>
<li>Click <strong>Start deployment</strong>
</li>
</ul>

<p>‚ú® When you navigate to your URL, you should now see 6 crib results! This means we can adjust this feature manually from AWS AppConfig without needing to delete or comment out the code and push a new version.</p>

<h2>
  <a name="clean-up-release-flags" href="#clean-up-release-flags">
  </a>
  üßπ Clean up Release Flags
</h2>

<p>If you need to clean up a release flag ‚Äî for example, let's say the feature add was a big success and there's no reason for you to revert or roll-back the changes ‚Äî it's important to know what to do.</p>

<p>If you do not need to have a Feature Flag for one of your released features, you can simply delete that short-term flag since it's no longer needed. We already marked the <code>showcarousel</code> as a short-term flag</p>

<p>To delete a flag, we will:</p>

<ul>
<li>Go to <strong>AppConfig</strong>
</li>
<li>Select our app: <strong>AWSomeCribRentals</strong>
</li>
<li>Click on the Feature Flag: <code>CardFeatureFlag</code>
</li>
<li>On the <code>showcarousel</code> Feature Flag, click <strong>Delete</strong> and re-confirm <strong>Delete</strong> on the pop-up.</li>
<li>Click <strong>Save new version</strong> to reflect this change</li>
</ul>

<p>In a real life situation, we would want to clean up the code to reflect this feature add, but since this was a workshop setting, we did not do that here. For example, in <strong>line 39</strong> of the Lambda Function, you would need to make sure that the Crib carousel feature is not conditionally turned on via AppConfig.</p>

<h2>
  <a name="clean-up-our-aws-resources" href="#clean-up-our-aws-resources">
  </a>
  üßπ Clean Up Our AWS Resources:
</h2>

<p>Congrats on making it through! Since you are probably running these services on your own AWS account, it is important to make sure you delete instances of the services so that you do not incur costs:</p>

<ul>
<li>
<strong>EC2:</strong> terminate/delete the running instance</li>
<li>
<strong>AWS Lambda:</strong> delete the function</li>
<li>
<strong>DynamoDB:</strong> delete the <code>AWSCribsRentalMansions</code> table</li>
<li>
<strong>Amplify:</strong> delete the app we created</li>
<li>
<strong>CodeCommit:</strong> delete the repository we created</li>
<li>
<strong>AppConfig:</strong> delete each Feature Flag, the configuration profile, and in environments, delete Beta, as well as the AWSomeCribRentals application</li>
</ul>

<p>WOW! That was a lot! Hopefully you enjoyed going through this AWS workshop with me and the steps I took. Let me know what you think below and if you have any questions on any of the AWS tools I used, feel free to let me know what you thought üòä</p>

<h2>
  <a name="subscribe-to-the-tech-stack-playbook-for-more" href="#subscribe-to-the-tech-stack-playbook-for-more">
  </a>
  üßë‚Äçüíª Subscribe to the Tech Stack Playbook for more:
</h2>

<p>Let me know if you found this post helpful! And if you haven't yet, make sure to check out these free resources below:</p>

<ul>
<li><b>Follow my Instagram for more: <a href="https://instagram.com/brianhhough">@BrianHHough</a></b></li>
<li><b>I'm also on Tik Tok too: <a href="https://www.tiktok.com/@brianhhough">@BrianHHough</a></b></li>
<li><b>Watch my latest <a href="https://youtube.com/brianhhough">YouTube video for more</a></b></li>
<li><b>Listen to my Podcast on <a href="https://podcasts.apple.com/us/podcast/tech-stack-playbook/id1553712082">Apple Podcasts</a> and <a href="https://open.spotify.com/show/01bHbabSyBmPfbc3ORMZa9?si=av_16aPbQEqL_bVu3RnO0g">Spotify</a></b></li>
<li><b>Join my FREE <a href="https://facebook.com/groups/techstackplaybook">Tech Stack Playbook Facebook Group</a></b></li>
<li><b>Join entrepreneurs and developers in the <a href="https://bit.ly/HelpMeDevDiscordLink">HelpMeDev Discord Server</a></b></li>
</ul>

<p>Let's digitize the world together! üöÄ</p>

<p>-- Brian</p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/brianhhough/learn-how-to-dynamically-add-app-features-with-aws-appconfig-feature-flags-linux-101-4cai" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(e,a,s,n,t,o){return s.type_of="article",s.id=1111320,s.title="Learn how to Dynamically Add App Features with AWS AppConfig Feature Flags (+ Linux 101)",s.description="How's it going everyone? üëã Welcome back to the Tech Stack Playbook, your guide to apps, software, and...",s.readable_publish_date="Jun 13",s.slug="learn-how-to-dynamically-add-app-features-with-aws-appconfig-feature-flags-linux-101-4cai",s.path="/aws-builders/learn-how-to-dynamically-add-app-features-with-aws-appconfig-feature-flags-linux-101-4cai",s.url=n,s.comments_count=0,s.public_reactions_count=10,s.collection_id=e,s.published_timestamp=a,s.positive_reactions_count=10,s.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--xA0-zIMz--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fzm2ylnqon008hpmhrj0.png",s.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--A6hr_k4a--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fzm2ylnqon008hpmhrj0.png",s.canonical_url=n,s.created_at="2022-06-11T15:19:35Z",s.edited_at=e,s.crossposted_at=e,s.published_at=a,s.last_comment_at=a,s.reading_time_minutes=25,s.tag_list="aws, linux, javascript, cloud",s.tags=["aws","linux","javascript","cloud"],s.body_html='<p>How\'s it going everyone? üëã Welcome back to the <b>Tech Stack Playbook</b>, your guide to apps, software, and tech (but in a fun way I promise).</p>\n\n<p>This past week, I attended a really eye-opening AWS workshop put on for AWS Community Builders on a very interesting service I had not used before, called AppConfig. As described in the documentation, <a href="https://docs.aws.amazon.com/appconfig/latest/userguide/what-is-appconfig.html">AWS AppConfig</a> is a service that lets developers create, manage, and quickly deploy application changes, modifications, features, or patches which are running on Amazon EC2 (Elastic Cloud Compute), AWS Lambda, containers, mobile apps, or IoT devices. </p>\n\n<p>In this blog post, I\'ll go through the workshop, the code I used to run everything, screenshots of the deployment process, and I will also go through how to use Linux and an Amazon EC2 instance to deploy all of the code in a VM (virtual machine).</p>\n\n<p>What we will build is a simple Airbnb-for-Cribs home rental application and switch in an image viewer carousel for each listed home via AWS AppConfig. Here\'s what it will look like (unfortunately, IRL mansions are not included):</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kH578JIR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zcyldsnymlt6i5nnavoq.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kH578JIR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zcyldsnymlt6i5nnavoq.png" alt="Image description" loading="lazy" width="880" height="575"></a></p>\n\n<p>I have the starter repo that AWS created linked on my GitHub here under the branch <code>initial</code>. I also have the <code>final</code> branch code for reference as well.<br>\n</p>\n<div class="ltag-github-readme-tag">\n  <div class="readme-overview">\n    <h2>\n      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--566lAguM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev.to/assets/github-logo-5a155e1f9a670af7944dd5e12375bc76ed542ea80224905ecaf878b9157cdefc.svg" alt="GitHub logo" loading="lazy">\n      <a href="https://github.com/BrianHHough">\n        BrianHHough\n      </a> / <a style="font-weight: 600;" href="https://github.com/BrianHHough/AWSAppConfigWorkshop">\n        AWSAppConfigWorkshop\n      </a>\n    </h2>\n    <h3>\n      Exploration of the AWS AppConfig service for dynamic feature changes to a web application. The workshop uses AWS AppSync, AWS Amplify, AWS EC2, DynamoDB. The app\'s tech stack is: HTML, CSS, JavaScript.\n    </h3>\n  </div>\n  <div class="ltag-github-body">\n    \n<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/6922f5f0d25ee3d5d55788622f53287a5dfa040998aef428021b292ec674a4ba/68747470733a2f2f6465762d746f2d75706c6f6164732e73332e616d617a6f6e6177732e636f6d2f75706c6f6164732f61727469636c65732f667a6d32796c6e716f6e30303868706d68726a302e706e67"><img src="https://camo.githubusercontent.com/6922f5f0d25ee3d5d55788622f53287a5dfa040998aef428021b292ec674a4ba/68747470733a2f2f6465762d746f2d75706c6f6164732e73332e616d617a6f6e6177732e636f6d2f75706c6f6164732f61727469636c65732f667a6d32796c6e716f6e30303868706d68726a302e706e67" alt="AWS AppConfig Workshop" data-canonical-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fzm2ylnqon008hpmhrj0.png" style="max-width: 100%;"></a></p>\n<h1 dir="auto">\nAWS AppConfig Workshop Repo</h1>\n<p dir="auto">Exploration of the AWS AppConfig service for dynamic feature changes to a web application. The workshop uses AWS AppSync, AWS Amplify, AWS EC2, DynamoDB. The app\'s tech stack is: HTML, CSS, JavaScript.</p>\n<h2 dir="auto">\nThere are 2 branches:</h2>\n<ul dir="auto">\n<li>\n<code>final</code> = includes the script calling the AWS Lambda function connected to AWS AppConfig</li>\n<li>\n<code>initial</code> = is the starter repo (if you are following along, start on this branch)</li>\n</ul>\n<h2 dir="auto">\nFollow along to the following blog post for steps on how to proceed:</h2>\n<p dir="auto"><i>In Progress</i></p>\n</article></div>\n\n\n\n</div>\n<br>\n  <div class="gh-btn-container"><a class="gh-btn" href="https://github.com/BrianHHough/AWSAppConfigWorkshop">View on GitHub</a></div>\n<br>\n</div>\n<br>\n\n\n<p>If you\'re excited, read on!</p>\n\n<h2>\n  <a name="building-for-scale-in-the-cloud" href="#building-for-scale-in-the-cloud">\n  </a>\n  ‚òÅÔ∏è Building for Scale (in the Cloud)\n</h2>\n\n<p>Let\'s take a step back, to talk about scale. "Building for scale" is something a lot of people talk about, but very seldom do we ever plan for scale to happen in the ways we want. Becoming an "overnight success" could take months, years, or even decades in some cases. We rarely ever know when "hitting scale" will take place, so we have to future-proof tech so that it will scale with our needs, when we need them. </p>\n\n<p>Imagine releasing a feature to a million plus member base. What if the feature includes a breaking change with a bug that decreases use by 60% per week per user. That could be disastrous. We want to get ahead of these issues, which is why AWS AppConfig can help us analyze a feature pushed to a select (but growing) number of users over time so that we can adapt to the change, see what it does to our user base, and adjust accordingly.</p>\n\n<p>When you think about "building for scale," of course one of the top companies that comes to my mind is Facebook (...I mean, Meta...still not used to saying that). In Meta\'s 2022 Q1 2022 Earnings Report, the company reported a whopping 2.94 billion Monthly Active Users as of March 31, 2022 (<a href="https://investor.fb.com/investor-events/event-details/2022/Q1-2022-Earnings/default.aspx">Meta Q1 2022 Earnings Report</a>).</p>\n\n<p>One of the interviews that stands out in my mind in particular is Reid Hoffman\'s Masters of Scale interview with Meta CEO Mark Zuckerberg. Back in 2017, Mark Zuckerberg shared a bit more of the context behind his "move fast and break things" mantra that has allowed him to build the largest social media platform on the planet.</p>\n\n<p>Mark shared that:</p>\n\n<blockquote>\n<p>"At any given point in time, there isn\'t just one version of Facebook running, there are probably 10,000. Any engineer at the company can basically decide that they want to test something. There are some rules on sensitive things, but in general, an engineer can test something, and they can launch a version of Facebook not to the whole community, but maybe to 10,000 people or 50,000 people‚Äîwhatever is necessary to get a good test of an experience. (<a href="https://www.entrepreneur.com/article/294242">Entrepreneur</a>)"</p>\n</blockquote>\n\n<h3>\n  <a name="check-out-the-interview-here" href="#check-out-the-interview-here">\n  </a>\n  Check out the interview here:\n</h3>\n\n\n<div class="crayons-card c-embed text-styles text-styles--secondary">\n      <div class="c-embed__cover">\n        <a href="https://art19.com/shows/masters-of-scale/episodes/83f96210-9287-4cca-a4db-6a5b518942f9" class="c-link s:max-w-50 align-middle" target="_blank" rel="noopener noreferrer">\n          <img alt="" src="https://res.cloudinary.com/practicaldev/image/fetch/s--l0rhNlQP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://content.production.cdn.art19.com/images/f0/dd/b7/02/f0ddb702-9415-4e4e-bde3-077f70375882/2fda96216c3ac5dcb1f29d84c56e216742739fe49a8293e17d9cdb14418ca32b62c809d8f7c87a2ab36e4d32793c87b80deb138550eb9a30eed7796ca559e33a.jpeg" height="880" loading="lazy" class="m-0" width="880">\n        </a>\n      </div>\n    <div class="c-embed__body">\n      <h2 class="fs-xl lh-tight">\n        <a href="https://art19.com/shows/masters-of-scale/episodes/83f96210-9287-4cca-a4db-6a5b518942f9" target="_blank" rel="noopener noreferrer" class="c-link">\n          4. Imperfect is perfect, w/Facebook\'s Mark Zuckerberg\n        </a>\n      </h2>\n        <p class="truncate-at-3">\n          If you‚Äôre Steve Jobs, you can wait for your product to be perfect. For the rest of us, If you‚Äôre not embarrassed by your first product release, you‚Äôve released it too late. Imperfect is perfect. Why? Because your assumptions about what people want are never exactly right. Most entrepreneurs create great products through a tight feedback loop with real customers using a real product. So don‚Äôt fear imperfections; they won‚Äôt make or break your company. What will make or break you is speed. And no one knows this better than Facebook‚Äôs Mark Zuckerberg. He shares the origin story of his mantra ‚Äúmove fast and break things‚Äù and how this ethos applied as Facebook evolved from student project to tech giant.\n\nRead a transcript of this episode:¬†https://mastersofscale.com\n\nSubscribe to the Masters of Scale weekly newsletter:¬†http://eepurl.com/dlirtX\n        </p>\n      <div class="color-secondary fs-s flex items-center">\n          <img alt="favicon" class="c-embed__favicon m-0 mr-2 radius-0" src="https://res.cloudinary.com/practicaldev/image/fetch/s--yNSRub9u--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://webapp.production.cdn.art19.com/ember-app/assets/images/favicons/favicon-32x32-0b27c861c231edaca0794e8b27175509.png" loading="lazy" width="32" height="32">\n        art19.com\n      </div>\n    </div>\n</div>\n\n\n<p>You might think, why would you want something like this? All the users have different user experiences? Isn\'t that counter-intuitive to UI/UX testing, agile development, and scaling?</p>\n\n<p>Not necessarily... because, let\'s say you are testing the incorporation of a feature or experience. Sure you can test it in controlled environments, but those are still, controlled. What is more optimal is to test real people, using your app in a real way, without the impression of being under a microscope, so you can really understand if the feature "hits" or resonates with the expected user base at the expected time.</p>\n\n<p>To this day, I have always wondered how dynamic feature adds or dynamic user testing actually works in production. Thanks to the AWS Community Builders Program, I was able to see something like this in action, which is what I will be sharing with you today.</p>\n\n<h2>\n  <a name="intro-to-aws-appconfig" href="#intro-to-aws-appconfig">\n  </a>\n  ‚òÅÔ∏è Intro to AWS AppConfig\n</h2>\n\n<p>With AWS AppConfig, we are going to add in a feature called "Photo Slider" which will allow users to switch between photos in the app for each crib. However, it will not be visible to everyone all at once as soon as the feature is pushed. </p>\n\n<p>AWS AppConfig allows us to set the launch deployment details, where we can release to 1% of users, then 5%, then 10%, and so on. It can be risky to release a new feature to users all at once, so we need to account for that. AWS AppConfig has a feature called "Feature Flags" that can allow us to pull the switch on a feature if something unexpected or disastrous happens in the app and allow us to revert back near-instantly.</p>\n\n<h2>\n  <a name="where-does-aws-appconfig-fit" href="#where-does-aws-appconfig-fit">\n  </a>\n  ‚òÅÔ∏è Where does AWS AppConfig fit?\n</h2>\n\n<p>In this architecture diagram provided by the AWS team, it outlines where everything "lives." </p>\n\n<ul>\n<li>Deployment; via AWS Amplify</li>\n<li>Database: via DynamoDB</li>\n<li>Front-end: via HTML, CS, and JS</li>\n<li>AppConfig: connected via a AWS Lambda function to the front-end</li>\n</ul>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oobzKCrV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8g7r0a9i1e6kgzcwzeq0.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oobzKCrV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8g7r0a9i1e6kgzcwzeq0.png" alt="Image description" loading="lazy" width="815" height="465"></a><br>\nSource: AWS </p>\n<h2>\n  <a name="set-up-a-feature-flag" href="#set-up-a-feature-flag">\n  </a>\n  ‚òÅÔ∏è Set up a Feature Flag\n</h2>\n\n<p>In the AWS Console, you will navigate over to the <strong>AWS AppConfig</strong> service.</p>\n\n<ul>\n<li>Click <strong>Get Started</strong>\n</li>\n<li>In "Create Application" page, name your app: <code>AWSomeCribRentals</code>\n</li>\n<li>Add a description: <code>This is for feature flags related to the AWSomeCribRentals app</code>\n</li>\n<li>Click <strong>Create application</strong>\n</li>\n</ul>\n\n<p>This will be our container for all flags related to our application. Think of it like a wrapper.</p>\n\n<p>We then must create a <strong>configuration profile</strong> within the AppConfig application. This lets us define the Feature Flag type and set-up. You can think of it as an element within the wrapper (i.e. you could have multiple Configuration Profiles, perhaps even multiple feature flags within the same profile, which all sits within the AppConfig Application).</p>\n\n<ul>\n<li>Let\'s name the config profile of our feature addition of a card: <code>CardFeatureFlag</code>\n</li>\n<li>Add a description: <code>related to card</code>\n</li>\n</ul>\n\n<p>We will then add a new flag by clicking <strong>Add new flag</strong> which will be a short-term flag, as we will deprecate it in the future granted everything is a success:</p>\n\n<ul>\n<li>Name: <code>showcarousel</code>\n</li>\n<li>Description: <code>this will let users swipe through images than only showing them one per Crib</code>\n</li>\n<li>Select: <code>short-term-flag</code>\n</li>\n<li>Click <strong>Create flag</strong> to create our first Feature Flag with AWS AppConfig</li>\n<li>Click <strong>Save new version</strong> to proceed.</li>\n</ul>\n<h2>\n  <a name="update-the-photo-pagination-for-the-feature-flag" href="#update-the-photo-pagination-for-the-feature-flag">\n  </a>\n  ‚òÅÔ∏è Update the Photo Pagination for the Feature Flag\n</h2>\n\n<p>Navigate to the <strong>CardFeatureFlag</strong> that we just created and click <strong>Add new flag</strong></p>\n\n<ul>\n<li>Name: <code>pagination</code>\n</li>\n<li>Description: <code>change how many homes returned on the page</code>\n</li>\n<li>Attributes: <code>number</code>\n</li>\n<li>Type: <code>number</code>\n</li>\n<li>Value: <code>8</code>\n</li>\n<li>Required Value: [‚úÖ]</li>\n<li>Constraint: <code>5 minumum</code> and <code>12 maximum</code>\n</li>\n<li>Click <strong>Create flag</strong>\n</li>\n</ul>\n\n<p>Turn the pagination flag <strong>on</strong> with the switch and then press <strong>save new version</strong></p>\n<h2>\n  <a name="deploy-the-feature-flag" href="#deploy-the-feature-flag">\n  </a>\n  ‚òÅÔ∏è Deploy the Feature Flag\n</h2>\n\n<p>You should see something like this, which tells us we have two Feature Flags (<strong>pagination</strong> which is switched on, and <strong>showcarousel</strong> which is turned off) added to the Configuration Profile <strong>CardFeatureFlag</strong></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s---my-0MLT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/re9n1geszp6moqzkss3r.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s---my-0MLT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/re9n1geszp6moqzkss3r.png" alt="Image description" loading="lazy" width="880" height="656"></a></p>\n\n<p>We want to deploy this, so here is what we will do:</p>\n\n<ul>\n<li>Click <strong>Start deployment</strong>\n</li>\n<li>Click <strong>Create Environment</strong> </li>\n<li>Name the environment: <code>Beta</code>\n</li>\n</ul>\n\n<p>Next we will want to create a Deployment Strategy. It\'s important to consider factors like the <strong>Bake time:</strong> the amount of time AppConfig monitors for CloudWatch alarms before advancing to the next deployment or step, such as rolling back a feature.</p>\n\n<p>There are 3 pre-defined options available: <code>AppConfig.AllAtOnce</code> ‚Äî instant deployment to all, <code>AppConfig.Linear50PercentEvery30Seconds</code> ‚Äî deploys to half of target every 30 seconds and deploy time is 1 minute (i.e. useful for testing or demos), and <code>AppConfig.Canary10Percent20Minutes (AWS Recommended)</code> ‚Äî deploys slowly over time (i.e. useful for production workload).</p>\n\n<p>We will, however, <strong>Create deployment strategy</strong>:</p>\n\n<ul>\n<li>Name: <code>FFWorkshop_Deployment</code>\n</li>\n<li>Type: <code>Linear</code>\n</li>\n<li>Step percentage: <code>10</code>\n</li>\n<li>Deployment time: <code>1 minute</code>\n</li>\n<li>Bake time: <code>1 minute</code>g</li>\n</ul>\n\n<p>Select <strong>Create deployment strategy</strong> and then <strong>Start deployment</strong> which will take about a couple of minutes to fully release. It will ultimately look like this when it\'s been deployed fully:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FWPs186m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/d6ng18jrmv1fvuhe997c.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FWPs186m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/d6ng18jrmv1fvuhe997c.png" alt="Image description" loading="lazy" width="880" height="591"></a></p>\n<h2>\n  <a name="configure-aws-lambda" href="#configure-aws-lambda">\n  </a>\n  ‚òÅÔ∏è Configure AWS Lambda\n</h2>\n\n<p><strong><a href="https://aws.amazon.com/lambda/">AWS Lambda</a> functions</strong> are private functions that run in the cloud and allow you to run code without the need to run a server. You simply need to call a script to connect with them and then you can run compute without needing to provision a back-end for it.</p>\n\n<blockquote>\n<p>For some background context on AWS Lambda, check out Parts 1 and 2 of my "Serverless Workflows with Step Functions and Lambda" here:</p>\n\n<p><iframe width="710" height="399" src="https://www.youtube.com/embed/deKOfl6FHPg" allowfullscreen loading="lazy">\n</iframe>\n<br>\n<iframe width="710" height="399" src="https://www.youtube.com/embed/qEkkZzbmykQ" allowfullscreen loading="lazy">\n</iframe>\n</p>\n\n\n</blockquote>\n\n<p>To set up Lambda for our project, we will:</p>\n\n<ul>\n<li>Navigate to <strong>AWS Lambda</strong>\n</li>\n<li>Click <strong>Create Function</strong>\n</li>\n<li>Name: <code>FF_Lambda</code>\n</li>\n<li>Runtime: <code>Node.js 14.x</code>\n</li>\n<li>Click <strong>Create function</strong>\n</li>\n</ul>\n\n<p>In the code editor, add this code (generously provided to us by AWS) which allows us to toggle the Feature Flag on and off:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">http</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">aws-sdk</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">docClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">DynamoDB</span><span class="p">.</span><span class="nx">DocumentClient</span><span class="p">();</span>\n\n<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n\n    <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n        <span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span>\n            <span class="dl">"</span><span class="s2">http://localhost:2772/applications/AWSomeCribRentals/environments/Beta/configurations/CardFeatureFlag</span><span class="dl">"</span><span class="p">,</span>\n            <span class="nx">resolve</span>\n        <span class="p">);</span>\n    <span class="p">});</span>\n\n    <span class="kd">let</span> <span class="nx">configData</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">\'\'</span><span class="p">;</span>\n        <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">\'</span><span class="s1">data</span><span class="dl">\'</span><span class="p">,</span> <span class="nx">chunk</span> <span class="o">=&gt;</span> <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">);</span>\n        <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">\'</span><span class="s1">error</span><span class="dl">\'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>\n        <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">\'</span><span class="s1">end</span><span class="dl">\'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>\n    <span class="p">});</span>\n\n    <span class="kd">const</span> <span class="nx">parsedConfigData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">configData</span><span class="p">);</span>\n\n    <span class="kd">const</span> <span class="nx">DynamoParams</span> <span class="o">=</span> <span class="p">{</span>\n        <span class="na">TableName</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">AWSCribsRentalMansions</span><span class="dl">\'</span>\n    <span class="p">};</span>\n\n<span class="c1">//Fetching the listings from DynamoDB</span>\n\n    <span class="k">async</span> <span class="kd">function</span> <span class="nx">listItems</span><span class="p">()</span> <span class="p">{</span>\n        <span class="k">try</span> <span class="p">{</span>\n            <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">docClient</span><span class="p">.</span><span class="nx">scan</span><span class="p">(</span><span class="nx">DynamoParams</span><span class="p">).</span><span class="nx">promise</span><span class="p">();</span>\n            <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>\n        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>\n            <span class="k">return</span> <span class="nx">err</span><span class="p">;</span>\n        <span class="p">}</span>\n    <span class="p">}</span>\n\n<span class="c1">//Checking for the Caraousel Feature Flag</span>\n    <span class="k">if</span> <span class="p">(</span><span class="nx">parsedConfigData</span><span class="p">.</span><span class="nx">showcarousel</span><span class="p">.</span><span class="nx">enabled</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>\n        <span class="kd">let</span> <span class="nx">returnhtml</span> <span class="o">=</span> <span class="s2">``</span><span class="p">;</span>\n\n        <span class="k">try</span> <span class="p">{</span>\n\n            <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">listItems</span><span class="p">();</span>\n\n            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">parsedConfigData</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">number</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>\n                <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;div class="col-md-4 mt-4"&gt;\n                &lt;div class="card profile-card-5"&gt;\n                    &lt;div class="card-img-block"&gt;\n\n                        &lt;div class="slideshow-container"&gt;`</span><span class="p">;</span>\n\n                <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Image</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>\n                    <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;div class="mySlides`</span> <span class="o">+</span> <span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">`"&gt;\n                    &lt;img class="card-img-top" style="height: 300px;" src="`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Image</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">`" style="width:100%"&gt;\n                  &lt;/div&gt;`</span><span class="p">;</span>\n                <span class="p">}</span>\n\n                <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;/div&gt;`</span><span class="p">;</span>\n\n                <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Image</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>\n                    <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;a class="prev" onclick="plusSlides(-1, `</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">`)"&gt;&amp;#10094;&lt;/a&gt;\n                            &lt;a class="next" onclick="plusSlides(1, `</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">`)"&gt;&amp;#10095;&lt;/a&gt;`</span><span class="p">;</span>\n                <span class="p">}</span>\n\n                    <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;/div&gt;\n                    &lt;div class="card-body pt-0"&gt;\n                    &lt;h5 class="card-title"&gt;`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Name</span> <span class="o">+</span> <span class="s2">` &lt;span style="font-size: 0.7em;color:rgb(255, 64, 64)"&gt;(`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Location</span> <span class="o">+</span> <span class="s2">`)&lt;/span&gt;&lt;/h5&gt;\n                    &lt;p class="card-text"&gt;`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s2">`&lt;/p&gt;\n                    &lt;a class="btn btn-primary"style="display: inline" href="#"&gt;Check Availability&lt;/a&gt;\n                    &lt;span style="float: right;cursor: pointer;" onclick="favoriteStar(this)"&gt;&lt;span class="fa fa-star"&gt;&lt;/span&gt;&lt;/span&gt;\n                  &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;`</span><span class="p">;</span>\n            <span class="p">}</span>\n\n            <span class="k">return</span> <span class="p">{</span>\n                <span class="na">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>\n                <span class="na">body</span><span class="p">:</span> <span class="nx">returnhtml</span><span class="p">,</span>\n            <span class="p">};</span>\n\n        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>\n            <span class="k">return</span> <span class="p">{</span>\n                <span class="na">error</span><span class="p">:</span> <span class="nx">err</span>\n            <span class="p">}</span>\n        <span class="p">}</span>\n\n    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>\n\n        <span class="kd">let</span> <span class="nx">returnhtml</span> <span class="o">=</span> <span class="s2">``</span><span class="p">;</span>\n\n        <span class="k">try</span> <span class="p">{</span>\n\n            <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">listItems</span><span class="p">();</span>\n            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">dynamo db data: </span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>\n\n<span class="c1">//Checking for Pagination Numbers</span>\n            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">parsedConfigData</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">number</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>\n                <span class="nx">returnhtml</span> <span class="o">+=</span> <span class="s2">`&lt;div class="col-md-4 mt-4"&gt;\n                &lt;div class="card profile-card-5"&gt;\n                    &lt;div class="card-img-block"&gt;\n                    &lt;img class="card-img-top" style="height: 300px;" src="`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Image</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">`" style="width:100%"\n                        alt="Card image cap" style="height: 300px;"&gt;\n                    &lt;/div&gt;\n                    &lt;div class="card-body pt-0"&gt;\n                    &lt;h5 class="card-title"&gt;`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Name</span> <span class="o">+</span> <span class="s2">` &lt;span style="font-size: 0.7em;color:rgb(255, 64, 64)"&gt;(`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Location</span> <span class="o">+</span> <span class="s2">`)&lt;/span&gt;&lt;/h5&gt;\n                    &lt;p class="card-text"&gt;`</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s2">`&lt;/p&gt;\n                    &lt;a class="btn btn-primary"style="display: inline" href="#"&gt;Check Availability&lt;/a&gt;\n                    &lt;span style="float: right;cursor: pointer;" onclick="favoriteStar(this)"&gt;&lt;span class="fa fa-star"&gt;&lt;/span&gt;&lt;/span&gt;\n                  &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;`</span><span class="p">;</span>\n            <span class="p">}</span>\n\n            <span class="k">return</span> <span class="p">{</span>\n                <span class="na">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>\n                <span class="na">body</span><span class="p">:</span> <span class="nx">returnhtml</span><span class="p">,</span>\n            <span class="p">};</span>\n\n        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>\n            <span class="k">return</span> <span class="p">{</span>\n                <span class="na">error</span><span class="p">:</span> <span class="nx">err</span>\n            <span class="p">};</span>\n        <span class="p">}</span>\n    <span class="p">}</span>\n<span class="p">};</span>\n\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now we will want to add a layer to our Lambda Function (scroll to the bottom of the page and find <strong>Add a layer</strong>)</p>\n\n<ul>\n<li>Select <code>AWS-AppConfig-Extension</code>\n</li>\n<li>Click <strong>Add</strong>\n</li>\n</ul>\n\n<p>If all goes well, it should look like this:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8d2A7saT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s3asabluhej5b9ne91jr.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8d2A7saT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s3asabluhej5b9ne91jr.png" alt="Image description" loading="lazy" width="880" height="591"></a></p>\n<h4>\n  <a name="warning" href="#warning">\n  </a>\n  ‚ö†Ô∏è Warning\n</h4>\n\n<p>If you do not see <code>AWS-AppConfig-Extension</code> in the drop-down of AWS-provided layers...make sure you are actually in Node.js 14.x version of runtime (not 16.x like below). At the time of making this blog post, Node.js 16.x has not been configured to allow for the AppConfig extension yet.<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--k7e1c42M--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/v0naf5k30r5m6s7od8of.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--k7e1c42M--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/v0naf5k30r5m6s7od8of.png" alt="Image description" loading="lazy" width="880" height="594"></a></p>\n<h2>\n  <a name="set-up-the-aws-lambda-function-url" href="#set-up-the-aws-lambda-function-url">\n  </a>\n  ‚òÅÔ∏è Set up the AWS Lambda Function URL\n</h2>\n\n<p>One of the amazing benefits of AWS Lambda is the ability to add HTTPS endpoints to any serverless function we launch in Lambda, as well as configure CORS headers if we wish.</p>\n\n<p>Under the function overview:</p>\n\n<ul>\n<li>Click <strong>Configuration</strong>\n</li>\n<li>Click <strong>Function URL</strong> and then <strong>Create Function URL</strong>\n</li>\n<li>Auth Type: <code>NONE</code>\n</li>\n<li>Configure cross-origin resource sharing (CORS) [‚úÖ]</li>\n<li>We will include the wildcat <code>*</code> for this demo for <code>Allow origin</code>, <code>Expose headers</code>, <code>Allow headers</code>, and <code>Allow methods</code>...but you would want to configure more secure methods of connection for origin/headers in production.</li>\n<li>Click <strong>Save</strong> and save the Function URL for later.</li>\n</ul>\n\n<p>Next, we need to update the Execution Role to ensure our Lambda function has the right IAM permissions to access AppConfig using the AWS best practice and principle of "least privilege." Basically, don\'t allow more permissions than are required for the need/resource.</p>\n\n<ul>\n<li>Go to <strong>IAM (Identity and Access Management)</strong>\n</li>\n<li>Select <strong>Policies</strong>\n</li>\n<li>Go to <strong>Create Policy</strong>, then <strong>Choose a service</strong> and select <strong>AppConfig</strong>. </li>\n<li>For Actions, select <strong>All AppConfig actions</strong>\n</li>\n<li>For Resources, select <strong>All Resources</strong>\n</li>\n<li>Click <strong>Next</strong> to proceed through the steps and then at the end under name, write <code>AppConfigAllAccess</code> to name this IAM role.</li>\n</ul>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--7PltLXiQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lnv21b4fu3g1g4ahtu7h.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--7PltLXiQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lnv21b4fu3g1g4ahtu7h.png" alt="Image description" loading="lazy" width="880" height="594"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ir3L9nP1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hpjdjsnpufcezc28luco.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ir3L9nP1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hpjdjsnpufcezc28luco.png" alt="Image description" loading="lazy" width="880" height="591"></a></p>\n\n<p>Next, we will attach these policies to our Lambda Function: </p>\n\n<ul>\n<li>AmplifyFullAccess</li>\n<li>AppConfigFullAccess</li>\n<li>AppConfigAllAccess - this is the one we just made</li>\n<li>AmazonDynamoDBFullAccess</li>\n</ul>\n\n<p>The screen will look like this when you update the function and attached the policies successfully:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--KJSreCdi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a2on8neuuzjtgo3y20qr.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--KJSreCdi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a2on8neuuzjtgo3y20qr.png" alt="Image description" loading="lazy" width="880" height="596"></a></p>\n<h2>\n  <a name="create-and-populate-a-dynamodb-table-using-an-ec2-instance-vm" href="#create-and-populate-a-dynamodb-table-using-an-ec2-instance-vm">\n  </a>\n  ‚òÅÔ∏è Create and Populate a DynamoDB Table using an EC2 Instance (VM)\n</h2>\n\n<p>This was a very eye-opening part for me because the workshop had a lot of elements where a single user would be completing the upload/scripts from their computer. But what if you wanted to do it from a Virtual Machine because you have a different AWS Profile on your computer you don\'t want to overwrite/mess with? Or what if you wanted multiple people to have access to the same server files/items?</p>\n\n<p>You can configure an EC2 server and run all the commands as you would on your normal computer, but instead on a rented server/computer, in the cloud!</p>\n\n<p><a href="https://i.giphy.com/media/SACoDGYTvVNhZYNb5a/giphy.gif" class="article-body-image-wrapper"><img src="https://i.giphy.com/media/SACoDGYTvVNhZYNb5a/giphy.gif" loading="lazy" width="480" height="360" data-animated="true"></a></p>\n\n<p>This is where the real fun starts...</p>\n\n<p>First, we\'ll set up an EC2 instance so that we can get a real-time server running and that we can SSH into.</p>\n\n<ul>\n<li>Navigate to the <strong>EC2</strong> service in the AWS list of tools</li>\n<li><strong>Launch an instance</strong></li>\n<li>Choose: <code>t2.medium</code> (this will give us a little bit more power than the <code>t2.micro</code> BUT be cognizant that the <code>t2.medium</code> server will incur costs. If you do not want to incur costs, choose a <code>t2.micro</code> server instead).</li>\n<li>Turn on all public access to the server (this is just for demo/testing purposes, so if you are going into production, you would want to lock down the server).</li>\n<li>Once you confirm all the settings, save your keypair to your Computer/drive (this is important that you do not lose this), and click <strong>Launch</strong>\n</li>\n</ul>\n\n<p>The server will look like this once it is running:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--_HLUHiej--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0vuydjkyrp2bdz3x1ci.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--_HLUHiej--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0vuydjkyrp2bdz3x1ci.png" alt="Image description" loading="lazy" width="880" height="590"></a></p>\n<h2>\n  <a name="create-the-dynamodb-table-from-within-an-ec2-server-using-linux" href="#create-the-dynamodb-table-from-within-an-ec2-server-using-linux">\n  </a>\n  ‚òÅÔ∏è Create the DynamoDB Table from within an EC2 Server Using Linux\n</h2>\n\n<p>EC2 forces you to <code>chmod 400</code> of the keypair so only your user can read/edit the file ‚Äî anyone else would need to <code>sudo</code>. Make sure that the path does link to your terminal (Mac) or PowerShell (Windows). <strong>TIP</strong>: You can easily drag and drop a file from the Finder or Windows Explorer into your command line to automatically generate the file path.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code><span class="nb">chmod </span>400 /User/FF_Workshop_Keypair.cer\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now we will SSH into the server with the keypair and Public DNS.</p>\n\n<ul>\n<li>We will use <code>ec2-user</code> in the first part because this is an EC2 Instance</li>\n<li>We will then pull the Public IPv4 DNS of the EC2 instance which you will see in the above screenshot on the right for the Instance Summary: <code>ec2-3-82-148-71.compute-1.amazonaws.com</code>\n</li>\n</ul>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>ssh <span class="nt">-i</span> /User/FF_Workshop_Keypair.cer ec2-user@ec2-3-82-148-71.compute-1.amazonaws.com\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>It will look like this if you are successfully signed into the server:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--krztd525--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qkh43rfpe9bigd5rgegg.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--krztd525--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qkh43rfpe9bigd5rgegg.png" alt="Image description" loading="lazy" width="880" height="286"></a></p>\n\n<p>Now we need to configure <code>aws</code> inside of the server.</p>\n\n<p>The elements we will need to configure attributes for are: Default Region, Access Key ID, Secret Access Key, and AWS Session Token. These were generated for us via the AWS Event Bridge, but without it being set up for us, we would need to configure the aws profile (link to more about this in the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html">AWS docs</a>)</p>\n\n<p>We will write <code>aws configure</code> and enter, and then copy and paste all of these values into the command line and press enter when prompted for each one. And then under output format, put <code>json</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code><span class="nv">AWS_DEFAULT_REGION</span><span class="o">=</span>us-east-1\n<span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>MSIA...MQ5U\n<span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>YI2d...JuZU\n<span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span>IQoJ...wef4\n\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>It will look like this:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ON-QHFgP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8un5ph4nym4lkif2l8q5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ON-QHFgP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8un5ph4nym4lkif2l8q5.png" alt="Image description" loading="lazy" width="709" height="105"></a></p>\n<h2>\n  <a name="next-you-have-to-make-sure-the-right-aws-account-is-active-for-the-session-in-the-command-line" href="#next-you-have-to-make-sure-the-right-aws-account-is-active-for-the-session-in-the-command-line">\n  </a>\n  ‚òÅÔ∏è  Next, you have to make sure the right AWS account is active for the session in the command line\n</h2>\n\n<p>Right now, you have configured AWS above but it‚Äôs not set up to connect to anything‚Ä¶we know this because if we then try to do: <code>aws sts get-caller-identity</code> we will get the following error: Or code snippet:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--qftGbt-V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o1zj2d58ndq07xuwbex.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--qftGbt-V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o1zj2d58ndq07xuwbex.png" alt="Image description" loading="lazy" width="754" height="84"></a><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>An error occurred <span class="o">(</span>InvalidClientTokenId<span class="o">)</span> when calling the GetCallerIdentity operation: The security token included <span class="k">in </span>the request is invalid.\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>To fix this, we need to add in the credentials into the command line as environmental variables and export (print) them into the profile for AWS in the Linux instance (same values as before):<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code><span class="nb">export </span><span class="nv">AWS_DEFAULT_REGION</span><span class="o">=</span>us-east-1\n<span class="nb">export </span><span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>MSIA...MQ5U\n<span class="nb">export </span><span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>YI2d...JuZU\n<span class="nb">export </span><span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span>IQoJ...wef4\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>We can verify that the environmental variables are saved to our Linux session with <code>printenv AWS_DEFAULT_REGION</code> or <code>printenv AWS_ACCESS_KEY_ID</code></p>\n\n<p>If the output prints what we entered in previously, then it worked!</p>\n\n<p>To validate that our AWS account is authenticated/synced, type <code>aws sts get-caller-identity</code>. If this worked correctly, you should see a print out of something like the below:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--JewwaJmg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5n56eyi6848rl10ol7op.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--JewwaJmg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5n56eyi6848rl10ol7op.png" alt="Image description" loading="lazy" width="716" height="126"></a><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight json"><code><span class="p">{</span><span class="w">\n    </span><span class="nl">"Account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"354789352487"</span><span class="p">,</span><span class="w"> \n    </span><span class="nl">"UserId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AROAVFGYX4QT3O2UKAPLI:MasterKey"</span><span class="p">,</span><span class="w"> \n    </span><span class="nl">"Arn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:sts::354789352487:assumed-role/TeamRole/MasterKey"</span><span class="w">\n</span><span class="p">}</span><span class="w">\n</span></code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>In our AWS account, in the top right, you\'ll see the right Account # (the same as in "Account" in the terminal). <br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--AoXksWUZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mwyklmsi39xuxgvt3w9y.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--AoXksWUZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mwyklmsi39xuxgvt3w9y.png" alt="Image description" loading="lazy" width="494" height="89"></a></p>\n\n<p>Alright we did it!</p>\n\n<p>To further validate this, if we use <code>aws ec2 describe-instances</code> then we should get a print out of the instances we are running or have terminated:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--BYvrFaeK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eckxhty17fjrrvc5s8i9.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--BYvrFaeK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eckxhty17fjrrvc5s8i9.png" alt="Image description" loading="lazy" width="880" height="654"></a></p>\n<h2>\n  <a name="now-we-populate-the-dynamodb-table-to-hold-image-links-and-home-information" href="#now-we-populate-the-dynamodb-table-to-hold-image-links-and-home-information">\n  </a>\n  ‚òÅÔ∏è Now we populate the DynamoDB Table to hold image links and home information\n</h2>\n\n<p>While we have our SSH link open to our server and running, let\'s open up another terminal window. This is because we cannot upload a local file from within the server (remember, we are in a virtual machine there...so we are in a completely different computer that doesn\'t recognize our local directories on our computer).</p>\n\n<p>We need to upload a file to the server and then call it that way to communicate with DynamoDB. We will use the <code>scp</code> (Secure Copy Protocol) command in Linux, which is used to copy/send/retrieve files securely between servers.</p>\n\n<p>For us, the script we will run is this below: we reference a IAM key-pair certificate file <code>FF_Workshop_Keypair.cer</code> file on our computer and then the <code>AWSCribsRentalMansions.json</code> file on our computer and then our EC2 AMI‚Äôs Public IPv4 DNS <code>ec2-3-82-148-71.compute-1.amazonaws.com</code> and declare that we will put it as a loose-hanging file in the server at position: <code>/</code> .</p>\n\n<p>The linux command is:</p>\n\n<ul>\n<li>1st part is the path to the secret key file</li>\n<li>2nd part is the path to the file we want to upload</li>\n<li>3rd part is <code>ec2-user</code> because it\'s an AMI EC2 "at" the Public IPv4 DNS URL <code>ec2-3-82-148-71.compute-1.amazonaws.com</code>\n</li>\n<li>4th part is a <code>~</code> since we want to upload it as a loose-hanging file in the server.\n</li>\n</ul>\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>scp <span class="nt">-i</span> /Users/FF_Workshop_Keypair.cer /Users/AWSCribsRentalMansions.json  ec2-user@ec2-3-82-148-71.compute-1.amazonaws.com:~\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n<p>If all goes well, you should see a 100% printed below the script you entered.</p>\n\n<p>Now, let\'s test if the file was uploaded in our server. Switch back to the terminal window where we SSH\'ed into the server. If we do an <code>ls</code> from the root directory, we should now see the <code>json</code> file!</p>\n\n<p>Now we will populate the DynamoDB table with our file uploaded to the EC2 instance:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>aws dynamodb batch-write-item <span class="nt">--request-items</span> file://AWSCribsRentalMansions.json\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>It will look like this (don\'t worry that it says "Unprocessed Items" - this is normal ‚ò∫Ô∏è):<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--m1PIwXkC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/55uydqm0loczvez1er5g.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--m1PIwXkC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/55uydqm0loczvez1er5g.png" alt="Image description" loading="lazy" width="766" height="189"></a></p>\n\n<p>Let\'s check if DynamoDB really did receive all of the files like our command line told us. If it worked successfully, it will look like this:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--HqUv2Ymj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/njpbfmgprdt8phno1zlk.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--HqUv2Ymj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/njpbfmgprdt8phno1zlk.png" alt="Image description" loading="lazy" width="880" height="315"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--fC6kzYan--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/95gw70lsasw73i3147q6.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fC6kzYan--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/95gw70lsasw73i3147q6.png" alt="Image description" loading="lazy" width="880" height="431"></a></p>\n\n<p>Nice!! The files are all there!</p>\n<h2>\n  <a name="set-up-website-on-aws-with-aws-amplify-and-aws-codecommit" href="#set-up-website-on-aws-with-aws-amplify-and-aws-codecommit">\n  </a>\n  ‚òÅÔ∏è Set up website on AWS with AWS Amplify and AWS CodeCommit\n</h2>\n\n<p>We will need 2 specific tools to hold our code and then to push our code to the internet with a link users can access.</p>\n\n<ul>\n<li>\n<strong>AWS Amplify</strong>: for delivering the front-end</li>\n<li>\n<strong>AWS CodeCommit</strong>: hold the code to deploy to Amplify</li>\n</ul>\n\n<p>In our <code>index.html</code> file in the repo (check out my <strong><a href="https://github.com/BrianHHough/AWSAppConfigWorkshop/tree/initial">starter repo here</a></strong> from the code provided by AWS), we will need add the Lambda function calling AppConfig into the <code>&lt;script&gt;</code> tag of the <code>index.html</code> file.</p>\n\n<p>We will turn this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight html"><code><span class="c">&lt;!-- api call to populate cribs --&gt;</span> --&gt;\n<span class="nt">&lt;script&gt;</span>\n     <span class="nx">fetch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">lamba-url-here</span><span class="dl">\'</span><span class="p">)</span>\n     <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>\n     <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">populateCribsHere</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerHTML</span><span class="o">=</span><span class="nx">data</span><span class="p">;</span>\n            <span class="nx">setUI</span><span class="p">();</span>\n  <span class="p">});</span>\n<span class="nt">&lt;/script&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Into this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight html"><code><span class="c">&lt;!-- api call to populate cribs --&gt;</span> --&gt;\n<span class="nt">&lt;script&gt;</span>\n        <span class="nx">fetch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">https://2v35t2ppjx4vh7ygjzip7nauji0yzmxl.lambda-url.us-east-1.on.aws/</span><span class="dl">\'</span><span class="p">)</span>\n     <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>\n     <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">populateCribsHere</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerHTML</span><span class="o">=</span><span class="nx">data</span><span class="p">;</span>\n            <span class="nx">setUI</span><span class="p">();</span>\n  <span class="p">});</span>\n<span class="nt">&lt;/script&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Remember that Lambda Function URL we got from before? We will put that into the <code>lamba-url-here</code>. We can get that here:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xB16JKi4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ztzmju7x1fmu0dc3ixrc.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xB16JKi4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ztzmju7x1fmu0dc3ixrc.png" alt="Image description" loading="lazy" width="880" height="646"></a></p>\n<h2>\n  <a name="use-aws-codecommit-to-host-private-git-repo" href="#use-aws-codecommit-to-host-private-git-repo">\n  </a>\n  ‚òÅÔ∏è Use AWS CodeCommit to Host Private Git Repo\n</h2>\n\n<p><a href="https://aws.amazon.com/codecommit/">AWS CodeCommit</a> is a secure, highly scalable, managed source control service that hosts private Git repositories.</p>\n\n<ul>\n<li>Go to <strong>CodeCommit</strong>\n</li>\n<li>Click <strong>Create a Repository</strong>\n</li>\n<li>Name: <code>AWSomeCribRepo</code>\n</li>\n<li>Description: <code>This holds the code of my AWSomeCribRepo project</code>\n</li>\n<li>Click <strong>Create</strong>\n</li>\n</ul>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--BxDinyUU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xekcxwp4rq4wl4ba3v9l.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--BxDinyUU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xekcxwp4rq4wl4ba3v9l.png" alt="Image description" loading="lazy" width="880" height="625"></a></p>\n\n<p>After the repo is created, we need to add our code to this CodeCommit repo. We will see a couple different methods for how to Connect. We will choose the <code>HTTPS (GRC)</code> method.</p>\n\n<blockquote>\n<p>HTTPS (GRC) is the protocol to use with git-remote-codecommit (GRC). This utility provides a simple method for pushing and pulling code from CodeCommit repositories by extending Git. It is the recommended method for supporting connections made with federated access, identity providers, and temporary credentials.</p>\n</blockquote>\n\n<p>What we really want to do is <code>pip install git-remote-codecommit</code> to install the git-remote-code-commit framework, BUT, we don\'t have <code>pip</code> installed yet. We need Python to run pip so let\'s check if it\'s installed:</p>\n\n<ul>\n<li>Run <code>python --version</code> ‚Äî for me, the output is <code>Python 2.7.18</code> and it should be added since this is an EC2 instance.</li>\n<li>To install pip, run <code>sudo yum install python-pip</code> </li>\n</ul>\n\n<p>It should look like this if it\'s successfully installed:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OyZ2Ha4R--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kg5vjiz0c359l7p6a74a.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OyZ2Ha4R--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kg5vjiz0c359l7p6a74a.png" alt="Image description" loading="lazy" width="880" height="752"></a></p>\n\n<ul>\n<li>Now that pip is installed, let‚Äôs run the command we wanted to initially: <code>pip install git-remote-codecommit</code>.</li>\n</ul>\n\n<p>It should look like this if all goes well:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--KJ42BOnN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/o5irrhuqb3uycz9hf2ro.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--KJ42BOnN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/o5irrhuqb3uycz9hf2ro.png" alt="Image description" loading="lazy" width="880" height="476"></a></p>\n\n<p>Now we want to clone the repository to our EC2 instance with this command: <code>git clone codecommit::us-east-1://AWSomeCribRepo</code>. However, we don‚Äôt have git yet in our server, so we‚Äôll install git this way:</p>\n\n<ul>\n<li>Run this command: <code>sudo yum install git</code>\n</li>\n</ul>\n\n<p>If all goes well, it will look like this:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--pD2R2-p_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n1s69x0oku3vd5b2ltws.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--pD2R2-p_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n1s69x0oku3vd5b2ltws.png" alt="Image description" loading="lazy" width="880" height="909"></a><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--EsiZZUqr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9dijpf6y4lzyu4ftl87i.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--EsiZZUqr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9dijpf6y4lzyu4ftl87i.png" alt="Image description" loading="lazy" width="880" height="884"></a></p>\n\n<ul>\n<li><p>We will verify the installation went through with: <code>git --version</code> ‚Äî if it worked, you will see a print out like <code>git version 2.32.0</code><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--SSvVTarb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1wvkquiwbju1q4i8vk7.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--SSvVTarb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1wvkquiwbju1q4i8vk7.png" alt="Image description" loading="lazy" width="728" height="80"></a></p></li>\n<li><p>Now we will finally run: <code>codecommit::us-east-1://AWSomeCribRepo</code> ‚Äî this will clone the empty repo into our server. When we do ls we see the blue folder in there:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--5HoEVuXo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/e31yg6g0oqsfgtr77rjv.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--5HoEVuXo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/e31yg6g0oqsfgtr77rjv.png" alt="Image description" loading="lazy" width="880" height="316"></a></p></li>\n</ul>\n\n<p>‚ú® Amazing job! We now have a link to our AWS CodeCommit Repo (in our AWS Environment) and our EC2 server. Especially cool because this is now OUR computer, but a virtual machine.</p>\n<h2>\n  <a name="how-do-we-upload-a-folders-contents-locally-our-code-repo-into-a-code-repo-in-our-ec2-instance-using-linux" href="#how-do-we-upload-a-folders-contents-locally-our-code-repo-into-a-code-repo-in-our-ec2-instance-using-linux">\n  </a>\n  ‚òÅÔ∏è How do we upload a folder‚Äôs contents locally (our code repo) into a code repo in our EC2 instance using Linux?\n</h2>\n\n<p>Linux can be a bit confusing here but what we essentially will be doing is using a 2nd terminal window to connect to our SSH\'ed terminal window, and then use that to connect to AWS. Don\'t worry... we will get there üòä </p>\n\n<p>We will use <code>scp</code> to upload the file contents WITHIN our local folder and serve that content INTO the folder that is our AWS CodeCommit-connected folder.</p>\n\n<ul>\n<li>We will use <code>scp</code> (secure copy protocol)</li>\n<li>We use the -r flag (to recursively go through all the files)</li>\n<li>We will input the path of our Keypair</li>\n<li>We will then input the path of our folder and because it\'s the contents WITHIN it, we add the wildcard <code>/*</code> after the folder name</li>\n<li>We will then input the EC2 instance with <code>ec2-user</code> and <code>@</code> and then our EC2\'s Public IPv4 DNS value.\n</li>\n</ul>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>scp -r -i  /Users/FF_Workshop_Keypair.cer /Users/AWSAppConfigWorkshop/*  ec2-user@ec2-3-82-148-71.compute-1.amazonaws.com:~/AWSomeCribRepo\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n<p>You can see how the commands work between the 1st and 2nd terminal windows. On the right (connected to our local computer), we serve the files to the server. Then on the left (connected to the EC2 instance), we check to see if the files were in fact uploaded.</p>\n<h4>\n  <a name="note-in-the-screenshot-it-says-raw-amazonawscomtest-endraw-but-this-was-taken-while-i-was-testing-linux-you-will-want-that-part-to-read-raw-amazonawscomawsomecribrepo-endraw-like-what-is-referenced-in-the-above-code-snippet" href="#note-in-the-screenshot-it-says-raw-amazonawscomtest-endraw-but-this-was-taken-while-i-was-testing-linux-you-will-want-that-part-to-read-raw-amazonawscomawsomecribrepo-endraw-like-what-is-referenced-in-the-above-code-snippet">\n  </a>\n  ‚ö†Ô∏è NOTE: in the screenshot, it says <code>...amazonaws.com:~/test</code> but this was taken while I was testing Linux üòä. You will want that part to read <code>amazonaws.com:~/AWSomeCribRepo</code> like what is referenced in the above code snippet:\n</h4>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Mkc1FSRU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qtgqq9kwi76coq1nacaz.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Mkc1FSRU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qtgqq9kwi76coq1nacaz.png" alt="Image description" loading="lazy" width="880" height="581"></a></p>\n<h2>\n  <a name="now-we-will-push-the-code-to-aws-code-commit" href="#now-we-will-push-the-code-to-aws-code-commit">\n  </a>\n  ‚òÅÔ∏è Now we will push the code to AWS Code Commit\n</h2>\n\n<p>Back in our SSH\'ed terminal window, we will want to make sure we are in our <code>AWSomeCribRepo</code> and run the commands to send the repo into AWS CodeCommit:</p>\n\n<ul>\n<li>Run: <code>cd AWSomeCribRepo</code>\n</li>\n<li>Add all the files in the directory to git with <code>git add -A</code>\n</li>\n<li>Create a commit message: <code>git commit -m "commit from EC2"</code>\n</li>\n<li>Push the code to AWS CodeCommit: <code>git push</code>\n</li>\n</ul>\n\n<p>When you do the <code>git push</code>, you will see output like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>Enumerating objects: 1847, <span class="k">done</span><span class="nb">.</span>\nCounting objects: 100% <span class="o">(</span>1847/1847<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>\nDelta compression using up to 2 threads\nCompressing objects: 100% <span class="o">(</span>1845/1845<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>\nWriting objects: 100% <span class="o">(</span>1847/1847<span class="o">)</span>, 3.99 MiB | 4.68 MiB/s, <span class="k">done</span><span class="nb">.</span>\nTotal 1847 <span class="o">(</span>delta 213<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>, pack-reused 0\nTo codecommit::us-east-1://AWSomeCribRepo\n <span class="k">*</span> <span class="o">[</span>new branch]      master -&gt; master\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--hv_lC8gh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8zxjxcmt7vho8ny34wsv.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--hv_lC8gh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8zxjxcmt7vho8ny34wsv.png" alt="Image description" loading="lazy" width="517" height="156"></a></p>\n\n<h4>\n  <a name="important-if-you-run-into-this-type-of-error-after-raw-git-push-endraw-" href="#important-if-you-run-into-this-type-of-error-after-raw-git-push-endraw-">\n  </a>\n  ‚ö†Ô∏è IMPORTANT: If you run into this type of error after <code>git push</code>:\n</h4>\n\n<blockquote>\n\n<pre class="highlight shell"><code>fatal: unable to access <span class="s1">\'https://git-codecommit.us-east-1.amazonaws.com/v1/repos/AWSomeCribRepo/\'</span>: The requested URL returned error: 403\n</code></pre>\n\n\n<p>Or looks like this in the command line: <br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Kcm1U1fu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/sxvqqwl25uso2gum58k4.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Kcm1U1fu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/sxvqqwl25uso2gum58k4.png" alt="Image description" loading="lazy" width="745" height="58"></a></p>\n\n<p>It‚Äôs probably because your configuration environmental variables aren‚Äôt set correctly in the EC2 server. </p>\n\n<p>These are provided to us thanks the AWS EventBridge for the workshop, but you can retrieve these as part of your AWS Account. You need to make sure you are "logged in" or authenticated in the EC2 instance for the push command to know which AWS Account\'s CodeCommit to push to. Imagine you push your code to a stranger\'s CodeCommit... (that would be so bad...). This is to make sure we are truly authenticated in the right place to then send our code to the right destination.</p>\n\n\n<pre class="highlight shell"><code><span class="nv">AWS_DEFAULT_REGION</span><span class="o">=</span>us-east-1\n<span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>MSIA...MQ5U\n<span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>YI2d...JuZU\n<span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span>IQoJ...wef4\n</code></pre>\n\n\n<p>Confirm that <code>aws sts get-caller-identity</code> returns a value like this:</p>\n\n\n<pre class="highlight shell"><code><span class="o">{</span>\n    <span class="s2">"Account"</span>: <span class="s2">"354789352487"</span>, \n    <span class="s2">"UserId"</span>: <span class="s2">"AROAVFGYX4QT3O2UKAPLI:MasterKey"</span>, \n    <span class="s2">"Arn"</span>: <span class="s2">"arn:aws:sts::354789352487:assumed-role/TeamRole/MasterKey"</span>\n<span class="o">}</span>\n</code></pre>\n\n\n<p>Now when you do the <code>git push</code>, you will see output like this:</p>\n\n\n<pre class="highlight shell"><code>Enumerating objects: 1847, <span class="k">done</span><span class="nb">.</span>\nCounting objects: 100% <span class="o">(</span>1847/1847<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>\nDelta compression using up to 2 threads\nCompressing objects: 100% <span class="o">(</span>1845/1845<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>\nWriting objects: 100% <span class="o">(</span>1847/1847<span class="o">)</span>, 3.99 MiB | 4.68 MiB/s, <span class="k">done</span><span class="nb">.</span>\nTotal 1847 <span class="o">(</span>delta 213<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>, pack-reused 0\nTo codecommit::us-east-1://AWSomeCribRepo\n <span class="k">*</span> <span class="o">[</span>new branch]      master -&gt; master\n</code></pre>\n\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--GH7ZwvxE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llm1qqq508l5vz47qnim.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--GH7ZwvxE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llm1qqq508l5vz47qnim.png" alt="Image description" loading="lazy" width="517" height="156"></a></p>\n</blockquote>\n\n<p>Back in the AWS Console, CodeCommit will now go from this:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--EHNycjRz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1x3w7d2a0mey6smwlls8.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--EHNycjRz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1x3w7d2a0mey6smwlls8.png" alt="Image description" loading="lazy" width="880" height="432"></a></p>\n\n<p>To this:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--LPSOC_Ea--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5abeekku95g4edfvro6p.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--LPSOC_Ea--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5abeekku95g4edfvro6p.png" alt="Image description" loading="lazy" width="880" height="455"></a></p>\n\n<p>‚ú® You have now created a repository for your website with files uploaded from your computer, to your EC2 instance, and now to AWS. Next, you will connect this repository to AWS Amplify to host your website with a real URL.</p>\n<h2>\n  <a name="host-your-website-on-aws-amplify" href="#host-your-website-on-aws-amplify">\n  </a>\n  üöÄ Host your Website on AWS Amplify\n</h2>\n\n<p>One of the best benefits of <a href="https://aws.amazon.com/amplify/">AWS Amplify</a> when running deployments is the ability to see the various stages of the build process. This becomes very helpful when there are errors or you need to check the validation of a build, the logs include a great amount of detail, and of course you can roll in a vast amount of tools and AWS features thanks to Amplify and it\'s framework to abstract complexity from deployments.</p>\n\n<p>To accomplish this we will:</p>\n\n<ul>\n<li>Go to the <strong>AWS Amplify</strong> service in the AWS Console</li>\n<li>Go to <strong>All apps</strong>\n</li>\n<li>Select <strong>New App</strong> and in the drop-down, select <strong>Host web app</strong>\n&gt; <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--w6q5MhEe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hsmd7lpti5qdi28ffbob.png" alt="Image description" loading="lazy" width="880" height="329">\n</li>\n<li>Select <strong>AWS CodeCommit</strong> and then <strong>Continue</strong> to advance\n&gt; <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--WZFrp7bM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mdrd9gewivwpyherw9ku.png" alt="Image description" loading="lazy" width="880" height="478">\n</li>\n<li>Select <code>AWSomeCribRepo</code>in the CodeCommit dropdown and then <strong>Next</strong>\n&gt; <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--MjtGtLNB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hfk60pac3j49ljpdjjnt.png" alt="Image description" loading="lazy" width="880" height="369">\n</li>\n<li>In the <strong>Configure build settings</strong> make sure to click <strong>‚úÖ Allow AWS Amplify to automatically deploy all files hosted in your project root directory</strong> and then press <strong>Next</strong>.\n<img src="https://res.cloudinary.com/practicaldev/image/fetch/s--uJt0QH5v--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aml77p5rrtm9sk4ktae8.png" alt="Image description" loading="lazy" width="880" height="513">\n</li>\n<li>Now click <strong>Save and deploy</strong>\n&gt; <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--_peEpN21--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ztc1ckh5wanli20xxufb.png" alt="Image description" loading="lazy" width="880" height="444">\n</li>\n</ul>\n\n<p>AWS Amplify will then go through it‚Äôs 4 stages of deployment automatically for us</p>\n\n<ul>\n<li>Provision</li>\n<li>Build</li>\n<li>Deploy</li>\n<li>Verify</li>\n</ul>\n\n<p>It will go from this:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--K77AO3Ha--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wi344g6ulu8vzxj585rr.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--K77AO3Ha--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wi344g6ulu8vzxj585rr.png" alt="Image description" loading="lazy" width="880" height="507"></a></p>\n\n<p>‚ú® To this: <br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0EQyqY4n--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/84y9ni4b1vi1045cua8h.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0EQyqY4n--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/84y9ni4b1vi1045cua8h.png" alt="Image description" loading="lazy" width="880" height="563"></a></p>\n\n<p>When our site is building, it will go from this:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0WaDuYWJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qnsitonfl3rhqfzidjyo.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0WaDuYWJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qnsitonfl3rhqfzidjyo.png" alt="Image description" loading="lazy" width="880" height="507"></a></p>\n\n<p>‚ú® To this:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--NCxs42U7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3nhmx0yl657zpuyamsjh.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--NCxs42U7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3nhmx0yl657zpuyamsjh.png" alt="Image description" loading="lazy" width="880" height="607"></a></p>\n<h2>\n  <a name="using-feature-flags" href="#using-feature-flags">\n  </a>\n  ‚òÅÔ∏è Using Feature Flags\n</h2>\n\n<p>If you notice in the deployed version, it doesn\'t show that carousel feature we created AppConfig for in the first place... where did it go? Wasn\'t it supposed to appear there?</p>\n\n<p>We haven\'t turned it on yet üòä </p>\n\n<p>So what we are going to now do is turn on and deploy the carousel Feature Flag to launch this feature. We will then put on an operational toggle to ensure that during spikes in usage, it will limit the number of homes displayed on the homepage. This will help to optimize our performance with fewer queries on our DynamoDB table at peak times. </p>\n\n<ul>\n<li>Go to <strong>AppConfig</strong>\n</li>\n<li>Select our app <code>AWSomeCribRentals</code>\n</li>\n<li>Click on the Feature Flag we created: <code>CardFeatureFlag</code> (notice that the CardFeature Flag is OFF for the <code>showcarousel</code> Flag as shown below)</li>\n</ul>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kuQ4tmLs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9d81u6lkx4lvqzl410ub.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kuQ4tmLs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9d81u6lkx4lvqzl410ub.png" alt="Image description" loading="lazy" width="880" height="656"></a></p>\n\n<ul>\n<li>Toggle the <code>showcarousel</code> flag ON and then <strong>Save new version</strong>\n</li>\n<li>Click <strong>Start Deployment</strong> and configure the elements</li>\n<li>Environment: <code>Beta</code> - we set this up earlier</li>\n<li>Hosted configuration version: 2</li>\n<li>Deployment strategy: <code>FFWorkshop_Deployment</code> </li>\n<li>Description: <code>Switching showcarousel feature on gradually for users</code>\n</li>\n<li>Click <strong>Start deployment</strong>\n</li>\n</ul>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--26-xxNmZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h9lb2yb8pb48bzcgcv3s.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--26-xxNmZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h9lb2yb8pb48bzcgcv3s.png" alt="Image description" loading="lazy" width="880" height="650"></a></p>\n\n<p>The deployment (this is technically Deployment #2 because we already deployed earlier on this Feature Flag) will look like this as it builds and gives you data about the deployment like so until its state reaches 100%:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ObcHnZQJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0hwozcx4lgskjlcipnxk.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ObcHnZQJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0hwozcx4lgskjlcipnxk.png" alt="Image description" loading="lazy" width="880" height="655"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--mPROsMG1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aeytc0k4jr1jcgw09bke.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--mPROsMG1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aeytc0k4jr1jcgw09bke.png" alt="Image description" loading="lazy" width="880" height="652"></a></p>\n<h2>\n  <a name="viola-check-out-the-updated-changes-to-our-app" href="#viola-check-out-the-updated-changes-to-our-app">\n  </a>\n  ‚ú® Viola! Check out the updated changes to our app:\n</h2>\n\n<p>Notice the carousel? This is now a feature that users will begin to see in our application:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--JQoXQmFX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kbbk5mipwbtqlkyo7b2q.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--JQoXQmFX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kbbk5mipwbtqlkyo7b2q.png" alt="Image description" loading="lazy" width="880" height="575"></a></p>\n\n<p>Here is a video of the deployed AppConfig Feature Flag in action live on the URL:<br>\n<iframe src="https://player.vimeo.com/video/719701137" width="710" height="399" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen loading="lazy">\n</iframe>\n</p>\n\n<h2>\n  <a name="operational-feature-flags" href="#operational-feature-flags">\n  </a>\n  ‚òÅÔ∏è Operational Feature Flags\n</h2>\n\n<p>This above is an example of a feature add that we will definitely add to our site and keep. However, let\'s say we wanted to throttle the number of requests coming back to users when they search for something or want a certain type of data. </p>\n\n<p>Remember our <code>pagination</code> Feature Flag in <code>CardFeatureFlag</code> that we configured earlier? Well, if we want to adjust how many results are returned in the pagination results (i.e. to improve performance when there is a lot of traffic), we can do this by:</p>\n\n<ul>\n<li>Navigate to <strong>AppConfig</strong>\n</li>\n<li>Click on the <strong>CardFeatureFlag</strong> that we set up</li>\n<li>Select the <strong>pagination</strong> flag</li>\n<li>Click <strong>Edit</strong>\n</li>\n<li>Change the number in the <strong>value</strong> to: 6</li>\n<li>Click <strong>Confirm</strong>\n</li>\n<li>Ensure this flag\'s toggle is turned <strong>ON</strong>\n</li>\n<li>Click <strong>Save new version</strong>\n</li>\n<li>Click <strong>Start deployment</strong>\n</li>\n<li>Keep the same settings as you did in Deployment #2 above, and especially make sure the Deployment Strategy says: <code>FFWorkshop_Deployment</code>\n</li>\n<li>Click <strong>Start deployment</strong>\n</li>\n</ul>\n\n<p>‚ú® When you navigate to your URL, you should now see 6 crib results! This means we can adjust this feature manually from AWS AppConfig without needing to delete or comment out the code and push a new version.</p>\n\n<h2>\n  <a name="clean-up-release-flags" href="#clean-up-release-flags">\n  </a>\n  üßπ Clean up Release Flags\n</h2>\n\n<p>If you need to clean up a release flag ‚Äî for example, let\'s say the feature add was a big success and there\'s no reason for you to revert or roll-back the changes ‚Äî it\'s important to know what to do.</p>\n\n<p>If you do not need to have a Feature Flag for one of your released features, you can simply delete that short-term flag since it\'s no longer needed. We already marked the <code>showcarousel</code> as a short-term flag</p>\n\n<p>To delete a flag, we will:</p>\n\n<ul>\n<li>Go to <strong>AppConfig</strong>\n</li>\n<li>Select our app: <strong>AWSomeCribRentals</strong>\n</li>\n<li>Click on the Feature Flag: <code>CardFeatureFlag</code>\n</li>\n<li>On the <code>showcarousel</code> Feature Flag, click <strong>Delete</strong> and re-confirm <strong>Delete</strong> on the pop-up.</li>\n<li>Click <strong>Save new version</strong> to reflect this change</li>\n</ul>\n\n<p>In a real life situation, we would want to clean up the code to reflect this feature add, but since this was a workshop setting, we did not do that here. For example, in <strong>line 39</strong> of the Lambda Function, you would need to make sure that the Crib carousel feature is not conditionally turned on via AppConfig.</p>\n\n<h2>\n  <a name="clean-up-our-aws-resources" href="#clean-up-our-aws-resources">\n  </a>\n  üßπ Clean Up Our AWS Resources:\n</h2>\n\n<p>Congrats on making it through! Since you are probably running these services on your own AWS account, it is important to make sure you delete instances of the services so that you do not incur costs:</p>\n\n<ul>\n<li>\n<strong>EC2:</strong> terminate/delete the running instance</li>\n<li>\n<strong>AWS Lambda:</strong> delete the function</li>\n<li>\n<strong>DynamoDB:</strong> delete the <code>AWSCribsRentalMansions</code> table</li>\n<li>\n<strong>Amplify:</strong> delete the app we created</li>\n<li>\n<strong>CodeCommit:</strong> delete the repository we created</li>\n<li>\n<strong>AppConfig:</strong> delete each Feature Flag, the configuration profile, and in environments, delete Beta, as well as the AWSomeCribRentals application</li>\n</ul>\n\n<p>WOW! That was a lot! Hopefully you enjoyed going through this AWS workshop with me and the steps I took. Let me know what you think below and if you have any questions on any of the AWS tools I used, feel free to let me know what you thought üòä</p>\n\n<h2>\n  <a name="subscribe-to-the-tech-stack-playbook-for-more" href="#subscribe-to-the-tech-stack-playbook-for-more">\n  </a>\n  üßë‚Äçüíª Subscribe to the Tech Stack Playbook for more:\n</h2>\n\n<p>Let me know if you found this post helpful! And if you haven\'t yet, make sure to check out these free resources below:</p>\n\n<ul>\n<li><b>Follow my Instagram for more: <a href="https://instagram.com/brianhhough">@BrianHHough</a></b></li>\n<li><b>I\'m also on Tik Tok too: <a href="https://www.tiktok.com/@brianhhough">@BrianHHough</a></b></li>\n<li><b>Watch my latest <a href="https://youtube.com/brianhhough">YouTube video for more</a></b></li>\n<li><b>Listen to my Podcast on <a href="https://podcasts.apple.com/us/podcast/tech-stack-playbook/id1553712082">Apple Podcasts</a> and <a href="https://open.spotify.com/show/01bHbabSyBmPfbc3ORMZa9?si=av_16aPbQEqL_bVu3RnO0g">Spotify</a></b></li>\n<li><b>Join my FREE <a href="https://facebook.com/groups/techstackplaybook">Tech Stack Playbook Facebook Group</a></b></li>\n<li><b>Join entrepreneurs and developers in the <a href="https://bit.ly/HelpMeDevDiscordLink">HelpMeDev Discord Server</a></b></li>\n</ul>\n\n<p>Let\'s digitize the world together! üöÄ</p>\n\n<p>-- Brian</p>\n\n',s.body_markdown='How\'s it going everyone? üëã Welcome back to the <b>Tech Stack Playbook</b>, your guide to apps, software, and tech (but in a fun way I promise).\n\nThis past week, I attended a really eye-opening AWS workshop put on for AWS Community Builders on a very interesting service I had not used before, called AppConfig. As described in the documentation, [AWS AppConfig](https://docs.aws.amazon.com/appconfig/latest/userguide/what-is-appconfig.html) is a service that lets developers create, manage, and quickly deploy application changes, modifications, features, or patches which are running on Amazon EC2 (Elastic Cloud Compute), AWS Lambda, containers, mobile apps, or IoT devices. \n\nIn this blog post, I\'ll go through the workshop, the code I used to run everything, screenshots of the deployment process, and I will also go through how to use Linux and an Amazon EC2 instance to deploy all of the code in a VM (virtual machine).\n\nWhat we will build is a simple Airbnb-for-Cribs home rental application and switch in an image viewer carousel for each listed home via AWS AppConfig. Here\'s what it will look like (unfortunately, IRL mansions are not included):\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zcyldsnymlt6i5nnavoq.png)\n \nI have the starter repo that AWS created linked on my GitHub here under the branch `initial`. I also have the `final` branch code for reference as well.\n{% github BrianHHough/AWSAppConfigWorkshop %}\n\nIf you\'re excited, read on!\n\n\n## ‚òÅÔ∏è Building for Scale (in the Cloud)\n\nLet\'s take a step back, to talk about scale. "Building for scale" is something a lot of people talk about, but very seldom do we ever plan for scale to happen in the ways we want. Becoming an "overnight success" could take months, years, or even decades in some cases. We rarely ever know when "hitting scale" will take place, so we have to future-proof tech so that it will scale with our needs, when we need them. \n\nImagine releasing a feature to a million plus member base. What if the feature includes a breaking change with a bug that decreases use by 60% per week per user. That could be disastrous. We want to get ahead of these issues, which is why AWS AppConfig can help us analyze a feature pushed to a select (but growing) number of users over time so that we can adapt to the change, see what it does to our user base, and adjust accordingly.\n\n\nWhen you think about "building for scale," of course one of the top companies that comes to my mind is Facebook (...I mean, Meta...still not used to saying that). In Meta\'s 2022 Q1 2022 Earnings Report, the company reported a whopping 2.94 billion Monthly Active Users as of March 31, 2022 ([Meta Q1 2022 Earnings Report](https://investor.fb.com/investor-events/event-details/2022/Q1-2022-Earnings/default.aspx)).\n\nOne of the interviews that stands out in my mind in particular is Reid Hoffman\'s Masters of Scale interview with Meta CEO Mark Zuckerberg. Back in 2017, Mark Zuckerberg shared a bit more of the context behind his "move fast and break things" mantra that has allowed him to build the largest social media platform on the planet.\n\nMark shared that:\n\n> \n"At any given point in time, there isn\'t just one version of Facebook running, there are probably 10,000. Any engineer at the company can basically decide that they want to test something. There are some rules on sensitive things, but in general, an engineer can test something, and they can launch a version of Facebook not to the whole community, but maybe to 10,000 people or 50,000 people‚Äîwhatever is necessary to get a good test of an experience. ([Entrepreneur](https://www.entrepreneur.com/article/294242))"\n\n### Check out the interview here:\n\n{% embed https://art19.com/shows/masters-of-scale/episodes/83f96210-9287-4cca-a4db-6a5b518942f9 %}\n\nYou might think, why would you want something like this? All the users have different user experiences? Isn\'t that counter-intuitive to UI/UX testing, agile development, and scaling?\n\nNot necessarily... because, let\'s say you are testing the incorporation of a feature or experience. Sure you can test it in controlled environments, but those are still, controlled. What is more optimal is to test real people, using your app in a real way, without the impression of being under a microscope, so you can really understand if the feature "hits" or resonates with the expected user base at the expected time.\n\nTo this day, I have always wondered how dynamic feature adds or dynamic user testing actually works in production. Thanks to the AWS Community Builders Program, I was able to see something like this in action, which is what I will be sharing with you today.\n\n\n## ‚òÅÔ∏è Intro to AWS AppConfig\nWith AWS AppConfig, we are going to add in a feature called "Photo Slider" which will allow users to switch between photos in the app for each crib. However, it will not be visible to everyone all at once as soon as the feature is pushed. \n\nAWS AppConfig allows us to set the launch deployment details, where we can release to 1% of users, then 5%, then 10%, and so on. It can be risky to release a new feature to users all at once, so we need to account for that. AWS AppConfig has a feature called "Feature Flags" that can allow us to pull the switch on a feature if something unexpected or disastrous happens in the app and allow us to revert back near-instantly.\n\n## ‚òÅÔ∏è Where does AWS AppConfig fit?\n\nIn this architecture diagram provided by the AWS team, it outlines where everything "lives." \n- Deployment; via AWS Amplify\n- Database: via DynamoDB\n- Front-end: via HTML, CS, and JS\n- AppConfig: connected via a AWS Lambda function to the front-end\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8g7r0a9i1e6kgzcwzeq0.png)\nSource: AWS \n\n## ‚òÅÔ∏è Set up a Feature Flag\nIn the AWS Console, you will navigate over to the **AWS AppConfig** service.\n- Click **Get Started**\n- In "Create Application" page, name your app: `AWSomeCribRentals`\n- Add a description: `This is for feature flags related to the AWSomeCribRentals app`\n- Click **Create application**\n\nThis will be our container for all flags related to our application. Think of it like a wrapper.\n\nWe then must create a **configuration profile** within the AppConfig application. This lets us define the Feature Flag type and set-up. You can think of it as an element within the wrapper (i.e. you could have multiple Configuration Profiles, perhaps even multiple feature flags within the same profile, which all sits within the AppConfig Application).\n- Let\'s name the config profile of our feature addition of a card: `CardFeatureFlag`\n- Add a description: `related to card`\n\nWe will then add a new flag by clicking **Add new flag** which will be a short-term flag, as we will deprecate it in the future granted everything is a success:\n- Name: `showcarousel`\n- Description: `this will let users swipe through images than only showing them one per Crib`\n- Select: `short-term-flag`\n- Click **Create flag** to create our first Feature Flag with AWS AppConfig\n- Click **Save new version** to proceed.\n \n## ‚òÅÔ∏è Update the Photo Pagination for the Feature Flag\nNavigate to the **CardFeatureFlag** that we just created and click **Add new flag**\n- Name: `pagination`\n- Description: `change how many homes returned on the page`\n- Attributes: `number`\n- Type: `number`\n- Value: `8`\n- Required Value: [‚úÖ]\n- Constraint: `5 minumum` and `12 maximum`\n- Click **Create flag**\n\nTurn the pagination flag **on** with the switch and then press **save new version**\n\n## ‚òÅÔ∏è Deploy the Feature Flag\nYou should see something like this, which tells us we have two Feature Flags (**pagination** which is switched on, and **showcarousel** which is turned off) added to the Configuration Profile **CardFeatureFlag**\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/re9n1geszp6moqzkss3r.png)\n \nWe want to deploy this, so here is what we will do:\n- Click **Start deployment**\n- Click **Create Environment** \n- Name the environment: `Beta`\n \nNext we will want to create a Deployment Strategy. It\'s important to consider factors like the **Bake time:** the amount of time AppConfig monitors for CloudWatch alarms before advancing to the next deployment or step, such as rolling back a feature.\n\nThere are 3 pre-defined options available: `AppConfig.AllAtOnce` ‚Äî instant deployment to all, `AppConfig.Linear50PercentEvery30Seconds` ‚Äî deploys to half of target every 30 seconds and deploy time is 1 minute (i.e. useful for testing or demos), and `AppConfig.Canary10Percent20Minutes (AWS Recommended)` ‚Äî deploys slowly over time (i.e. useful for production workload).\n\nWe will, however, **Create deployment strategy**:\n- Name: `FFWorkshop_Deployment`\n- Type: `Linear`\n- Step percentage: `10`\n- Deployment time: `1 minute`\n- Bake time: `1 minute`g\n\nSelect **Create deployment strategy** and then **Start deployment** which will take about a couple of minutes to fully release. It will ultimately look like this when it\'s been deployed fully:\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/d6ng18jrmv1fvuhe997c.png)\n\n## ‚òÅÔ∏è Configure AWS Lambda\n**[AWS Lambda](https://aws.amazon.com/lambda/) functions** are private functions that run in the cloud and allow you to run code without the need to run a server. You simply need to call a script to connect with them and then you can run compute without needing to provision a back-end for it.\n\n> \nFor some background context on AWS Lambda, check out Parts 1 and 2 of my "Serverless Workflows with Step Functions and Lambda" here:\n\n> {% youtube https://www.youtube.com/watch?v=deKOfl6FHPg %}\n> {% youtube https://www.youtube.com/watch?v=qEkkZzbmykQ %}\n\nTo set up Lambda for our project, we will:\n- Navigate to **AWS Lambda**\n- Click **Create Function**\n- Name: `FF_Lambda`\n- Runtime: `Node.js 14.x`\n- Click **Create function**\n\nIn the code editor, add this code (generously provided to us by AWS) which allows us to toggle the Feature Flag on and off:\n```js\nconst http = require(\'http\');\nconst AWS = require(\'aws-sdk\');\nconst docClient = new AWS.DynamoDB.DocumentClient();\n\nexports.handler = async (event) => {\n\n    const res = await new Promise((resolve, reject) => {\n        http.get(\n            "http://localhost:2772/applications/AWSomeCribRentals/environments/Beta/configurations/CardFeatureFlag",\n            resolve\n        );\n    });\n\n    let configData = await new Promise((resolve, reject) => {\n        let data = \'\';\n        res.on(\'data\', chunk => data += chunk);\n        res.on(\'error\', err => reject(err));\n        res.on(\'end\', () => resolve(data));\n    });\n\n    const parsedConfigData = JSON.parse(configData);\n\n    const DynamoParams = {\n        TableName: \'AWSCribsRentalMansions\'\n    };\n    \n//Fetching the listings from DynamoDB\n\n    async function listItems() {\n        try {\n            const data = await docClient.scan(DynamoParams).promise();\n            return data;\n        } catch (err) {\n            return err;\n        }\n    }\n\n//Checking for the Caraousel Feature Flag\n    if (parsedConfigData.showcarousel.enabled == true) {\n        let returnhtml = ``;\n\n        try {\n\n            const data = await listItems();\n\n            for (let i = 0; i < parsedConfigData.pagination.number; i++) {\n                returnhtml += `<div class="col-md-4 mt-4">\n    \t\t    <div class="card profile-card-5">\n    \t\t        <div class="card-img-block">\n\n                        <div class="slideshow-container">`;\n\n                for (let j = 0; j < data.Items[i].Image.length; j++) {\n                    returnhtml += `<div class="mySlides` + (i + 1) + `">\n                    <img class="card-img-top" style="height: 300px;" src="` + data.Items[i].Image[j].name + `" style="width:100%">\n                  </div>`;\n                }\n\n                returnhtml += `</div>`;\n                \n                if(data.Items[i].Image.length > 1) {\n                    returnhtml += `<a class="prev" onclick="plusSlides(-1, ` + i + `)">&#10094;</a>\n                            <a class="next" onclick="plusSlides(1, ` + i + `)">&#10095;</a>`;\n                }\n                \n    \t\t        returnhtml += `</div>\n                    <div class="card-body pt-0">\n                    <h5 class="card-title">` + data.Items[i].Name + ` <span style="font-size: 0.7em;color:rgb(255, 64, 64)">(` + data.Items[i].Location + `)</span></h5>\n                    <p class="card-text">` + data.Items[i].Description + `</p>\n                    <a class="btn btn-primary"style="display: inline" href="#">Check Availability</a>\n                    <span style="float: right;cursor: pointer;" onclick="favoriteStar(this)"><span class="fa fa-star"></span></span>\n                  </div>\n                </div>\n    \t\t</div>`;\n            }\n\n            return {\n                statusCode: 200,\n                body: returnhtml,\n            };\n\n        } catch (err) {\n            return {\n                error: err\n            }\n        }\n\n    } else {\n\n        let returnhtml = ``;\n\n        try {\n\n            const data = await listItems();\n            console.log("dynamo db data: ", data)\n\n//Checking for Pagination Numbers\n            for (let i = 0; i < parsedConfigData.pagination.number; i++) {\n                returnhtml += `<div class="col-md-4 mt-4">\n    \t\t    <div class="card profile-card-5">\n    \t\t        <div class="card-img-block">\n                    <img class="card-img-top" style="height: 300px;" src="` + data.Items[i].Image[0].name + `" style="width:100%"\n                        alt="Card image cap" style="height: 300px;">\n    \t\t        </div>\n                    <div class="card-body pt-0">\n                    <h5 class="card-title">` + data.Items[i].Name + ` <span style="font-size: 0.7em;color:rgb(255, 64, 64)">(` + data.Items[i].Location + `)</span></h5>\n                    <p class="card-text">` + data.Items[i].Description + `</p>\n                    <a class="btn btn-primary"style="display: inline" href="#">Check Availability</a>\n                    <span style="float: right;cursor: pointer;" onclick="favoriteStar(this)"><span class="fa fa-star"></span></span>\n                  </div>\n                </div>\n    \t\t</div>`;\n            }\n\n            return {\n                statusCode: 200,\n                body: returnhtml,\n            };\n\n        } catch (err) {\n            return {\n                error: err\n            };\n        }\n    }\n};\n\n```\n\nNow we will want to add a layer to our Lambda Function (scroll to the bottom of the page and find **Add a layer**)\n- Select `AWS-AppConfig-Extension`\n- Click **Add**\n\nIf all goes well, it should look like this:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s3asabluhej5b9ne91jr.png)\n \n\n#### ‚ö†Ô∏è Warning\nIf you do not see `AWS-AppConfig-Extension` in the drop-down of AWS-provided layers...make sure you are actually in Node.js 14.x version of runtime (not 16.x like below). At the time of making this blog post, Node.js 16.x has not been configured to allow for the AppConfig extension yet.\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/v0naf5k30r5m6s7od8of.png)\n \n## ‚òÅÔ∏è Set up the AWS Lambda Function URL\nOne of the amazing benefits of AWS Lambda is the ability to add HTTPS endpoints to any serverless function we launch in Lambda, as well as configure CORS headers if we wish.\n\nUnder the function overview:\n- Click **Configuration**\n- Click **Function URL** and then **Create Function URL**\n- Auth Type: `NONE`\n- Configure cross-origin resource sharing (CORS) [‚úÖ]\n- We will include the wildcat `*` for this demo for `Allow origin`, `Expose headers`, `Allow headers`, and `Allow methods`...but you would want to configure more secure methods of connection for origin/headers in production.\n- Click **Save** and save the Function URL for later.\n\nNext, we need to update the Execution Role to ensure our Lambda function has the right IAM permissions to access AppConfig using the AWS best practice and principle of "least privilege." Basically, don\'t allow more permissions than are required for the need/resource.\n- Go to **IAM (Identity and Access Management)**\n- Select **Policies**\n- Go to **Create Policy**, then **Choose a service** and select **AppConfig**. \n- For Actions, select **All AppConfig actions**\n- For Resources, select **All Resources**\n- Click **Next** to proceed through the steps and then at the end under name, write `AppConfigAllAccess` to name this IAM role.\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lnv21b4fu3g1g4ahtu7h.png)\n \n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hpjdjsnpufcezc28luco.png)\n \nNext, we will attach these policies to our Lambda Function: \n- AmplifyFullAccess\n- AppConfigFullAccess\n- AppConfigAllAccess - this is the one we just made\n- AmazonDynamoDBFullAccess\n\nThe screen will look like this when you update the function and attached the policies successfully:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a2on8neuuzjtgo3y20qr.png)\n \n\n## ‚òÅÔ∏è Create and Populate a DynamoDB Table using an EC2 Instance (VM)\n\nThis was a very eye-opening part for me because the workshop had a lot of elements where a single user would be completing the upload/scripts from their computer. But what if you wanted to do it from a Virtual Machine because you have a different AWS Profile on your computer you don\'t want to overwrite/mess with? Or what if you wanted multiple people to have access to the same server files/items?\n\nYou can configure an EC2 server and run all the commands as you would on your normal computer, but instead on a rented server/computer, in the cloud!\n\n<img width="100%" style="width:100%" src="https://media.giphy.com/media/SACoDGYTvVNhZYNb5a/giphy.gif">\n\nThis is where the real fun starts...\n\nFirst, we\'ll set up an EC2 instance so that we can get a real-time server running and that we can SSH into.\n- Navigate to the **EC2** service in the AWS list of tools\n- **Launch an instance**\n- Choose: `t2.medium` (this will give us a little bit more power than the `t2.micro` BUT be cognizant that the `t2.medium` server will incur costs. If you do not want to incur costs, choose a `t2.micro` server instead).\n- Turn on all public access to the server (this is just for demo/testing purposes, so if you are going into production, you would want to lock down the server).\n- Once you confirm all the settings, save your keypair to your Computer/drive (this is important that you do not lose this), and click **Launch**\n\nThe server will look like this once it is running:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0vuydjkyrp2bdz3x1ci.png)\n \n## ‚òÅÔ∏è Create the DynamoDB Table from within an EC2 Server Using Linux\n\nEC2 forces you to `chmod 400` of the keypair so only your user can read/edit the file ‚Äî anyone else would need to `sudo`. Make sure that the path does link to your terminal (Mac) or PowerShell (Windows). **TIP**: You can easily drag and drop a file from the Finder or Windows Explorer into your command line to automatically generate the file path.\n\n```bash\nchmod 400 /User/FF_Workshop_Keypair.cer\n```\n\nNow we will SSH into the server with the keypair and Public DNS.\n- We will use `ec2-user` in the first part because this is an EC2 Instance\n- We will then pull the Public IPv4 DNS of the EC2 instance which you will see in the above screenshot on the right for the Instance Summary: `ec2-3-82-148-71.compute-1.amazonaws.com` \n\n```bash\nssh -i /User/FF_Workshop_Keypair.cer ec2-user@ec2-3-82-148-71.compute-1.amazonaws.com\n```\n\nIt will look like this if you are successfully signed into the server:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qkh43rfpe9bigd5rgegg.png)\n\nNow we need to configure `aws` inside of the server.\n\nThe elements we will need to configure attributes for are: Default Region, Access Key ID, Secret Access Key, and AWS Session Token. These were generated for us via the AWS Event Bridge, but without it being set up for us, we would need to configure the aws profile (link to more about this in the [AWS docs](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html))\n\nWe will write `aws configure` and enter, and then copy and paste all of these values into the command line and press enter when prompted for each one. And then under output format, put `json`.\n \n \n```bash\nAWS_DEFAULT_REGION=us-east-1\nAWS_ACCESS_KEY_ID=MSIA...MQ5U\nAWS_SECRET_ACCESS_KEY=YI2d...JuZU\nAWS_SESSION_TOKEN=IQoJ...wef4\n\n```\n\nIt will look like this:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8un5ph4nym4lkif2l8q5.png)\n\n## ‚òÅÔ∏è  Next, you have to make sure the right AWS account is active for the session in the command line\n\nRight now, you have configured AWS above but it‚Äôs not set up to connect to anything‚Ä¶we know this because if we then try to do: `aws sts get-caller-identity` we will get the following error: Or code snippet:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o1zj2d58ndq07xuwbex.png)\n```bash\nAn error occurred (InvalidClientTokenId) when calling the GetCallerIdentity operation: The security token included in the request is invalid.\n```\n\nTo fix this, we need to add in the credentials into the command line as environmental variables and export (print) them into the profile for AWS in the Linux instance (same values as before):\n```bash\nexport AWS_DEFAULT_REGION=us-east-1\nexport AWS_ACCESS_KEY_ID=MSIA...MQ5U\nexport AWS_SECRET_ACCESS_KEY=YI2d...JuZU\nexport AWS_SESSION_TOKEN=IQoJ...wef4\n```\n\nWe can verify that the environmental variables are saved to our Linux session with `printenv AWS_DEFAULT_REGION` or `printenv AWS_ACCESS_KEY_ID`\n\nIf the output prints what we entered in previously, then it worked!\n\nTo validate that our AWS account is authenticated/synced, type `aws sts get-caller-identity`. If this worked correctly, you should see a print out of something like the below:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5n56eyi6848rl10ol7op.png)\n```json\n{\n    "Account": "354789352487", \n    "UserId": "AROAVFGYX4QT3O2UKAPLI:MasterKey", \n    "Arn": "arn:aws:sts::354789352487:assumed-role/TeamRole/MasterKey"\n}\n```\n\nIn our AWS account, in the top right, you\'ll see the right Account # (the same as in "Account" in the terminal). \n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mwyklmsi39xuxgvt3w9y.png)\n \n\nAlright we did it!\n\nTo further validate this, if we use `aws ec2 describe-instances` then we should get a print out of the instances we are running or have terminated:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eckxhty17fjrrvc5s8i9.png)\n \n## ‚òÅÔ∏è Now we populate the DynamoDB Table to hold image links and home information\n\nWhile we have our SSH link open to our server and running, let\'s open up another terminal window. This is because we cannot upload a local file from within the server (remember, we are in a virtual machine there...so we are in a completely different computer that doesn\'t recognize our local directories on our computer).\n\nWe need to upload a file to the server and then call it that way to communicate with DynamoDB. We will use the `scp` (Secure Copy Protocol) command in Linux, which is used to copy/send/retrieve files securely between servers.\n\nFor us, the script we will run is this below: we reference a IAM key-pair certificate file `FF_Workshop_Keypair.cer` file on our computer and then the `AWSCribsRentalMansions.json` file on our computer and then our EC2 AMI‚Äôs Public IPv4 DNS `ec2-3-82-148-71.compute-1.amazonaws.com` and declare that we will put it as a loose-hanging file in the server at position: `/` .\n\nThe linux command is:\n- 1st part is the path to the secret key file\n- 2nd part is the path to the file we want to upload\n- 3rd part is `ec2-user` because it\'s an AMI EC2 "at" the Public IPv4 DNS URL `ec2-3-82-148-71.compute-1.amazonaws.com`\n- 4th part is a `~` since we want to upload it as a loose-hanging file in the server.\n\n```bash\nscp -i /Users/FF_Workshop_Keypair.cer /Users/AWSCribsRentalMansions.json  ec2-user@ec2-3-82-148-71.compute-1.amazonaws.com:~\n```\n\nIf all goes well, you should see a 100% printed below the script you entered.\n\nNow, let\'s test if the file was uploaded in our server. Switch back to the terminal window where we SSH\'ed into the server. If we do an `ls` from the root directory, we should now see the `json` file!\n\nNow we will populate the DynamoDB table with our file uploaded to the EC2 instance:\n```bash\naws dynamodb batch-write-item --request-items file://AWSCribsRentalMansions.json\n```\n\nIt will look like this (don\'t worry that it says "Unprocessed Items" - this is normal ‚ò∫Ô∏è):\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/55uydqm0loczvez1er5g.png)\n\nLet\'s check if DynamoDB really did receive all of the files like our command line told us. If it worked successfully, it will look like this:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/njpbfmgprdt8phno1zlk.png)\n \n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/95gw70lsasw73i3147q6.png)\n \nNice!! The files are all there!\n\n\n## ‚òÅÔ∏è Set up website on AWS with AWS Amplify and AWS CodeCommit\nWe will need 2 specific tools to hold our code and then to push our code to the internet with a link users can access.\n- **AWS Amplify**: for delivering the front-end\n- **AWS CodeCommit**: hold the code to deploy to Amplify\n\nIn our `index.html` file in the repo (check out my **[starter repo here](https://github.com/BrianHHough/AWSAppConfigWorkshop/tree/initial)** from the code provided by AWS), we will need add the Lambda function calling AppConfig into the `<script>` tag of the `index.html` file.\n\nWe will turn this:\n```html\n\x3c!-- api call to populate cribs --\x3e --\x3e\n<script>\n     fetch(\'lamba-url-here\')\n     .then(response => response.text())\n     .then((data) => {\n            document.getElementById("populateCribsHere").innerHTML=data;\n            setUI();\n  });\n<\/script>\n```\n\nInto this:\n```html\n\x3c!-- api call to populate cribs --\x3e --\x3e\n<script>\n        fetch(\'https://2v35t2ppjx4vh7ygjzip7nauji0yzmxl.lambda-url.us-east-1.on.aws/\')\n     .then(response => response.text())\n     .then((data) => {\n            document.getElementById("populateCribsHere").innerHTML=data;\n            setUI();\n  });\n<\/script>\n```\n\nRemember that Lambda Function URL we got from before? We will put that into the `lamba-url-here`. We can get that here:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ztzmju7x1fmu0dc3ixrc.png)\n  \n## ‚òÅÔ∏è Use AWS CodeCommit to Host Private Git Repo\n[AWS CodeCommit](https://aws.amazon.com/codecommit/) is a secure, highly scalable, managed source control service that hosts private Git repositories.\n- Go to **CodeCommit**\n- Click **Create a Repository**\n- Name: `AWSomeCribRepo`\n- Description: `This holds the code of my AWSomeCribRepo project`\n- Click **Create**\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xekcxwp4rq4wl4ba3v9l.png)\n \nAfter the repo is created, we need to add our code to this CodeCommit repo. We will see a couple different methods for how to Connect. We will choose the `HTTPS (GRC)` method.\n\n> HTTPS (GRC) is the protocol to use with git-remote-codecommit (GRC). This utility provides a simple method for pushing and pulling code from CodeCommit repositories by extending Git. It is the recommended method for supporting connections made with federated access, identity providers, and temporary credentials.\n\nWhat we really want to do is `pip install git-remote-codecommit` to install the git-remote-code-commit framework, BUT, we don\'t have `pip` installed yet. We need Python to run pip so let\'s check if it\'s installed:\n- Run `python --version` ‚Äî for me, the output is `Python 2.7.18` and it should be added since this is an EC2 instance.\n- To install pip, run `sudo yum install python-pip` \n\nIt should look like this if it\'s successfully installed:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kg5vjiz0c359l7p6a74a.png)\n \n- Now that pip is installed, let‚Äôs run the command we wanted to initially: `pip install git-remote-codecommit`.\n\nIt should look like this if all goes well:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/o5irrhuqb3uycz9hf2ro.png)\n \nNow we want to clone the repository to our EC2 instance with this command: `git clone codecommit::us-east-1://AWSomeCribRepo`. However, we don‚Äôt have git yet in our server, so we‚Äôll install git this way:\n- Run this command: `sudo yum install git`\n\nIf all goes well, it will look like this:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n1s69x0oku3vd5b2ltws.png)\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9dijpf6y4lzyu4ftl87i.png)\n  \n- We will verify the installation went through with: `git --version` ‚Äî if it worked, you will see a print out like `git version 2.32.0`\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t1wvkquiwbju1q4i8vk7.png)\n \n- Now we will finally run: `codecommit::us-east-1://AWSomeCribRepo` ‚Äî this will clone the empty repo into our server. When we do ls we see the blue folder in there:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/e31yg6g0oqsfgtr77rjv.png)\n \n‚ú® Amazing job! We now have a link to our AWS CodeCommit Repo (in our AWS Environment) and our EC2 server. Especially cool because this is now OUR computer, but a virtual machine.\n\n## ‚òÅÔ∏è How do we upload a folder‚Äôs contents locally (our code repo) into a code repo in our EC2 instance using Linux?\n\nLinux can be a bit confusing here but what we essentially will be doing is using a 2nd terminal window to connect to our SSH\'ed terminal window, and then use that to connect to AWS. Don\'t worry... we will get there üòä \n\nWe will use `scp` to upload the file contents WITHIN our local folder and serve that content INTO the folder that is our AWS CodeCommit-connected folder.\n- We will use `scp` (secure copy protocol)\n- We use the -r flag (to recursively go through all the files)\n- We will input the path of our Keypair\n- We will then input the path of our folder and because it\'s the contents WITHIN it, we add the wildcard `/*` after the folder name\n- We will then input the EC2 instance with `ec2-user` and `@` and then our EC2\'s Public IPv4 DNS value.\n\n```\nscp -r -i  /Users/FF_Workshop_Keypair.cer /Users/AWSAppConfigWorkshop/*  ec2-user@ec2-3-82-148-71.compute-1.amazonaws.com:~/AWSomeCribRepo\n```\n\nYou can see how the commands work between the 1st and 2nd terminal windows. On the right (connected to our local computer), we serve the files to the server. Then on the left (connected to the EC2 instance), we check to see if the files were in fact uploaded.\n\n#### ‚ö†Ô∏è NOTE: in the screenshot, it says `...amazonaws.com:~/test` but this was taken while I was testing Linux üòä. You will want that part to read `amazonaws.com:~/AWSomeCribRepo` like what is referenced in the above code snippet:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qtgqq9kwi76coq1nacaz.png)\n\n\n## ‚òÅÔ∏è Now we will push the code to AWS Code Commit\nBack in our SSH\'ed terminal window, we will want to make sure we are in our `AWSomeCribRepo` and run the commands to send the repo into AWS CodeCommit:\n- Run: `cd AWSomeCribRepo`\n- Add all the files in the directory to git with `git add -A`\n- Create a commit message: `git commit -m "commit from EC2"`\n- Push the code to AWS CodeCommit: `git push`\n\n\nWhen you do the `git push`, you will see output like this:\n```bash\nEnumerating objects: 1847, done.\nCounting objects: 100% (1847/1847), done.\nDelta compression using up to 2 threads\nCompressing objects: 100% (1845/1845), done.\nWriting objects: 100% (1847/1847), 3.99 MiB | 4.68 MiB/s, done.\nTotal 1847 (delta 213), reused 0 (delta 0), pack-reused 0\nTo codecommit::us-east-1://AWSomeCribRepo\n * [new branch]      master -> master\n```\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8zxjxcmt7vho8ny34wsv.png)\n\n#### ‚ö†Ô∏è IMPORTANT: If you run into this type of error after `git push`:\n> ```bash\nfatal: unable to access \'https://git-codecommit.us-east-1.amazonaws.com/v1/repos/AWSomeCribRepo/\': The requested URL returned error: 403\n```\n> Or looks like this in the command line: \n> ![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/sxvqqwl25uso2gum58k4.png)\n\n> It‚Äôs probably because your configuration environmental variables aren‚Äôt set correctly in the EC2 server. \n\n> These are provided to us thanks the AWS EventBridge for the workshop, but you can retrieve these as part of your AWS Account. You need to make sure you are "logged in" or authenticated in the EC2 instance for the push command to know which AWS Account\'s CodeCommit to push to. Imagine you push your code to a stranger\'s CodeCommit... (that would be so bad...). This is to make sure we are truly authenticated in the right place to then send our code to the right destination.\n\n> ```bash\nAWS_DEFAULT_REGION=us-east-1\nAWS_ACCESS_KEY_ID=MSIA...MQ5U\nAWS_SECRET_ACCESS_KEY=YI2d...JuZU\nAWS_SESSION_TOKEN=IQoJ...wef4\n```\n\n> Confirm that `aws sts get-caller-identity` returns a value like this:\n> ```bash\n{\n    "Account": "354789352487", \n    "UserId": "AROAVFGYX4QT3O2UKAPLI:MasterKey", \n    "Arn": "arn:aws:sts::354789352487:assumed-role/TeamRole/MasterKey"\n}\n```\n\n> Now when you do the `git push`, you will see output like this:\n> ```bash\nEnumerating objects: 1847, done.\nCounting objects: 100% (1847/1847), done.\nDelta compression using up to 2 threads\nCompressing objects: 100% (1845/1845), done.\nWriting objects: 100% (1847/1847), 3.99 MiB | 4.68 MiB/s, done.\nTotal 1847 (delta 213), reused 0 (delta 0), pack-reused 0\nTo codecommit::us-east-1://AWSomeCribRepo\n * [new branch]      master -> master\n```\n> ![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llm1qqq508l5vz47qnim.png)\n \n\nBack in the AWS Console, CodeCommit will now go from this:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1x3w7d2a0mey6smwlls8.png)\n \nTo this:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5abeekku95g4edfvro6p.png)\n \n‚ú® You have now created a repository for your website with files uploaded from your computer, to your EC2 instance, and now to AWS. Next, you will connect this repository to AWS Amplify to host your website with a real URL.\n\n## üöÄ Host your Website on AWS Amplify\nOne of the best benefits of [AWS Amplify](https://aws.amazon.com/amplify/) when running deployments is the ability to see the various stages of the build process. This becomes very helpful when there are errors or you need to check the validation of a build, the logs include a great amount of detail, and of course you can roll in a vast amount of tools and AWS features thanks to Amplify and it\'s framework to abstract complexity from deployments.\n\nTo accomplish this we will:\n- Go to the **AWS Amplify** service in the AWS Console\n- Go to **All apps**\n- Select **New App** and in the drop-down, select **Host web app**\n> ![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hsmd7lpti5qdi28ffbob.png)\n- Select **AWS CodeCommit** and then **Continue** to advance\n> ![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mdrd9gewivwpyherw9ku.png)\n- Select `AWSomeCribRepo`in the CodeCommit dropdown and then **Next**\n> ![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hfk60pac3j49ljpdjjnt.png)\n- In the **Configure build settings** make sure to click **‚úÖ Allow AWS Amplify to automatically deploy all files hosted in your project root directory** and then press **Next**.\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aml77p5rrtm9sk4ktae8.png)\n- Now click **Save and deploy**\n> ![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ztc1ckh5wanli20xxufb.png)\n \nAWS Amplify will then go through it‚Äôs 4 stages of deployment automatically for us\n\n- Provision\n- Build\n- Deploy\n- Verify\n\nIt will go from this:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wi344g6ulu8vzxj585rr.png)\n\n‚ú® To this: \n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/84y9ni4b1vi1045cua8h.png)\n  \nWhen our site is building, it will go from this:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qnsitonfl3rhqfzidjyo.png)\n\n‚ú® To this:\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3nhmx0yl657zpuyamsjh.png)\n \n## ‚òÅÔ∏è Using Feature Flags\nIf you notice in the deployed version, it doesn\'t show that carousel feature we created AppConfig for in the first place... where did it go? Wasn\'t it supposed to appear there?\n\nWe haven\'t turned it on yet üòä \n\nSo what we are going to now do is turn on and deploy the carousel Feature Flag to launch this feature. We will then put on an operational toggle to ensure that during spikes in usage, it will limit the number of homes displayed on the homepage. This will help to optimize our performance with fewer queries on our DynamoDB table at peak times. \n- Go to **AppConfig**\n- Select our app `AWSomeCribRentals`\n- Click on the Feature Flag we created: `CardFeatureFlag` (notice that the CardFeature Flag is OFF for the `showcarousel` Flag as shown below)\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9d81u6lkx4lvqzl410ub.png)\n\n- Toggle the `showcarousel` flag ON and then **Save new version**\n- Click **Start Deployment** and configure the elements\n- Environment: `Beta` - we set this up earlier\n- Hosted configuration version: 2\n- Deployment strategy: `FFWorkshop_Deployment` \n- Description: `Switching showcarousel feature on gradually for users`\n- Click **Start deployment**\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h9lb2yb8pb48bzcgcv3s.png)\n \nThe deployment (this is technically Deployment #2 because we already deployed earlier on this Feature Flag) will look like this as it builds and gives you data about the deployment like so until its state reaches 100%:\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0hwozcx4lgskjlcipnxk.png)\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aeytc0k4jr1jcgw09bke.png)\n \n## ‚ú® Viola! Check out the updated changes to our app:\nNotice the carousel? This is now a feature that users will begin to see in our application:\n\n![Image description](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kbbk5mipwbtqlkyo7b2q.png)\n \nHere is a video of the deployed AppConfig Feature Flag in action live on the URL:\n{% embed https://player.vimeo.com/video/719701137?h=a0b60d98f5 %}\n\n## ‚òÅÔ∏è Operational Feature Flags\nThis above is an example of a feature add that we will definitely add to our site and keep. However, let\'s say we wanted to throttle the number of requests coming back to users when they search for something or want a certain type of data. \n\nRemember our `pagination` Feature Flag in `CardFeatureFlag` that we configured earlier? Well, if we want to adjust how many results are returned in the pagination results (i.e. to improve performance when there is a lot of traffic), we can do this by:\n- Navigate to **AppConfig**\n- Click on the **CardFeatureFlag** that we set up\n- Select the **pagination** flag\n- Click **Edit**\n- Change the number in the **value** to: 6\n- Click **Confirm**\n- Ensure this flag\'s toggle is turned **ON**\n- Click **Save new version**\n- Click **Start deployment**\n- Keep the same settings as you did in Deployment #2 above, and especially make sure the Deployment Strategy says: `FFWorkshop_Deployment`\n- Click **Start deployment**\n\n‚ú® When you navigate to your URL, you should now see 6 crib results! This means we can adjust this feature manually from AWS AppConfig without needing to delete or comment out the code and push a new version.\n\n## üßπ Clean up Release Flags\nIf you need to clean up a release flag ‚Äî for example, let\'s say the feature add was a big success and there\'s no reason for you to revert or roll-back the changes ‚Äî it\'s important to know what to do.\n\nIf you do not need to have a Feature Flag for one of your released features, you can simply delete that short-term flag since it\'s no longer needed. We already marked the `showcarousel` as a short-term flag\n\nTo delete a flag, we will:\n- Go to **AppConfig**\n- Select our app: **AWSomeCribRentals**\n- Click on the Feature Flag: `CardFeatureFlag`\n- On the `showcarousel` Feature Flag, click **Delete** and re-confirm **Delete** on the pop-up.\n- Click **Save new version** to reflect this change\n\nIn a real life situation, we would want to clean up the code to reflect this feature add, but since this was a workshop setting, we did not do that here. For example, in **line 39** of the Lambda Function, you would need to make sure that the Crib carousel feature is not conditionally turned on via AppConfig.\n\n## üßπ Clean Up Our AWS Resources:\nCongrats on making it through! Since you are probably running these services on your own AWS account, it is important to make sure you delete instances of the services so that you do not incur costs:\n\n- **EC2:** terminate/delete the running instance\n- **AWS Lambda:** delete the function\n- **DynamoDB:** delete the `AWSCribsRentalMansions` table\n- **Amplify:** delete the app we created\n- **CodeCommit:** delete the repository we created\n- **AppConfig:** delete each Feature Flag, the configuration profile, and in environments, delete Beta, as well as the AWSomeCribRentals application\n\nWOW! That was a lot! Hopefully you enjoyed going through this AWS workshop with me and the steps I took. Let me know what you think below and if you have any questions on any of the AWS tools I used, feel free to let me know what you thought üòä\n\n## üßë‚Äçüíª Subscribe to the Tech Stack Playbook for more:\nLet me know if you found this post helpful! And if you haven\'t yet, make sure to check out these free resources below:\n \n- <b>Follow my Instagram for more: <a href="https://instagram.com/brianhhough" target="_blank">@BrianHHough</a></b>\n- <b>I\'m also on Tik Tok too: <a href="https://www.tiktok.com/@brianhhough" target="_blank">@BrianHHough</a></b>\n- <b>Watch my latest <a href="https://youtube.com/brianhhough" target="_blank">YouTube video for more</a></b>\n- <b>Listen to my Podcast on <a href="https://podcasts.apple.com/us/podcast/tech-stack-playbook/id1553712082" target="_blank">Apple Podcasts</a> and <a href="https://open.spotify.com/show/01bHbabSyBmPfbc3ORMZa9?si=av_16aPbQEqL_bVu3RnO0g" target="_blank">Spotify</a></b>\n- <b>Join my FREE <a href="https://facebook.com/groups/techstackplaybook" target="_blank">Tech Stack Playbook Facebook Group</a></b>\n- <b>Join entrepreneurs and developers in the <a href="https://bit.ly/HelpMeDevDiscordLink" target="_blank">HelpMeDev Discord Server</a></b>\n\nLet\'s digitize the world together! üöÄ\n\n-- Brian\n\n\n',s.user={name:"Brian H. Hough",username:"brianhhough",twitter_username:t,github_username:t,website_url:"https://brianhhough.com",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--XmkASycn--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/259541/e120922d-fc41-49cb-8bb0-d9331af3554f.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--ASvJf0sr--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/259541/e120922d-fc41-49cb-8bb0-d9331af3554f.png"},s.organization={name:"AWS Community Builders ",username:o,slug:o,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--zmOZQNzv--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/2794/88da75b6-aadd-4ea1-8083-ae2dfca8be94.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--vWmcJ-ty--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/2794/88da75b6-aadd-4ea1-8083-ae2dfca8be94.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:s}},error:e,state:{currentArticle:s},serverRendered:!0,routePath:"/brianhhough/1111320",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:e}}}}(null,"2022-06-13T03:58:00Z",{},"https://dev.to/aws-builders/learn-how-to-dynamically-add-app-features-with-aws-appconfig-feature-flags-linux-101-4cai","BrianHHough","aws-builders")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
