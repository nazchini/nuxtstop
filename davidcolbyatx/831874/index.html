<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Sort tables (almost) instantly with Ruby on Rails and Turbo Frames</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Sort tables (almost) instantly with Ruby on Rails and Turbo Frames</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/ruby" class="tag" data-v-70afb46a>
          #ruby
        </a><a href="/nuxtstop/t/rails" class="tag" data-v-70afb46a>
          #rails
        </a><a href="/nuxtstop/t/hotwire" class="tag" data-v-70afb46a>
          #hotwire
        </a><a href="/nuxtstop/t/tutorial" class="tag" data-v-70afb46a>
          #tutorial
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zErGd1bY--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tjx6vfrl9rd9sa23u19d.png" alt="Sort tables (almost) instantly with Ruby on Rails and Turbo Frames" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            31
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            3
          </span></div> <time data-v-70afb46a>Sep 20 '21</time></div></header> <div class="content" data-v-70afb46a><p>One of the wonderful things about working in Rails in 2021 is that we are spoiled for options when it comes to building modern, reactive applications. When we need to build highly interactive user experiences, we don’t need to reach for JavaScript frameworks like Vue or React — the Rails ecosystem has all the tools we need to deliver exceptionally fast, efficient, and developer friendly front ends.</p>

<p>Yesterday, I <a href="https://dev.to/davidcolbyatx/sort-tables-almost-instantly-with-ruby-on-rails-and-stimulusreflex-32d1">published an article</a> demonstrating a simple implementation of a sortable table with StimulusReflex. Today, we’re going to build the same experience with <a href="https://turbo.hotwired.dev/handbook/frames">Turbo Frames</a> instead.</p>

<p>Why build the same thing with two different tools? Because we have great options to choose from in Rails-land, and understanding each option is a great place to start when considering which tool is right for you and your team.</p>

<p>Like yesterday, our application is going to allow users to view a table of players. They’ll be able to click on each header cell to sort the table in ascending and descending order.</p>

<p>Sorting will happen very quickly, without a full-page turn, and we won’t be writing any custom JavaScript or doing anything outside of writing ordinary Ruby code and ERB templates.</p>

<p>When we’re finished, the application will work like this:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--TLCnLpy2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/gq9zn0ofue1oxigci0eo.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--TLCnLpy2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/gq9zn0ofue1oxigci0eo.gif" alt="A screen recording of a user clicking on column headers on a data table. With each click, the table sorts itself by that column and a triangle indicator appears next to the column used for sorting" loading="lazy" width="880" height="356" data-animated="true"></a></p>

<p>You can demo the application for yourself <a href="https://aqueous-stream-31641.herokuapp.com/">on Heroku</a> (the free dyno may need a moment to wake up when you visit it) or view the <a href="https://github.com/DavidColby/player_sorting_frames/tree/sortable">complete source</a> on Github.</p>

<p>This article assumes that you are comfortable building applications with Ruby on Rails and may be difficult to follow if you have never worked with Rails before. Previous experience with Turbo Frames is not required.</p>

<p>Let’s get started!</p>

<h2>
  <a name="setup" href="#setup">
  </a>
  Setup
</h2>

<p>To begin, we’re going to create a new Rails application, skipping webpacker in favor of the newly released <a href="https://github.com/rails/cssbundling-rails">css</a> and <a href="https://github.com/rails/jsbundling-rails">jsbundling</a> gems.</p>

<p>If you prefer skipping the setup steps, you can clone down the example repo <a href="https://github.com/DavidColby/player_sorting_frames/tree/main">from Github</a>. The <code>main</code> branch is pinned to the end of the setup process and ready for you to start building.</p>

<p>This article is being written using Rails 6.1. When Rails 7 releases, the install command listed below will change. Until then we need to manually add the bundling gems to our Gemfile.</p>

<p>First, from your terminal:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>rails new player_sort_frames --skip-javascript --skip-webpack-install --skip-turbolinks
cd player_sort_frames
bundle add cssbundling-rails jsbundling-rails hotwire-rails faker
rails g model Team name:string                                                  
rails g scaffold Player name:string team:references seasons:integer
rails db:migrate
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here, in addition to the bundling gems, we added <a href="https://github.com/faker-ruby/faker">Faker</a> to our project to allow us to quickly add seed data to the database and added a <code>Team</code> model and <code>Players</code> resource to our project.</p>

<p>The core of our application will be a list of players, we won’t interact with Teams directly so we skip adding a controller and views for Teams.</p>

<p>Next up, we’ll use the new bundling gems to install webpack to handle our JavaScript and <a href="https://tailwindcss.com/">Tailwind</a> for CSS. From your terminal:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>rails javascript:install:webpack
rails css:install:tailwind
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Finally, we’ll wrap up setup by installing Hotwire in our application. Technically, we only need Turbo for this project, but having Stimulus setup won’t hurt anything. One more time, from your terminal:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>rails hotwire:install
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>With everything installed, you can start up the server and build your assets with <code>bin/dev</code> from your terminal.</p>

<h2>
  <a name="build-table-layout" href="#build-table-layout">
  </a>
  Build table layout
</h2>

<p>We’ll begin by updating the players index page to display a nicely styled table of all of the players in the database. Rails’ scaffolding gets us most of the way there, but instead of rendering the players table in <code>index.html.erb</code> we’ll move the table to a partial.</p>

<p>This partial will come in handy later when we use Turbo Frames to sort the list of players.</p>

<p>First, update <code>app/views/players/index.html.erb</code> like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"max-w-7xl mx-auto mt-12"</span><span class="nt">></span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"players"</span><span class="p">,</span> <span class="ss">players: </span><span class="vi">@players</span> <span class="cp">%></span>
<span class="nt">&lt;/div></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The index is now rendering a partial (<code>players</code>) that hasn't been created yet, so we'll create that partial next.</p>

<p>From your terminal:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>touch app/views/players/_players.html.erb
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>And fill the partial in like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"shadow overflow-hidden rounded border-b border-gray-200"</span><span class="nt">></span>
  <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"min-w-full bg-white"</span><span class="nt">></span>
    <span class="nt">&lt;thead</span> <span class="na">class=</span><span class="s">"bg-gray-800 text-white"</span><span class="nt">></span>
      <span class="nt">&lt;tr></span>
        <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-name"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">></span>
          <span class="nt">&lt;span></span>Name<span class="nt">&lt;/span></span>
        <span class="nt">&lt;/th></span>
        <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-team"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">></span>
          <span class="nt">&lt;span></span>Team<span class="nt">&lt;/span></span>
        <span class="nt">&lt;/th></span>
        <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-seasons"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">></span>
          <span class="nt">&lt;span></span>Seasons<span class="nt">&lt;/span></span>
        <span class="nt">&lt;/th></span>
      <span class="nt">&lt;/tr></span>
    <span class="nt">&lt;/thead></span>

    <span class="nt">&lt;tbody</span> <span class="na">class=</span><span class="s">"text-gray-700"</span><span class="nt">></span>
      <span class="cp">&lt;%</span> <span class="n">players</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">player</span><span class="o">|</span> <span class="cp">%></span>
        <span class="nt">&lt;tr></span>
          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6"</span><span class="nt">></span><span class="cp">&lt;%=</span> <span class="n">player</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%></span><span class="nt">&lt;/td></span>
          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6"</span><span class="nt">></span><span class="cp">&lt;%=</span> <span class="n">player</span><span class="p">.</span><span class="nf">team</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%></span><span class="nt">&lt;/td></span>
          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6"</span><span class="nt">></span><span class="cp">&lt;%=</span> <span class="n">player</span><span class="p">.</span><span class="nf">seasons</span> <span class="cp">%></span><span class="nt">&lt;/td></span>
        <span class="nt">&lt;/tr></span>
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
    <span class="nt">&lt;/tbody></span>
  <span class="nt">&lt;/table></span>
<span class="nt">&lt;/div></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This partial simply renders a table that contains a header row and then rows for each <code>player</code> in the <code>players</code> variable. The classes are all built-in Tailwind classes that are not integral to the function of the application.</p>

<p>Now we’ve got a nice looking table ready to display our players, but no players in the database! Let’s fix that by creating enough seed data that we can see sorting in action.</p>

<p>First, update <code>db/seeds.rb</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="p">[</span><span class="s1">'Dallas Mavericks'</span><span class="p">,</span> <span class="s1">'LA Clippers'</span><span class="p">,</span> <span class="s1">'LA Lakers'</span><span class="p">,</span> <span class="s1">'San Antonio Spurs'</span><span class="p">,</span> <span class="s1">'Boston Celtics'</span><span class="p">,</span> <span class="s1">'Miami Heat'</span><span class="p">,</span> <span class="s1">'New Orleans Pelicans'</span><span class="p">].</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
  <span class="no">Team</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="nb">name</span><span class="p">)</span>
<span class="k">end</span>

<span class="mi">100</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span>
  <span class="no">Player</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="no">Faker</span><span class="o">::</span><span class="no">Name</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="ss">team: </span><span class="no">Team</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">Team</span><span class="p">.</span><span class="nf">pluck</span><span class="p">(</span><span class="ss">:id</span><span class="p">).</span><span class="nf">sample</span><span class="p">),</span> <span class="ss">seasons: </span><span class="nb">rand</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>And then from your terminal, seed the database:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>rails db:seed
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>If you haven’t already, boot up the app and build assets with <code>bin/dev</code> from your terminal, and then head to <a href="http://localhost:3000/players">localhost:3000/players</a> and see the list of randomly generated players, ready to sort.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s---MGON9ij--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fnl03han3wrgrot3glvl.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s---MGON9ij--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fnl03han3wrgrot3glvl.png" alt="A screenshot of a data table with columns for name, team, and seasons" loading="lazy" width="880" height="405"></a></p>

<p>Now that we’ve got our table populated and displaying, let’s start on the fun stuff by making the table sortable with Turbo Frames.</p>

<h2>
  <a name="add-turbo-frame-sorting" href="#add-turbo-frame-sorting">
  </a>
  Add turbo frame sorting
</h2>

<p>As a reminder, our goal is for users to be able to click on a table header to sort the table by that column. We want sorting to happen without a page turn, and we want to use a Turbo Frame to update the list of players in the UI.</p>

<p>To start, we’ll convert the wrapper div in the <code>players</code> partial to a <code>turbo_frame_tag</code> with an id of <code>players</code> and the same classes that the wrapper div had. In <code>app/views/players/_players.html.erb</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"players"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"shadow overflow-hidden rounded border-b border-gray-200"</span> <span class="k">do</span> <span class="cp">%></span>
  <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"min-w-full bg-white"</span><span class="nt">></span>
  <span class="c">&lt;!-- snip --></span>
  <span class="nt">&lt;/table></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Don’t forget to replace the closing <code>&lt;/div></code> with the <code>&lt;% end %></code> tag!</p>

<p>Now that the <code>players</code> turbo frame wraps the content of the table, <a href="https://turbo.hotwired.dev/handbook/frames">links inside of this frame</a> will automatically attempt to replace the content of the turbo frame with the content they receive from the server.</p>

<p>We’ll come back to this concept in a minute, but first, let’s build out the remainder of the code we need for the first pass at sorting the table.</p>

<p>Next, inside of the <code>players</code> partial still, update the table header like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="nt">&lt;thead</span> <span class="na">class=</span><span class="s">"bg-gray-800 text-white"</span><span class="nt">></span>
  <span class="nt">&lt;tr></span>
    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-name"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">></span>
      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"name"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Name"</span><span class="p">)</span> <span class="cp">%></span>
    <span class="nt">&lt;/th></span>
    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-team"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">></span>
      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"teams.name"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Team"</span><span class="p">)</span> <span class="cp">%></span>
    <span class="nt">&lt;/th></span>
    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-seasons"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">></span>
      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"seasons"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Seasons"</span><span class="p">)</span> <span class="cp">%></span>
    <span class="nt">&lt;/th></span>
  <span class="nt">&lt;/tr></span>
<span class="nt">&lt;/thead></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here we’ve replaced the static text labeling each column with a call to the <code>sort_link</code> helper method, passing in a column and a label for each header cell.</p>

<p>This helper method doesn’t exist yet, so let’s add that next. In <code>app/helpers/players_helper.rb</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="k">module</span> <span class="nn">PlayersHelper</span>
  <span class="k">def</span> <span class="nf">sort_link</span><span class="p">(</span><span class="n">column</span><span class="p">:,</span> <span class="n">label</span><span class="p">:)</span>
    <span class="n">link_to</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">list_players_path</span><span class="p">(</span><span class="ss">column: </span><span class="n">column</span><span class="p">))</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><code>sort_link</code> renders a standard Rails <code>link_to</code>, using <code>label</code> to display the link to the user, and <code>column</code> to append a parameter to the generated URL.</p>

<p>The <code>link_to</code> points to <code>list_players_path</code>, which we haven’t defined yet. Let’s do that next, in <code>config/routes.rb</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="n">resources</span> <span class="ss">:players</span> <span class="k">do</span>
  <span class="n">collection</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">'list'</span>
  <span class="k">end</span> 
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>And finally, we need to update our controller to define an action for the new <code>list</code> route we’ve added.</p>

<p>In <code>app/controllers/players_controller.rb</code>, add a new <code>list</code> method, like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">list</span>
  <span class="n">players</span> <span class="o">=</span> <span class="no">Player</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:team</span><span class="p">).</span><span class="nf">order</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span><span class="si">}</span><span class="s2"> asc"</span><span class="p">)</span>
  <span class="n">render</span><span class="p">(</span><span class="ss">partial: </span><span class="s1">'players'</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">players: </span><span class="n">players</span> <span class="p">})</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here we’ve defined a new controller action that queries the database for all of the players, includes the teams table in the query, and orders the players using the value of <code>params[:column]</code>.</p>

<p>The <code>includes(:team)</code> is necessary both to allow sorting players by their team name and for performance, since the <code>players</code> partial makes a call to <code>player.team.name</code> to display the players name on each row. </p>

<p>Once the players are retrieved, the <code>players</code> partial is rendered and sent back to the browser.</p>

<p>With the controller update in place, refresh the page, click on a column header, and, if all has gone well, you should see that the list of players is updated (almost) instantly with the correct column sorting applied.</p>

<p>When you sort by a column, you should see output in your server logs like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>Started GET "/players/list?column=seasons"
Processing by PlayersController#list as HTML
  Parameters: {"column"=>"seasons"}
  Player Load (0.5ms)  SELECT "players".* FROM "players" ORDER BY seasons asc
  ↳ app/views/players/_players.html.erb:18
  Team Load (0.2ms)  SELECT "teams".* FROM "teams" WHERE "teams"."id" IN (?, ?, ?, ?, ?, ?, ?)  [["id", 3], ["id", 1], ["id", 2], ["id", 6], ["id", 4], ["id", 5], ["id", 7]]
  ↳ app/views/players/_players.html.erb:18
  Rendered players/_players.html.erb (Duration: 5.9ms | Allocations: 3994)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.6ms | Allocations: 4224)
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Nice work so far, let’s pause here to step back and talk about how this all ties together.</p>

<p>We started by wrapping the players table in a Turbo Frame with an id of <code>players</code>. Then we added a link to each of the header cells, pointing to <code>players/list</code>.</p>

<p>Because the link is wrapped in a turbo frame, when the response is sent back from the server, Turbo scans the response for a turbo frame with the same id (players) and replaces the existing frame content with the new frame content.</p>

<p>In our case, this means that the updated list of players, rendered by <code>players/list</code>, replaces the content of the players table without touching the rest of the page.</p>

<p>This use of Turbo Frames, to replace the content of a matching frame, is the simplest approach to using Turbo Frames.</p>

<p>In more advanced cases, we can have a link inside of a frame <a href="https://turbo.hotwired.dev/handbook/frames#targeting-navigation-into-or-out-of-a-frame">break out of a frame</a>, with <code>target=_top</code> or use <code>data-turbo-frame</code> to tell Turbo that a link from outside of a frame should target that frame.</p>

<p>Turbo Frames enable us to make fast, efficient page updates without adding significant complexity to our code.</p>

<p>Now that we’ve got a little more context for how Turbo Frames are enabling sorting in our application, let’s finish up by adding the ability to sort in both ascending and descending order and inserting a visual indicator when sorting is applied.</p>

<h2>
  <a name="add-descending-sorting" href="#add-descending-sorting">
  </a>
  Add descending sorting
</h2>

<p>We want users to be able to sort in descending order by clicking on the same column header twice in a row. The first click will sort in ascending order, the next click will sort in descending order.</p>

<p>Here’s a demonstration of the desired user experience for this section of the article:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--PJT9WBP9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n6th2gyiv4brmv9wjpzm.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--PJT9WBP9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n6th2gyiv4brmv9wjpzm.gif" alt="A screen recording of a user clicking on column headers to sort a data table in ascending and descending order" loading="lazy" width="880" height="356" data-animated="true"></a></p>

<p>First, we’ll modify the <code>sort_link</code> helper that we added in the last section to send a direction as well as a column in the <code>list</code> request.</p>

<p>In <code>app/helpers/players_helper.rb</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">sort_link</span><span class="p">(</span><span class="n">column</span><span class="p">:,</span> <span class="n">label</span><span class="p">:)</span>
  <span class="k">if</span> <span class="n">column</span> <span class="o">==</span> <span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span>
    <span class="n">link_to</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">list_players_path</span><span class="p">(</span><span class="ss">column: </span><span class="n">column</span><span class="p">,</span> <span class="ss">direction: </span><span class="n">next_direction</span><span class="p">))</span>
  <span class="k">else</span>
    <span class="n">link_to</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">list_players_path</span><span class="p">(</span><span class="ss">column: </span><span class="n">column</span><span class="p">,</span> <span class="ss">direction: </span><span class="s1">'asc'</span><span class="p">))</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">next_direction</span>
  <span class="n">params</span><span class="p">[</span><span class="ss">:direction</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'asc'</span> <span class="p">?</span> <span class="s1">'desc'</span> <span class="p">:</span> <span class="s1">'asc'</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><code>sort_link</code> now adds a second parameter into the <code>link_to</code>. The new <code>direction</code> parameter is set to the value of the <code>next_direction</code> helper method if we are generating the sort link for a column that is being used for sorting; otherwise, <code>direction</code> is set to ascending.</p>

<p><code>next_direction</code> simply inverts the current sort direction so the sort direction changes with each click.</p>

<p>Next we’ll update the <code>list</code> method in <code>players_controller.rb</code>  to use the new <code>direction</code> parameter in the <code>order</code> clause:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">list</span>
  <span class="n">players</span> <span class="o">=</span> <span class="no">Player</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:team</span><span class="p">).</span><span class="nf">order</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:direction</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="c1"># snip</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>With this change in place, we can now sort our table in either direction. Incredible stuff, nice work making it this far!</p>

<p>One more set of changes left: Giving users feedback in the UI that sorting is active.</p>

<h2>
  <a name="add-visual-indicator-of-sort-direction" href="#add-visual-indicator-of-sort-direction">
  </a>
  Add visual indicator of sort direction
</h2>

<p>Our final task is to add an indicator next to the column name when that column is being used to sort the table. The indicator will be a small triangle, pointing up when sorting in ascending order and down when sorting in descending order.</p>

<p>We’ll start by updating the table header in the players partial like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="nt">&lt;thead</span> <span class="na">class=</span><span class="s">"bg-gray-800 text-white"</span><span class="nt">></span>
  <span class="nt">&lt;tr></span>
    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-name"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer relative"</span><span class="nt">></span>
      <span class="cp">&lt;%=</span> <span class="n">sort_indicator</span> <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"name"</span> <span class="cp">%></span>
      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"name"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Name"</span><span class="p">)</span> <span class="cp">%></span>
    <span class="nt">&lt;/th></span>
    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-team"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer relative"</span><span class="nt">></span>
      <span class="cp">&lt;%=</span> <span class="n">sort_indicator</span> <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"teams.name"</span> <span class="cp">%></span>
      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"teams.name"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Team"</span><span class="p">)</span> <span class="cp">%></span>
    <span class="nt">&lt;/th></span>
    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-seasons"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer relative"</span><span class="nt">></span>
      <span class="cp">&lt;%=</span> <span class="n">sort_indicator</span> <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"seasons"</span> <span class="cp">%></span>
      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"seasons"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Seasons"</span><span class="p">)</span> <span class="cp">%></span>
    <span class="nt">&lt;/th></span>
  <span class="nt">&lt;/tr></span>
<span class="nt">&lt;/thead></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here we’ve added a conditional call to <code>sort_indicator</code> into each header cell.</p>

<p>Since we only want to add the indicator when the column is being used to sort the table, we use <code>if params[:column]</code> to skip the <code>sort_indicator</code> call on inactive columns.</p>

<p>We also added <code>relative</code> to the <code>&lt;th></code> elements class lists because the sort indicator will be absolutely positioned inside of the header cell.</p>

<p>Next up, we’ll define <code>sort_indicator</code> in <code>app/helpers/players_helper.rb</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">sort_indicator</span>
  <span class="n">tag</span><span class="p">.</span><span class="nf">span</span><span class="p">(</span><span class="ss">class: </span><span class="s2">"sort sort-</span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:direction</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><code>sort_indicator</code> simply returns a span with a class that matches the current sort direction, read from <code>params[:direction]</code></p>

<p>Finally, we’ll add css so our sort indicator isn’t just an invisible span on the page.</p>

<p>For convenience, we’ll insert the css right into <code>app/assets/stylesheets/application.css</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="nc">.sort</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">0.5rem</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">border-left</span><span class="p">:</span> <span class="m">6px</span> <span class="nb">solid</span> <span class="nb">transparent</span><span class="p">;</span>
  <span class="nl">border-right</span><span class="p">:</span> <span class="m">6px</span> <span class="nb">solid</span> <span class="nb">transparent</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.sort-desc</span> <span class="p">{</span>
  <span class="nl">border-top</span><span class="p">:</span> <span class="m">8px</span> <span class="nb">solid</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.sort-asc</span> <span class="p">{</span>
  <span class="nl">border-bottom</span><span class="p">:</span> <span class="m">8px</span> <span class="nb">solid</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>With the CSS added and our new <code>sort_indicator</code> helper defined, refresh the page, click on the column headers, and see that the table is sorted and a visual indicator is shown for the current column and sort direction:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--JNCJbyMC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/jxnp8q3t87ligf2qd7nw.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--JNCJbyMC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/jxnp8q3t87ligf2qd7nw.gif" alt="A screen recording of a user clicking on column headers on a data table. With each click, the table sorts itself by that column and a triangle indicator appears next to the column used for sorting" loading="lazy" width="880" height="356" data-animated="true"></a></p>

<p>Great job following along, we've reached the end of the code for today!</p>

<h2>
  <a name="wrapping-up" href="#wrapping-up">
  </a>
  Wrapping up
</h2>

<p>Today we learned how to build a sortable table with Rails and Turbo Frames. Our table can be sorted without a page turn, and we built the interface using basic set of tools familiar to any Rails developer.</p>

<p>While our table only supports sorting today, our frame-based approach can be enhanced to support filtering and searching without deviating from the core concept of using Turbo Frames to display and update the table.</p>

<p>Turbo Frames, along with the rest of the <a href="https://hotwired.dev/">Hotwire stack</a>, give Rails developers the ability to quickly build fast, modern user experiences without adding the weight and complexity that can come with JavaScript frameworks.</p>

<p>You'll note that I did not compare the approach in this article directly to the approach in yesterday's article where we built the same UI with StimulusReflex. Rather than attempting a direct, side-by-side comparison, I prefer presenting both options as standalone projects that show how to build simple experiences using each tool so that readers can learn how each tool works, begin experimenting, and see which feels right.</p>

<p>Both <a href="https://docs.stimulusreflex.com/">StimulusReflex</a> and Turbo (Frames and Streams) can deliver world-class user experiences in production applications while providing an unbeatable developer experience. The right choice for you and your team is almost certain to be the option that your team feels most comfortable with and most productive in.</p>

<p>Whichever routet you choose, with the Hotwire stack, StimulusReflex, and CableReady available, Rails is well-positioned for the future.</p>

<p>If you’re ready to go further with on your Turbo journey, here are a few places to start:</p>

<ul>
<li>Review the Turbo <a href="https://turbo.hotwired.dev/handbook/introduction">documentation</a>
</li>
<li>Dive in to the Turbo Rails <a href="https://github.com/hotwired/turbo-rails">source code</a> on Github</li>
<li>Spend time with <a href="https://stimulus.hotwired.dev/handbook/introduction">Stimulus</a>, the other side of the Hotwire stack</li>
<li>Learn from the <a href="https://discuss.hotwired.dev/">community</a> in the Hotwire discussion forum</li>
<li>Join the <a href="https://discord.gg/stimulus-reflex">StimulusReflex discord</a>, where folks will happily help you learn more about building reactive web applications with Rails</li>
</ul>

<p>That’s all for today. As always, thanks for reading!</p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/davidcolbyatx/sort-tables-almost-instantly-with-ruby-on-rails-and-turbo-frames-ip7" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(s,a,n,e){return a.type_of="article",a.id=831874,a.title="Sort tables (almost) instantly with Ruby on Rails and Turbo Frames",a.description="One of the wonderful things about working in Rails in 2021 is that we are spoiled for options when it...",a.readable_publish_date="Sep 20 '21",a.slug="sort-tables-almost-instantly-with-ruby-on-rails-and-turbo-frames-ip7",a.path="/davidcolbyatx/sort-tables-almost-instantly-with-ruby-on-rails-and-turbo-frames-ip7",a.url="https://dev.to/davidcolbyatx/sort-tables-almost-instantly-with-ruby-on-rails-and-turbo-frames-ip7",a.comments_count=3,a.public_reactions_count=31,a.collection_id=15038,a.published_timestamp=n,a.positive_reactions_count=31,a.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--zErGd1bY--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tjx6vfrl9rd9sa23u19d.png",a.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--0OJJeuIU--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tjx6vfrl9rd9sa23u19d.png",a.canonical_url="https://www.colby.so/posts/sortable-table-with-rails-and-turbo-frames",a.created_at="2021-09-20T01:23:02Z",a.edited_at="2021-10-15T19:34:50Z",a.crossposted_at=s,a.published_at=n,a.last_comment_at="2021-09-25T18:43:48Z",a.reading_time_minutes=12,a.tag_list="ruby, rails, hotwire, tutorial",a.tags=["ruby","rails","hotwire","tutorial"],a.body_html='<p>One of the wonderful things about working in Rails in 2021 is that we are spoiled for options when it comes to building modern, reactive applications. When we need to build highly interactive user experiences, we don’t need to reach for JavaScript frameworks like Vue or React — the Rails ecosystem has all the tools we need to deliver exceptionally fast, efficient, and developer friendly front ends.</p>\n\n<p>Yesterday, I <a href="https://dev.to/davidcolbyatx/sort-tables-almost-instantly-with-ruby-on-rails-and-stimulusreflex-32d1">published an article</a> demonstrating a simple implementation of a sortable table with StimulusReflex. Today, we’re going to build the same experience with <a href="https://turbo.hotwired.dev/handbook/frames">Turbo Frames</a> instead.</p>\n\n<p>Why build the same thing with two different tools? Because we have great options to choose from in Rails-land, and understanding each option is a great place to start when considering which tool is right for you and your team.</p>\n\n<p>Like yesterday, our application is going to allow users to view a table of players. They’ll be able to click on each header cell to sort the table in ascending and descending order.</p>\n\n<p>Sorting will happen very quickly, without a full-page turn, and we won’t be writing any custom JavaScript or doing anything outside of writing ordinary Ruby code and ERB templates.</p>\n\n<p>When we’re finished, the application will work like this:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--TLCnLpy2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/gq9zn0ofue1oxigci0eo.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--TLCnLpy2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/gq9zn0ofue1oxigci0eo.gif" alt="A screen recording of a user clicking on column headers on a data table. With each click, the table sorts itself by that column and a triangle indicator appears next to the column used for sorting" loading="lazy" width="880" height="356" data-animated="true"></a></p>\n\n<p>You can demo the application for yourself <a href="https://aqueous-stream-31641.herokuapp.com/">on Heroku</a> (the free dyno may need a moment to wake up when you visit it) or view the <a href="https://github.com/DavidColby/player_sorting_frames/tree/sortable">complete source</a> on Github.</p>\n\n<p>This article assumes that you are comfortable building applications with Ruby on Rails and may be difficult to follow if you have never worked with Rails before. Previous experience with Turbo Frames is not required.</p>\n\n<p>Let’s get started!</p>\n\n<h2>\n  <a name="setup" href="#setup">\n  </a>\n  Setup\n</h2>\n\n<p>To begin, we’re going to create a new Rails application, skipping webpacker in favor of the newly released <a href="https://github.com/rails/cssbundling-rails">css</a> and <a href="https://github.com/rails/jsbundling-rails">jsbundling</a> gems.</p>\n\n<p>If you prefer skipping the setup steps, you can clone down the example repo <a href="https://github.com/DavidColby/player_sorting_frames/tree/main">from Github</a>. The <code>main</code> branch is pinned to the end of the setup process and ready for you to start building.</p>\n\n<p>This article is being written using Rails 6.1. When Rails 7 releases, the install command listed below will change. Until then we need to manually add the bundling gems to our Gemfile.</p>\n\n<p>First, from your terminal:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>rails new player_sort_frames --skip-javascript --skip-webpack-install --skip-turbolinks\ncd player_sort_frames\nbundle add cssbundling-rails jsbundling-rails hotwire-rails faker\nrails g model Team name:string                                                  \nrails g scaffold Player name:string team:references seasons:integer\nrails db:migrate\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Here, in addition to the bundling gems, we added <a href="https://github.com/faker-ruby/faker">Faker</a> to our project to allow us to quickly add seed data to the database and added a <code>Team</code> model and <code>Players</code> resource to our project.</p>\n\n<p>The core of our application will be a list of players, we won’t interact with Teams directly so we skip adding a controller and views for Teams.</p>\n\n<p>Next up, we’ll use the new bundling gems to install webpack to handle our JavaScript and <a href="https://tailwindcss.com/">Tailwind</a> for CSS. From your terminal:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>rails javascript:install:webpack\nrails css:install:tailwind\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Finally, we’ll wrap up setup by installing Hotwire in our application. Technically, we only need Turbo for this project, but having Stimulus setup won’t hurt anything. One more time, from your terminal:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>rails hotwire:install\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>With everything installed, you can start up the server and build your assets with <code>bin/dev</code> from your terminal.</p>\n\n<h2>\n  <a name="build-table-layout" href="#build-table-layout">\n  </a>\n  Build table layout\n</h2>\n\n<p>We’ll begin by updating the players index page to display a nicely styled table of all of the players in the database. Rails’ scaffolding gets us most of the way there, but instead of rendering the players table in <code>index.html.erb</code> we’ll move the table to a partial.</p>\n\n<p>This partial will come in handy later when we use Turbo Frames to sort the list of players.</p>\n\n<p>First, update <code>app/views/players/index.html.erb</code> like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"max-w-7xl mx-auto mt-12"</span><span class="nt">&gt;</span>\n  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"players"</span><span class="p">,</span> <span class="ss">players: </span><span class="vi">@players</span> <span class="cp">%&gt;</span>\n<span class="nt">&lt;/div&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The index is now rendering a partial (<code>players</code>) that hasn\'t been created yet, so we\'ll create that partial next.</p>\n\n<p>From your terminal:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>touch app/views/players/_players.html.erb\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>And fill the partial in like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"shadow overflow-hidden rounded border-b border-gray-200"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"min-w-full bg-white"</span><span class="nt">&gt;</span>\n    <span class="nt">&lt;thead</span> <span class="na">class=</span><span class="s">"bg-gray-800 text-white"</span><span class="nt">&gt;</span>\n      <span class="nt">&lt;tr&gt;</span>\n        <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-name"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">&gt;</span>\n          <span class="nt">&lt;span&gt;</span>Name<span class="nt">&lt;/span&gt;</span>\n        <span class="nt">&lt;/th&gt;</span>\n        <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-team"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">&gt;</span>\n          <span class="nt">&lt;span&gt;</span>Team<span class="nt">&lt;/span&gt;</span>\n        <span class="nt">&lt;/th&gt;</span>\n        <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-seasons"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">&gt;</span>\n          <span class="nt">&lt;span&gt;</span>Seasons<span class="nt">&lt;/span&gt;</span>\n        <span class="nt">&lt;/th&gt;</span>\n      <span class="nt">&lt;/tr&gt;</span>\n    <span class="nt">&lt;/thead&gt;</span>\n\n    <span class="nt">&lt;tbody</span> <span class="na">class=</span><span class="s">"text-gray-700"</span><span class="nt">&gt;</span>\n      <span class="cp">&lt;%</span> <span class="n">players</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">player</span><span class="o">|</span> <span class="cp">%&gt;</span>\n        <span class="nt">&lt;tr&gt;</span>\n          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6"</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="n">player</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/td&gt;</span>\n          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6"</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="n">player</span><span class="p">.</span><span class="nf">team</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/td&gt;</span>\n          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6"</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="n">player</span><span class="p">.</span><span class="nf">seasons</span> <span class="cp">%&gt;</span><span class="nt">&lt;/td&gt;</span>\n        <span class="nt">&lt;/tr&gt;</span>\n      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/tbody&gt;</span>\n  <span class="nt">&lt;/table&gt;</span>\n<span class="nt">&lt;/div&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This partial simply renders a table that contains a header row and then rows for each <code>player</code> in the <code>players</code> variable. The classes are all built-in Tailwind classes that are not integral to the function of the application.</p>\n\n<p>Now we’ve got a nice looking table ready to display our players, but no players in the database! Let’s fix that by creating enough seed data that we can see sorting in action.</p>\n\n<p>First, update <code>db/seeds.rb</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="p">[</span><span class="s1">\'Dallas Mavericks\'</span><span class="p">,</span> <span class="s1">\'LA Clippers\'</span><span class="p">,</span> <span class="s1">\'LA Lakers\'</span><span class="p">,</span> <span class="s1">\'San Antonio Spurs\'</span><span class="p">,</span> <span class="s1">\'Boston Celtics\'</span><span class="p">,</span> <span class="s1">\'Miami Heat\'</span><span class="p">,</span> <span class="s1">\'New Orleans Pelicans\'</span><span class="p">].</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>\n  <span class="no">Team</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="nb">name</span><span class="p">)</span>\n<span class="k">end</span>\n\n<span class="mi">100</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span>\n  <span class="no">Player</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="no">Faker</span><span class="o">::</span><span class="no">Name</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="ss">team: </span><span class="no">Team</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">Team</span><span class="p">.</span><span class="nf">pluck</span><span class="p">(</span><span class="ss">:id</span><span class="p">).</span><span class="nf">sample</span><span class="p">),</span> <span class="ss">seasons: </span><span class="nb">rand</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>And then from your terminal, seed the database:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>rails db:seed\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>If you haven’t already, boot up the app and build assets with <code>bin/dev</code> from your terminal, and then head to <a href="http://localhost:3000/players">localhost:3000/players</a> and see the list of randomly generated players, ready to sort.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s---MGON9ij--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fnl03han3wrgrot3glvl.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s---MGON9ij--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fnl03han3wrgrot3glvl.png" alt="A screenshot of a data table with columns for name, team, and seasons" loading="lazy" width="880" height="405"></a></p>\n\n<p>Now that we’ve got our table populated and displaying, let’s start on the fun stuff by making the table sortable with Turbo Frames.</p>\n\n<h2>\n  <a name="add-turbo-frame-sorting" href="#add-turbo-frame-sorting">\n  </a>\n  Add turbo frame sorting\n</h2>\n\n<p>As a reminder, our goal is for users to be able to click on a table header to sort the table by that column. We want sorting to happen without a page turn, and we want to use a Turbo Frame to update the list of players in the UI.</p>\n\n<p>To start, we’ll convert the wrapper div in the <code>players</code> partial to a <code>turbo_frame_tag</code> with an id of <code>players</code> and the same classes that the wrapper div had. In <code>app/views/players/_players.html.erb</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"players"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"shadow overflow-hidden rounded border-b border-gray-200"</span> <span class="k">do</span> <span class="cp">%&gt;</span>\n  <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"min-w-full bg-white"</span><span class="nt">&gt;</span>\n  <span class="c">&lt;!-- snip --&gt;</span>\n  <span class="nt">&lt;/table&gt;</span>\n<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Don’t forget to replace the closing <code>&lt;/div&gt;</code> with the <code>&lt;% end %&gt;</code> tag!</p>\n\n<p>Now that the <code>players</code> turbo frame wraps the content of the table, <a href="https://turbo.hotwired.dev/handbook/frames">links inside of this frame</a> will automatically attempt to replace the content of the turbo frame with the content they receive from the server.</p>\n\n<p>We’ll come back to this concept in a minute, but first, let’s build out the remainder of the code we need for the first pass at sorting the table.</p>\n\n<p>Next, inside of the <code>players</code> partial still, update the table header like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="nt">&lt;thead</span> <span class="na">class=</span><span class="s">"bg-gray-800 text-white"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;tr&gt;</span>\n    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-name"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"name"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Name"</span><span class="p">)</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/th&gt;</span>\n    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-team"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"teams.name"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Team"</span><span class="p">)</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/th&gt;</span>\n    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-seasons"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer"</span><span class="nt">&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"seasons"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Seasons"</span><span class="p">)</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/th&gt;</span>\n  <span class="nt">&lt;/tr&gt;</span>\n<span class="nt">&lt;/thead&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Here we’ve replaced the static text labeling each column with a call to the <code>sort_link</code> helper method, passing in a column and a label for each header cell.</p>\n\n<p>This helper method doesn’t exist yet, so let’s add that next. In <code>app/helpers/players_helper.rb</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="k">module</span> <span class="nn">PlayersHelper</span>\n  <span class="k">def</span> <span class="nf">sort_link</span><span class="p">(</span><span class="n">column</span><span class="p">:,</span> <span class="n">label</span><span class="p">:)</span>\n    <span class="n">link_to</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">list_players_path</span><span class="p">(</span><span class="ss">column: </span><span class="n">column</span><span class="p">))</span>\n  <span class="k">end</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><code>sort_link</code> renders a standard Rails <code>link_to</code>, using <code>label</code> to display the link to the user, and <code>column</code> to append a parameter to the generated URL.</p>\n\n<p>The <code>link_to</code> points to <code>list_players_path</code>, which we haven’t defined yet. Let’s do that next, in <code>config/routes.rb</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="n">resources</span> <span class="ss">:players</span> <span class="k">do</span>\n  <span class="n">collection</span> <span class="k">do</span>\n    <span class="n">get</span> <span class="s1">\'list\'</span>\n  <span class="k">end</span> \n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>And finally, we need to update our controller to define an action for the new <code>list</code> route we’ve added.</p>\n\n<p>In <code>app/controllers/players_controller.rb</code>, add a new <code>list</code> method, like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">list</span>\n  <span class="n">players</span> <span class="o">=</span> <span class="no">Player</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:team</span><span class="p">).</span><span class="nf">order</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span><span class="si">}</span><span class="s2"> asc"</span><span class="p">)</span>\n  <span class="n">render</span><span class="p">(</span><span class="ss">partial: </span><span class="s1">\'players\'</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">players: </span><span class="n">players</span> <span class="p">})</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Here we’ve defined a new controller action that queries the database for all of the players, includes the teams table in the query, and orders the players using the value of <code>params[:column]</code>.</p>\n\n<p>The <code>includes(:team)</code> is necessary both to allow sorting players by their team name and for performance, since the <code>players</code> partial makes a call to <code>player.team.name</code> to display the players name on each row. </p>\n\n<p>Once the players are retrieved, the <code>players</code> partial is rendered and sent back to the browser.</p>\n\n<p>With the controller update in place, refresh the page, click on a column header, and, if all has gone well, you should see that the list of players is updated (almost) instantly with the correct column sorting applied.</p>\n\n<p>When you sort by a column, you should see output in your server logs like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>Started GET "/players/list?column=seasons"\nProcessing by PlayersController#list as HTML\n  Parameters: {"column"=&gt;"seasons"}\n  Player Load (0.5ms)  SELECT "players".* FROM "players" ORDER BY seasons asc\n  ↳ app/views/players/_players.html.erb:18\n  Team Load (0.2ms)  SELECT "teams".* FROM "teams" WHERE "teams"."id" IN (?, ?, ?, ?, ?, ?, ?)  [["id", 3], ["id", 1], ["id", 2], ["id", 6], ["id", 4], ["id", 5], ["id", 7]]\n  ↳ app/views/players/_players.html.erb:18\n  Rendered players/_players.html.erb (Duration: 5.9ms | Allocations: 3994)\nCompleted 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.6ms | Allocations: 4224)\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Nice work so far, let’s pause here to step back and talk about how this all ties together.</p>\n\n<p>We started by wrapping the players table in a Turbo Frame with an id of <code>players</code>. Then we added a link to each of the header cells, pointing to <code>players/list</code>.</p>\n\n<p>Because the link is wrapped in a turbo frame, when the response is sent back from the server, Turbo scans the response for a turbo frame with the same id (players) and replaces the existing frame content with the new frame content.</p>\n\n<p>In our case, this means that the updated list of players, rendered by <code>players/list</code>, replaces the content of the players table without touching the rest of the page.</p>\n\n<p>This use of Turbo Frames, to replace the content of a matching frame, is the simplest approach to using Turbo Frames.</p>\n\n<p>In more advanced cases, we can have a link inside of a frame <a href="https://turbo.hotwired.dev/handbook/frames#targeting-navigation-into-or-out-of-a-frame">break out of a frame</a>, with <code>target=_top</code> or use <code>data-turbo-frame</code> to tell Turbo that a link from outside of a frame should target that frame.</p>\n\n<p>Turbo Frames enable us to make fast, efficient page updates without adding significant complexity to our code.</p>\n\n<p>Now that we’ve got a little more context for how Turbo Frames are enabling sorting in our application, let’s finish up by adding the ability to sort in both ascending and descending order and inserting a visual indicator when sorting is applied.</p>\n\n<h2>\n  <a name="add-descending-sorting" href="#add-descending-sorting">\n  </a>\n  Add descending sorting\n</h2>\n\n<p>We want users to be able to sort in descending order by clicking on the same column header twice in a row. The first click will sort in ascending order, the next click will sort in descending order.</p>\n\n<p>Here’s a demonstration of the desired user experience for this section of the article:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--PJT9WBP9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n6th2gyiv4brmv9wjpzm.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--PJT9WBP9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n6th2gyiv4brmv9wjpzm.gif" alt="A screen recording of a user clicking on column headers to sort a data table in ascending and descending order" loading="lazy" width="880" height="356" data-animated="true"></a></p>\n\n<p>First, we’ll modify the <code>sort_link</code> helper that we added in the last section to send a direction as well as a column in the <code>list</code> request.</p>\n\n<p>In <code>app/helpers/players_helper.rb</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">sort_link</span><span class="p">(</span><span class="n">column</span><span class="p">:,</span> <span class="n">label</span><span class="p">:)</span>\n  <span class="k">if</span> <span class="n">column</span> <span class="o">==</span> <span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span>\n    <span class="n">link_to</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">list_players_path</span><span class="p">(</span><span class="ss">column: </span><span class="n">column</span><span class="p">,</span> <span class="ss">direction: </span><span class="n">next_direction</span><span class="p">))</span>\n  <span class="k">else</span>\n    <span class="n">link_to</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">list_players_path</span><span class="p">(</span><span class="ss">column: </span><span class="n">column</span><span class="p">,</span> <span class="ss">direction: </span><span class="s1">\'asc\'</span><span class="p">))</span>\n  <span class="k">end</span>\n<span class="k">end</span>\n\n<span class="k">def</span> <span class="nf">next_direction</span>\n  <span class="n">params</span><span class="p">[</span><span class="ss">:direction</span><span class="p">]</span> <span class="o">==</span> <span class="s1">\'asc\'</span> <span class="p">?</span> <span class="s1">\'desc\'</span> <span class="p">:</span> <span class="s1">\'asc\'</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><code>sort_link</code> now adds a second parameter into the <code>link_to</code>. The new <code>direction</code> parameter is set to the value of the <code>next_direction</code> helper method if we are generating the sort link for a column that is being used for sorting; otherwise, <code>direction</code> is set to ascending.</p>\n\n<p><code>next_direction</code> simply inverts the current sort direction so the sort direction changes with each click.</p>\n\n<p>Next we’ll update the <code>list</code> method in <code>players_controller.rb</code>  to use the new <code>direction</code> parameter in the <code>order</code> clause:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">list</span>\n  <span class="n">players</span> <span class="o">=</span> <span class="no">Player</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:team</span><span class="p">).</span><span class="nf">order</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:direction</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>\n  <span class="c1"># snip</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>With this change in place, we can now sort our table in either direction. Incredible stuff, nice work making it this far!</p>\n\n<p>One more set of changes left: Giving users feedback in the UI that sorting is active.</p>\n\n<h2>\n  <a name="add-visual-indicator-of-sort-direction" href="#add-visual-indicator-of-sort-direction">\n  </a>\n  Add visual indicator of sort direction\n</h2>\n\n<p>Our final task is to add an indicator next to the column name when that column is being used to sort the table. The indicator will be a small triangle, pointing up when sorting in ascending order and down when sorting in descending order.</p>\n\n<p>We’ll start by updating the table header in the players partial like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="nt">&lt;thead</span> <span class="na">class=</span><span class="s">"bg-gray-800 text-white"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;tr&gt;</span>\n    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-name"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer relative"</span><span class="nt">&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">sort_indicator</span> <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"name"</span> <span class="cp">%&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"name"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Name"</span><span class="p">)</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/th&gt;</span>\n    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-team"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer relative"</span><span class="nt">&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">sort_indicator</span> <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"teams.name"</span> <span class="cp">%&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"teams.name"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Team"</span><span class="p">)</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/th&gt;</span>\n    <span class="nt">&lt;th</span> <span class="na">id=</span><span class="s">"players-seasons"</span> <span class="na">class=</span><span class="s">"text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer relative"</span><span class="nt">&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">sort_indicator</span> <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="ss">:column</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"seasons"</span> <span class="cp">%&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">sort_link</span><span class="p">(</span><span class="ss">column: </span><span class="s2">"seasons"</span><span class="p">,</span> <span class="ss">label: </span><span class="s2">"Seasons"</span><span class="p">)</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/th&gt;</span>\n  <span class="nt">&lt;/tr&gt;</span>\n<span class="nt">&lt;/thead&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Here we’ve added a conditional call to <code>sort_indicator</code> into each header cell.</p>\n\n<p>Since we only want to add the indicator when the column is being used to sort the table, we use <code>if params[:column]</code> to skip the <code>sort_indicator</code> call on inactive columns.</p>\n\n<p>We also added <code>relative</code> to the <code>&lt;th&gt;</code> elements class lists because the sort indicator will be absolutely positioned inside of the header cell.</p>\n\n<p>Next up, we’ll define <code>sort_indicator</code> in <code>app/helpers/players_helper.rb</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">sort_indicator</span>\n  <span class="n">tag</span><span class="p">.</span><span class="nf">span</span><span class="p">(</span><span class="ss">class: </span><span class="s2">"sort sort-</span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:direction</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><code>sort_indicator</code> simply returns a span with a class that matches the current sort direction, read from <code>params[:direction]</code></p>\n\n<p>Finally, we’ll add css so our sort indicator isn’t just an invisible span on the page.</p>\n\n<p>For convenience, we’ll insert the css right into <code>app/assets/stylesheets/application.css</code><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="nc">.sort</span> <span class="p">{</span>\n  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>\n  <span class="nl">top</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>\n  <span class="nl">left</span><span class="p">:</span> <span class="m">0.5rem</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">border-left</span><span class="p">:</span> <span class="m">6px</span> <span class="nb">solid</span> <span class="nb">transparent</span><span class="p">;</span>\n  <span class="nl">border-right</span><span class="p">:</span> <span class="m">6px</span> <span class="nb">solid</span> <span class="nb">transparent</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.sort-desc</span> <span class="p">{</span>\n  <span class="nl">border-top</span><span class="p">:</span> <span class="m">8px</span> <span class="nb">solid</span> <span class="m">#fff</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.sort-asc</span> <span class="p">{</span>\n  <span class="nl">border-bottom</span><span class="p">:</span> <span class="m">8px</span> <span class="nb">solid</span> <span class="m">#fff</span><span class="p">;</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>With the CSS added and our new <code>sort_indicator</code> helper defined, refresh the page, click on the column headers, and see that the table is sorted and a visual indicator is shown for the current column and sort direction:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--JNCJbyMC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/jxnp8q3t87ligf2qd7nw.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--JNCJbyMC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/jxnp8q3t87ligf2qd7nw.gif" alt="A screen recording of a user clicking on column headers on a data table. With each click, the table sorts itself by that column and a triangle indicator appears next to the column used for sorting" loading="lazy" width="880" height="356" data-animated="true"></a></p>\n\n<p>Great job following along, we\'ve reached the end of the code for today!</p>\n\n<h2>\n  <a name="wrapping-up" href="#wrapping-up">\n  </a>\n  Wrapping up\n</h2>\n\n<p>Today we learned how to build a sortable table with Rails and Turbo Frames. Our table can be sorted without a page turn, and we built the interface using basic set of tools familiar to any Rails developer.</p>\n\n<p>While our table only supports sorting today, our frame-based approach can be enhanced to support filtering and searching without deviating from the core concept of using Turbo Frames to display and update the table.</p>\n\n<p>Turbo Frames, along with the rest of the <a href="https://hotwired.dev/">Hotwire stack</a>, give Rails developers the ability to quickly build fast, modern user experiences without adding the weight and complexity that can come with JavaScript frameworks.</p>\n\n<p>You\'ll note that I did not compare the approach in this article directly to the approach in yesterday\'s article where we built the same UI with StimulusReflex. Rather than attempting a direct, side-by-side comparison, I prefer presenting both options as standalone projects that show how to build simple experiences using each tool so that readers can learn how each tool works, begin experimenting, and see which feels right.</p>\n\n<p>Both <a href="https://docs.stimulusreflex.com/">StimulusReflex</a> and Turbo (Frames and Streams) can deliver world-class user experiences in production applications while providing an unbeatable developer experience. The right choice for you and your team is almost certain to be the option that your team feels most comfortable with and most productive in.</p>\n\n<p>Whichever routet you choose, with the Hotwire stack, StimulusReflex, and CableReady available, Rails is well-positioned for the future.</p>\n\n<p>If you’re ready to go further with on your Turbo journey, here are a few places to start:</p>\n\n<ul>\n<li>Review the Turbo <a href="https://turbo.hotwired.dev/handbook/introduction">documentation</a>\n</li>\n<li>Dive in to the Turbo Rails <a href="https://github.com/hotwired/turbo-rails">source code</a> on Github</li>\n<li>Spend time with <a href="https://stimulus.hotwired.dev/handbook/introduction">Stimulus</a>, the other side of the Hotwire stack</li>\n<li>Learn from the <a href="https://discuss.hotwired.dev/">community</a> in the Hotwire discussion forum</li>\n<li>Join the <a href="https://discord.gg/stimulus-reflex">StimulusReflex discord</a>, where folks will happily help you learn more about building reactive web applications with Rails</li>\n</ul>\n\n<p>That’s all for today. As always, thanks for reading!</p>\n\n',a.body_markdown='One of the wonderful things about working in Rails in 2021 is that we are spoiled for options when it comes to building modern, reactive applications. When we need to build highly interactive user experiences, we don’t need to reach for JavaScript frameworks like Vue or React — the Rails ecosystem has all the tools we need to deliver exceptionally fast, efficient, and developer friendly front ends.\n\nYesterday, I [published an article](https://dev.to/davidcolbyatx/sort-tables-almost-instantly-with-ruby-on-rails-and-stimulusreflex-32d1) demonstrating a simple implementation of a sortable table with StimulusReflex. Today, we’re going to build the same experience with [Turbo Frames](https://turbo.hotwired.dev/handbook/frames) instead.\n\nWhy build the same thing with two different tools? Because we have great options to choose from in Rails-land, and understanding each option is a great place to start when considering which tool is right for you and your team.\n\nLike yesterday, our application is going to allow users to view a table of players. They’ll be able to click on each header cell to sort the table in ascending and descending order.\n\nSorting will happen very quickly, without a full-page turn, and we won’t be writing any custom JavaScript or doing anything outside of writing ordinary Ruby code and ERB templates.\n\nWhen we’re finished, the application will work like this:\n\n![A screen recording of a user clicking on column headers on a data table. With each click, the table sorts itself by that column and a triangle indicator appears next to the column used for sorting](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/gq9zn0ofue1oxigci0eo.gif)\n\nYou can demo the application for yourself [on Heroku](https://aqueous-stream-31641.herokuapp.com/) (the free dyno may need a moment to wake up when you visit it) or view the [complete source](https://github.com/DavidColby/player_sorting_frames/tree/sortable) on Github.\n\nThis article assumes that you are comfortable building applications with Ruby on Rails and may be difficult to follow if you have never worked with Rails before. Previous experience with Turbo Frames is not required.\n\nLet’s get started!\n\n## Setup\nTo begin, we’re going to create a new Rails application, skipping webpacker in favor of the newly released [css](https://github.com/rails/cssbundling-rails) and [jsbundling](https://github.com/rails/jsbundling-rails) gems.\n\nIf you prefer skipping the setup steps, you can clone down the example repo [from Github](https://github.com/DavidColby/player_sorting_frames/tree/main). The `main` branch is pinned to the end of the setup process and ready for you to start building.\n\nThis article is being written using Rails 6.1. When Rails 7 releases, the install command listed below will change. Until then we need to manually add the bundling gems to our Gemfile.\n\nFirst, from your terminal:\n\n```\nrails new player_sort_frames --skip-javascript --skip-webpack-install --skip-turbolinks\ncd player_sort_frames\nbundle add cssbundling-rails jsbundling-rails hotwire-rails faker\nrails g model Team name:string                                                  \nrails g scaffold Player name:string team:references seasons:integer\nrails db:migrate\n```\n\nHere, in addition to the bundling gems, we added [Faker](https://github.com/faker-ruby/faker) to our project to allow us to quickly add seed data to the database and added a `Team` model and `Players` resource to our project.\n\nThe core of our application will be a list of players, we won’t interact with Teams directly so we skip adding a controller and views for Teams.\n\nNext up, we’ll use the new bundling gems to install webpack to handle our JavaScript and [Tailwind](https://tailwindcss.com/) for CSS. From your terminal:\n\n```\nrails javascript:install:webpack\nrails css:install:tailwind\n```\n\nFinally, we’ll wrap up setup by installing Hotwire in our application. Technically, we only need Turbo for this project, but having Stimulus setup won’t hurt anything. One more time, from your terminal:\n\n```\nrails hotwire:install\n```\n\nWith everything installed, you can start up the server and build your assets with `bin/dev` from your terminal.\n\n## Build table layout\nWe’ll begin by updating the players index page to display a nicely styled table of all of the players in the database. Rails’ scaffolding gets us most of the way there, but instead of rendering the players table in `index.html.erb` we’ll move the table to a partial.\n\nThis partial will come in handy later when we use Turbo Frames to sort the list of players.\n\nFirst, update `app/views/players/index.html.erb` like this:\n\n```erb\n<div class="max-w-7xl mx-auto mt-12">\n  <%= render "players", players: @players %>\n</div>\n```\n\nThe index is now rendering a partial (`players`) that hasn\'t been created yet, so we\'ll create that partial next.\n\nFrom your terminal:\n\n```\ntouch app/views/players/_players.html.erb\n```\n\nAnd fill the partial in like this:\n\n```erb\n<div class="shadow overflow-hidden rounded border-b border-gray-200">\n  <table class="min-w-full bg-white">\n    <thead class="bg-gray-800 text-white">\n      <tr>\n        <th id="players-name" class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">\n          <span>Name</span>\n        </th>\n        <th id="players-team" class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">\n          <span>Team</span>\n        </th>\n        <th id="players-seasons" class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">\n          <span>Seasons</span>\n        </th>\n      </tr>\n    </thead>\n\n    <tbody class="text-gray-700">\n      <% players.each do |player| %>\n        <tr>\n          <td class="text-left py-3 px-6"><%= player.name %></td>\n          <td class="text-left py-3 px-6"><%= player.team.name %></td>\n          <td class="text-left py-3 px-6"><%= player.seasons %></td>\n        </tr>\n      <% end %>\n    </tbody>\n  </table>\n</div>\n```\n\nThis partial simply renders a table that contains a header row and then rows for each `player` in the `players` variable. The classes are all built-in Tailwind classes that are not integral to the function of the application.\n\nNow we’ve got a nice looking table ready to display our players, but no players in the database! Let’s fix that by creating enough seed data that we can see sorting in action.\n\nFirst, update `db/seeds.rb`:\n\n```ruby\n[\'Dallas Mavericks\', \'LA Clippers\', \'LA Lakers\', \'San Antonio Spurs\', \'Boston Celtics\', \'Miami Heat\', \'New Orleans Pelicans\'].each do |name|\n  Team.create(name: name)\nend\n\n100.times do\n  Player.create(name: Faker::Name.name, team: Team.find(Team.pluck(:id).sample), seasons: rand(25))\nend\n```\n\nAnd then from your terminal, seed the database:\n\n```\nrails db:seed\n```\n\nIf you haven’t already, boot up the app and build assets with `bin/dev` from your terminal, and then head to [localhost:3000/players](http://localhost:3000/players) and see the list of randomly generated players, ready to sort.\n\n![A screenshot of a data table with columns for name, team, and seasons](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fnl03han3wrgrot3glvl.png)\n\nNow that we’ve got our table populated and displaying, let’s start on the fun stuff by making the table sortable with Turbo Frames.\n\n## Add turbo frame sorting\nAs a reminder, our goal is for users to be able to click on a table header to sort the table by that column. We want sorting to happen without a page turn, and we want to use a Turbo Frame to update the list of players in the UI.\n\nTo start, we’ll convert the wrapper div in the `players` partial to a `turbo_frame_tag` with an id of `players` and the same classes that the wrapper div had. In `app/views/players/_players.html.erb`:\n\n```erb\n<%= turbo_frame_tag "players", class: "shadow overflow-hidden rounded border-b border-gray-200" do %>\n  <table class="min-w-full bg-white">\n  \x3c!-- snip --\x3e\n  </table>\n<% end %>\n```\n\nDon’t forget to replace the closing `</div>` with the `<% end %>` tag!\n\nNow that the `players` turbo frame wraps the content of the table, [links inside of this frame](https://turbo.hotwired.dev/handbook/frames) will automatically attempt to replace the content of the turbo frame with the content they receive from the server.\n\nWe’ll come back to this concept in a minute, but first, let’s build out the remainder of the code we need for the first pass at sorting the table.\n\nNext, inside of the `players` partial still, update the table header like this:\n\n```erb\n<thead class="bg-gray-800 text-white">\n  <tr>\n    <th id="players-name" class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">\n      <%= sort_link(column: "name", label: "Name") %>\n    </th>\n    <th id="players-team" class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">\n      <%= sort_link(column: "teams.name", label: "Team") %>\n    </th>\n    <th id="players-seasons" class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">\n      <%= sort_link(column: "seasons", label: "Seasons") %>\n    </th>\n  </tr>\n</thead>\n```\n\nHere we’ve replaced the static text labeling each column with a call to the `sort_link` helper method, passing in a column and a label for each header cell.\n\nThis helper method doesn’t exist yet, so let’s add that next. In `app/helpers/players_helper.rb`:\n\n```ruby\nmodule PlayersHelper\n  def sort_link(column:, label:)\n    link_to(label, list_players_path(column: column))\n  end\nend\n```\n\n`sort_link` renders a standard Rails `link_to`, using `label` to display the link to the user, and `column` to append a parameter to the generated URL.\n\nThe `link_to` points to `list_players_path`, which we haven’t defined yet. Let’s do that next, in `config/routes.rb`:\n\n```ruby\nresources :players do\n  collection do\n    get \'list\'\n  end \nend\n```\n\nAnd finally, we need to update our controller to define an action for the new `list` route we’ve added.\n\nIn `app/controllers/players_controller.rb`, add a new `list` method, like this:\n\n```ruby\ndef list\n  players = Player.includes(:team).order("#{params[:column]} asc")\n  render(partial: \'players\', locals: { players: players })\nend\n```\n\nHere we’ve defined a new controller action that queries the database for all of the players, includes the teams table in the query, and orders the players using the value of `params[:column]`.\n\nThe `includes(:team)` is necessary both to allow sorting players by their team name and for performance, since the `players` partial makes a call to `player.team.name` to display the players name on each row. \n\nOnce the players are retrieved, the `players` partial is rendered and sent back to the browser.\n\nWith the controller update in place, refresh the page, click on a column header, and, if all has gone well, you should see that the list of players is updated (almost) instantly with the correct column sorting applied.\n\nWhen you sort by a column, you should see output in your server logs like this:\n\n```\nStarted GET "/players/list?column=seasons"\nProcessing by PlayersController#list as HTML\n  Parameters: {"column"=>"seasons"}\n  Player Load (0.5ms)  SELECT "players".* FROM "players" ORDER BY seasons asc\n  ↳ app/views/players/_players.html.erb:18\n  Team Load (0.2ms)  SELECT "teams".* FROM "teams" WHERE "teams"."id" IN (?, ?, ?, ?, ?, ?, ?)  [["id", 3], ["id", 1], ["id", 2], ["id", 6], ["id", 4], ["id", 5], ["id", 7]]\n  ↳ app/views/players/_players.html.erb:18\n  Rendered players/_players.html.erb (Duration: 5.9ms | Allocations: 3994)\nCompleted 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.6ms | Allocations: 4224)\n```\n\nNice work so far, let’s pause here to step back and talk about how this all ties together.\n\nWe started by wrapping the players table in a Turbo Frame with an id of `players`. Then we added a link to each of the header cells, pointing to `players/list`.\n\nBecause the link is wrapped in a turbo frame, when the response is sent back from the server, Turbo scans the response for a turbo frame with the same id (players) and replaces the existing frame content with the new frame content.\n\nIn our case, this means that the updated list of players, rendered by `players/list`, replaces the content of the players table without touching the rest of the page.\n\nThis use of Turbo Frames, to replace the content of a matching frame, is the simplest approach to using Turbo Frames.\n\nIn more advanced cases, we can have a link inside of a frame [break out of a frame](https://turbo.hotwired.dev/handbook/frames#targeting-navigation-into-or-out-of-a-frame), with `target=_top` or use `data-turbo-frame` to tell Turbo that a link from outside of a frame should target that frame.\n\nTurbo Frames enable us to make fast, efficient page updates without adding significant complexity to our code.\n\nNow that we’ve got a little more context for how Turbo Frames are enabling sorting in our application, let’s finish up by adding the ability to sort in both ascending and descending order and inserting a visual indicator when sorting is applied.\n\n## Add descending sorting\nWe want users to be able to sort in descending order by clicking on the same column header twice in a row. The first click will sort in ascending order, the next click will sort in descending order.\n\nHere’s a demonstration of the desired user experience for this section of the article:\n\n![A screen recording of a user clicking on column headers to sort a data table in ascending and descending order](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n6th2gyiv4brmv9wjpzm.gif)\n\nFirst, we’ll modify the `sort_link` helper that we added in the last section to send a direction as well as a column in the `list` request.\n\nIn `app/helpers/players_helper.rb`:\n\n```ruby\ndef sort_link(column:, label:)\n  if column == params[:column]\n    link_to(label, list_players_path(column: column, direction: next_direction))\n  else\n    link_to(label, list_players_path(column: column, direction: \'asc\'))\n  end\nend\n\ndef next_direction\n  params[:direction] == \'asc\' ? \'desc\' : \'asc\'\nend\n```\n\n`sort_link` now adds a second parameter into the `link_to`. The new `direction` parameter is set to the value of the `next_direction` helper method if we are generating the sort link for a column that is being used for sorting; otherwise, `direction` is set to ascending.\n \n `next_direction` simply inverts the current sort direction so the sort direction changes with each click.\n\nNext we’ll update the `list` method in `players_controller.rb`  to use the new `direction` parameter in the `order` clause:\n\n```ruby\ndef list\n  players = Player.includes(:team).order("#{params[:column]} #{params[:direction]}")\n  # snip\nend\n```\n\nWith this change in place, we can now sort our table in either direction. Incredible stuff, nice work making it this far!\n\nOne more set of changes left: Giving users feedback in the UI that sorting is active.\n\n## Add visual indicator of sort direction\nOur final task is to add an indicator next to the column name when that column is being used to sort the table. The indicator will be a small triangle, pointing up when sorting in ascending order and down when sorting in descending order.\n\nWe’ll start by updating the table header in the players partial like this:\n\n```erb\n<thead class="bg-gray-800 text-white">\n  <tr>\n    <th id="players-name" class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer relative">\n      <%= sort_indicator if params[:column] == "name" %>\n      <%= sort_link(column: "name", label: "Name") %>\n    </th>\n    <th id="players-team" class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer relative">\n      <%= sort_indicator if params[:column] == "teams.name" %>\n      <%= sort_link(column: "teams.name", label: "Team") %>\n    </th>\n    <th id="players-seasons" class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer relative">\n      <%= sort_indicator if params[:column] == "seasons" %>\n      <%= sort_link(column: "seasons", label: "Seasons") %>\n    </th>\n  </tr>\n</thead>\n```\n\nHere we’ve added a conditional call to `sort_indicator` into each header cell.\n\nSince we only want to add the indicator when the column is being used to sort the table, we use `if params[:column]` to skip the `sort_indicator` call on inactive columns.\n\nWe also added `relative` to the `<th>` elements class lists because the sort indicator will be absolutely positioned inside of the header cell.\n\nNext up, we’ll define `sort_indicator` in `app/helpers/players_helper.rb`:\n\n```ruby\ndef sort_indicator\n  tag.span(class: "sort sort-#{params[:direction]}")\nend\n```\n\n`sort_indicator` simply returns a span with a class that matches the current sort direction, read from `params[:direction]`\n\nFinally, we’ll add css so our sort indicator isn’t just an invisible span on the page.\n\nFor convenience, we’ll insert the css right into `app/assets/stylesheets/application.css`\n\n```css\n.sort {\n  position: absolute;\n  top: 1rem;\n  left: 0.5rem;\n  width: 0;\n  height: 0;\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n}\n\n.sort-desc {\n  border-top: 8px solid #fff;\n}\n\n.sort-asc {\n  border-bottom: 8px solid #fff;\n}\n```\n\nWith the CSS added and our new `sort_indicator` helper defined, refresh the page, click on the column headers, and see that the table is sorted and a visual indicator is shown for the current column and sort direction:\n\n![A screen recording of a user clicking on column headers on a data table. With each click, the table sorts itself by that column and a triangle indicator appears next to the column used for sorting](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/jxnp8q3t87ligf2qd7nw.gif)\n\nGreat job following along, we\'ve reached the end of the code for today!\n\n## Wrapping up\nToday we learned how to build a sortable table with Rails and Turbo Frames. Our table can be sorted without a page turn, and we built the interface using basic set of tools familiar to any Rails developer.\n\nWhile our table only supports sorting today, our frame-based approach can be enhanced to support filtering and searching without deviating from the core concept of using Turbo Frames to display and update the table.\n\nTurbo Frames, along with the rest of the [Hotwire stack](https://hotwired.dev/), give Rails developers the ability to quickly build fast, modern user experiences without adding the weight and complexity that can come with JavaScript frameworks.\n\nYou\'ll note that I did not compare the approach in this article directly to the approach in yesterday\'s article where we built the same UI with StimulusReflex. Rather than attempting a direct, side-by-side comparison, I prefer presenting both options as standalone projects that show how to build simple experiences using each tool so that readers can learn how each tool works, begin experimenting, and see which feels right.\n\nBoth [StimulusReflex](https://docs.stimulusreflex.com/) and Turbo (Frames and Streams) can deliver world-class user experiences in production applications while providing an unbeatable developer experience. The right choice for you and your team is almost certain to be the option that your team feels most comfortable with and most productive in.\n\nWhichever routet you choose, with the Hotwire stack, StimulusReflex, and CableReady available, Rails is well-positioned for the future.\n\nIf you’re ready to go further with on your Turbo journey, here are a few places to start:\n* Review the Turbo [documentation](https://turbo.hotwired.dev/handbook/introduction)\n* Dive in to the Turbo Rails [source code](https://github.com/hotwired/turbo-rails) on Github\n* Spend time with [Stimulus](https://stimulus.hotwired.dev/handbook/introduction), the other side of the Hotwire stack\n* Learn from the [community](https://discuss.hotwired.dev/) in the Hotwire discussion forum\n* Join the [StimulusReflex discord](https://discord.gg/stimulus-reflex), where folks will happily help you learn more about building reactive web applications with Rails\n\nThat’s all for today. As always, thanks for reading!',a.user={name:"David Colby",username:e,twitter_username:e,github_username:"DavidColby",website_url:"https://colby.so",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--dkssf6E5--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/510445/f91e2161-c944-4001-bcc4-2be8fa3aa689.jpg",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--hGnCh9nu--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/510445/f91e2161-c944-4001-bcc4-2be8fa3aa689.jpg"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:a}},error:s,state:{currentArticle:a},serverRendered:!0,routePath:"/davidcolbyatx/831874",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:s}}}}(null,{},"2021-09-20T13:10:31Z","davidcolbyatx")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
