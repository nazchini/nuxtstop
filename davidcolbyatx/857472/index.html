<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Turbo Frames on Rails</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Turbo Frames on Rails</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/ruby" class="tag" data-v-70afb46a>
          #ruby
        </a><a href="/nuxtstop/t/rails" class="tag" data-v-70afb46a>
          #rails
        </a><a href="/nuxtstop/t/webdev" class="tag" data-v-70afb46a>
          #webdev
        </a><a href="/nuxtstop/t/hotwire" class="tag" data-v-70afb46a>
          #hotwire
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--wrbwbm0P--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ptstg14iotn5rxhp4971.png" alt="Turbo Frames on Rails" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            35
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            3
          </span></div> <time data-v-70afb46a>Oct 9 '21</time></div></header> <div class="content" data-v-70afb46a><p>urbo, part of the Hotwire tripartite, gives you the tools to write dramatically less custom JavaScript than you would otherwise need to build modern, performant web applications.</p>

<p>Turbo is composed of <code>Turbo Drive</code>, <code>Turbo Frames</code>, <code>Turbo Streams</code>, and <code>Turbo Native</code>. Each is a valuable piece of the puzzle but today we’re going to focus on <code>Turbo Frames</code>. </p>

<p>Turbo Frames “<a href="https://turbo.hotwired.dev/handbook/frames">allow predefined parts of a page to be updated on request</a>.” Used wisely, frames allow developers to decompose their UI into independently updated pieces, quickly.</p>

<h2>
  <a name="why-should-i-use-turbo-frames" href="#why-should-i-use-turbo-frames">
  </a>
  Why should I use Turbo Frames?
</h2>

<p>Turbo Frames unlock a huge amount of potential with minimal changes to existing code and they can be gradually introduced to existing projects without necessitating major architectural changes.</p>

<p>In greenfield projects designed with Turbo Frames in mind, a small team of developers can use frames to deliver fast, efficient user interfaces in dramatically less time than would be required when build a SPA-powered front end.</p>

<p>While Turbo Frames can be used with many different tech stacks, Rails developers will find the tight integration of frames into Rails (via the <a href="https://github.com/hotwired/turbo-rails">turbo-rails</a> gem) makes using frames in Rails a breeze.</p>

<h2>
  <a name="the-turbo-documentation-gap" href="#the-turbo-documentation-gap">
  </a>
  The Turbo documentation gap
</h2>

<p>As with many new technologies, one of the barriers to getting started with Turbo Frames is inconsistent/incomplete documentation. Along with problems in the official documentation, much of the tutorial content written about Turbo Frames is already out of date.</p>

<p>Turbo has evolved quickly since its release in December of 2020, and the documentation and supporting tutorials from content creators have struggled to keep pace.</p>

<p>As an example of the documentation gap, <code>turbo-rails</code> doesn’t have any dedicated usage documentation, instead just linking to the base Turbo docs and letting users figure out the rest.</p>

<p>This means that learning to use Turbo Frames in your Rails application today often requires reading the docs, then digging through source code, and then Googling your way through Github issues and forum posts. Turbo Frames can be difficult to approach.</p>

<p>In time the documentation will improve and the community will coalesce around best practices and standards that can be more easily communicated to new users.</p>

<p>In the meantime, here we are.</p>

<h2>
  <a name="what-is-this-article-who-is-it-for" href="#what-is-this-article-who-is-it-for">
  </a>
  What is this article? Who is it for?
</h2>

<p>Today, I’m going to share what I’ve learned over nearly a year building applications with Turbo Frames, from small hobby projects and experiments to multiple large, legacy production applications.</p>

<p>By doing so, I’m hoping to address the gaps in documentation, to save you from spending too much time reading source code, trawling forum posts and Github issues.</p>

<p>I will cover content you can find in the documentation (if you know where to look), gotchas and tricks learned from real world experience and picked up from reading way too much about Turbo and Turbo Frames since Turbo’s initial release. I’ll also share patterns that illuminate some of the common web application needs that frames are perfect for.</p>

<p>This content is geared towards Rails developers interested in using Turbo. The code samples and concepts will be illustrated using Ruby and Rails code and conventions. If you aren’t working in Rails, you should still find plenty of value here, but know that you may not have access to convenience methods like <code>&lt;%= turbo_frame_tag %></code> in your chosen language and framework.</p>

<p>Let’s dive in!</p>

<h2>
  <a name="what-are-turbo-frames" href="#what-are-turbo-frames">
  </a>
  What are Turbo Frames?
</h2>

<p>At a high level, <a href="https://turbo.hotwired.dev/handbook/frames">Turbo Frames</a> are pieces of a webpage that can be updated independently, without impacting the rest of the content on the page.</p>

<p>Links and forms within a frame will, by default, attempt to update only the content of the containing frame, whether the server sends a completely new HTML document or only a page fragment.</p>

<p>Turbo Frames allow developers to decompose a page into pieces of content that can be updated individually as new information is received from a server.</p>

<p>In practice, common use cases for Turbo Frames include:</p>

<ul>
<li>Tabbed content </li>
<li>In-line editing </li>
<li>Searching, sorting, and filtering data</li>
</ul>

<p>Let's start looking at code.</p>

<h2>
  <a name="constructing-a-frame" href="#constructing-a-frame">
  </a>
  Constructing a frame
</h2>

<p>A basic Turbo Frame, rendered with the <a href="https://github.com/hotwired/turbo-rails/blob/main/app/helpers/turbo/frames_helper.rb">built-in helper</a> from Turbo Rails (and using erb), looks like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"some_id"</span> <span class="k">do</span> <span class="cp">%></span>
  <span class="nt">&lt;div></span>
    Some framed content
  <span class="nt">&lt;/div></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The only required argument for <code>turbo_frame_tag</code> is an id. </p>

<p>When the helper is processed, the final HTML is:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"some_id"</span><span class="nt">></span>
  <span class="nt">&lt;div></span>
    Some framed content
  <span class="nt">&lt;/div></span>
<span class="nt">&lt;/turbo-frame></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Instead of providing a static id, we can also pass in an active record object, which the <a href="https://github.com/hotwired/turbo-rails/blob/main/app/helpers/turbo/frames_helper.rb#L27">helper will use</a> to generate a unique id via <code>dom_id(object.id)</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="no">Comment</span><span class="p">.</span><span class="nf">first</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Frames can also receive an <code>src</code> attribute. When <code>src</code> is supplied, the frame will be populated after the initial page load via a separate HTTP request to the frame’s <code>src</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"comments"</span><span class="p">,</span> <span class="ss">src: </span><span class="n">comments_path</span> <span class="k">do</span> <span class="cp">%></span>
  <span class="nt">&lt;div></span>
    Placeholder content
  <span class="nt">&lt;/div></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here, the page will initially load the turbo frame with the placeholder div and then immediately a request to <code>comments_path</code> endpoint is made and the content of the Turbo Frame is replaced with the response from the server, provided our server returns HTML with a matching Turbo Frame tag.</p>

<p>What’s a matching Turbo Frame tag? Let’s look at that next.</p>

<h2>
  <a name="responding-with-frame-content" href="#responding-with-frame-content">
  </a>
  Responding with frame content
</h2>

<p>The power of Turbo Frames is in replacing pieces of the page with content sent from the server — without touching the rest of the DOM.</p>

<p>Updating an existing frame just requires responding to a request with HTML that contains a Turbo Frame element with an id that matches the id of the frame target sent in the request.</p>

<p>Taking the <code>comments</code> example from above, when a request is made to <code>/comments</code>, the server should respond with HTML that contains a frame like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comments"</span><span class="nt">></span>
  <span class="c">&lt;!-- A list of comments, perhaps --></span>
<span class="nt">&lt;/turbo-frame></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The content inside of the matched frame is replaced with the updated content from the server, without touching the rest of the page.</p>

<h2>
  <a name="navigating-within-frames" href="#navigating-within-frames">
  </a>
  Navigating within frames
</h2>

<p>By default, links and forms within a Turbo Frame will perform the navigation within the frame, rather than performing a full page turn.</p>

<p>For a simple example, we can imagine that we have a list of comments on a page and that each comment is wrapped in a Turbo Frame tag, like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%</span> <span class="vi">@comments</span> <span class="k">do</span> <span class="o">|</span><span class="n">comment</span><span class="o">|</span> <span class="cp">%></span>
  <span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="n">comment</span> <span class="k">do</span> <span class="cp">%></span>
    <span class="nt">&lt;div></span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="n">edit_comment_path</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span> <span class="cp">%></span>
    <span class="nt">&lt;/div></span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This ERB results in rendered HTML:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_1"</span><span class="nt">></span>
  <span class="nt">&lt;div></span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/1/edit"</span><span class="nt">></span>Comment 1<span class="nt">&lt;/a></span>
  <span class="nt">&lt;/div></span>
<span class="nt">&lt;/turbo-frame></span>
<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_2"</span><span class="nt">></span>
  <span class="nt">&lt;div></span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/2/edit"</span><span class="nt">></span>Comment 2<span class="nt">&lt;/a></span>
  <span class="nt">&lt;/div></span>
<span class="nt">&lt;/turbo-frame></span>
<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_3"</span><span class="nt">></span>
  <span class="nt">&lt;div></span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/3/edit"</span><span class="nt">></span>Comment 3<span class="nt">&lt;/a></span>
  <span class="nt">&lt;/div></span>
<span class="nt">&lt;/turbo-frame></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>With this Turbo-powered HTML in place, clicks on the edit links will make a Turbo Frame request to <code>/comments/:id/edit</code>, retrieve some HTML, and return that HTML to the browser.</p>

<p>The Turbo Frame request is a normal HTML request with an additional <code>Turbo-Frame</code> header included in the request, with a value that matches the id of the target Turbo Frame.</p>

<p>In <code>turbo-rails</code>, the presence of this header can be used to <a href="https://github.com/hotwired/turbo-rails/blob/main/app/controllers/turbo/frames/frame_request.rb#L21">identify a Turbo Frame request</a> and respond with appropriate content, like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="c1"># This approach gets messy in controller actions. Read further on for a variant based approach that scales much more cleanly</span>
<span class="k">if</span> <span class="n">turbo_frame_request?</span>
  <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"some_turbo_frame_partial"</span>
<span class="k">else</span>
  <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"some_other_partial"</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>When <code>turbo-rails</code> responds to a Turbo Frame request, it <a href="https://github.com/hotwired/turbo-rails/blob/main/app/controllers/turbo/frames/frame_request.rb#L16">automatically removes</a> the layout from the HTML response. Since Turbo will discard all of the HTML but the requested frame, Rails skips rendering content that it knows won't be used.</p>

<p>When a response to a Turbo Frame request is received, <a href="https://turbo.hotwired.dev/reference/drive">Turbo Drive</a> replaces the content of the target frame, leaving the rest of the page untouched.</p>

<p>Continuing with the above comments example, the edit view may look something like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="vi">@comment</span> <span class="k">do</span> <span class="cp">%></span>
  <span class="cp">&lt;%=</span> <span class="n">form_with</span><span class="p">(</span><span class="ss">model: </span><span class="vi">@comment</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%></span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inline-field"</span><span class="nt">></span>
      <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span> <span class="cp">%></span>
      <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:body</span> <span class="cp">%></span>
    <span class="nt">&lt;/div></span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"actions"</span><span class="nt">></span>
      <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%></span>
    <span class="nt">&lt;/div></span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>After clicking to edit a comment then, the updated HTML after Turbo processes the response would look something like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="c">&lt;!-- Form content rendered from /edit --></span>
<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comments_1"</span> <span class="na">src=</span><span class="s">"http://localhost:3000/comments/1/edit"</span><span class="nt">></span>
  <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/comments/1"</span> <span class="na">accept-charset=</span><span class="s">"UTF-8"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">></span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"_method"</span> <span class="na">value=</span><span class="s">"patch"</span><span class="nt">></span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"authenticity_token"</span> <span class="na">value=</span><span class="s">"some_token"</span><span class="nt">></span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inline-field"</span><span class="nt">></span>
      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"comment_body"</span><span class="nt">></span>Body<span class="nt">&lt;/label></span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"Comment 1"</span> <span class="na">name=</span><span class="s">"comment[body]"</span> <span class="na">id=</span><span class="s">"comment_body"</span><span class="nt">></span>
    <span class="nt">&lt;/div></span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"actions"</span><span class="nt">></span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">name=</span><span class="s">"commit"</span> <span class="na">value=</span><span class="s">"Update Comment"</span><span class="nt">></span>
    <span class="nt">&lt;/div></span>
  <span class="nt">&lt;/form></span>
<span class="nt">&lt;/turbo-frame></span>
<span class="c">&lt;!-- The other frames, untouched by the /edit request --></span>
<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_2"</span><span class="nt">></span>
  <span class="nt">&lt;div></span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/2/edit"</span><span class="nt">></span>Comment 2<span class="nt">&lt;/a></span>
  <span class="nt">&lt;/div></span>
<span class="nt">&lt;/turbo-frame></span>
<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_3"</span><span class="nt">></span>
  <span class="nt">&lt;div></span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/3/edit"</span><span class="nt">></span>Comment 3<span class="nt">&lt;/a></span>
  <span class="nt">&lt;/div></span>
<span class="nt">&lt;/turbo-frame></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Finishing up this example, what happens when the user submits the comment form?</p>

<p>After submit in a normal Rails action, we might redirect the user to the comment show page. When the request occurs within a Turbo Frame, a “redirect” still occurs, but rather than redirecting the page in the browser, the redirect is followed, the new HTML content is sent from the server, and that HTML is used to update the frame.</p>

<p>In our example, the <code>comment#update</code> controller action might look like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">update</span>
  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="k">if</span> <span class="vi">@comment</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">comment_params</span><span class="p">)</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@comment</span> <span class="p">}</span>
    <span class="k">else</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>And the show view:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="vi">@comment</span> <span class="k">do</span> <span class="cp">%></span>
  <span class="nt">&lt;div></span>
    <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="vi">@comment</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="n">edit_comment_path</span><span class="p">(</span><span class="vi">@comment</span><span class="p">)</span> <span class="cp">%></span>
  <span class="nt">&lt;/div></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This behavior allows us to build Turbo Frame-powered interfaces while making very few or no changes to a standard Rails controller, making it possible to prototype in Rails very quickly.</p>

<p>With just what we’ve learned so far, we’re already in position to start building simple interfaces with Turbo Frames that allow us to add significant amounts of interactivity to our application with very few changes to the Ruby and HTML we’d have in any Rails app.</p>

<p>Let’s keep exploring, there’s plenty more to see.</p>

<h3>
  <a name="breaking-out-of-a-frame" href="#breaking-out-of-a-frame">
  </a>
  Breaking out of a frame
</h3>

<p>While navigating within a frame is very handy, sometimes, a form or link within a frame needs to break out of the frame and perform a normal page turn.</p>

<p>To add that behavior to a navigation element within a frame, simply add <code>data-turbo-frame="_top"</code> to the element, like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="n">edit_comment_path</span><span class="p">(</span><span class="n">comment</span><span class="p">),</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">turbo_frame: </span><span class="s2">"_top"</span> <span class="p">}</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h3>
  <a name="targeting-a-frame-from-the-outside" href="#targeting-a-frame-from-the-outside">
  </a>
  Targeting a frame from the outside
</h3>

<p>Eventually, you’ll find yourself needing to update the content of a frame using a link that isn’t wrapped in your target frame. This often comes up when building tabbed content; the navigation menu will be placed outside of the Turbo Frame that contains the actual content.</p>

<p>To handle situations like this, we can use the same <code>turbo-frame</code> data attribute to tell Turbo that the navigation should occur in a specific turbo frame.</p>

<p>Using our tabbed content example, we may have a page layout like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;ul></span>
  <span class="nt">&lt;li></span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"user/1/profile"</span> <span class="na">data-turbo-frame=</span><span class="s">"main"</span><span class="nt">></span>
      Profile
    <span class="nt">&lt;/a></span>
  <span class="nt">&lt;/li></span>
  <span class="nt">&lt;li></span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"user/1/favorites"</span> <span class="na">data-turbo-frame=</span><span class="s">"main"</span><span class="nt">></span>
      Favorites
    <span class="nt">&lt;/a></span>
  <span class="nt">&lt;/li></span>
<span class="nt">&lt;/ul></span>
<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"main"</span><span class="nt">>&lt;/turbo-frame></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Clicks on either of the <code>user</code> links will generate a request with a <code>Turbo-Frame: main</code> header and the response will update the content of the <code>main</code> turbo frame, even though the links are not wrapped within the frame.</p>

<h2>
  <a name="lazy-loading-frames" href="#lazy-loading-frames">
  </a>
  Lazy loading Frames
</h2>

<p>The <code>src</code> attribute on a frame can be combined with <code>loading=lazy</code> to mark a frame as lazy-loaded. Lazy-loaded frames will not fetch their content from the server until they’re visible on the page.</p>

<p>Lazy loading is especially helpful for modals, popovers, and other non-critical, below-the-fold content.</p>

<p>Lazy loaded frames can be combined with a spinner or other loading indicator, like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"lazy_frame"</span><span class="p">,</span> <span class="ss">src: </span><span class="n">comments_path</span><span class="p">,</span> <span class="ss">loading: </span><span class="s2">"lazy"</span> <span class="k">do</span> <span class="cp">%></span>
  <span class="nt">&lt;div></span>I'm a loading spinner<span class="nt">&lt;/div></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Note that <code>loading="lazy"</code> must be combined with a <code>src</code> attribute, otherwise lazy loading does nothing</p>

<h2>
  <a name="frame-events" href="#frame-events">
  </a>
  Frame events
</h2>

<p>Turbo comes packed with <a href="https://turbo.hotwired.dev/reference/events">lifecycle events</a>, including two frame specific events:</p>

<ul>
<li>turbo:frame-render</li>
<li>turbo:frame-load</li>
</ul>

<p>These events (added in <a href="https://github.com/hotwired/turbo/releases/tag/v7.0.0-rc.2">Turbo 7.0.0-rc2</a>) fire each time a frame is loaded or reloaded. Developers can use these events to attach behavior to an element within a frame or animate the entry of a frame element, and they pair nicely with <a href="https://stimulus.hotwired.dev/">Stimulus</a>.</p>

<p>In addition to these built in events, a useful complement to the emitted events is the <code>busy</code> attribute. The <a href="https://github.com/hotwired/turbo/blob/main/src/core/frames/frame_controller.ts#L172">busy attribute</a> is automatically applied to a frame when a request for the frame’s content begins and is removed when the request finishes.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">// From Turbo's source code: turbo/src/core/frames/frame_controller.ts</span>
<span class="nx">requestStarted</span><span class="p">(</span><span class="nx">request</span><span class="p">:</span> <span class="nx">FetchRequest</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">busy</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">requestFinished</span><span class="p">(</span><span class="nx">request</span><span class="p">:</span> <span class="nx">FetchRequest</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">busy</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This attribute can be useful for adding loading indicators to long running requests and otherwise tracking the state of frames between the beginning of a frame request and the <code>turbo:frame-render</code> and <code>turbo:frame-load</code> events firing.</p>

<h2>
  <a name="refreshing-frames" href="#refreshing-frames">
  </a>
  Refreshing Frames
</h2>

<p>Sometimes, users need the ability to refresh the contents of a frame without refreshing the entire page.</p>

<p>In ideal circumstances, a <a href="https://github.com/hotwired/turbo-rails/blob/main/app/models/concerns/turbo/broadcastable.rb">Turbo Stream broadcast</a> automatically updates the contents of the frame without needing a manual refresh, we don't always get to work in ideal circumstances.</p>

<p>In earlier versions of Turbo, refreshing a frame required <a href="https://github.com/hotwired/turbo/issues/269">workarounds</a> like appending a timestamp to the <code>src</code> attribute. Today, those workarounds are no longer necessary and Turbo will happily update a frame any number of times with an indentical <code>src</code> on each request.</p>

<p>We can build a refreshable frame like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="c">&lt;%# app/views/games/show.html.erb %></span>
<span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="vi">@game</span> <span class="k">do</span> <span class="cp">%></span>
  <span class="nt">&lt;div></span><span class="cp">&lt;%=</span> <span class="vi">@game</span><span class="p">.</span><span class="nf">home_score</span> <span class="cp">%></span><span class="nt">&lt;/div></span>
  <span class="nt">&lt;div></span><span class="cp">&lt;%=</span> <span class="vi">@game</span><span class="p">.</span><span class="nf">away_score</span> <span class="cp">%></span><span class="nt">&lt;/div></span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Update score"</span><span class="p">,</span> <span class="n">game_path</span><span class="p">(</span><span class="vi">@game</span><span class="p">)</span> <span class="cp">%></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here, the first time a user clicks the update link, the <code>turbo-frame</code> will be updated with an <code>src</code> like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"game_10"</span> <span class="na">reloadable=</span><span class="s">""</span> <span class="na">src=</span><span class="s">"http://localhost:3000/games/10"</span><span class="nt">></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Additional clicks on the update link will fetch updated scores from the server and reload the content of the frame.</p>

<p>Note that a <a href="https://github.com/hotwired/turbo/pull/487">currently open PR</a> (as of the time this article was last updated, December 2021) proposes an alternative implementation of reloadable frames that will prevent the <code>reloadable</code> attribute from being exposed while keeping the behavior intact. In future versions of Turbo the <code>reloadable</code> attribute may not longer exist or be neccessary.</p>

<h2>
  <a name="conditional-template-rendering-using-variants" href="#conditional-template-rendering-using-variants">
  </a>
  Conditional template rendering using variants
</h2>

<p>As you use Turbo Frames in Rails, you’ll eventually run into the desire to have a single controller action respond to both Turbo Frame requests and regular, full-page requests.</p>

<p>A common example of this is rendering a <code>/new</code> page as both a standalone page and as frame content inside of a modal. You could implement a conditional in your controller action to check for the Turbo Frame header, but that quickly starts to clutter up your controllers.</p>

<p>An alternative approach is to use <a href="https://guides.rubyonrails.org/layouts_and_rendering.html#the-variants-option">variants</a> to render different content based on the inbound request headers, to keep your controllers cleaner.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">before_action</span> <span class="ss">:turbo_frame_request_variant</span>
  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">turbo_frame_request_variant</span>
    <span class="n">request</span><span class="p">.</span><span class="nf">variant</span> <span class="o">=</span> <span class="ss">:turbo_frame</span> <span class="k">if</span> <span class="n">turbo_frame_request?</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This approach adds a before_action to the <code>ApplicationController</code> that checks if the inbound request is a Turbo Frame request using the <code>turbo_frame_request?</code> method <a href="https://github.com/hotwired/turbo-rails/blob/main/app/controllers/turbo/frames/frame_request.rb#L21">provided by turbo-rails</a>. When the request is a turbo frame, Rails will look for a Turbo Frame variant (<code>new.html+turbo_frame.erb</code>, for example) and render that variant when it exists. Otherwise, the default <code>html.erb</code> view will be used</p>

<p>This approach was originally described <a href="https://github.com/hotwired/turbo/issues/378#issuecomment-914615544">here</a>. While there was a <a href="https://github.com/hotwired/turbo-rails/pull/250">proposal</a> to add this variant-based approach to turbo-rails, those proposals were rejected. The guidance from the maintainers is that the <code>turbo_frame_request?</code> to detect Turbo Frame requests is the only support that will be added because <a href="https://github.com/hotwired/turbo-rails/pull/250#issuecomment-942079485">"If you're branching all your responses for frames vs not, something isn't right, and we should investigate those pressures in a different way."</a>.</p>

<p>In my experience, judicious use of variants to serve different content for Frame requests is sometimes the simplest and cleanest path to achieve a desired outcome but YMMV.</p>

<h2>
  <a name="limitations-amp-gotchas" href="#limitations-amp-gotchas">
  </a>
  Limitations & Gotchas
</h2>

<h3>
  <a name="turbo-frames-and-page-layouts" href="#turbo-frames-and-page-layouts">
  </a>
  Turbo Frames and page layouts
</h3>

<p>Turbo Frames in the DOM are implemented as custom HTML elements (the <code>&lt;turbo-frame></code> tag we've seen in this article). We can add classes to them (<code>&lt;%= turbo_frame_tag post, class: "classes" %></code>) and style them; however, because they exist in the DOM and need to wrap their content to be useful, inserting them into existing layouts can cause issues without some planning.</p>

<p>In particular, you can’t place a frame inside of a table row. While there are <a href="https://github.com/hotwired/turbo/issues/48#issuecomment-882575388">workarounds</a> for this, it is worth knowing that tables and Turbo Frames don’t play well together out of the box.</p>

<p>In addition to table issues, you may sometimes run into layout issues with flex box and grid layouts when frames are the direct descendant of the container element. You'll sometimes find that your nicely spaced three element flex layout now breaks because all three elements need to be wrapped in a single <code>&lt;turbo-frame></code> tag.</p>

<p>A route worth exploring in these situations is adding  <code>display: contents</code>  to the <code>&lt;turbo-frame></code> element, as mentioned <a href="https://github.com/hotwired/turbo/issues/48#issuecomment-925760725">here</a>.</p>

<h3>
  <a name="responding-to-a-turbo-frame-request-without-a-matching-turbo-frame" href="#responding-to-a-turbo-frame-request-without-a-matching-turbo-frame">
  </a>
  Responding to a Turbo Frame request without a matching Turbo Frame
</h3>

<p>As you build applications with Turbo Frames, you will inevitably run into an issue in development where you click a link within a frame and all of the content within the frame disappears. You’ll check the Rails logs and see the view you expected was rendered without errors.</p>

<p>Why did everything disappear?</p>

<p>The first thing to do when this happens is to check the JavaScript console for errors. Turbo’s JavaScript expects that the HTML response to a Turbo Frame request will contain a matching Turbo Frame element. If no match is found, Turbo will empty the frame of all content and raise an error like this in the JavaScript console:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>Response has no matching &lt;turbo-frame id="target_id"> element
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This can be a little confusing at first, since the content renders fine from the server but once you get used to Turbo processing the rendered HTML and updating the DOM, you’ll be able to quickly debug missing frame element errors like this one.</p>

<p>When in doubt, check for JavaScript errors.</p>

<h3>
  <a name="updating-page-url-when-navigating-within-frame" href="#updating-page-url-when-navigating-within-frame">
  </a>
  Updating page URL when navigating within frame
</h3>

<p>When a user clicks on a link within a frame, the URL of the page won’t change. This makes sense most of the time — the user hasn’t navigated to a new page, they’ve simply updated some of the content on the existing page. </p>

<p>One use case where the URL not changing can be problematic is when the user is applying sorting and filtering options by clicking links within a frame. Imagine a table layout with links to sort the table by each column, for example.</p>

<p>In those cases, a developer may wish to update the URL of the page to reflect the currently applied filters so that the user can copy/paste the URL to share a specific view of the table.</p>

<p>As of <a href="https://github.com/hotwired/turbo/releases/tag/v7.1.0">Turbo's 7.1 release</a>, developers can now update the page URL from a frame navigation by adding a <code>turbo-action</code> data attribute to the form or link that triggers the frame navigation. Options for <code>turbo-action</code> are <code>replace</code>, to replace the current URL in the browser's history, or <code>advance</code>, to push a new entry in the history. When building search forms, you'll likely want to use <code>advance</code> to update the page URL with each new search. In Rails, using a standard <code>form_with</code> search form, your code to push frame navigation into the browser's history might look like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">url: </span><span class="n">customers_path</span><span class="p">,</span> <span class="ss">method: :get</span><span class="p">,</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">turbo_frame: </span><span class="s2">"customers"</span><span class="p">,</span> <span class="ss">turbo_action: </span><span class="s2">"advance"</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%></span>
  <span class="c">&lt;%# Some form content goes here %></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h2>
  <a name="wrapping-up" href="#wrapping-up">
  </a>
  Wrapping up
</h2>

<p>Today we looked in detail at the current state of Turbo Frames — what they are, how to use them in Rails, and the some of the ways frames can help you build modern, efficient applications.</p>

<p>Turbo Frames in Rails applications naturally pair very well with Stimulus and work exceptionally well when paired with Turbo Streams to manage broadcasted updates and more targeted content updates.</p>

<p>With Hotwire coming <a href="https://world.hey.com/dhh/rails-7-will-have-three-great-answers-to-javascript-in-2021-8d68191b">by default</a> to new Rails 7 applications, I'm happy to report that after a year of use, building Ruby on Rails applications with the Hotwire stack is simple, straightforward, and adds very little overhead to your development experience. For mnay Rails applications, all of the reactivity you need can be achieved with the Hotwire stack, and Turbo Frames will play a key role in many applications in the years to come.</p>

<p>While you begin to experiment, keep in mind that Turbo is still in very active development. Throughout this article, I linked to open PRs that will improve Turbo Frames and make some of the techniques described in this article simpler to implement — as time goes on, expect Turbo and Turbo Frames to continue to improve and for <code>turbo-rails</code> to continue to add functionality to help Rails developers use frames effectively in their applications.</p>

<p>Ready to go deeper? (Some shameless self-promotion ahead, sorry!)</p>

<ul>
<li>I wrote about <a href="https://www.colby.so/posts/handling-modal-forms-with-rails-and-hotwire">using the Hotwire stack</a> to build server rendered modal forms in Rails</li>
<li>Build a <a href="https://thoughtbot.com/blog/hotwire-typeahead-searching">typeahead search interface</a> with Turbo Frames</li>
<li>Use a Turbo Stream + Turbo Frame combo to <a href="https://www.colby.so/posts/conditional-rendering-with-turbo-stream-broadcasts">render different content</a> to different users from a single stream broadcast</li>
<li>Read my <a href="https://www.colby.so/posts/turbo-streams-on-rails">exploration</a> of Turbo Streams</li>
<li>
<a href="https://landing.mailerlite.com/webforms/landing/d7z0n0">Sign up for</a> my monthly newsletter to stay up to date on modern Ruby on Rails development</li>
</ul>

<p>That’s all for today. As always, thanks for reading!</p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/davidcolbyatx/turbo-frames-on-rails-5f4i" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(e,n,a,t){return a.type_of="article",a.id=857472,a.title="Turbo Frames on Rails",a.description="urbo, part of the Hotwire tripartite, gives you the tools to write dramatically less custom...",a.readable_publish_date="Oct 9 '21",a.slug="turbo-frames-on-rails-5f4i",a.path="/davidcolbyatx/turbo-frames-on-rails-5f4i",a.url="https://dev.to/davidcolbyatx/turbo-frames-on-rails-5f4i",a.comments_count=3,a.public_reactions_count=35,a.collection_id=e,a.published_timestamp=n,a.positive_reactions_count=35,a.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--wrbwbm0P--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ptstg14iotn5rxhp4971.png",a.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--wGyzQkGA--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ptstg14iotn5rxhp4971.png",a.canonical_url="https://www.colby.so/posts/turbo-frames-on-rails",a.created_at=n,a.edited_at="2021-12-03T20:31:31Z",a.crossposted_at=e,a.published_at=n,a.last_comment_at="2021-10-12T14:19:02Z",a.reading_time_minutes=15,a.tag_list="ruby, rails, webdev, hotwire",a.tags=["ruby","rails","webdev","hotwire"],a.body_html='<p>urbo, part of the Hotwire tripartite, gives you the tools to write dramatically less custom JavaScript than you would otherwise need to build modern, performant web applications.</p>\n\n<p>Turbo is composed of <code>Turbo Drive</code>, <code>Turbo Frames</code>, <code>Turbo Streams</code>, and <code>Turbo Native</code>. Each is a valuable piece of the puzzle but today we’re going to focus on <code>Turbo Frames</code>. </p>\n\n<p>Turbo Frames “<a href="https://turbo.hotwired.dev/handbook/frames">allow predefined parts of a page to be updated on request</a>.” Used wisely, frames allow developers to decompose their UI into independently updated pieces, quickly.</p>\n\n<h2>\n  <a name="why-should-i-use-turbo-frames" href="#why-should-i-use-turbo-frames">\n  </a>\n  Why should I use Turbo Frames?\n</h2>\n\n<p>Turbo Frames unlock a huge amount of potential with minimal changes to existing code and they can be gradually introduced to existing projects without necessitating major architectural changes.</p>\n\n<p>In greenfield projects designed with Turbo Frames in mind, a small team of developers can use frames to deliver fast, efficient user interfaces in dramatically less time than would be required when build a SPA-powered front end.</p>\n\n<p>While Turbo Frames can be used with many different tech stacks, Rails developers will find the tight integration of frames into Rails (via the <a href="https://github.com/hotwired/turbo-rails">turbo-rails</a> gem) makes using frames in Rails a breeze.</p>\n\n<h2>\n  <a name="the-turbo-documentation-gap" href="#the-turbo-documentation-gap">\n  </a>\n  The Turbo documentation gap\n</h2>\n\n<p>As with many new technologies, one of the barriers to getting started with Turbo Frames is inconsistent/incomplete documentation. Along with problems in the official documentation, much of the tutorial content written about Turbo Frames is already out of date.</p>\n\n<p>Turbo has evolved quickly since its release in December of 2020, and the documentation and supporting tutorials from content creators have struggled to keep pace.</p>\n\n<p>As an example of the documentation gap, <code>turbo-rails</code> doesn’t have any dedicated usage documentation, instead just linking to the base Turbo docs and letting users figure out the rest.</p>\n\n<p>This means that learning to use Turbo Frames in your Rails application today often requires reading the docs, then digging through source code, and then Googling your way through Github issues and forum posts. Turbo Frames can be difficult to approach.</p>\n\n<p>In time the documentation will improve and the community will coalesce around best practices and standards that can be more easily communicated to new users.</p>\n\n<p>In the meantime, here we are.</p>\n\n<h2>\n  <a name="what-is-this-article-who-is-it-for" href="#what-is-this-article-who-is-it-for">\n  </a>\n  What is this article? Who is it for?\n</h2>\n\n<p>Today, I’m going to share what I’ve learned over nearly a year building applications with Turbo Frames, from small hobby projects and experiments to multiple large, legacy production applications.</p>\n\n<p>By doing so, I’m hoping to address the gaps in documentation, to save you from spending too much time reading source code, trawling forum posts and Github issues.</p>\n\n<p>I will cover content you can find in the documentation (if you know where to look), gotchas and tricks learned from real world experience and picked up from reading way too much about Turbo and Turbo Frames since Turbo’s initial release. I’ll also share patterns that illuminate some of the common web application needs that frames are perfect for.</p>\n\n<p>This content is geared towards Rails developers interested in using Turbo. The code samples and concepts will be illustrated using Ruby and Rails code and conventions. If you aren’t working in Rails, you should still find plenty of value here, but know that you may not have access to convenience methods like <code>&lt;%= turbo_frame_tag %&gt;</code> in your chosen language and framework.</p>\n\n<p>Let’s dive in!</p>\n\n<h2>\n  <a name="what-are-turbo-frames" href="#what-are-turbo-frames">\n  </a>\n  What are Turbo Frames?\n</h2>\n\n<p>At a high level, <a href="https://turbo.hotwired.dev/handbook/frames">Turbo Frames</a> are pieces of a webpage that can be updated independently, without impacting the rest of the content on the page.</p>\n\n<p>Links and forms within a frame will, by default, attempt to update only the content of the containing frame, whether the server sends a completely new HTML document or only a page fragment.</p>\n\n<p>Turbo Frames allow developers to decompose a page into pieces of content that can be updated individually as new information is received from a server.</p>\n\n<p>In practice, common use cases for Turbo Frames include:</p>\n\n<ul>\n<li>Tabbed content </li>\n<li>In-line editing </li>\n<li>Searching, sorting, and filtering data</li>\n</ul>\n\n<p>Let\'s start looking at code.</p>\n\n<h2>\n  <a name="constructing-a-frame" href="#constructing-a-frame">\n  </a>\n  Constructing a frame\n</h2>\n\n<p>A basic Turbo Frame, rendered with the <a href="https://github.com/hotwired/turbo-rails/blob/main/app/helpers/turbo/frames_helper.rb">built-in helper</a> from Turbo Rails (and using erb), looks like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"some_id"</span> <span class="k">do</span> <span class="cp">%&gt;</span>\n  <span class="nt">&lt;div&gt;</span>\n    Some framed content\n  <span class="nt">&lt;/div&gt;</span>\n<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The only required argument for <code>turbo_frame_tag</code> is an id. </p>\n\n<p>When the helper is processed, the final HTML is:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight html"><code><span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"some_id"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;div&gt;</span>\n    Some framed content\n  <span class="nt">&lt;/div&gt;</span>\n<span class="nt">&lt;/turbo-frame&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Instead of providing a static id, we can also pass in an active record object, which the <a href="https://github.com/hotwired/turbo-rails/blob/main/app/helpers/turbo/frames_helper.rb#L27">helper will use</a> to generate a unique id via <code>dom_id(object.id)</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="no">Comment</span><span class="p">.</span><span class="nf">first</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Frames can also receive an <code>src</code> attribute. When <code>src</code> is supplied, the frame will be populated after the initial page load via a separate HTTP request to the frame’s <code>src</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"comments"</span><span class="p">,</span> <span class="ss">src: </span><span class="n">comments_path</span> <span class="k">do</span> <span class="cp">%&gt;</span>\n  <span class="nt">&lt;div&gt;</span>\n    Placeholder content\n  <span class="nt">&lt;/div&gt;</span>\n<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Here, the page will initially load the turbo frame with the placeholder div and then immediately a request to <code>comments_path</code> endpoint is made and the content of the Turbo Frame is replaced with the response from the server, provided our server returns HTML with a matching Turbo Frame tag.</p>\n\n<p>What’s a matching Turbo Frame tag? Let’s look at that next.</p>\n\n<h2>\n  <a name="responding-with-frame-content" href="#responding-with-frame-content">\n  </a>\n  Responding with frame content\n</h2>\n\n<p>The power of Turbo Frames is in replacing pieces of the page with content sent from the server — without touching the rest of the DOM.</p>\n\n<p>Updating an existing frame just requires responding to a request with HTML that contains a Turbo Frame element with an id that matches the id of the frame target sent in the request.</p>\n\n<p>Taking the <code>comments</code> example from above, when a request is made to <code>/comments</code>, the server should respond with HTML that contains a frame like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight html"><code><span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comments"</span><span class="nt">&gt;</span>\n  <span class="c">&lt;!-- A list of comments, perhaps --&gt;</span>\n<span class="nt">&lt;/turbo-frame&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The content inside of the matched frame is replaced with the updated content from the server, without touching the rest of the page.</p>\n\n<h2>\n  <a name="navigating-within-frames" href="#navigating-within-frames">\n  </a>\n  Navigating within frames\n</h2>\n\n<p>By default, links and forms within a Turbo Frame will perform the navigation within the frame, rather than performing a full page turn.</p>\n\n<p>For a simple example, we can imagine that we have a list of comments on a page and that each comment is wrapped in a Turbo Frame tag, like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%</span> <span class="vi">@comments</span> <span class="k">do</span> <span class="o">|</span><span class="n">comment</span><span class="o">|</span> <span class="cp">%&gt;</span>\n  <span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="n">comment</span> <span class="k">do</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;div&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="n">edit_comment_path</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/div&gt;</span>\n  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This ERB results in rendered HTML:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight html"><code><span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_1"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;div&gt;</span>\n    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/1/edit"</span><span class="nt">&gt;</span>Comment 1<span class="nt">&lt;/a&gt;</span>\n  <span class="nt">&lt;/div&gt;</span>\n<span class="nt">&lt;/turbo-frame&gt;</span>\n<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_2"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;div&gt;</span>\n    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/2/edit"</span><span class="nt">&gt;</span>Comment 2<span class="nt">&lt;/a&gt;</span>\n  <span class="nt">&lt;/div&gt;</span>\n<span class="nt">&lt;/turbo-frame&gt;</span>\n<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_3"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;div&gt;</span>\n    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/3/edit"</span><span class="nt">&gt;</span>Comment 3<span class="nt">&lt;/a&gt;</span>\n  <span class="nt">&lt;/div&gt;</span>\n<span class="nt">&lt;/turbo-frame&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>With this Turbo-powered HTML in place, clicks on the edit links will make a Turbo Frame request to <code>/comments/:id/edit</code>, retrieve some HTML, and return that HTML to the browser.</p>\n\n<p>The Turbo Frame request is a normal HTML request with an additional <code>Turbo-Frame</code> header included in the request, with a value that matches the id of the target Turbo Frame.</p>\n\n<p>In <code>turbo-rails</code>, the presence of this header can be used to <a href="https://github.com/hotwired/turbo-rails/blob/main/app/controllers/turbo/frames/frame_request.rb#L21">identify a Turbo Frame request</a> and respond with appropriate content, like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="c1"># This approach gets messy in controller actions. Read further on for a variant based approach that scales much more cleanly</span>\n<span class="k">if</span> <span class="n">turbo_frame_request?</span>\n  <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"some_turbo_frame_partial"</span>\n<span class="k">else</span>\n  <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"some_other_partial"</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>When <code>turbo-rails</code> responds to a Turbo Frame request, it <a href="https://github.com/hotwired/turbo-rails/blob/main/app/controllers/turbo/frames/frame_request.rb#L16">automatically removes</a> the layout from the HTML response. Since Turbo will discard all of the HTML but the requested frame, Rails skips rendering content that it knows won\'t be used.</p>\n\n<p>When a response to a Turbo Frame request is received, <a href="https://turbo.hotwired.dev/reference/drive">Turbo Drive</a> replaces the content of the target frame, leaving the rest of the page untouched.</p>\n\n<p>Continuing with the above comments example, the edit view may look something like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="vi">@comment</span> <span class="k">do</span> <span class="cp">%&gt;</span>\n  <span class="cp">&lt;%=</span> <span class="n">form_with</span><span class="p">(</span><span class="ss">model: </span><span class="vi">@comment</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inline-field"</span><span class="nt">&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/div&gt;</span>\n    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"actions"</span><span class="nt">&gt;</span>\n      <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>\n    <span class="nt">&lt;/div&gt;</span>\n  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>After clicking to edit a comment then, the updated HTML after Turbo processes the response would look something like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight html"><code><span class="c">&lt;!-- Form content rendered from /edit --&gt;</span>\n<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comments_1"</span> <span class="na">src=</span><span class="s">"http://localhost:3000/comments/1/edit"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/comments/1"</span> <span class="na">accept-charset=</span><span class="s">"UTF-8"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>\n    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"_method"</span> <span class="na">value=</span><span class="s">"patch"</span><span class="nt">&gt;</span>\n    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"authenticity_token"</span> <span class="na">value=</span><span class="s">"some_token"</span><span class="nt">&gt;</span>\n    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inline-field"</span><span class="nt">&gt;</span>\n      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"comment_body"</span><span class="nt">&gt;</span>Body<span class="nt">&lt;/label&gt;</span>\n      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"Comment 1"</span> <span class="na">name=</span><span class="s">"comment[body]"</span> <span class="na">id=</span><span class="s">"comment_body"</span><span class="nt">&gt;</span>\n    <span class="nt">&lt;/div&gt;</span>\n    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"actions"</span><span class="nt">&gt;</span>\n      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">name=</span><span class="s">"commit"</span> <span class="na">value=</span><span class="s">"Update Comment"</span><span class="nt">&gt;</span>\n    <span class="nt">&lt;/div&gt;</span>\n  <span class="nt">&lt;/form&gt;</span>\n<span class="nt">&lt;/turbo-frame&gt;</span>\n<span class="c">&lt;!-- The other frames, untouched by the /edit request --&gt;</span>\n<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_2"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;div&gt;</span>\n    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/2/edit"</span><span class="nt">&gt;</span>Comment 2<span class="nt">&lt;/a&gt;</span>\n  <span class="nt">&lt;/div&gt;</span>\n<span class="nt">&lt;/turbo-frame&gt;</span>\n<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"comment_3"</span><span class="nt">&gt;</span>\n  <span class="nt">&lt;div&gt;</span>\n    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/comments/3/edit"</span><span class="nt">&gt;</span>Comment 3<span class="nt">&lt;/a&gt;</span>\n  <span class="nt">&lt;/div&gt;</span>\n<span class="nt">&lt;/turbo-frame&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Finishing up this example, what happens when the user submits the comment form?</p>\n\n<p>After submit in a normal Rails action, we might redirect the user to the comment show page. When the request occurs within a Turbo Frame, a “redirect” still occurs, but rather than redirecting the page in the browser, the redirect is followed, the new HTML content is sent from the server, and that HTML is used to update the frame.</p>\n\n<p>In our example, the <code>comment#update</code> controller action might look like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">update</span>\n  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>\n    <span class="k">if</span> <span class="vi">@comment</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">comment_params</span><span class="p">)</span>\n      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@comment</span> <span class="p">}</span>\n    <span class="k">else</span>\n      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span> <span class="p">}</span>\n    <span class="k">end</span>\n  <span class="k">end</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>And the show view:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="vi">@comment</span> <span class="k">do</span> <span class="cp">%&gt;</span>\n  <span class="nt">&lt;div&gt;</span>\n    <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="vi">@comment</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="n">edit_comment_path</span><span class="p">(</span><span class="vi">@comment</span><span class="p">)</span> <span class="cp">%&gt;</span>\n  <span class="nt">&lt;/div&gt;</span>\n<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This behavior allows us to build Turbo Frame-powered interfaces while making very few or no changes to a standard Rails controller, making it possible to prototype in Rails very quickly.</p>\n\n<p>With just what we’ve learned so far, we’re already in position to start building simple interfaces with Turbo Frames that allow us to add significant amounts of interactivity to our application with very few changes to the Ruby and HTML we’d have in any Rails app.</p>\n\n<p>Let’s keep exploring, there’s plenty more to see.</p>\n\n<h3>\n  <a name="breaking-out-of-a-frame" href="#breaking-out-of-a-frame">\n  </a>\n  Breaking out of a frame\n</h3>\n\n<p>While navigating within a frame is very handy, sometimes, a form or link within a frame needs to break out of the frame and perform a normal page turn.</p>\n\n<p>To add that behavior to a navigation element within a frame, simply add <code>data-turbo-frame="_top"</code> to the element, like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="n">edit_comment_path</span><span class="p">(</span><span class="n">comment</span><span class="p">),</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">turbo_frame: </span><span class="s2">"_top"</span> <span class="p">}</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<h3>\n  <a name="targeting-a-frame-from-the-outside" href="#targeting-a-frame-from-the-outside">\n  </a>\n  Targeting a frame from the outside\n</h3>\n\n<p>Eventually, you’ll find yourself needing to update the content of a frame using a link that isn’t wrapped in your target frame. This often comes up when building tabbed content; the navigation menu will be placed outside of the Turbo Frame that contains the actual content.</p>\n\n<p>To handle situations like this, we can use the same <code>turbo-frame</code> data attribute to tell Turbo that the navigation should occur in a specific turbo frame.</p>\n\n<p>Using our tabbed content example, we may have a page layout like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight html"><code><span class="nt">&lt;ul&gt;</span>\n  <span class="nt">&lt;li&gt;</span>\n    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"user/1/profile"</span> <span class="na">data-turbo-frame=</span><span class="s">"main"</span><span class="nt">&gt;</span>\n      Profile\n    <span class="nt">&lt;/a&gt;</span>\n  <span class="nt">&lt;/li&gt;</span>\n  <span class="nt">&lt;li&gt;</span>\n    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"user/1/favorites"</span> <span class="na">data-turbo-frame=</span><span class="s">"main"</span><span class="nt">&gt;</span>\n      Favorites\n    <span class="nt">&lt;/a&gt;</span>\n  <span class="nt">&lt;/li&gt;</span>\n<span class="nt">&lt;/ul&gt;</span>\n<span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"main"</span><span class="nt">&gt;&lt;/turbo-frame&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Clicks on either of the <code>user</code> links will generate a request with a <code>Turbo-Frame: main</code> header and the response will update the content of the <code>main</code> turbo frame, even though the links are not wrapped within the frame.</p>\n\n<h2>\n  <a name="lazy-loading-frames" href="#lazy-loading-frames">\n  </a>\n  Lazy loading Frames\n</h2>\n\n<p>The <code>src</code> attribute on a frame can be combined with <code>loading=lazy</code> to mark a frame as lazy-loaded. Lazy-loaded frames will not fetch their content from the server until they’re visible on the page.</p>\n\n<p>Lazy loading is especially helpful for modals, popovers, and other non-critical, below-the-fold content.</p>\n\n<p>Lazy loaded frames can be combined with a spinner or other loading indicator, like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"lazy_frame"</span><span class="p">,</span> <span class="ss">src: </span><span class="n">comments_path</span><span class="p">,</span> <span class="ss">loading: </span><span class="s2">"lazy"</span> <span class="k">do</span> <span class="cp">%&gt;</span>\n  <span class="nt">&lt;div&gt;</span>I\'m a loading spinner<span class="nt">&lt;/div&gt;</span>\n<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Note that <code>loading="lazy"</code> must be combined with a <code>src</code> attribute, otherwise lazy loading does nothing</p>\n\n<h2>\n  <a name="frame-events" href="#frame-events">\n  </a>\n  Frame events\n</h2>\n\n<p>Turbo comes packed with <a href="https://turbo.hotwired.dev/reference/events">lifecycle events</a>, including two frame specific events:</p>\n\n<ul>\n<li>turbo:frame-render</li>\n<li>turbo:frame-load</li>\n</ul>\n\n<p>These events (added in <a href="https://github.com/hotwired/turbo/releases/tag/v7.0.0-rc.2">Turbo 7.0.0-rc2</a>) fire each time a frame is loaded or reloaded. Developers can use these events to attach behavior to an element within a frame or animate the entry of a frame element, and they pair nicely with <a href="https://stimulus.hotwired.dev/">Stimulus</a>.</p>\n\n<p>In addition to these built in events, a useful complement to the emitted events is the <code>busy</code> attribute. The <a href="https://github.com/hotwired/turbo/blob/main/src/core/frames/frame_controller.ts#L172">busy attribute</a> is automatically applied to a frame when a request for the frame’s content begins and is removed when the request finishes.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">// From Turbo\'s source code: turbo/src/core/frames/frame_controller.ts</span>\n<span class="nx">requestStarted</span><span class="p">(</span><span class="nx">request</span><span class="p">:</span> <span class="nx">FetchRequest</span><span class="p">)</span> <span class="p">{</span>\n  <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">busy</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">)</span>\n<span class="p">}</span>\n\n<span class="nx">requestFinished</span><span class="p">(</span><span class="nx">request</span><span class="p">:</span> <span class="nx">FetchRequest</span><span class="p">)</span> <span class="p">{</span>\n  <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">busy</span><span class="dl">"</span><span class="p">)</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This attribute can be useful for adding loading indicators to long running requests and otherwise tracking the state of frames between the beginning of a frame request and the <code>turbo:frame-render</code> and <code>turbo:frame-load</code> events firing.</p>\n\n<h2>\n  <a name="refreshing-frames" href="#refreshing-frames">\n  </a>\n  Refreshing Frames\n</h2>\n\n<p>Sometimes, users need the ability to refresh the contents of a frame without refreshing the entire page.</p>\n\n<p>In ideal circumstances, a <a href="https://github.com/hotwired/turbo-rails/blob/main/app/models/concerns/turbo/broadcastable.rb">Turbo Stream broadcast</a> automatically updates the contents of the frame without needing a manual refresh, we don\'t always get to work in ideal circumstances.</p>\n\n<p>In earlier versions of Turbo, refreshing a frame required <a href="https://github.com/hotwired/turbo/issues/269">workarounds</a> like appending a timestamp to the <code>src</code> attribute. Today, those workarounds are no longer necessary and Turbo will happily update a frame any number of times with an indentical <code>src</code> on each request.</p>\n\n<p>We can build a refreshable frame like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="c">&lt;%# app/views/games/show.html.erb %&gt;</span>\n<span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="vi">@game</span> <span class="k">do</span> <span class="cp">%&gt;</span>\n  <span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@game</span><span class="p">.</span><span class="nf">home_score</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>\n  <span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@game</span><span class="p">.</span><span class="nf">away_score</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>\n  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Update score"</span><span class="p">,</span> <span class="n">game_path</span><span class="p">(</span><span class="vi">@game</span><span class="p">)</span> <span class="cp">%&gt;</span>\n<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Here, the first time a user clicks the update link, the <code>turbo-frame</code> will be updated with an <code>src</code> like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight html"><code><span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"game_10"</span> <span class="na">reloadable=</span><span class="s">""</span> <span class="na">src=</span><span class="s">"http://localhost:3000/games/10"</span><span class="nt">&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Additional clicks on the update link will fetch updated scores from the server and reload the content of the frame.</p>\n\n<p>Note that a <a href="https://github.com/hotwired/turbo/pull/487">currently open PR</a> (as of the time this article was last updated, December 2021) proposes an alternative implementation of reloadable frames that will prevent the <code>reloadable</code> attribute from being exposed while keeping the behavior intact. In future versions of Turbo the <code>reloadable</code> attribute may not longer exist or be neccessary.</p>\n\n<h2>\n  <a name="conditional-template-rendering-using-variants" href="#conditional-template-rendering-using-variants">\n  </a>\n  Conditional template rendering using variants\n</h2>\n\n<p>As you use Turbo Frames in Rails, you’ll eventually run into the desire to have a single controller action respond to both Turbo Frame requests and regular, full-page requests.</p>\n\n<p>A common example of this is rendering a <code>/new</code> page as both a standalone page and as frame content inside of a modal. You could implement a conditional in your controller action to check for the Turbo Frame header, but that quickly starts to clutter up your controllers.</p>\n\n<p>An alternative approach is to use <a href="https://guides.rubyonrails.org/layouts_and_rendering.html#the-variants-option">variants</a> to render different content based on the inbound request headers, to keep your controllers cleaner.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>\n  <span class="n">before_action</span> <span class="ss">:turbo_frame_request_variant</span>\n  <span class="kp">private</span>\n\n  <span class="k">def</span> <span class="nf">turbo_frame_request_variant</span>\n    <span class="n">request</span><span class="p">.</span><span class="nf">variant</span> <span class="o">=</span> <span class="ss">:turbo_frame</span> <span class="k">if</span> <span class="n">turbo_frame_request?</span>\n  <span class="k">end</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This approach adds a before_action to the <code>ApplicationController</code> that checks if the inbound request is a Turbo Frame request using the <code>turbo_frame_request?</code> method <a href="https://github.com/hotwired/turbo-rails/blob/main/app/controllers/turbo/frames/frame_request.rb#L21">provided by turbo-rails</a>. When the request is a turbo frame, Rails will look for a Turbo Frame variant (<code>new.html+turbo_frame.erb</code>, for example) and render that variant when it exists. Otherwise, the default <code>html.erb</code> view will be used</p>\n\n<p>This approach was originally described <a href="https://github.com/hotwired/turbo/issues/378#issuecomment-914615544">here</a>. While there was a <a href="https://github.com/hotwired/turbo-rails/pull/250">proposal</a> to add this variant-based approach to turbo-rails, those proposals were rejected. The guidance from the maintainers is that the <code>turbo_frame_request?</code> to detect Turbo Frame requests is the only support that will be added because <a href="https://github.com/hotwired/turbo-rails/pull/250#issuecomment-942079485">"If you\'re branching all your responses for frames vs not, something isn\'t right, and we should investigate those pressures in a different way."</a>.</p>\n\n<p>In my experience, judicious use of variants to serve different content for Frame requests is sometimes the simplest and cleanest path to achieve a desired outcome but YMMV.</p>\n\n<h2>\n  <a name="limitations-amp-gotchas" href="#limitations-amp-gotchas">\n  </a>\n  Limitations &amp; Gotchas\n</h2>\n\n<h3>\n  <a name="turbo-frames-and-page-layouts" href="#turbo-frames-and-page-layouts">\n  </a>\n  Turbo Frames and page layouts\n</h3>\n\n<p>Turbo Frames in the DOM are implemented as custom HTML elements (the <code>&lt;turbo-frame&gt;</code> tag we\'ve seen in this article). We can add classes to them (<code>&lt;%= turbo_frame_tag post, class: "classes" %&gt;</code>) and style them; however, because they exist in the DOM and need to wrap their content to be useful, inserting them into existing layouts can cause issues without some planning.</p>\n\n<p>In particular, you can’t place a frame inside of a table row. While there are <a href="https://github.com/hotwired/turbo/issues/48#issuecomment-882575388">workarounds</a> for this, it is worth knowing that tables and Turbo Frames don’t play well together out of the box.</p>\n\n<p>In addition to table issues, you may sometimes run into layout issues with flex box and grid layouts when frames are the direct descendant of the container element. You\'ll sometimes find that your nicely spaced three element flex layout now breaks because all three elements need to be wrapped in a single <code>&lt;turbo-frame&gt;</code> tag.</p>\n\n<p>A route worth exploring in these situations is adding  <code>display: contents</code>  to the <code>&lt;turbo-frame&gt;</code> element, as mentioned <a href="https://github.com/hotwired/turbo/issues/48#issuecomment-925760725">here</a>.</p>\n\n<h3>\n  <a name="responding-to-a-turbo-frame-request-without-a-matching-turbo-frame" href="#responding-to-a-turbo-frame-request-without-a-matching-turbo-frame">\n  </a>\n  Responding to a Turbo Frame request without a matching Turbo Frame\n</h3>\n\n<p>As you build applications with Turbo Frames, you will inevitably run into an issue in development where you click a link within a frame and all of the content within the frame disappears. You’ll check the Rails logs and see the view you expected was rendered without errors.</p>\n\n<p>Why did everything disappear?</p>\n\n<p>The first thing to do when this happens is to check the JavaScript console for errors. Turbo’s JavaScript expects that the HTML response to a Turbo Frame request will contain a matching Turbo Frame element. If no match is found, Turbo will empty the frame of all content and raise an error like this in the JavaScript console:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>Response has no matching &lt;turbo-frame id="target_id"&gt; element\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This can be a little confusing at first, since the content renders fine from the server but once you get used to Turbo processing the rendered HTML and updating the DOM, you’ll be able to quickly debug missing frame element errors like this one.</p>\n\n<p>When in doubt, check for JavaScript errors.</p>\n\n<h3>\n  <a name="updating-page-url-when-navigating-within-frame" href="#updating-page-url-when-navigating-within-frame">\n  </a>\n  Updating page URL when navigating within frame\n</h3>\n\n<p>When a user clicks on a link within a frame, the URL of the page won’t change. This makes sense most of the time — the user hasn’t navigated to a new page, they’ve simply updated some of the content on the existing page. </p>\n\n<p>One use case where the URL not changing can be problematic is when the user is applying sorting and filtering options by clicking links within a frame. Imagine a table layout with links to sort the table by each column, for example.</p>\n\n<p>In those cases, a developer may wish to update the URL of the page to reflect the currently applied filters so that the user can copy/paste the URL to share a specific view of the table.</p>\n\n<p>As of <a href="https://github.com/hotwired/turbo/releases/tag/v7.1.0">Turbo\'s 7.1 release</a>, developers can now update the page URL from a frame navigation by adding a <code>turbo-action</code> data attribute to the form or link that triggers the frame navigation. Options for <code>turbo-action</code> are <code>replace</code>, to replace the current URL in the browser\'s history, or <code>advance</code>, to push a new entry in the history. When building search forms, you\'ll likely want to use <code>advance</code> to update the page URL with each new search. In Rails, using a standard <code>form_with</code> search form, your code to push frame navigation into the browser\'s history might look like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">url: </span><span class="n">customers_path</span><span class="p">,</span> <span class="ss">method: :get</span><span class="p">,</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">turbo_frame: </span><span class="s2">"customers"</span><span class="p">,</span> <span class="ss">turbo_action: </span><span class="s2">"advance"</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>\n  <span class="c">&lt;%# Some form content goes here %&gt;</span>\n<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<h2>\n  <a name="wrapping-up" href="#wrapping-up">\n  </a>\n  Wrapping up\n</h2>\n\n<p>Today we looked in detail at the current state of Turbo Frames — what they are, how to use them in Rails, and the some of the ways frames can help you build modern, efficient applications.</p>\n\n<p>Turbo Frames in Rails applications naturally pair very well with Stimulus and work exceptionally well when paired with Turbo Streams to manage broadcasted updates and more targeted content updates.</p>\n\n<p>With Hotwire coming <a href="https://world.hey.com/dhh/rails-7-will-have-three-great-answers-to-javascript-in-2021-8d68191b">by default</a> to new Rails 7 applications, I\'m happy to report that after a year of use, building Ruby on Rails applications with the Hotwire stack is simple, straightforward, and adds very little overhead to your development experience. For mnay Rails applications, all of the reactivity you need can be achieved with the Hotwire stack, and Turbo Frames will play a key role in many applications in the years to come.</p>\n\n<p>While you begin to experiment, keep in mind that Turbo is still in very active development. Throughout this article, I linked to open PRs that will improve Turbo Frames and make some of the techniques described in this article simpler to implement — as time goes on, expect Turbo and Turbo Frames to continue to improve and for <code>turbo-rails</code> to continue to add functionality to help Rails developers use frames effectively in their applications.</p>\n\n<p>Ready to go deeper? (Some shameless self-promotion ahead, sorry!)</p>\n\n<ul>\n<li>I wrote about <a href="https://www.colby.so/posts/handling-modal-forms-with-rails-and-hotwire">using the Hotwire stack</a> to build server rendered modal forms in Rails</li>\n<li>Build a <a href="https://thoughtbot.com/blog/hotwire-typeahead-searching">typeahead search interface</a> with Turbo Frames</li>\n<li>Use a Turbo Stream + Turbo Frame combo to <a href="https://www.colby.so/posts/conditional-rendering-with-turbo-stream-broadcasts">render different content</a> to different users from a single stream broadcast</li>\n<li>Read my <a href="https://www.colby.so/posts/turbo-streams-on-rails">exploration</a> of Turbo Streams</li>\n<li>\n<a href="https://landing.mailerlite.com/webforms/landing/d7z0n0">Sign up for</a> my monthly newsletter to stay up to date on modern Ruby on Rails development</li>\n</ul>\n\n<p>That’s all for today. As always, thanks for reading!</p>\n\n',a.body_markdown='urbo, part of the Hotwire tripartite, gives you the tools to write dramatically less custom JavaScript than you would otherwise need to build modern, performant web applications.\n\nTurbo is composed of `Turbo Drive`, `Turbo Frames`, `Turbo Streams`, and `Turbo Native`. Each is a valuable piece of the puzzle but today we’re going to focus on `Turbo Frames`. \n\nTurbo Frames “[allow predefined parts of a page to be updated on request](https://turbo.hotwired.dev/handbook/frames).” Used wisely, frames allow developers to decompose their UI into independently updated pieces, quickly.\n\n## Why should I use Turbo Frames?\nTurbo Frames unlock a huge amount of potential with minimal changes to existing code and they can be gradually introduced to existing projects without necessitating major architectural changes.\n\nIn greenfield projects designed with Turbo Frames in mind, a small team of developers can use frames to deliver fast, efficient user interfaces in dramatically less time than would be required when build a SPA-powered front end.\n\nWhile Turbo Frames can be used with many different tech stacks, Rails developers will find the tight integration of frames into Rails (via the [turbo-rails](https://github.com/hotwired/turbo-rails) gem) makes using frames in Rails a breeze.\n\n## The Turbo documentation gap\nAs with many new technologies, one of the barriers to getting started with Turbo Frames is inconsistent/incomplete documentation. Along with problems in the official documentation, much of the tutorial content written about Turbo Frames is already out of date.\n\nTurbo has evolved quickly since its release in December of 2020, and the documentation and supporting tutorials from content creators have struggled to keep pace.\n\nAs an example of the documentation gap, `turbo-rails` doesn’t have any dedicated usage documentation, instead just linking to the base Turbo docs and letting users figure out the rest.\n\nThis means that learning to use Turbo Frames in your Rails application today often requires reading the docs, then digging through source code, and then Googling your way through Github issues and forum posts. Turbo Frames can be difficult to approach.\n\nIn time the documentation will improve and the community will coalesce around best practices and standards that can be more easily communicated to new users.\n\nIn the meantime, here we are.\n\n## What is this article? Who is it for?\nToday, I’m going to share what I’ve learned over nearly a year building applications with Turbo Frames, from small hobby projects and experiments to multiple large, legacy production applications.\n\nBy doing so, I’m hoping to address the gaps in documentation, to save you from spending too much time reading source code, trawling forum posts and Github issues.\n\nI will cover content you can find in the documentation (if you know where to look), gotchas and tricks learned from real world experience and picked up from reading way too much about Turbo and Turbo Frames since Turbo’s initial release. I’ll also share patterns that illuminate some of the common web application needs that frames are perfect for.\n\nThis content is geared towards Rails developers interested in using Turbo. The code samples and concepts will be illustrated using Ruby and Rails code and conventions. If you aren’t working in Rails, you should still find plenty of value here, but know that you may not have access to convenience methods like `<%= turbo_frame_tag %>` in your chosen language and framework.\n\nLet’s dive in!\n\n## What are Turbo Frames?\nAt a high level, [Turbo Frames](https://turbo.hotwired.dev/handbook/frames) are pieces of a webpage that can be updated independently, without impacting the rest of the content on the page.\n\nLinks and forms within a frame will, by default, attempt to update only the content of the containing frame, whether the server sends a completely new HTML document or only a page fragment.\n\nTurbo Frames allow developers to decompose a page into pieces of content that can be updated individually as new information is received from a server.\n\nIn practice, common use cases for Turbo Frames include:\n* Tabbed content \n* In-line editing \n* Searching, sorting, and filtering data\n\nLet\'s start looking at code.\n\n## Constructing a frame\nA basic Turbo Frame, rendered with the [built-in helper](https://github.com/hotwired/turbo-rails/blob/main/app/helpers/turbo/frames_helper.rb) from Turbo Rails (and using erb), looks like this:\n\n```erb\n<%= turbo_frame_tag "some_id" do %>\n  <div>\n    Some framed content\n  </div>\n<% end %>\n```\n\nThe only required argument for `turbo_frame_tag` is an id. \n\nWhen the helper is processed, the final HTML is:\n```html\n<turbo-frame id="some_id">\n  <div>\n    Some framed content\n  </div>\n</turbo-frame>\n```\nInstead of providing a static id, we can also pass in an active record object, which the [helper will use](https://github.com/hotwired/turbo-rails/blob/main/app/helpers/turbo/frames_helper.rb#L27) to generate a unique id via `dom_id(object.id)`.\n```erb\n<%= turbo_frame_tag Comment.first %>\n```\n\nFrames can also receive an `src` attribute. When `src` is supplied, the frame will be populated after the initial page load via a separate HTTP request to the frame’s `src`:\n\n```erb\n<%= turbo_frame_tag "comments", src: comments_path do %>\n  <div>\n    Placeholder content\n  </div>\n<% end %>\n```\n\nHere, the page will initially load the turbo frame with the placeholder div and then immediately a request to `comments_path` endpoint is made and the content of the Turbo Frame is replaced with the response from the server, provided our server returns HTML with a matching Turbo Frame tag.\n\nWhat’s a matching Turbo Frame tag? Let’s look at that next.\n\n## Responding with frame content\nThe power of Turbo Frames is in replacing pieces of the page with content sent from the server — without touching the rest of the DOM.\n\nUpdating an existing frame just requires responding to a request with HTML that contains a Turbo Frame element with an id that matches the id of the frame target sent in the request.\n\nTaking the `comments` example from above, when a request is made to `/comments`, the server should respond with HTML that contains a frame like this:\n\n```html\n<turbo-frame id="comments">\n  \x3c!-- A list of comments, perhaps --\x3e\n</turbo-frame>\n```\n\nThe content inside of the matched frame is replaced with the updated content from the server, without touching the rest of the page.\n\n## Navigating within frames\nBy default, links and forms within a Turbo Frame will perform the navigation within the frame, rather than performing a full page turn.\n\nFor a simple example, we can imagine that we have a list of comments on a page and that each comment is wrapped in a Turbo Frame tag, like this:\n\n```erb\n<% @comments do |comment| %>\n  <%= turbo_frame_tag comment do %>\n    <div>\n      <%= link_to comment.body, edit_comment_path(comment) %>\n    </div>\n  <% end %>\n<% end %>\n```\n\nThis ERB results in rendered HTML:\n\n```html\n<turbo-frame id="comment_1">\n  <div>\n    <a href="/comments/1/edit">Comment 1</a>\n  </div>\n</turbo-frame>\n<turbo-frame id="comment_2">\n  <div>\n    <a href="/comments/2/edit">Comment 2</a>\n  </div>\n</turbo-frame>\n<turbo-frame id="comment_3">\n  <div>\n    <a href="/comments/3/edit">Comment 3</a>\n  </div>\n</turbo-frame>\n```\n\nWith this Turbo-powered HTML in place, clicks on the edit links will make a Turbo Frame request to `/comments/:id/edit`, retrieve some HTML, and return that HTML to the browser.\n\nThe Turbo Frame request is a normal HTML request with an additional `Turbo-Frame` header included in the request, with a value that matches the id of the target Turbo Frame.\n\nIn `turbo-rails`, the presence of this header can be used to [identify a Turbo Frame request](https://github.com/hotwired/turbo-rails/blob/main/app/controllers/turbo/frames/frame_request.rb#L21) and respond with appropriate content, like this:\n\n```ruby\n# This approach gets messy in controller actions. Read further on for a variant based approach that scales much more cleanly\nif turbo_frame_request?\n  render partial: "some_turbo_frame_partial"\nelse\n  render partial: "some_other_partial"\nend\n```\n\nWhen `turbo-rails` responds to a Turbo Frame request, it [automatically removes](https://github.com/hotwired/turbo-rails/blob/main/app/controllers/turbo/frames/frame_request.rb#L16) the layout from the HTML response. Since Turbo will discard all of the HTML but the requested frame, Rails skips rendering content that it knows won\'t be used.\n\nWhen a response to a Turbo Frame request is received, [Turbo Drive](https://turbo.hotwired.dev/reference/drive) replaces the content of the target frame, leaving the rest of the page untouched.\n\nContinuing with the above comments example, the edit view may look something like this:\n\n```erb\n<%= turbo_frame_tag @comment do %>\n  <%= form_with(model: @comment) do |form| %>\n    <div class="inline-field">\n      <%= form.label :body %>\n      <%= form.text_field :body %>\n    </div>\n    <div class="actions">\n      <%= form.submit %>\n    </div>\n  <% end %>\n<% end %>\n```\n\nAfter clicking to edit a comment then, the updated HTML after Turbo processes the response would look something like this:\n\n```html\n\x3c!-- Form content rendered from /edit --\x3e\n<turbo-frame id="comments_1" src="http://localhost:3000/comments/1/edit">\n  <form action="/comments/1" accept-charset="UTF-8" method="post">\n    <input type="hidden" name="_method" value="patch">\n    <input type="hidden" name="authenticity_token" value="some_token">\n    <div class="inline-field">\n      <label for="comment_body">Body</label>\n      <input type="text" value="Comment 1" name="comment[body]" id="comment_body">\n    </div>\n    <div class="actions">\n      <input type="submit" name="commit" value="Update Comment">\n    </div>\n  </form>\n</turbo-frame>\n\x3c!-- The other frames, untouched by the /edit request --\x3e\n<turbo-frame id="comment_2">\n  <div>\n    <a href="/comments/2/edit">Comment 2</a>\n  </div>\n</turbo-frame>\n<turbo-frame id="comment_3">\n  <div>\n    <a href="/comments/3/edit">Comment 3</a>\n  </div>\n</turbo-frame>\n```\n\nFinishing up this example, what happens when the user submits the comment form?\n\nAfter submit in a normal Rails action, we might redirect the user to the comment show page. When the request occurs within a Turbo Frame, a “redirect” still occurs, but rather than redirecting the page in the browser, the redirect is followed, the new HTML content is sent from the server, and that HTML is used to update the frame.\n\nIn our example, the `comment#update` controller action might look like this:\n\n```ruby\ndef update\n  respond_to do |format|\n    if @comment.update(comment_params)\n      format.html { redirect_to @comment }\n    else\n      format.html { render :edit, status: :unprocessable_entity }\n    end\n  end\nend\n```\n\nAnd the show view:\n\n```erb\n<%= turbo_frame_tag @comment do %>\n  <div>\n    <%= link_to @comment.body, edit_comment_path(@comment) %>\n  </div>\n<% end %>\n```\n\nThis behavior allows us to build Turbo Frame-powered interfaces while making very few or no changes to a standard Rails controller, making it possible to prototype in Rails very quickly.\n\nWith just what we’ve learned so far, we’re already in position to start building simple interfaces with Turbo Frames that allow us to add significant amounts of interactivity to our application with very few changes to the Ruby and HTML we’d have in any Rails app.\n\nLet’s keep exploring, there’s plenty more to see.\n\n### Breaking out of a frame\nWhile navigating within a frame is very handy, sometimes, a form or link within a frame needs to break out of the frame and perform a normal page turn.\n\nTo add that behavior to a navigation element within a frame, simply add `data-turbo-frame="_top"` to the element, like this:\n\n```erb\n<%= link_to comment.body, edit_comment_path(comment), data: { turbo_frame: "_top" } %>\n```\n\n### Targeting a frame from the outside\nEventually, you’ll find yourself needing to update the content of a frame using a link that isn’t wrapped in your target frame. This often comes up when building tabbed content; the navigation menu will be placed outside of the Turbo Frame that contains the actual content.\n\nTo handle situations like this, we can use the same `turbo-frame` data attribute to tell Turbo that the navigation should occur in a specific turbo frame.\n\nUsing our tabbed content example, we may have a page layout like this:\n\n```html\n<ul>\n  <li>\n    <a href="user/1/profile" data-turbo-frame="main">\n      Profile\n    </a>\n  </li>\n  <li>\n    <a href="user/1/favorites" data-turbo-frame="main">\n      Favorites\n    </a>\n  </li>\n</ul>\n<turbo-frame id="main"></turbo-frame>\n```\n\nClicks on either of the `user` links will generate a request with a `Turbo-Frame: main` header and the response will update the content of the `main` turbo frame, even though the links are not wrapped within the frame.\n\n## Lazy loading Frames\nThe `src` attribute on a frame can be combined with `loading=lazy` to mark a frame as lazy-loaded. Lazy-loaded frames will not fetch their content from the server until they’re visible on the page.\n\nLazy loading is especially helpful for modals, popovers, and other non-critical, below-the-fold content.\n\nLazy loaded frames can be combined with a spinner or other loading indicator, like this:\n\n```erb\n<%= turbo_frame_tag "lazy_frame", src: comments_path, loading: "lazy" do %>\n  <div>I\'m a loading spinner</div>\n<% end %>\n```\n\nNote that `loading="lazy"` must be combined with a `src` attribute, otherwise lazy loading does nothing\n\n## Frame events\nTurbo comes packed with [lifecycle events](https://turbo.hotwired.dev/reference/events), including two frame specific events:\n* turbo:frame-render\n* turbo:frame-load\n\nThese events (added in [Turbo 7.0.0-rc2](https://github.com/hotwired/turbo/releases/tag/v7.0.0-rc.2)) fire each time a frame is loaded or reloaded. Developers can use these events to attach behavior to an element within a frame or animate the entry of a frame element, and they pair nicely with [Stimulus](https://stimulus.hotwired.dev/).\n\nIn addition to these built in events, a useful complement to the emitted events is the `busy` attribute. The [busy attribute](https://github.com/hotwired/turbo/blob/main/src/core/frames/frame_controller.ts#L172) is automatically applied to a frame when a request for the frame’s content begins and is removed when the request finishes.\n\n```javascript\n// From Turbo\'s source code: turbo/src/core/frames/frame_controller.ts\nrequestStarted(request: FetchRequest) {\n  this.element.setAttribute("busy", "")\n}\n\nrequestFinished(request: FetchRequest) {\n  this.element.removeAttribute("busy")\n}\n```\n\nThis attribute can be useful for adding loading indicators to long running requests and otherwise tracking the state of frames between the beginning of a frame request and the `turbo:frame-render` and `turbo:frame-load` events firing.\n\n## Refreshing Frames\nSometimes, users need the ability to refresh the contents of a frame without refreshing the entire page.\n\nIn ideal circumstances, a [Turbo Stream broadcast](https://github.com/hotwired/turbo-rails/blob/main/app/models/concerns/turbo/broadcastable.rb) automatically updates the contents of the frame without needing a manual refresh, we don\'t always get to work in ideal circumstances.\n\nIn earlier versions of Turbo, refreshing a frame required [workarounds](https://github.com/hotwired/turbo/issues/269) like appending a timestamp to the `src` attribute. Today, those workarounds are no longer necessary and Turbo will happily update a frame any number of times with an indentical `src` on each request.\n\nWe can build a refreshable frame like this:\n\n```erb\n<%# app/views/games/show.html.erb %>\n<%= turbo_frame_tag @game do %>\n  <div><%= @game.home_score %></div>\n  <div><%= @game.away_score %></div>\n  <%= link_to "Update score", game_path(@game) %>\n<% end %>\n```\n\nHere, the first time a user clicks the update link, the `turbo-frame` will be updated with an `src` like this:\n\n```html\n<turbo-frame id="game_10" reloadable="" src="http://localhost:3000/games/10">\n```\n\nAdditional clicks on the update link will fetch updated scores from the server and reload the content of the frame.\n\nNote that a [currently open PR](https://github.com/hotwired/turbo/pull/487) (as of the time this article was last updated, December 2021) proposes an alternative implementation of reloadable frames that will prevent the `reloadable` attribute from being exposed while keeping the behavior intact. In future versions of Turbo the `reloadable` attribute may not longer exist or be neccessary.\n\n## Conditional template rendering using variants\nAs you use Turbo Frames in Rails, you’ll eventually run into the desire to have a single controller action respond to both Turbo Frame requests and regular, full-page requests.\n\nA common example of this is rendering a `/new` page as both a standalone page and as frame content inside of a modal. You could implement a conditional in your controller action to check for the Turbo Frame header, but that quickly starts to clutter up your controllers.\n\nAn alternative approach is to use [variants](https://guides.rubyonrails.org/layouts_and_rendering.html#the-variants-option) to render different content based on the inbound request headers, to keep your controllers cleaner.\n\n```ruby\nclass ApplicationController < ActionController::Base\n  before_action :turbo_frame_request_variant\n  private\n\n  def turbo_frame_request_variant\n    request.variant = :turbo_frame if turbo_frame_request?\n  end\nend\n```\n\nThis approach adds a before_action to the `ApplicationController` that checks if the inbound request is a Turbo Frame request using the `turbo_frame_request?` method [provided by turbo-rails](https://github.com/hotwired/turbo-rails/blob/main/app/controllers/turbo/frames/frame_request.rb#L21). When the request is a turbo frame, Rails will look for a Turbo Frame variant (`new.html+turbo_frame.erb`, for example) and render that variant when it exists. Otherwise, the default `html.erb` view will be used\n\nThis approach was originally described [here](https://github.com/hotwired/turbo/issues/378#issuecomment-914615544). While there was a [proposal](https://github.com/hotwired/turbo-rails/pull/250) to add this variant-based approach to turbo-rails, those proposals were rejected. The guidance from the maintainers is that the `turbo_frame_request?` to detect Turbo Frame requests is the only support that will be added because ["If you\'re branching all your responses for frames vs not, something isn\'t right, and we should investigate those pressures in a different way."](https://github.com/hotwired/turbo-rails/pull/250#issuecomment-942079485).\n\nIn my experience, judicious use of variants to serve different content for Frame requests is sometimes the simplest and cleanest path to achieve a desired outcome but YMMV.\n\n## Limitations & Gotchas\n### Turbo Frames and page layouts\nTurbo Frames in the DOM are implemented as custom HTML elements (the `<turbo-frame>` tag we\'ve seen in this article). We can add classes to them (`<%= turbo_frame_tag post, class: "classes" %>`) and style them; however, because they exist in the DOM and need to wrap their content to be useful, inserting them into existing layouts can cause issues without some planning.\n\nIn particular, you can’t place a frame inside of a table row. While there are [workarounds](https://github.com/hotwired/turbo/issues/48#issuecomment-882575388) for this, it is worth knowing that tables and Turbo Frames don’t play well together out of the box.\n\nIn addition to table issues, you may sometimes run into layout issues with flex box and grid layouts when frames are the direct descendant of the container element. You\'ll sometimes find that your nicely spaced three element flex layout now breaks because all three elements need to be wrapped in a single `<turbo-frame>` tag.\n\nA route worth exploring in these situations is adding  `display: contents`  to the `<turbo-frame>` element, as mentioned [here](https://github.com/hotwired/turbo/issues/48#issuecomment-925760725).\n\n### Responding to a Turbo Frame request without a matching Turbo Frame\nAs you build applications with Turbo Frames, you will inevitably run into an issue in development where you click a link within a frame and all of the content within the frame disappears. You’ll check the Rails logs and see the view you expected was rendered without errors.\n\nWhy did everything disappear?\n\nThe first thing to do when this happens is to check the JavaScript console for errors. Turbo’s JavaScript expects that the HTML response to a Turbo Frame request will contain a matching Turbo Frame element. If no match is found, Turbo will empty the frame of all content and raise an error like this in the JavaScript console:\n\n```\nResponse has no matching <turbo-frame id="target_id"> element\n```\n\nThis can be a little confusing at first, since the content renders fine from the server but once you get used to Turbo processing the rendered HTML and updating the DOM, you’ll be able to quickly debug missing frame element errors like this one.\n\nWhen in doubt, check for JavaScript errors.\n\n### Updating page URL when navigating within frame\nWhen a user clicks on a link within a frame, the URL of the page won’t change. This makes sense most of the time — the user hasn’t navigated to a new page, they’ve simply updated some of the content on the existing page. \n\nOne use case where the URL not changing can be problematic is when the user is applying sorting and filtering options by clicking links within a frame. Imagine a table layout with links to sort the table by each column, for example.\n\nIn those cases, a developer may wish to update the URL of the page to reflect the currently applied filters so that the user can copy/paste the URL to share a specific view of the table.\n\nAs of [Turbo\'s 7.1 release](https://github.com/hotwired/turbo/releases/tag/v7.1.0), developers can now update the page URL from a frame navigation by adding a `turbo-action` data attribute to the form or link that triggers the frame navigation. Options for `turbo-action` are `replace`, to replace the current URL in the browser\'s history, or `advance`, to push a new entry in the history. When building search forms, you\'ll likely want to use `advance` to update the page URL with each new search. In Rails, using a standard `form_with` search form, your code to push frame navigation into the browser\'s history might look like this:\n\n```erb\n<%= form_with url: customers_path, method: :get, data: { turbo_frame: "customers", turbo_action: "advance" } do |form| %>\n  <%# Some form content goes here %>\n<% end %>\n```\n\n## Wrapping up\nToday we looked in detail at the current state of Turbo Frames — what they are, how to use them in Rails, and the some of the ways frames can help you build modern, efficient applications.\n\nTurbo Frames in Rails applications naturally pair very well with Stimulus and work exceptionally well when paired with Turbo Streams to manage broadcasted updates and more targeted content updates.\n\nWith Hotwire coming [by default](https://world.hey.com/dhh/rails-7-will-have-three-great-answers-to-javascript-in-2021-8d68191b) to new Rails 7 applications, I\'m happy to report that after a year of use, building Ruby on Rails applications with the Hotwire stack is simple, straightforward, and adds very little overhead to your development experience. For mnay Rails applications, all of the reactivity you need can be achieved with the Hotwire stack, and Turbo Frames will play a key role in many applications in the years to come.\n\nWhile you begin to experiment, keep in mind that Turbo is still in very active development. Throughout this article, I linked to open PRs that will improve Turbo Frames and make some of the techniques described in this article simpler to implement — as time goes on, expect Turbo and Turbo Frames to continue to improve and for `turbo-rails` to continue to add functionality to help Rails developers use frames effectively in their applications.\n\nReady to go deeper? (Some shameless self-promotion ahead, sorry!)\n* I wrote about [using the Hotwire stack](https://www.colby.so/posts/handling-modal-forms-with-rails-and-hotwire) to build server rendered modal forms in Rails\n* Build a [typeahead search interface](https://thoughtbot.com/blog/hotwire-typeahead-searching) with Turbo Frames\n* Use a Turbo Stream + Turbo Frame combo to [render different content](https://www.colby.so/posts/conditional-rendering-with-turbo-stream-broadcasts) to different users from a single stream broadcast\n* Read my [exploration](https://www.colby.so/posts/turbo-streams-on-rails) of Turbo Streams\n* [Sign up for](https://landing.mailerlite.com/webforms/landing/d7z0n0) my monthly newsletter to stay up to date on modern Ruby on Rails development\n\nThat’s all for today. As always, thanks for reading!',a.user={name:"David Colby",username:t,twitter_username:t,github_username:"DavidColby",website_url:"https://colby.so",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--dkssf6E5--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/510445/f91e2161-c944-4001-bcc4-2be8fa3aa689.jpg",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--hGnCh9nu--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/510445/f91e2161-c944-4001-bcc4-2be8fa3aa689.jpg"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:a}},error:e,state:{currentArticle:a},serverRendered:!0,routePath:"/davidcolbyatx/857472",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:e}}}}(null,"2021-10-09T13:47:04Z",{},"davidcolbyatx")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
