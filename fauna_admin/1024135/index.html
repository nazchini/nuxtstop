<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Building a Svelte ecom site</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Building a Svelte ecom site</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/svelte" class="tag" data-v-70afb46a>
          #svelte
        </a><a href="/nuxtstop/t/tutorial" class="tag" data-v-70afb46a>
          #tutorial
        </a><a href="/nuxtstop/t/fauna" class="tag" data-v-70afb46a>
          #fauna
        </a><a href="/nuxtstop/t/webdev" class="tag" data-v-70afb46a>
          #webdev
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--s4a0GHXH--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4gph92ftc621pqx9phva.png" alt="Building a Svelte ecom site" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            18
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            1
          </span></div> <time data-v-70afb46a>Mar 16</time></div></header> <div class="content" data-v-70afb46a><p><em>This article was contributed by <a href="https://twitter.com/apopoutsis?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor">Alex Popoutsis</a>.</em></p>

<p>Today, I’ll be looking at how we can combine two newer, fast-growing web technologies to get a web application rapidly built and set up to scale infinitely.</p>

<p>Those two technologies are Svelte and Fauna. Svelte is one of the newest technologies in the world of frontend development, building on what React, Angular, Vue and others before have done but also simplifying things quite a bit. If you’re new to Svelte, <a href="https://svelte.dev/tutorial/basics">I recommend starting with their tutorial here</a>. Fauna is a modern, document-based, serverless database that runs in the cloud and offers a generous free tier to get you started. Here’s <a href="https://docs.fauna.com/fauna/current/?utm_source=DevTo&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom">a link to Fauna’s documentation</a> if you need to get acquainted with it before starting into this tutorial.</p>

<p>This tutorial will cover all the basics you need to create a small eCommerce site using Fauna and Svelte. You’ll learn:</p>

<ul>
<li>How to create a Fauna database and populate it with collections, indexes, and documents</li>
<li>The basic principles of Fauna database design and the Fauna Query Language (FQL)</li>
<li>How to connect a Svelte application to Fauna and display data</li>
<li>How to implement a basic shopping cart for a Svelte eCommerce application</li>
<li>How to write data back to Fauna from our Svelte application</li>
</ul>

<h2>
  <a name="getting-started" href="#getting-started">
  </a>
  Getting Started
</h2>

<p>Go to <a href="https://dashboard.fauna.com/accounts/register?utm_source=DevTo&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom">fauna.com</a> and register for a new account. In the dashboard, click Create Database. Our eCommerce site is going to be for a sample bakery, so I’ve named my database SvelteBakery and put it under the US region group:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--WfmBj57w--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/zvAZTd4oqzl82ftDQgEHiuLTksge9g05M8NoYDWzYLxOE3IyztRlo4HRWZwbU1DokZAJnrsFsjf47SL1Hcr6ZpIml--2hCydsE-_rZf33rJHNf6SNbXWoZeKwFYMXxXDo3NgNJSn" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--WfmBj57w--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/zvAZTd4oqzl82ftDQgEHiuLTksge9g05M8NoYDWzYLxOE3IyztRlo4HRWZwbU1DokZAJnrsFsjf47SL1Hcr6ZpIml--2hCydsE-_rZf33rJHNf6SNbXWoZeKwFYMXxXDo3NgNJSn" alt="https://lh3.googleusercontent.com/zvAZTd4oqzl82ftDQgEHiuLTksge9g05M8NoYDWzYLxOE3IyztRlo4HRWZwbU1DokZAJnrsFsjf47SL1Hcr6ZpIml--2hCydsE-_rZf33rJHNf6SNbXWoZeKwFYMXxXDo3NgNJSn" loading="lazy" width="475" height="393"></a></p>

<p>Once the database is up and running, we’ll create a couple of collections — Fauna’s equivalent of a table in a traditional relational database. I’ve selected the default of 30 days of retained history for each document (equivalent to a row) in the collection, and no TTL specified. Specifying a TTL would remove records that have been untouched for a certain number of days. I’m creating one collection for product categories, one for the products themselves, and one to hold order data.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--SPi1Njkc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh6.googleusercontent.com/wTLUV7bsO5u2kiuFJSIq5Io--0eyJOoRFwCbZ5draGiPFmFC5bXt9g6EFOFy9JIxaZrHcMSeI0UReCpzNNkXcXdhEUacgzgDGV2Zgk9084JjRqUdxwrvrYLiK55lAjH_wJ9N7kWt" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--SPi1Njkc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh6.googleusercontent.com/wTLUV7bsO5u2kiuFJSIq5Io--0eyJOoRFwCbZ5draGiPFmFC5bXt9g6EFOFy9JIxaZrHcMSeI0UReCpzNNkXcXdhEUacgzgDGV2Zgk9084JjRqUdxwrvrYLiK55lAjH_wJ9N7kWt" alt="https://lh6.googleusercontent.com/wTLUV7bsO5u2kiuFJSIq5Io--0eyJOoRFwCbZ5draGiPFmFC5bXt9g6EFOFy9JIxaZrHcMSeI0UReCpzNNkXcXdhEUacgzgDGV2Zgk9084JjRqUdxwrvrYLiK55lAjH_wJ9N7kWt" loading="lazy" width="524" height="329"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--QRlHUBCp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/iwY4l-CBcTzq9NFpc1E6ZhSZtNHRfP36C-a49gW33SjHMw_iTgiuHHwwzCAOCikkJ5iO_xVIgefZA52Gjk3vqG19WJiw70RW-cNsVWciMMApTBViwcCsGC2i9jw8cJjnXkKpDard" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--QRlHUBCp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/iwY4l-CBcTzq9NFpc1E6ZhSZtNHRfP36C-a49gW33SjHMw_iTgiuHHwwzCAOCikkJ5iO_xVIgefZA52Gjk3vqG19WJiw70RW-cNsVWciMMApTBViwcCsGC2i9jw8cJjnXkKpDard" alt="https://lh4.googleusercontent.com/iwY4l-CBcTzq9NFpc1E6ZhSZtNHRfP36C-a49gW33SjHMw_iTgiuHHwwzCAOCikkJ5iO_xVIgefZA52Gjk3vqG19WJiw70RW-cNsVWciMMApTBViwcCsGC2i9jw8cJjnXkKpDard" loading="lazy" width="467" height="321"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1VhxmI8J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/48iuiCNkRih-s-M2J6__MsJc-q2mNy1FBdyOB4AEHpPtcI36g1nmTtNA-qLRRBxWILfB0WmiIhCQSKyjoGsxfCt7uVqZSXn-HDDrQCWkEAAnIOksLEkOCAQ7DDS7yH3qTtyrhORN" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1VhxmI8J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/48iuiCNkRih-s-M2J6__MsJc-q2mNy1FBdyOB4AEHpPtcI36g1nmTtNA-qLRRBxWILfB0WmiIhCQSKyjoGsxfCt7uVqZSXn-HDDrQCWkEAAnIOksLEkOCAQ7DDS7yH3qTtyrhORN" alt="https://lh4.googleusercontent.com/48iuiCNkRih-s-M2J6__MsJc-q2mNy1FBdyOB4AEHpPtcI36g1nmTtNA-qLRRBxWILfB0WmiIhCQSKyjoGsxfCt7uVqZSXn-HDDrQCWkEAAnIOksLEkOCAQ7DDS7yH3qTtyrhORN" loading="lazy" width="472" height="256"></a></p>

<p>Next, I’m going to insert some data into my database. I’ll start with the Categories collection, click in there and then click New Document. If you’re familiar with JSON, this will be pretty straightforward, you can put any JSON you want inside the brackets. For example, to add a category called Dessert, you can do the following:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--adx0fRct--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/kqwVA29ZIHqQAwl_DzraKRW4-kLLkUYawube-E56TraV2aYXm_vJW1OI2JqRqFlior9LNgCtsaw8ty8P2nsEcFlbER8B54Kxffa7NMfMkrmvvQERJtiEjburz6wEWaylOILqzvNE" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--adx0fRct--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/kqwVA29ZIHqQAwl_DzraKRW4-kLLkUYawube-E56TraV2aYXm_vJW1OI2JqRqFlior9LNgCtsaw8ty8P2nsEcFlbER8B54Kxffa7NMfMkrmvvQERJtiEjburz6wEWaylOILqzvNE" alt="https://lh3.googleusercontent.com/kqwVA29ZIHqQAwl_DzraKRW4-kLLkUYawube-E56TraV2aYXm_vJW1OI2JqRqFlior9LNgCtsaw8ty8P2nsEcFlbER8B54Kxffa7NMfMkrmvvQERJtiEjburz6wEWaylOILqzvNE" loading="lazy" width="653" height="237"></a></p>

<p>You can also use the shell (either inside the Fauna dashboard or via the fauna-shell <a href="https://www.npmjs.com/package/fauna-shell?activeTab=readme">NPM package</a>), or any language that supports the Fauna API, which I’ve used in this case to add items in bulk:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="nx">Create</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sandwiches</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>

<span class="nx">Create</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sides</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>

<span class="nx">Create</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Beverages</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>

<span class="nx">Create</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Desserts</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>We’ll get back the inserted data, with a unique reference for each that we’ll need to use later to add items:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="na">ref</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">322794748885598273</span><span class="dl">"</span><span class="p">),</span>
    <span class="na">ts</span><span class="p">:</span> <span class="mi">1644099911490000</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sandwiches</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">ref</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">322794748889792577</span><span class="dl">"</span><span class="p">),</span>
    <span class="na">ts</span><span class="p">:</span> <span class="mi">1644099911492000</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sides</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">ref</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">322794748889793601</span><span class="dl">"</span><span class="p">),</span>
    <span class="na">ts</span><span class="p">:</span> <span class="mi">1644099911495000</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Beverages</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">ref</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">322794748889794625</span><span class="dl">"</span><span class="p">),</span>
    <span class="na">ts</span><span class="p">:</span> <span class="mi">1644099911497000</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Desserts</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Next, let’s create a product. Go to the Products collection, and let’s start with a BLT sandwich:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--gCCaa2YT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/u3gclt14as50m7zoar7c.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--gCCaa2YT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/u3gclt14as50m7zoar7c.png" alt="BLT" loading="lazy" width="732" height="316"></a></p>

<p>The name and price look pretty straightforward, but what’s going on with that category? This is what’s known as a reference in Fauna. Essentially, we’re telling the database to refer to the Categories collection and bring back the document with an ID of 322794748885598273.</p>

<p>Using the ID as a reference rather than just adding the category name makes it easy to change category details later on. For example, if I want to change a category name from Beverages to Drinks, I can do so in the Categories collection without having to touch the Products collection at all.</p>

<p>Next, I’m going to go ahead and bulk add a bunch of products to the database. I’ll do this through the Fauna shell, using Fauna’s <a href="https://docs.fauna.com/fauna/current/api/fql/functions/map?utm_source=hashnode&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom">Map</a> and <a href="https://docs.fauna.com/fauna/current/api/fql/functions/lambda?utm_source=DevTo&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom">Lambda</a> functions:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="nb">Map</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">BLT</span><span class="dl">'</span><span class="p">,</span> <span class="mf">6.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748885598273</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Turkey and Swiss</span><span class="dl">'</span><span class="p">,</span> <span class="mf">7.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748885598273</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Egg, Bacon, and Cheese</span><span class="dl">'</span><span class="p">,</span> <span class="mf">4.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748885598273</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Chicken Bacon Ranch</span><span class="dl">'</span><span class="p">,</span> <span class="mf">7.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748885598273</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Grilled Cheese</span><span class="dl">'</span><span class="p">,</span> <span class="mf">5.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748885598273</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Potato Chips</span><span class="dl">'</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889792577</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Mac and Cheese</span><span class="dl">'</span><span class="p">,</span> <span class="mf">3.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889792577</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Potato Salad</span><span class="dl">'</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889792577</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Soup of the Day</span><span class="dl">'</span><span class="p">,</span> <span class="mf">3.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889792577</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Bottled Water</span><span class="dl">'</span><span class="p">,</span> <span class="mf">1.50</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889793601</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Fountain Drink</span><span class="dl">'</span><span class="p">,</span> <span class="mf">1.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889793601</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Coffee</span><span class="dl">'</span><span class="p">,</span> <span class="mf">1.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889793601</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Cold Brew</span><span class="dl">'</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889793601</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Espresso</span><span class="dl">'</span><span class="p">,</span> <span class="mf">3.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889793601</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Blueberry Muffin</span><span class="dl">'</span><span class="p">,</span> <span class="mf">1.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889794625</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Chocolate Chip Muffin</span><span class="dl">'</span><span class="p">,</span> <span class="mf">1.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889794625</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Croissant</span><span class="dl">'</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889794625</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Brownie</span><span class="dl">'</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889794625</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Chocolate Chip Cookie</span><span class="dl">'</span><span class="p">,</span> <span class="p">.</span><span class="mi">99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889794625</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">Slice of Cheesecake</span><span class="dl">'</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">,</span> <span class="dl">'</span><span class="s1">322794748889794625</span><span class="dl">'</span><span class="p">]</span>
    <span class="p">],</span>

    <span class="nx">Lambda</span><span class="p">(</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">price</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">category</span><span class="dl">'</span><span class="p">],</span>
        <span class="nx">Create</span><span class="p">(</span>
            <span class="nx">Collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">Products</span><span class="dl">'</span><span class="p">),</span>
            <span class="p">{</span>
                <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">name</span><span class="p">:</span> <span class="nx">Var</span><span class="p">(</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">),</span>
                    <span class="na">price</span><span class="p">:</span> <span class="nx">Var</span><span class="p">(</span><span class="dl">'</span><span class="s1">price</span><span class="dl">'</span><span class="p">),</span>
                    <span class="na">category</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">Categories</span><span class="dl">'</span><span class="p">),</span> <span class="nx">Var</span><span class="p">(</span><span class="dl">'</span><span class="s1">category</span><span class="dl">'</span><span class="p">))</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>If you’re familiar with the map function in JavaScript, this may look familiar to you. Essentially, I’ve built an array of arrays, and the map function loops through the outer array and passes each inner array to a Lambda function for processing. The Lambda destructures the inner array into its components: the name, price, and category ID. Then I take that data and pass it into a Create function to add a new document to the Products collection. This allowed me to add all of these rows in less than half a second, and it saved me some extra typing.</p>

<p>Next, I’m going to create a few indexes to help with data retrieval. First, we’ll need one for all_categories, as this is how we’ll group our menu in the frontend. Go ahead and run the following in the Fauna console:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="nx">CreateIndex</span><span class="p">({</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">all_categories</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">source</span><span class="p">:</span> <span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span>
    <span class="na">values</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">ref</span><span class="dl">"</span><span class="p">]</span> <span class="p">},</span>
        <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">]</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This will create an index called <code>all_categories</code> that will return each category’s ID and name. I’ve listed the ref (ID) first because we’ll use that to sort.</p>

<p>Next, I’m going to create the main index we’ll actually be using in the application. I’m planning on having the menu of products, grouped by category. So, we’ll want an index where the field to search is the category, and the values returned are the product names and prices. Here’s an example of how to create an Index in the dashboard GUI, rather than the console:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--BBFwGscS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/hwL03D8ZVh8_5zOyfmy3DEa1eP6IldPUH0tqpPXi0jdUw-wYNt8VPl03GpWYfZ45i3wvprn1COnIjSxO39Ezc6CglivfBLUuwidoIS98311glRrB539zd1lOysn2S3rhT1VF9TrU" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--BBFwGscS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/hwL03D8ZVh8_5zOyfmy3DEa1eP6IldPUH0tqpPXi0jdUw-wYNt8VPl03GpWYfZ45i3wvprn1COnIjSxO39Ezc6CglivfBLUuwidoIS98311glRrB539zd1lOysn2S3rhT1VF9TrU" alt="https://lh4.googleusercontent.com/hwL03D8ZVh8_5zOyfmy3DEa1eP6IldPUH0tqpPXi0jdUw-wYNt8VPl03GpWYfZ45i3wvprn1COnIjSxO39Ezc6CglivfBLUuwidoIS98311glRrB539zd1lOysn2S3rhT1VF9TrU" loading="lazy" width="490" height="726"></a></p>

<p>Now, when I go back to that index, I can use the FQL option to search it. The code snippet gets cut off in the screenshot, but it’s just <code>Ref(Collection(‘Categories’), ‘322794748885598273’)</code>.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--fRPWPvhG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh6.googleusercontent.com/znKhPZzLBmFE7LOfPuyJLt5eqtbXZrAnMfSKxGuLvr7roYoA9Jojouyts6d61YQQA_mJC2CnJKnSxBZtUaQnR-kd10hWP2ZA_1DvC2l4ll74g8c_sGq_60YPaB2MAAatKKnLhe1u" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fRPWPvhG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh6.googleusercontent.com/znKhPZzLBmFE7LOfPuyJLt5eqtbXZrAnMfSKxGuLvr7roYoA9Jojouyts6d61YQQA_mJC2CnJKnSxBZtUaQnR-kd10hWP2ZA_1DvC2l4ll74g8c_sGq_60YPaB2MAAatKKnLhe1u" alt="https://lh6.googleusercontent.com/znKhPZzLBmFE7LOfPuyJLt5eqtbXZrAnMfSKxGuLvr7roYoA9Jojouyts6d61YQQA_mJC2CnJKnSxBZtUaQnR-kd10hWP2ZA_1DvC2l4ll74g8c_sGq_60YPaB2MAAatKKnLhe1u" loading="lazy" width="880" height="471"></a></p>

<p>That will bring back the name and price for each item in category 322794748885598273, which is Sandwiches.</p>

<h2>
  <a name="security" href="#security">
  </a>
  Security
</h2>

<p>There’s one other thing we need to do on the database side before we move over to building our application. We’ll need to create a role in Fauna that we can use for fetching data. On the security tab in the dashboard, select Roles, and click New Custom Role. I used the title <code>Svelte</code> here, but you can pick whatever you’d like. Then, add all three of our Collections and our Indexes using the dropdowns. Give the Products and Categories the Read permission by checking the box in that column, and give Orders the Create permission. Then, give both Indexes the Read permission.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--X8DSqs0E--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/RwiWVrI08CmN6LDVVH99OCkuxYevZTZh2a5BtfswjnUrt0KuKQNzOkp6_hq6Dta6Wlo3tD6j0WmNPYLaVtRDl2LemrPZwbOPgfVwhw_uXgGLEqouXUpPTjQNJOD4w7ziK2orf4Hh" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--X8DSqs0E--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/RwiWVrI08CmN6LDVVH99OCkuxYevZTZh2a5BtfswjnUrt0KuKQNzOkp6_hq6Dta6Wlo3tD6j0WmNPYLaVtRDl2LemrPZwbOPgfVwhw_uXgGLEqouXUpPTjQNJOD4w7ziK2orf4Hh" alt="https://lh5.googleusercontent.com/RwiWVrI08CmN6LDVVH99OCkuxYevZTZh2a5BtfswjnUrt0KuKQNzOkp6_hq6Dta6Wlo3tD6j0WmNPYLaVtRDl2LemrPZwbOPgfVwhw_uXgGLEqouXUpPTjQNJOD4w7ziK2orf4Hh" loading="lazy" width="880" height="260"></a></p>

<p>Here we’re telling Fauna that we want read access to our products and categories to populate the menu on the frontend. We also want to be able to write new orders to the orders collection when an order is submitted. Finally, we want read-only access to our indexes. We don’t want to give this role access to do anything nefarious, like create new products in our Products collection, or to delete Categories, so it’s important to be very choosy here.</p>

<p>Once that’s done, go back to the Security tab, select Keys, and create a new key using the Svelte role:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--9qkVxgQP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/qJU1GNXtr_viti9lx9zVvtCunxIu3hvShJHQnjUNuv-WLU_9hfly-iR9Yxt9QpvANTXFk1OhLonJdxFNQrZqZB3sH3Uueq8GYVS8iA-YyV64itoB5VlNtv2czBNGayXCiCjypTXA" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--9qkVxgQP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/qJU1GNXtr_viti9lx9zVvtCunxIu3hvShJHQnjUNuv-WLU_9hfly-iR9Yxt9QpvANTXFk1OhLonJdxFNQrZqZB3sH3Uueq8GYVS8iA-YyV64itoB5VlNtv2czBNGayXCiCjypTXA" alt="https://lh4.googleusercontent.com/qJU1GNXtr_viti9lx9zVvtCunxIu3hvShJHQnjUNuv-WLU_9hfly-iR9Yxt9QpvANTXFk1OhLonJdxFNQrZqZB3sH3Uueq8GYVS8iA-YyV64itoB5VlNtv2czBNGayXCiCjypTXA" loading="lazy" width="473" height="396"></a></p>

<p>You’ll get the key back when you submit it; keep it somewhere safe because you will only see it this one time.</p>

<h2>
  <a name="building-the-frontend" href="#building-the-frontend">
  </a>
  Building the Frontend
</h2>

<p>We now have enough set up on the database to begin working on our Svelte application. In Visual Studio Code, I’ve opened a folder I created called SvelteBakery, and then I ran the following terminal commands to spin up my project:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="nx">npx</span> <span class="nx">degit</span> <span class="nx">sveltejs</span><span class="o">/</span><span class="nx">template</span> <span class="p">.</span>
<span class="nx">npm</span> <span class="nx">install</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Inside of the src folder, I’ve also created a components sub-folder and a stores sub-folder. The folder structure should look like this now:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Zs6Ng3At--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/OXsCrrwD2K2hROqdh_W3EQiQf9OLILElwIBAfMoEx6DrFEhlDAqNCUegUICQWWrPs1ozXk91mTNlgrAhGjLoDjjGFFI6uG1qFTafJIeGTKi6D7eq0aOHumbBEBp0zH3J9UBqN0ju" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Zs6Ng3At--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/OXsCrrwD2K2hROqdh_W3EQiQf9OLILElwIBAfMoEx6DrFEhlDAqNCUegUICQWWrPs1ozXk91mTNlgrAhGjLoDjjGFFI6uG1qFTafJIeGTKi6D7eq0aOHumbBEBp0zH3J9UBqN0ju" alt="https://lh5.googleusercontent.com/OXsCrrwD2K2hROqdh_W3EQiQf9OLILElwIBAfMoEx6DrFEhlDAqNCUegUICQWWrPs1ozXk91mTNlgrAhGjLoDjjGFFI6uG1qFTafJIeGTKi6D7eq0aOHumbBEBp0zH3J9UBqN0ju" loading="lazy" width="305" height="308"></a></p>

<p>Let’s begin with the stores folder. Here, we’re going to create a file called <code>stores.js</code> and populate it with the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">writable</span> <span class="p">}</span> <span class="k">from</span> <span class="err">‘</span><span class="nx">svelte</span><span class="o">/</span><span class="nx">store</span><span class="err">’</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">shoppingCart</span> <span class="o">=</span> <span class="nx">writable</span><span class="p">([])</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Svelte makes it very easy to share data across your components with these built-in stores. If you’re coming from another framework, such as React, you may be used to using something like Redux for state management, but Svelte includes this out of the box. We’ll use that store later in the tutorial to track items in our cart.</p>

<p>I’m also creating a store to make it easy to share our Fauna client across components. To do this, I’ve created a file called <code>fauna.js</code> inside the same stores folder and populated it with this similar looking code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">writable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">svelte/store</span><span class="dl">'</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">fauna</span> <span class="o">=</span> <span class="nx">writable</span><span class="p">({})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The only real difference is that the shoppingCart was initialized with an empty array, while the fauna store was initialized with an empty object.</p>

<p>I’m going to use that in our main App.svelte file, which now looks like the following:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">></span>
    import ProductMenu from "./components/ProductMenu.svelte";
    import ShoppingCart from "./components/ShoppingCart.svelte";
    import Nav from "./components/Nav.svelte";
    import <span class="si">{</span> <span class="nx">fauna</span> <span class="si">}</span> from './stores/fauna';

    let currentPage = "menu";

    function connectToFauna() <span class="si">{</span>
        <span class="nx">connectToFauna</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{};</span>
        <span class="nx">fauna</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="na">client</span><span class="p">:</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">faunadb</span><span class="p">.</span><span class="nx">Client</span><span class="p">({</span> <span class="na">domain</span><span class="p">:</span> <span class="dl">'</span><span class="s1">db.us.fauna.com</span><span class="dl">'</span><span class="p">,</span> <span class="na">scheme</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">,</span> <span class="na">secret</span><span class="p">:</span> <span class="dl">"</span><span class="s2">INSERT_SECRET_HERE</span><span class="dl">"</span> <span class="p">}),</span>
                <span class="na">q</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">faunadb</span><span class="p">.</span><span class="nx">query</span>
            <span class="p">}</span>
        <span class="p">)</span>
    <span class="si">}</span>

    function handlePageChange(e) <span class="si">{</span>
        <span class="nx">currentPage</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">newPage</span><span class="p">;</span>
    <span class="si">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">main</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nc">Nav</span> <span class="na">on</span><span class="err">:</span><span class="na">changepage</span><span class="p">=</span><span class="si">{</span><span class="nx">handlePageChange</span><span class="si">}</span> <span class="p">/></span>
    <span class="si">{</span><span class="err">#</span><span class="k">if</span> <span class="nx">currentPage</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">menu</span><span class="dl">"</span><span class="si">}</span>
        <span class="p">&lt;</span><span class="nc">ProductMenu</span> <span class="p">/></span>
    <span class="si">{</span><span class="p">:</span><span class="k">else</span> <span class="k">if</span> <span class="nx">currentPage</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">cart</span><span class="dl">"</span><span class="si">}</span>
        <span class="p">&lt;</span><span class="nc">ShoppingCart</span> <span class="p">/></span>
    <span class="si">{</span><span class="sr">/if</span><span class="err">}
</span><span class="o">&lt;</span><span class="sr">/main</span><span class="err">>
</span>
<span class="o">&lt;</span><span class="nx">svelte</span><span class="p">:</span><span class="nx">head</span><span class="o">></span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="p">=</span><span class="s">"//cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb-min.js"</span> <span class="na">on</span><span class="err">:</span><span class="na">load</span><span class="p">=</span><span class="si">{</span><span class="nx">connectToFauna</span><span class="si">}</span><span class="p">>&lt;/</span><span class="nt">script</span><span class="p">></span>
<span class="p">&lt;</span><span class="err">/</span><span class="na">svelte</span><span class="err">:</span><span class="na">head</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">style</span><span class="p">></span>
    main <span class="si">{</span>
        <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>
        <span class="nl">padding</span><span class="p">:</span> <span class="mi">1</span><span class="nx">em</span><span class="p">;</span>
        <span class="nl">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>
    <span class="si">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>A few things to note here:</p>

<ul>
<li>At the top, I’ve got four imports: <code>ProductMenu</code>, <code>ShoppingCart</code>, and <code>Nav</code> (three Svelte components which we’ll create below), and our Fauna client store that we created above.</li>
<li>I’m using a <code>svelte:head</code> block down below. This allows for code to be injected in the head section of the compiled HTML. In this case, I’ve opted to use the Fauna JavaScript driver from a CDN, rather than attempting to install from npm and deal with a polyfill.</li>
<li>I have an <code>onload</code> parameter, so that once the Fauna driver is loaded, the <code>connectToFauna</code> function will run and instantiate the connection. Credit to the Svelte REPL I found <a href="https://svelte.dev/repl/c56ca90d0b3f4e888ad9a71263decbff?version=3.31.0">here</a> for this function.</li>
<li>One issue I ran into here was the domain. Depending on the region your Fauna database is in, you will need to customize this accordingly — each region group has its own subdomain that you <em>must</em> use, or else you’ll be confused why you can’t access any of your data.</li>
<li>In addition to the domain, you’ll need to insert the secret key generated earlier for the Svelte database role. Fill that in where it says “INSERT_SECRET_HERE”.</li>
<li>I have a <code>handlePageChange</code> function and an if block in the actual HTML to determine whether to display the menu or shopping cart. I’ll have more on that below.</li>
</ul>

<p>Next, let’s jump over to the components folder and start scaffolding our layout. Our application will be pretty simple, with a navigation bar at the top to switch between the menu and the shopping cart/checkout process. Inside of the components folder, let’s go ahead and create the following blank files:</p>

<ul>
<li><code>Nav.svelte</code></li>
<li><code>ProductMenu.svelte</code></li>
<li><code>MenuSection.svelte</code></li>
<li><code>MenuItem.svelte</code></li>
<li><code>ShoppingCart.svelte</code></li>
</ul>

<p>We’ll begin with the Nav component, as this will allow us to jump back and forth between the product menu and shopping cart. Here’s the full code for Nav:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">></span>
    import <span class="si">{</span> <span class="nx">shoppingCart</span> <span class="si">}</span> from '../stores/shoppingCart';
    import <span class="si">{</span> <span class="nx">createEventDispatcher</span> <span class="si">}</span> from 'svelte';

    const dispatch = createEventDispatcher();

    function changePage(newPage) <span class="si">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">newPage</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">menu</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">$shoppingCart</span><span class="p">.</span><span class="nx">length</span> <span class="o">></span> <span class="mi">0</span><span class="p">)</span>
            <span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">changepage</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">newPage</span><span class="p">:</span> <span class="nx">newPage</span>
            <span class="p">});</span>
    <span class="si">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">nav</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">></span>Svelte Bakery Demo<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span> <span class="na">on</span><span class="err">:</span><span class="na">click</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=></span> <span class="nx">changePage</span><span class="p">(</span><span class="dl">"</span><span class="s2">menu</span><span class="dl">"</span><span class="p">)</span><span class="si">}</span><span class="p">></span>Menu<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span> <span class="na">on</span><span class="err">:</span><span class="na">click</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=></span> <span class="nx">changePage</span><span class="p">(</span><span class="dl">"</span><span class="s2">cart</span><span class="dl">"</span><span class="p">)</span><span class="si">}</span><span class="p">></span>Cart
            <span class="si">{</span><span class="err">#</span><span class="k">if</span> <span class="nx">$shoppingCart</span><span class="p">.</span><span class="nx">length</span> <span class="o">></span> <span class="mi">0</span><span class="si">}</span>(<span class="si">{</span><span class="nx">$shoppingCart</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span> items)<span class="si">{</span><span class="sr">/if</span><span class="err">}
</span>        <span class="o">&lt;</span><span class="sr">/a</span><span class="err">>
</span><span class="o">&lt;</span><span class="sr">/nav</span><span class="err">>
</span>
<span class="o">&lt;</span><span class="nx">style</span><span class="o">></span>
    <span class="nx">nav</span> <span class="p">{</span>
        <span class="nl">display</span><span class="p">:</span> <span class="nx">flex</span><span class="p">;</span>
        <span class="nl">color</span><span class="p">:</span> <span class="err">#</span><span class="nx">FFF</span><span class="p">;</span>
        <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="p">:</span> <span class="nx">rgb</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">46</span><span class="p">);</span>
        <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="p">:</span> <span class="nx">column</span><span class="p">;</span>
        <span class="nx">align</span><span class="o">-</span><span class="nx">items</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">@</span><span class="nd">media</span><span class="p">(</span><span class="nx">min</span><span class="o">-</span><span class="nx">width</span><span class="p">:</span> <span class="mi">768</span><span class="nx">px</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">nav</span> <span class="p">{</span>
            <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="p">:</span> <span class="nx">row</span><span class="p">;</span>
            <span class="nl">gap</span><span class="p">:</span> <span class="mi">3</span><span class="nx">rem</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="si">}</span>

    h1 <span class="si">{</span>
        <span class="nx">flex</span><span class="o">-</span><span class="nx">basis</span><span class="p">:</span> <span class="mi">50</span><span class="o">%</span><span class="p">;</span>
    <span class="si">}</span>

    a <span class="si">{</span>
        <span class="nx">text</span><span class="o">-</span><span class="nx">decoration</span><span class="p">:</span> <span class="nx">none</span><span class="p">;</span>
        <span class="nl">color</span><span class="p">:</span> <span class="err">#</span><span class="nx">FFF</span><span class="p">;</span>
        <span class="nx">font</span><span class="o">-</span><span class="nx">weight</span><span class="p">:</span> <span class="nx">bold</span><span class="p">;</span>
    <span class="si">}</span>

    a:hover <span class="si">{</span>
        <span class="nx">text</span><span class="o">-</span><span class="nx">decoration</span><span class="p">:</span> <span class="nx">underline</span><span class="p">;</span>
    <span class="si">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In the script section, I’m using <code>createEventDispatcher</code> to dispatch a custom event to the parent (App.svelte). When clicking on one of the links, <code>changePage</code> is called, and that function will send up an event to the main app with the new page name. Recall this code above from <code>App.svelte</code>, when we placed our <code>Nav</code> component in the HTML:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nc">Nav</span> <span class="na">on</span><span class="err">:</span><span class="na">changepage</span><span class="p">=</span><span class="si">{</span><span class="nx">handlePageChange</span><span class="si">}</span> <span class="p">/></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>You can see that I’ve set it up to call the <code>handlePageChange</code> function in <code>App.svelte</code> when that <code>changepage</code> event is dispatched. That will update the <code>currentPage</code> variable in <code>App.svelte</code>, which drives whether the end user sees the menu or cart.</p>

<p>In addition to the functionality around changing pages, you can also see another if block in <code>Nav.svelte</code>. I’ve imported my shopping cart store and am using <code>shoppingCart.length</code> in a couple places to determine whether to show the number of items in the cart in the navbar, as well as whether the shopping cart link should even do anything — we won’t direct the user to the cart if it is currently empty. Store variables must be prefixed with a dollar sign in order to access them, but otherwise they work just like regular variables for reading, which makes it very easy.</p>

<p>Next, we’ll get started on the actual menu of products. The ProductMenu component will be our wrapper for the menu, and it’ll contain a MenuSection component for each category that holds our items. Inside each MenuSection will be individual MenuItem components for each product. Let’s start at the highest level, ProductMenu, and work our way down:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">></span>
    import MenuSection from './MenuSection.svelte';
    import <span class="si">{</span> <span class="nx">fauna</span> <span class="si">}</span> from '../stores/fauna';

    let loaded = false;
    let categories = [];

    $: <span class="si">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">$fauna</span><span class="p">.</span><span class="nx">client</span> <span class="o">&&</span> <span class="o">!</span><span class="nx">loaded</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">loaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">$fauna</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
                <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Paginate</span><span class="p">(</span>
                    <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Match</span><span class="p">(</span>
                        <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Index</span><span class="p">(</span><span class="dl">'</span><span class="s1">all_categories</span><span class="dl">'</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
                <span class="nx">categories</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="si">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">section</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">></span>Menu<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">></span>
    <span class="si">{</span><span class="err">#</span><span class="nx">each</span> <span class="nx">categories</span> <span class="k">as</span> <span class="nx">category</span><span class="si">}</span>
        <span class="p">&lt;</span><span class="nc">MenuSection</span> <span class="si">{</span><span class="nx">category</span><span class="si">}</span> <span class="p">/></span>
    <span class="si">{</span><span class="sr">/each</span><span class="err">}
</span><span class="o">&lt;</span><span class="sr">/section</span><span class="err">>
</span></code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here in <code>ProductMenu.svelte</code>, I’m importing our Fauna client from its store, as well as the MenuSection component which will be the next level down. Then, I’ve instantiated a couple of variables, one to hold the load state and one to hold the category list. I also checked the load state because I don’t want to attempt to query Fauna until the client is ready to go.</p>

<p>I’m then using a reactive block (the <code>$:</code> in Svelte indicates a code block that will run when something inside of it has changed, in this case when the <code>$fauna.client</code> store has changed). This block will query the <code>all_categories</code> index and will bring back the <code>id</code> and <code>name</code> of each category. I’m populating the categories array with this returned data. Down below, I’m using a Svelte each block to iterate through the categories array. Each category will spawn a MenuSection component with the category passed as a parameter to it. Let’s look at the MenuSection next.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">></span>
    import MenuItem from './MenuItem.svelte';
    import <span class="si">{</span> <span class="nx">onMount</span> <span class="si">}</span> from 'svelte';
    import <span class="si">{</span> <span class="nx">fauna</span> <span class="si">}</span> from '../stores/fauna';

    export let category;

    let [ ref, name ] = category;
    let items = [];

    onMount(async () => <span class="si">{</span>
        <span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">$fauna</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
            <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Paginate</span><span class="p">(</span>
                <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Match</span><span class="p">(</span>
                    <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Index</span><span class="p">(</span><span class="dl">'</span><span class="s1">product_by_category</span><span class="dl">'</span><span class="p">),</span> 
                    <span class="nx">ref</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">);</span>
        <span class="nx">items</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="si">}</span>)
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">div</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">></span><span class="si">{</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="p">=</span><span class="s">"items"</span><span class="p">></span>
        <span class="si">{</span><span class="err">#</span><span class="nx">each</span> <span class="nx">items</span> <span class="k">as</span> <span class="nx">item</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">MenuItem</span> <span class="si">{</span><span class="nx">item</span><span class="si">}</span> <span class="p">/></span>
        <span class="si">{</span><span class="sr">/each</span><span class="err">}
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">>
</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">>
</span>
<span class="o">&lt;</span><span class="nx">style</span><span class="o">></span>
    <span class="p">.</span><span class="nx">items</span> <span class="p">{</span>
        <span class="nl">display</span><span class="p">:</span> <span class="nx">flex</span><span class="p">;</span>
        <span class="nl">gap</span><span class="p">:</span> <span class="mi">2</span><span class="nx">rem</span><span class="p">;</span>
        <span class="nx">justify</span><span class="o">-</span><span class="nx">content</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>
        <span class="nx">flex</span><span class="o">-</span><span class="nx">wrap</span><span class="p">:</span> <span class="nx">wrap</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">&lt;</span><span class="err">/</span><span class="na">style</span><span class="p">></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This code gives us one thing we haven’t seen yet in our previous Svelte components: the <code>export let</code> statement. Export let defines a parameter that is passed into this component by its parent. In this case, we’ve defined category as something that will be passed in. You may have noticed that the MenuSection component was inserted in the ProductMenu with a <code>&lt;MenuSection {category} /></code>. Because the variable passed in is named category, and the component is expecting one named category, I was able to enclose category in braces and leave it at that. If the variable had a different name in <code>ProductMenu</code>, say <code>c</code> for instance, I would have had to type <code>&lt;MenuSection category={c} /></code> instead. This nice little bit of syntactic sugar is Svelte-specific.</p>

<p>Back to the <code>MenuSection</code> component — we’re also using <code>onMount</code> here. This is one of <a href="https://svelte.dev/tutorial/onmount">Svelte’s lifecycle methods</a> and allows us to run code when the component has been mounted in the DOM. In contrast to <code>ProductMenu</code>, we know that we’ll have an instantiated Fauna client by the time the <code>MenuSection</code> is mounted, so we don’t have to use the reactive statement workaround we created earlier. In this case, we can cleanly call the Fauna client inside <code>onMount</code>.</p>

<p>I’m using the <code>product_by_category</code> index here, which lets us search by <code>category_id</code>. Since we passed that data into the component along with the category name, we can query to get all of the products in a particular category. Then, I’m using another each block to iterate through and send each one to a <code>MenuItem</code> component. Take a look at the last piece of the menu, <code>MenuItem</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">></span>
    import <span class="si">{</span> <span class="nx">shoppingCart</span> <span class="si">}</span> from "../stores/shoppingCart";

    export let item;

    let [ name, price ] = item;

    function addToCart() <span class="si">{</span>
        <span class="nx">shoppingCart</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">n</span> <span class="o">=></span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">[</span> <span class="p">...</span><span class="nx">n</span><span class="p">,</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="nx">name</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="nx">price</span><span class="p">}];</span>
        <span class="p">});</span>
    <span class="si">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">div</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">h4</span><span class="p">></span><span class="si">{</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">h4</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">></span> $<span class="si">{</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">strong</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">on</span><span class="err">:</span><span class="na">click</span><span class="p">=</span><span class="si">{</span><span class="nx">addToCart</span><span class="si">}</span><span class="p">></span>Add to cart<span class="p">&lt;/</span><span class="nt">button</span><span class="p">></span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">style</span><span class="p">></span>
    div <span class="si">{</span>
        <span class="nx">display</span><span class="p">:</span> <span class="nx">flex</span><span class="p">;</span>
        <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="p">:</span> <span class="nx">column</span><span class="p">;</span>
        <span class="nl">width</span><span class="p">:</span> <span class="mi">90</span><span class="o">%</span><span class="p">;</span>
        <span class="nl">border</span><span class="p">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="mi">000</span><span class="p">;</span>
        <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="p">:</span> <span class="mi">5</span><span class="nx">px</span><span class="p">;</span>
    <span class="si">}</span>

    @media(min-width: 768px) <span class="si">{</span>
        <span class="nx">div</span> <span class="p">{</span>
            <span class="nl">width</span><span class="p">:</span> <span class="mi">15</span><span class="o">%</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="si">}</span>

    button <span class="si">{</span>
        <span class="nx">width</span><span class="p">:</span> <span class="nx">fit</span><span class="o">-</span><span class="nx">content</span><span class="p">;</span>
        <span class="nl">margin</span><span class="p">:</span> <span class="mi">1</span><span class="nx">rem</span> <span class="nx">auto</span><span class="p">;</span>
    <span class="si">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In the script section, I’ve imported the <code>shoppingCart</code> store, as we will write items to the cart here as they are added. I also once again have an <code>export let</code> declaration, as the specific item object will get passed in from <code>MenuSection</code>. Finally, I define the <code>addToCart</code> function, which will add the item to the <code>shoppingCart</code> store using the <code>shoppingCart.update</code> method.</p>

<p>The HTML and CSS are pretty straightforward; I’ll just call specific attention to the <code>on:click</code> declared on the button. This is Svelte’s syntax for putting an event handler on an element. Since the item name and price are scoped to the component, I don’t have to worry about passing parameters to the function, as those are already known.</p>

<p>We’re getting close to the end! Let’s now take a look at the cart and checkout processes. Here’s <code>ShoppingCart.svelte</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">></span>
import <span class="si">{</span> <span class="nx">shoppingCart</span> <span class="si">}</span> from "../stores/shoppingCart";
import <span class="si">{</span> <span class="nx">fauna</span> <span class="si">}</span> from '../stores/fauna';

const reducer = (previousValue, currentValue) => previousValue + parseFloat(currentValue.price);
let total;
let customerName;
let confirmed = false;

$: total = $shoppingCart.reduce(reducer, 0);

function removeItem(idx) <span class="si">{</span>
<span class="nx">shoppingCart</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">n</span> <span class="o">=></span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="p">[...</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)];</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">===</span> <span class="nx">n</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="p">[...</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">n</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
<span class="k">return</span> <span class="p">[...</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">idx</span><span class="p">),</span> <span class="p">...</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
<span class="p">})</span>
<span class="si">}</span>

function submitOrder() <span class="si">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">customerName</span><span class="p">);</span>

<span class="nx">$fauna</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
<span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Create</span><span class="p">(</span>
<span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">Orders</span><span class="dl">'</span><span class="p">),</span>
<span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">customerName</span><span class="p">:</span> <span class="nx">customerName</span><span class="p">,</span> <span class="na">details</span><span class="p">:</span> <span class="nx">$shoppingCart</span><span class="p">,</span> <span class="na">total</span><span class="p">:</span> <span class="nx">total</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">)</span>
<span class="p">).</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=></span> <span class="p">{</span>
<span class="nx">confirmed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">})</span>
<span class="si">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">section</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">></span>Shopping Cart<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">></span>

    <span class="p">&lt;</span><span class="nt">table</span><span class="p">></span>
        <span class="p">&lt;</span><span class="nt">thead</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">></span>Item<span class="p">&lt;/</span><span class="nt">th</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">></span>Price<span class="p">&lt;/</span><span class="nt">th</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">>&lt;/</span><span class="nt">th</span><span class="p">></span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">></span>
        <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">></span>

        <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">></span>
            <span class="si">{</span><span class="err">#</span><span class="nx">each</span> <span class="nx">$shoppingCart</span> <span class="k">as</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">idx</span><span class="si">}</span>
                <span class="p">&lt;</span><span class="nt">tr</span><span class="p">></span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">></span><span class="si">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">></span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">></span>$<span class="si">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">></span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">></span>
                        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">on</span><span class="err">:</span><span class="na">click</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=></span> <span class="nx">removeItem</span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span><span class="si">}</span><span class="p">></span>Remove<span class="p">&lt;/</span><span class="nt">button</span><span class="p">></span>
                    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">></span>
                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">></span>
            <span class="si">{</span><span class="sr">/each</span><span class="err">}
</span>        <span class="o">&lt;</span><span class="sr">/tbody</span><span class="err">>
</span>
        <span class="o">&lt;</span><span class="nx">tfoot</span><span class="o">></span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">></span>Total<span class="p">&lt;/</span><span class="nt">td</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">></span>$<span class="si">{</span><span class="nx">total</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">></span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">>&lt;/</span><span class="nt">td</span><span class="p">></span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">></span>
        <span class="p">&lt;</span><span class="err">/</span><span class="na">tfoot</span><span class="p">></span>
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">></span>

    <span class="p">{</span><span class="err">#</span><span class="k">if</span> <span class="o">!</span><span class="nx">confirmed</span><span class="p">}</span>
        <span class="p">&lt;</span><span class="nt">form</span> <span class="na">on</span><span class="err">:</span><span class="na">submit</span><span class="err">|</span><span class="na">preventDefault</span><span class="p">=</span><span class="si">{</span><span class="nx">submitOrder</span><span class="si">}</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="p">=</span><span class="s">"name"</span><span class="p">></span>Name: <span class="p">&lt;/</span><span class="nt">label</span><span class="p">></span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="p">=</span><span class="s">"text"</span> <span class="na">id</span><span class="p">=</span><span class="s">"name"</span> <span class="na">bind</span><span class="err">:</span><span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">customerName</span><span class="si">}</span> <span class="p">/></span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="p">=</span><span class="s">"submit"</span> <span class="p">/></span>
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">></span>
    <span class="p">{:</span><span class="k">else</span><span class="p">}</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">></span>Thank you very much for your order!<span class="p">&lt;/</span><span class="nt">div</span><span class="p">></span>
    <span class="p">{</span><span class="o">/</span><span class="k">if</span><span class="p">}</span>
<span class="p">&lt;</span><span class="err">/</span><span class="na">section</span><span class="p">></span>

<span class="p">&lt;</span><span class="nt">style</span><span class="p">></span>
    section, table <span class="si">{</span>
        <span class="nx">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>
    <span class="si">}</span>

    table <span class="si">{</span>
        <span class="nx">border</span><span class="p">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="mi">000</span><span class="p">;</span>
        <span class="nx">border</span><span class="o">-</span><span class="nx">collapse</span><span class="p">:</span> <span class="nx">collapse</span><span class="p">;</span>
    <span class="si">}</span>

    td, th <span class="si">{</span>
        <span class="nx">padding</span><span class="p">:</span> <span class="mi">1</span><span class="nx">rem</span><span class="p">;</span>
    <span class="si">}</span>

    tr:nth-child(even) <span class="si">{</span>
        <span class="nx">background</span><span class="p">:</span> <span class="nx">rgb</span><span class="p">(</span><span class="mi">172</span><span class="p">,</span> <span class="mi">170</span><span class="p">,</span> <span class="mi">170</span><span class="p">);</span>
    <span class="si">}</span>

    thead, tfoot <span class="si">{</span>
        <span class="nx">font</span><span class="o">-</span><span class="nx">weight</span><span class="p">:</span> <span class="nx">bold</span><span class="p">;</span>
    <span class="si">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>We’re importing both of our stores this time, as we’ll need <code>shoppingCart</code> to read the data we’ve put in the cart, and we’ll need our Fauna driver to create a new document in the Orders collection. I’m using a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">reducer</a> to sum the prices for all items in the cart and give me a single grand total value.</p>

<p>I’ve built a table in the HTML section that will pull in my shopping cart details. Each row also has a button that calls a <code>removeItem</code> function, which will delete that item from the cart. In contrast to the <code>each</code> blocks I’ve used earlier, I also used an index on this one, as that allows me to track the index for each row in the table, so that I can use that value to remove the right record from my <code>shoppingCart</code> store.</p>

<p>Finally, I have a conditional section that will either show an ordering form if the order has not been submitted, or a confirmation text if it has. Submitting the form calls <code>submitOrder</code>, which will use the <code>Create</code> function in Fauna to add a new document to our Orders collection (recall that the role we made earlier allows this). I’m using Svelte’s form binding to bind the name input to the customerName variable, which makes working with forms extremely smooth.</p>

<p>After a test run of the shopping cart, here’s an example of final data in the Orders collection:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight jsx"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">ref</span><span class="dl">"</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Orders</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">321462934244950082</span><span class="dl">"</span><span class="p">),</span>
    <span class="dl">"</span><span class="s2">ts</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1642829794070000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">customerName</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Alexander Popoutsis</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">details</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Potato Chips</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">1.25</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Potato Salad</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">2.99</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Soup of the Day</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">3.99</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="dl">"</span><span class="s2">total</span><span class="dl">"</span><span class="p">:</span> <span class="mf">8.23</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h2>
  <a name="next-steps" href="#next-steps">
  </a>
  Next Steps
</h2>

<p>If you’d like to see the full code in one place, it’s <a href="https://github.com/apop880/SvelteBakery">on GitHub</a>.</p>

<p>This is, of course, a basic demonstration, and there are many more things that could be done to make it more advanced (for example, handling item quantities and improving the styling). In addition, since this is a fully client-side app, the Fauna key is visible to end users, and security is especially important. To add a server-side component, you could use SvelteKit and hide the Fauna pieces behind a SvelteKit API endpoint.</p>

<p>You now have everything you need to get started with a basic app, using the fantastic combination of Fauna and Svelte. If you haven’t already, <a href="https://dashboard.fauna.com/accounts/register?utm_source=hashnode&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom">click here</a> to get signed up with a Fauna account. And if you get stuck at all, the <a href="https://community.fauna.com/?utm_source=DevTo&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom">Fauna community</a> is a fantastic resource as well.</p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/fauna_admin/building-a-svelte-ecom-site-i02" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(s,a,n,p,t){return a.type_of="article",a.id=1024135,a.title="Building a Svelte ecom site",a.description="This article was contributed by Alex Popoutsis.  Today, I’ll be looking at how we can combine two...",a.readable_publish_date="Mar 16",a.slug="building-a-svelte-ecom-site-i02",a.path="/fauna_admin/building-a-svelte-ecom-site-i02",a.url=n,a.comments_count=1,a.public_reactions_count=18,a.collection_id=s,a.published_timestamp=p,a.positive_reactions_count=18,a.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--s4a0GHXH--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4gph92ftc621pqx9phva.png",a.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--8pVlrkK8--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4gph92ftc621pqx9phva.png",a.canonical_url=n,a.created_at="2022-03-15T22:51:53Z",a.edited_at="2022-03-16T16:19:49Z",a.crossposted_at=s,a.published_at=p,a.last_comment_at="2022-03-16T19:17:59Z",a.reading_time_minutes=16,a.tag_list="svelte, tutorial, fauna, webdev",a.tags=["svelte","tutorial",t,"webdev"],a.body_html='<p><em>This article was contributed by <a href="https://twitter.com/apopoutsis?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor">Alex Popoutsis</a>.</em></p>\n\n<p>Today, I’ll be looking at how we can combine two newer, fast-growing web technologies to get a web application rapidly built and set up to scale infinitely.</p>\n\n<p>Those two technologies are Svelte and Fauna. Svelte is one of the newest technologies in the world of frontend development, building on what React, Angular, Vue and others before have done but also simplifying things quite a bit. If you’re new to Svelte, <a href="https://svelte.dev/tutorial/basics">I recommend starting with their tutorial here</a>. Fauna is a modern, document-based, serverless database that runs in the cloud and offers a generous free tier to get you started. Here’s <a href="https://docs.fauna.com/fauna/current/?utm_source=DevTo&amp;utm_medium=referral&amp;utm_campaign=Alex_Popoutsis_Svelte_Ecom">a link to Fauna’s documentation</a> if you need to get acquainted with it before starting into this tutorial.</p>\n\n<p>This tutorial will cover all the basics you need to create a small eCommerce site using Fauna and Svelte. You’ll learn:</p>\n\n<ul>\n<li>How to create a Fauna database and populate it with collections, indexes, and documents</li>\n<li>The basic principles of Fauna database design and the Fauna Query Language (FQL)</li>\n<li>How to connect a Svelte application to Fauna and display data</li>\n<li>How to implement a basic shopping cart for a Svelte eCommerce application</li>\n<li>How to write data back to Fauna from our Svelte application</li>\n</ul>\n\n<h2>\n  <a name="getting-started" href="#getting-started">\n  </a>\n  Getting Started\n</h2>\n\n<p>Go to <a href="https://dashboard.fauna.com/accounts/register?utm_source=DevTo&amp;utm_medium=referral&amp;utm_campaign=Alex_Popoutsis_Svelte_Ecom">fauna.com</a> and register for a new account. In the dashboard, click Create Database. Our eCommerce site is going to be for a sample bakery, so I’ve named my database SvelteBakery and put it under the US region group:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--WfmBj57w--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/zvAZTd4oqzl82ftDQgEHiuLTksge9g05M8NoYDWzYLxOE3IyztRlo4HRWZwbU1DokZAJnrsFsjf47SL1Hcr6ZpIml--2hCydsE-_rZf33rJHNf6SNbXWoZeKwFYMXxXDo3NgNJSn" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--WfmBj57w--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/zvAZTd4oqzl82ftDQgEHiuLTksge9g05M8NoYDWzYLxOE3IyztRlo4HRWZwbU1DokZAJnrsFsjf47SL1Hcr6ZpIml--2hCydsE-_rZf33rJHNf6SNbXWoZeKwFYMXxXDo3NgNJSn" alt="https://lh3.googleusercontent.com/zvAZTd4oqzl82ftDQgEHiuLTksge9g05M8NoYDWzYLxOE3IyztRlo4HRWZwbU1DokZAJnrsFsjf47SL1Hcr6ZpIml--2hCydsE-_rZf33rJHNf6SNbXWoZeKwFYMXxXDo3NgNJSn" loading="lazy" width="475" height="393"></a></p>\n\n<p>Once the database is up and running, we’ll create a couple of collections — Fauna’s equivalent of a table in a traditional relational database. I’ve selected the default of 30 days of retained history for each document (equivalent to a row) in the collection, and no TTL specified. Specifying a TTL would remove records that have been untouched for a certain number of days. I’m creating one collection for product categories, one for the products themselves, and one to hold order data.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--SPi1Njkc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh6.googleusercontent.com/wTLUV7bsO5u2kiuFJSIq5Io--0eyJOoRFwCbZ5draGiPFmFC5bXt9g6EFOFy9JIxaZrHcMSeI0UReCpzNNkXcXdhEUacgzgDGV2Zgk9084JjRqUdxwrvrYLiK55lAjH_wJ9N7kWt" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--SPi1Njkc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh6.googleusercontent.com/wTLUV7bsO5u2kiuFJSIq5Io--0eyJOoRFwCbZ5draGiPFmFC5bXt9g6EFOFy9JIxaZrHcMSeI0UReCpzNNkXcXdhEUacgzgDGV2Zgk9084JjRqUdxwrvrYLiK55lAjH_wJ9N7kWt" alt="https://lh6.googleusercontent.com/wTLUV7bsO5u2kiuFJSIq5Io--0eyJOoRFwCbZ5draGiPFmFC5bXt9g6EFOFy9JIxaZrHcMSeI0UReCpzNNkXcXdhEUacgzgDGV2Zgk9084JjRqUdxwrvrYLiK55lAjH_wJ9N7kWt" loading="lazy" width="524" height="329"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--QRlHUBCp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/iwY4l-CBcTzq9NFpc1E6ZhSZtNHRfP36C-a49gW33SjHMw_iTgiuHHwwzCAOCikkJ5iO_xVIgefZA52Gjk3vqG19WJiw70RW-cNsVWciMMApTBViwcCsGC2i9jw8cJjnXkKpDard" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--QRlHUBCp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/iwY4l-CBcTzq9NFpc1E6ZhSZtNHRfP36C-a49gW33SjHMw_iTgiuHHwwzCAOCikkJ5iO_xVIgefZA52Gjk3vqG19WJiw70RW-cNsVWciMMApTBViwcCsGC2i9jw8cJjnXkKpDard" alt="https://lh4.googleusercontent.com/iwY4l-CBcTzq9NFpc1E6ZhSZtNHRfP36C-a49gW33SjHMw_iTgiuHHwwzCAOCikkJ5iO_xVIgefZA52Gjk3vqG19WJiw70RW-cNsVWciMMApTBViwcCsGC2i9jw8cJjnXkKpDard" loading="lazy" width="467" height="321"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1VhxmI8J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/48iuiCNkRih-s-M2J6__MsJc-q2mNy1FBdyOB4AEHpPtcI36g1nmTtNA-qLRRBxWILfB0WmiIhCQSKyjoGsxfCt7uVqZSXn-HDDrQCWkEAAnIOksLEkOCAQ7DDS7yH3qTtyrhORN" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1VhxmI8J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/48iuiCNkRih-s-M2J6__MsJc-q2mNy1FBdyOB4AEHpPtcI36g1nmTtNA-qLRRBxWILfB0WmiIhCQSKyjoGsxfCt7uVqZSXn-HDDrQCWkEAAnIOksLEkOCAQ7DDS7yH3qTtyrhORN" alt="https://lh4.googleusercontent.com/48iuiCNkRih-s-M2J6__MsJc-q2mNy1FBdyOB4AEHpPtcI36g1nmTtNA-qLRRBxWILfB0WmiIhCQSKyjoGsxfCt7uVqZSXn-HDDrQCWkEAAnIOksLEkOCAQ7DDS7yH3qTtyrhORN" loading="lazy" width="472" height="256"></a></p>\n\n<p>Next, I’m going to insert some data into my database. I’ll start with the Categories collection, click in there and then click New Document. If you’re familiar with JSON, this will be pretty straightforward, you can put any JSON you want inside the brackets. For example, to add a category called Dessert, you can do the following:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--adx0fRct--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/kqwVA29ZIHqQAwl_DzraKRW4-kLLkUYawube-E56TraV2aYXm_vJW1OI2JqRqFlior9LNgCtsaw8ty8P2nsEcFlbER8B54Kxffa7NMfMkrmvvQERJtiEjburz6wEWaylOILqzvNE" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--adx0fRct--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/kqwVA29ZIHqQAwl_DzraKRW4-kLLkUYawube-E56TraV2aYXm_vJW1OI2JqRqFlior9LNgCtsaw8ty8P2nsEcFlbER8B54Kxffa7NMfMkrmvvQERJtiEjburz6wEWaylOILqzvNE" alt="https://lh3.googleusercontent.com/kqwVA29ZIHqQAwl_DzraKRW4-kLLkUYawube-E56TraV2aYXm_vJW1OI2JqRqFlior9LNgCtsaw8ty8P2nsEcFlbER8B54Kxffa7NMfMkrmvvQERJtiEjburz6wEWaylOILqzvNE" loading="lazy" width="653" height="237"></a></p>\n\n<p>You can also use the shell (either inside the Fauna dashboard or via the fauna-shell <a href="https://www.npmjs.com/package/fauna-shell?activeTab=readme">NPM package</a>), or any language that supports the Fauna API, which I’ve used in this case to add items in bulk:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="nx">Create</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sandwiches</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>\n\n<span class="nx">Create</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sides</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>\n\n<span class="nx">Create</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Beverages</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>\n\n<span class="nx">Create</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Desserts</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>We’ll get back the inserted data, with a unique reference for each that we’ll need to use later to add items:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="p">[</span>\n  <span class="p">{</span>\n    <span class="na">ref</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">322794748885598273</span><span class="dl">"</span><span class="p">),</span>\n    <span class="na">ts</span><span class="p">:</span> <span class="mi">1644099911490000</span><span class="p">,</span>\n    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>\n      <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sandwiches</span><span class="dl">"</span>\n    <span class="p">}</span>\n  <span class="p">},</span>\n  <span class="p">{</span>\n    <span class="na">ref</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">322794748889792577</span><span class="dl">"</span><span class="p">),</span>\n    <span class="na">ts</span><span class="p">:</span> <span class="mi">1644099911492000</span><span class="p">,</span>\n    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>\n      <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sides</span><span class="dl">"</span>\n    <span class="p">}</span>\n  <span class="p">},</span>\n  <span class="p">{</span>\n    <span class="na">ref</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">322794748889793601</span><span class="dl">"</span><span class="p">),</span>\n    <span class="na">ts</span><span class="p">:</span> <span class="mi">1644099911495000</span><span class="p">,</span>\n    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>\n      <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Beverages</span><span class="dl">"</span>\n    <span class="p">}</span>\n  <span class="p">},</span>\n  <span class="p">{</span>\n    <span class="na">ref</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">322794748889794625</span><span class="dl">"</span><span class="p">),</span>\n    <span class="na">ts</span><span class="p">:</span> <span class="mi">1644099911497000</span><span class="p">,</span>\n    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>\n      <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Desserts</span><span class="dl">"</span>\n    <span class="p">}</span>\n  <span class="p">}</span>\n<span class="p">]</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Next, let’s create a product. Go to the Products collection, and let’s start with a BLT sandwich:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--gCCaa2YT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/u3gclt14as50m7zoar7c.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--gCCaa2YT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/u3gclt14as50m7zoar7c.png" alt="BLT" loading="lazy" width="732" height="316"></a></p>\n\n<p>The name and price look pretty straightforward, but what’s going on with that category? This is what’s known as a reference in Fauna. Essentially, we’re telling the database to refer to the Categories collection and bring back the document with an ID of 322794748885598273.</p>\n\n<p>Using the ID as a reference rather than just adding the category name makes it easy to change category details later on. For example, if I want to change a category name from Beverages to Drinks, I can do so in the Categories collection without having to touch the Products collection at all.</p>\n\n<p>Next, I’m going to go ahead and bulk add a bunch of products to the database. I’ll do this through the Fauna shell, using Fauna’s <a href="https://docs.fauna.com/fauna/current/api/fql/functions/map?utm_source=hashnode&amp;utm_medium=referral&amp;utm_campaign=Alex_Popoutsis_Svelte_Ecom">Map</a> and <a href="https://docs.fauna.com/fauna/current/api/fql/functions/lambda?utm_source=DevTo&amp;utm_medium=referral&amp;utm_campaign=Alex_Popoutsis_Svelte_Ecom">Lambda</a> functions:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="nb">Map</span><span class="p">(</span>\n    <span class="p">[</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">BLT</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">6.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748885598273</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Turkey and Swiss</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">7.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748885598273</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Egg, Bacon, and Cheese</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">4.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748885598273</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Chicken Bacon Ranch</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">7.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748885598273</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Grilled Cheese</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">5.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748885598273</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Potato Chips</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889792577</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Mac and Cheese</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">3.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889792577</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Potato Salad</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889792577</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Soup of the Day</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">3.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889792577</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Bottled Water</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">1.50</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889793601</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Fountain Drink</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">1.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889793601</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Coffee</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">1.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889793601</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Cold Brew</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889793601</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Espresso</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">3.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889793601</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Blueberry Muffin</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">1.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889794625</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Chocolate Chip Muffin</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">1.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889794625</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Croissant</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889794625</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Brownie</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889794625</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Chocolate Chip Cookie</span><span class="dl">\'</span><span class="p">,</span> <span class="p">.</span><span class="mi">99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889794625</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">Slice of Cheesecake</span><span class="dl">\'</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">322794748889794625</span><span class="dl">\'</span><span class="p">]</span>\n    <span class="p">],</span>\n\n    <span class="nx">Lambda</span><span class="p">(</span>\n        <span class="p">[</span><span class="dl">\'</span><span class="s1">name</span><span class="dl">\'</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">price</span><span class="dl">\'</span><span class="p">,</span> <span class="dl">\'</span><span class="s1">category</span><span class="dl">\'</span><span class="p">],</span>\n        <span class="nx">Create</span><span class="p">(</span>\n            <span class="nx">Collection</span><span class="p">(</span><span class="dl">\'</span><span class="s1">Products</span><span class="dl">\'</span><span class="p">),</span>\n            <span class="p">{</span>\n                <span class="na">data</span><span class="p">:</span> <span class="p">{</span>\n                    <span class="na">name</span><span class="p">:</span> <span class="nx">Var</span><span class="p">(</span><span class="dl">\'</span><span class="s1">name</span><span class="dl">\'</span><span class="p">),</span>\n                    <span class="na">price</span><span class="p">:</span> <span class="nx">Var</span><span class="p">(</span><span class="dl">\'</span><span class="s1">price</span><span class="dl">\'</span><span class="p">),</span>\n                    <span class="na">category</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">\'</span><span class="s1">Categories</span><span class="dl">\'</span><span class="p">),</span> <span class="nx">Var</span><span class="p">(</span><span class="dl">\'</span><span class="s1">category</span><span class="dl">\'</span><span class="p">))</span>\n                <span class="p">}</span>\n            <span class="p">}</span>\n        <span class="p">)</span>\n    <span class="p">)</span>\n<span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>If you’re familiar with the map function in JavaScript, this may look familiar to you. Essentially, I’ve built an array of arrays, and the map function loops through the outer array and passes each inner array to a Lambda function for processing. The Lambda destructures the inner array into its components: the name, price, and category ID. Then I take that data and pass it into a Create function to add a new document to the Products collection. This allowed me to add all of these rows in less than half a second, and it saved me some extra typing.</p>\n\n<p>Next, I’m going to create a few indexes to help with data retrieval. First, we’ll need one for all_categories, as this is how we’ll group our menu in the frontend. Go ahead and run the following in the Fauna console:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="nx">CreateIndex</span><span class="p">({</span>\n    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">all_categories</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">source</span><span class="p">:</span> <span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Categories</span><span class="dl">"</span><span class="p">),</span>\n    <span class="na">values</span><span class="p">:</span> <span class="p">[</span>\n        <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">ref</span><span class="dl">"</span><span class="p">]</span> <span class="p">},</span>\n        <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">]</span> <span class="p">}</span>\n    <span class="p">]</span>\n<span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This will create an index called <code>all_categories</code> that will return each category’s ID and name. I’ve listed the ref (ID) first because we’ll use that to sort.</p>\n\n<p>Next, I’m going to create the main index we’ll actually be using in the application. I’m planning on having the menu of products, grouped by category. So, we’ll want an index where the field to search is the category, and the values returned are the product names and prices. Here’s an example of how to create an Index in the dashboard GUI, rather than the console:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--BBFwGscS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/hwL03D8ZVh8_5zOyfmy3DEa1eP6IldPUH0tqpPXi0jdUw-wYNt8VPl03GpWYfZ45i3wvprn1COnIjSxO39Ezc6CglivfBLUuwidoIS98311glRrB539zd1lOysn2S3rhT1VF9TrU" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--BBFwGscS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/hwL03D8ZVh8_5zOyfmy3DEa1eP6IldPUH0tqpPXi0jdUw-wYNt8VPl03GpWYfZ45i3wvprn1COnIjSxO39Ezc6CglivfBLUuwidoIS98311glRrB539zd1lOysn2S3rhT1VF9TrU" alt="https://lh4.googleusercontent.com/hwL03D8ZVh8_5zOyfmy3DEa1eP6IldPUH0tqpPXi0jdUw-wYNt8VPl03GpWYfZ45i3wvprn1COnIjSxO39Ezc6CglivfBLUuwidoIS98311glRrB539zd1lOysn2S3rhT1VF9TrU" loading="lazy" width="490" height="726"></a></p>\n\n<p>Now, when I go back to that index, I can use the FQL option to search it. The code snippet gets cut off in the screenshot, but it’s just <code>Ref(Collection(‘Categories’), ‘322794748885598273’)</code>.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--fRPWPvhG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh6.googleusercontent.com/znKhPZzLBmFE7LOfPuyJLt5eqtbXZrAnMfSKxGuLvr7roYoA9Jojouyts6d61YQQA_mJC2CnJKnSxBZtUaQnR-kd10hWP2ZA_1DvC2l4ll74g8c_sGq_60YPaB2MAAatKKnLhe1u" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fRPWPvhG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh6.googleusercontent.com/znKhPZzLBmFE7LOfPuyJLt5eqtbXZrAnMfSKxGuLvr7roYoA9Jojouyts6d61YQQA_mJC2CnJKnSxBZtUaQnR-kd10hWP2ZA_1DvC2l4ll74g8c_sGq_60YPaB2MAAatKKnLhe1u" alt="https://lh6.googleusercontent.com/znKhPZzLBmFE7LOfPuyJLt5eqtbXZrAnMfSKxGuLvr7roYoA9Jojouyts6d61YQQA_mJC2CnJKnSxBZtUaQnR-kd10hWP2ZA_1DvC2l4ll74g8c_sGq_60YPaB2MAAatKKnLhe1u" loading="lazy" width="880" height="471"></a></p>\n\n<p>That will bring back the name and price for each item in category 322794748885598273, which is Sandwiches.</p>\n\n<h2>\n  <a name="security" href="#security">\n  </a>\n  Security\n</h2>\n\n<p>There’s one other thing we need to do on the database side before we move over to building our application. We’ll need to create a role in Fauna that we can use for fetching data. On the security tab in the dashboard, select Roles, and click New Custom Role. I used the title <code>Svelte</code> here, but you can pick whatever you’d like. Then, add all three of our Collections and our Indexes using the dropdowns. Give the Products and Categories the Read permission by checking the box in that column, and give Orders the Create permission. Then, give both Indexes the Read permission.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--X8DSqs0E--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/RwiWVrI08CmN6LDVVH99OCkuxYevZTZh2a5BtfswjnUrt0KuKQNzOkp6_hq6Dta6Wlo3tD6j0WmNPYLaVtRDl2LemrPZwbOPgfVwhw_uXgGLEqouXUpPTjQNJOD4w7ziK2orf4Hh" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--X8DSqs0E--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/RwiWVrI08CmN6LDVVH99OCkuxYevZTZh2a5BtfswjnUrt0KuKQNzOkp6_hq6Dta6Wlo3tD6j0WmNPYLaVtRDl2LemrPZwbOPgfVwhw_uXgGLEqouXUpPTjQNJOD4w7ziK2orf4Hh" alt="https://lh5.googleusercontent.com/RwiWVrI08CmN6LDVVH99OCkuxYevZTZh2a5BtfswjnUrt0KuKQNzOkp6_hq6Dta6Wlo3tD6j0WmNPYLaVtRDl2LemrPZwbOPgfVwhw_uXgGLEqouXUpPTjQNJOD4w7ziK2orf4Hh" loading="lazy" width="880" height="260"></a></p>\n\n<p>Here we’re telling Fauna that we want read access to our products and categories to populate the menu on the frontend. We also want to be able to write new orders to the orders collection when an order is submitted. Finally, we want read-only access to our indexes. We don’t want to give this role access to do anything nefarious, like create new products in our Products collection, or to delete Categories, so it’s important to be very choosy here.</p>\n\n<p>Once that’s done, go back to the Security tab, select Keys, and create a new key using the Svelte role:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--9qkVxgQP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/qJU1GNXtr_viti9lx9zVvtCunxIu3hvShJHQnjUNuv-WLU_9hfly-iR9Yxt9QpvANTXFk1OhLonJdxFNQrZqZB3sH3Uueq8GYVS8iA-YyV64itoB5VlNtv2czBNGayXCiCjypTXA" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--9qkVxgQP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh4.googleusercontent.com/qJU1GNXtr_viti9lx9zVvtCunxIu3hvShJHQnjUNuv-WLU_9hfly-iR9Yxt9QpvANTXFk1OhLonJdxFNQrZqZB3sH3Uueq8GYVS8iA-YyV64itoB5VlNtv2czBNGayXCiCjypTXA" alt="https://lh4.googleusercontent.com/qJU1GNXtr_viti9lx9zVvtCunxIu3hvShJHQnjUNuv-WLU_9hfly-iR9Yxt9QpvANTXFk1OhLonJdxFNQrZqZB3sH3Uueq8GYVS8iA-YyV64itoB5VlNtv2czBNGayXCiCjypTXA" loading="lazy" width="473" height="396"></a></p>\n\n<p>You’ll get the key back when you submit it; keep it somewhere safe because you will only see it this one time.</p>\n\n<h2>\n  <a name="building-the-frontend" href="#building-the-frontend">\n  </a>\n  Building the Frontend\n</h2>\n\n<p>We now have enough set up on the database to begin working on our Svelte application. In Visual Studio Code, I’ve opened a folder I created called SvelteBakery, and then I ran the following terminal commands to spin up my project:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="nx">npx</span> <span class="nx">degit</span> <span class="nx">sveltejs</span><span class="o">/</span><span class="nx">template</span> <span class="p">.</span>\n<span class="nx">npm</span> <span class="nx">install</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Inside of the src folder, I’ve also created a components sub-folder and a stores sub-folder. The folder structure should look like this now:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Zs6Ng3At--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/OXsCrrwD2K2hROqdh_W3EQiQf9OLILElwIBAfMoEx6DrFEhlDAqNCUegUICQWWrPs1ozXk91mTNlgrAhGjLoDjjGFFI6uG1qFTafJIeGTKi6D7eq0aOHumbBEBp0zH3J9UBqN0ju" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Zs6Ng3At--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/OXsCrrwD2K2hROqdh_W3EQiQf9OLILElwIBAfMoEx6DrFEhlDAqNCUegUICQWWrPs1ozXk91mTNlgrAhGjLoDjjGFFI6uG1qFTafJIeGTKi6D7eq0aOHumbBEBp0zH3J9UBqN0ju" alt="https://lh5.googleusercontent.com/OXsCrrwD2K2hROqdh_W3EQiQf9OLILElwIBAfMoEx6DrFEhlDAqNCUegUICQWWrPs1ozXk91mTNlgrAhGjLoDjjGFFI6uG1qFTafJIeGTKi6D7eq0aOHumbBEBp0zH3J9UBqN0ju" loading="lazy" width="305" height="308"></a></p>\n\n<p>Let’s begin with the stores folder. Here, we’re going to create a file called <code>stores.js</code> and populate it with the following code:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">writable</span> <span class="p">}</span> <span class="k">from</span> <span class="err">‘</span><span class="nx">svelte</span><span class="o">/</span><span class="nx">store</span><span class="err">’</span>\n\n<span class="k">export</span> <span class="kd">const</span> <span class="nx">shoppingCart</span> <span class="o">=</span> <span class="nx">writable</span><span class="p">([])</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Svelte makes it very easy to share data across your components with these built-in stores. If you’re coming from another framework, such as React, you may be used to using something like Redux for state management, but Svelte includes this out of the box. We’ll use that store later in the tutorial to track items in our cart.</p>\n\n<p>I’m also creating a store to make it easy to share our Fauna client across components. To do this, I’ve created a file called <code>fauna.js</code> inside the same stores folder and populated it with this similar looking code:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">writable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">\'</span><span class="s1">svelte/store</span><span class="dl">\'</span>\n\n<span class="k">export</span> <span class="kd">const</span> <span class="nx">fauna</span> <span class="o">=</span> <span class="nx">writable</span><span class="p">({})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The only real difference is that the shoppingCart was initialized with an empty array, while the fauna store was initialized with an empty object.</p>\n\n<p>I’m going to use that in our main App.svelte file, which now looks like the following:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>\n    import ProductMenu from "./components/ProductMenu.svelte";\n    import ShoppingCart from "./components/ShoppingCart.svelte";\n    import Nav from "./components/Nav.svelte";\n    import <span class="si">{</span> <span class="nx">fauna</span> <span class="si">}</span> from \'./stores/fauna\';\n\n    let currentPage = "menu";\n\n    function connectToFauna() <span class="si">{</span>\n        <span class="nx">connectToFauna</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{};</span>\n        <span class="nx">fauna</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span>\n            <span class="p">{</span>\n                <span class="na">client</span><span class="p">:</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">faunadb</span><span class="p">.</span><span class="nx">Client</span><span class="p">({</span> <span class="na">domain</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">db.us.fauna.com</span><span class="dl">\'</span><span class="p">,</span> <span class="na">scheme</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">https</span><span class="dl">\'</span><span class="p">,</span> <span class="na">secret</span><span class="p">:</span> <span class="dl">"</span><span class="s2">INSERT_SECRET_HERE</span><span class="dl">"</span> <span class="p">}),</span>\n                <span class="na">q</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">faunadb</span><span class="p">.</span><span class="nx">query</span>\n            <span class="p">}</span>\n        <span class="p">)</span>\n    <span class="si">}</span>\n\n    function handlePageChange(e) <span class="si">{</span>\n        <span class="nx">currentPage</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">newPage</span><span class="p">;</span>\n    <span class="si">}</span>\n<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n\n<span class="p">&lt;</span><span class="nt">main</span><span class="p">&gt;</span>\n    <span class="p">&lt;</span><span class="nc">Nav</span> <span class="na">on</span><span class="err">:</span><span class="na">changepage</span><span class="p">=</span><span class="si">{</span><span class="nx">handlePageChange</span><span class="si">}</span> <span class="p">/&gt;</span>\n    <span class="si">{</span><span class="err">#</span><span class="k">if</span> <span class="nx">currentPage</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">menu</span><span class="dl">"</span><span class="si">}</span>\n        <span class="p">&lt;</span><span class="nc">ProductMenu</span> <span class="p">/&gt;</span>\n    <span class="si">{</span><span class="p">:</span><span class="k">else</span> <span class="k">if</span> <span class="nx">currentPage</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">cart</span><span class="dl">"</span><span class="si">}</span>\n        <span class="p">&lt;</span><span class="nc">ShoppingCart</span> <span class="p">/&gt;</span>\n    <span class="si">{</span><span class="sr">/if</span><span class="err">}\n</span><span class="o">&lt;</span><span class="sr">/main</span><span class="err">&gt;\n</span>\n<span class="o">&lt;</span><span class="nx">svelte</span><span class="p">:</span><span class="nx">head</span><span class="o">&gt;</span>\n    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="p">=</span><span class="s">"//cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb-min.js"</span> <span class="na">on</span><span class="err">:</span><span class="na">load</span><span class="p">=</span><span class="si">{</span><span class="nx">connectToFauna</span><span class="si">}</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n<span class="p">&lt;</span><span class="err">/</span><span class="na">svelte</span><span class="err">:</span><span class="na">head</span><span class="p">&gt;</span>\n\n<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>\n    main <span class="si">{</span>\n        <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>\n        <span class="nl">padding</span><span class="p">:</span> <span class="mi">1</span><span class="nx">em</span><span class="p">;</span>\n        <span class="nl">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>\n    <span class="si">}</span>\n<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>A few things to note here:</p>\n\n<ul>\n<li>At the top, I’ve got four imports: <code>ProductMenu</code>, <code>ShoppingCart</code>, and <code>Nav</code> (three Svelte components which we’ll create below), and our Fauna client store that we created above.</li>\n<li>I’m using a <code>svelte:head</code> block down below. This allows for code to be injected in the head section of the compiled HTML. In this case, I’ve opted to use the Fauna JavaScript driver from a CDN, rather than attempting to install from npm and deal with a polyfill.</li>\n<li>I have an <code>onload</code> parameter, so that once the Fauna driver is loaded, the <code>connectToFauna</code> function will run and instantiate the connection. Credit to the Svelte REPL I found <a href="https://svelte.dev/repl/c56ca90d0b3f4e888ad9a71263decbff?version=3.31.0">here</a> for this function.</li>\n<li>One issue I ran into here was the domain. Depending on the region your Fauna database is in, you will need to customize this accordingly — each region group has its own subdomain that you <em>must</em> use, or else you’ll be confused why you can’t access any of your data.</li>\n<li>In addition to the domain, you’ll need to insert the secret key generated earlier for the Svelte database role. Fill that in where it says “INSERT_SECRET_HERE”.</li>\n<li>I have a <code>handlePageChange</code> function and an if block in the actual HTML to determine whether to display the menu or shopping cart. I’ll have more on that below.</li>\n</ul>\n\n<p>Next, let’s jump over to the components folder and start scaffolding our layout. Our application will be pretty simple, with a navigation bar at the top to switch between the menu and the shopping cart/checkout process. Inside of the components folder, let’s go ahead and create the following blank files:</p>\n\n<ul>\n<li><code>Nav.svelte</code></li>\n<li><code>ProductMenu.svelte</code></li>\n<li><code>MenuSection.svelte</code></li>\n<li><code>MenuItem.svelte</code></li>\n<li><code>ShoppingCart.svelte</code></li>\n</ul>\n\n<p>We’ll begin with the Nav component, as this will allow us to jump back and forth between the product menu and shopping cart. Here’s the full code for Nav:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>\n    import <span class="si">{</span> <span class="nx">shoppingCart</span> <span class="si">}</span> from \'../stores/shoppingCart\';\n    import <span class="si">{</span> <span class="nx">createEventDispatcher</span> <span class="si">}</span> from \'svelte\';\n\n    const dispatch = createEventDispatcher();\n\n    function changePage(newPage) <span class="si">{</span>\n        <span class="k">if</span> <span class="p">(</span><span class="nx">newPage</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">menu</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">$shoppingCart</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>\n            <span class="nx">dispatch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">changepage</span><span class="dl">\'</span><span class="p">,</span> <span class="p">{</span>\n                <span class="na">newPage</span><span class="p">:</span> <span class="nx">newPage</span>\n            <span class="p">});</span>\n    <span class="si">}</span>\n<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n\n<span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>\n    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Svelte Bakery Demo<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span> <span class="na">on</span><span class="err">:</span><span class="na">click</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">changePage</span><span class="p">(</span><span class="dl">"</span><span class="s2">menu</span><span class="dl">"</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>Menu<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"#"</span> <span class="na">on</span><span class="err">:</span><span class="na">click</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">changePage</span><span class="p">(</span><span class="dl">"</span><span class="s2">cart</span><span class="dl">"</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>Cart\n            <span class="si">{</span><span class="err">#</span><span class="k">if</span> <span class="nx">$shoppingCart</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="si">}</span>(<span class="si">{</span><span class="nx">$shoppingCart</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span> items)<span class="si">{</span><span class="sr">/if</span><span class="err">}\n</span>        <span class="o">&lt;</span><span class="sr">/a</span><span class="err">&gt;\n</span><span class="o">&lt;</span><span class="sr">/nav</span><span class="err">&gt;\n</span>\n<span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>\n    <span class="nx">nav</span> <span class="p">{</span>\n        <span class="nl">display</span><span class="p">:</span> <span class="nx">flex</span><span class="p">;</span>\n        <span class="nl">color</span><span class="p">:</span> <span class="err">#</span><span class="nx">FFF</span><span class="p">;</span>\n        <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="p">:</span> <span class="nx">rgb</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">46</span><span class="p">);</span>\n        <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="p">:</span> <span class="nx">column</span><span class="p">;</span>\n        <span class="nx">align</span><span class="o">-</span><span class="nx">items</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>\n    <span class="p">}</span>\n\n    <span class="p">@</span><span class="nd">media</span><span class="p">(</span><span class="nx">min</span><span class="o">-</span><span class="nx">width</span><span class="p">:</span> <span class="mi">768</span><span class="nx">px</span><span class="p">)</span> <span class="p">{</span>\n        <span class="nx">nav</span> <span class="p">{</span>\n            <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="p">:</span> <span class="nx">row</span><span class="p">;</span>\n            <span class="nl">gap</span><span class="p">:</span> <span class="mi">3</span><span class="nx">rem</span><span class="p">;</span>\n        <span class="p">}</span>\n    <span class="si">}</span>\n\n    h1 <span class="si">{</span>\n        <span class="nx">flex</span><span class="o">-</span><span class="nx">basis</span><span class="p">:</span> <span class="mi">50</span><span class="o">%</span><span class="p">;</span>\n    <span class="si">}</span>\n\n    a <span class="si">{</span>\n        <span class="nx">text</span><span class="o">-</span><span class="nx">decoration</span><span class="p">:</span> <span class="nx">none</span><span class="p">;</span>\n        <span class="nl">color</span><span class="p">:</span> <span class="err">#</span><span class="nx">FFF</span><span class="p">;</span>\n        <span class="nx">font</span><span class="o">-</span><span class="nx">weight</span><span class="p">:</span> <span class="nx">bold</span><span class="p">;</span>\n    <span class="si">}</span>\n\n    a:hover <span class="si">{</span>\n        <span class="nx">text</span><span class="o">-</span><span class="nx">decoration</span><span class="p">:</span> <span class="nx">underline</span><span class="p">;</span>\n    <span class="si">}</span>\n<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>In the script section, I’m using <code>createEventDispatcher</code> to dispatch a custom event to the parent (App.svelte). When clicking on one of the links, <code>changePage</code> is called, and that function will send up an event to the main app with the new page name. Recall this code above from <code>App.svelte</code>, when we placed our <code>Nav</code> component in the HTML:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nc">Nav</span> <span class="na">on</span><span class="err">:</span><span class="na">changepage</span><span class="p">=</span><span class="si">{</span><span class="nx">handlePageChange</span><span class="si">}</span> <span class="p">/&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>You can see that I’ve set it up to call the <code>handlePageChange</code> function in <code>App.svelte</code> when that <code>changepage</code> event is dispatched. That will update the <code>currentPage</code> variable in <code>App.svelte</code>, which drives whether the end user sees the menu or cart.</p>\n\n<p>In addition to the functionality around changing pages, you can also see another if block in <code>Nav.svelte</code>. I’ve imported my shopping cart store and am using <code>shoppingCart.length</code> in a couple places to determine whether to show the number of items in the cart in the navbar, as well as whether the shopping cart link should even do anything — we won’t direct the user to the cart if it is currently empty. Store variables must be prefixed with a dollar sign in order to access them, but otherwise they work just like regular variables for reading, which makes it very easy.</p>\n\n<p>Next, we’ll get started on the actual menu of products. The ProductMenu component will be our wrapper for the menu, and it’ll contain a MenuSection component for each category that holds our items. Inside each MenuSection will be individual MenuItem components for each product. Let’s start at the highest level, ProductMenu, and work our way down:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>\n    import MenuSection from \'./MenuSection.svelte\';\n    import <span class="si">{</span> <span class="nx">fauna</span> <span class="si">}</span> from \'../stores/fauna\';\n\n    let loaded = false;\n    let categories = [];\n\n    $: <span class="si">{</span>\n        <span class="k">if</span> <span class="p">(</span><span class="nx">$fauna</span><span class="p">.</span><span class="nx">client</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">loaded</span><span class="p">)</span> <span class="p">{</span>\n            <span class="nx">loaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>\n            <span class="nx">$fauna</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>\n                <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Paginate</span><span class="p">(</span>\n                    <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Match</span><span class="p">(</span>\n                        <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Index</span><span class="p">(</span><span class="dl">\'</span><span class="s1">all_categories</span><span class="dl">\'</span><span class="p">)</span>\n                    <span class="p">)</span>\n                <span class="p">)</span>\n            <span class="p">)</span>\n            <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n                <span class="nx">categories</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>\n            <span class="p">})</span>\n        <span class="p">}</span>\n    <span class="si">}</span>\n<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n\n<span class="p">&lt;</span><span class="nt">section</span><span class="p">&gt;</span>\n    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Menu<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>\n    <span class="si">{</span><span class="err">#</span><span class="nx">each</span> <span class="nx">categories</span> <span class="k">as</span> <span class="nx">category</span><span class="si">}</span>\n        <span class="p">&lt;</span><span class="nc">MenuSection</span> <span class="si">{</span><span class="nx">category</span><span class="si">}</span> <span class="p">/&gt;</span>\n    <span class="si">{</span><span class="sr">/each</span><span class="err">}\n</span><span class="o">&lt;</span><span class="sr">/section</span><span class="err">&gt;\n</span></code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Here in <code>ProductMenu.svelte</code>, I’m importing our Fauna client from its store, as well as the MenuSection component which will be the next level down. Then, I’ve instantiated a couple of variables, one to hold the load state and one to hold the category list. I also checked the load state because I don’t want to attempt to query Fauna until the client is ready to go.</p>\n\n<p>I’m then using a reactive block (the <code>$:</code> in Svelte indicates a code block that will run when something inside of it has changed, in this case when the <code>$fauna.client</code> store has changed). This block will query the <code>all_categories</code> index and will bring back the <code>id</code> and <code>name</code> of each category. I’m populating the categories array with this returned data. Down below, I’m using a Svelte each block to iterate through the categories array. Each category will spawn a MenuSection component with the category passed as a parameter to it. Let’s look at the MenuSection next.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>\n    import MenuItem from \'./MenuItem.svelte\';\n    import <span class="si">{</span> <span class="nx">onMount</span> <span class="si">}</span> from \'svelte\';\n    import <span class="si">{</span> <span class="nx">fauna</span> <span class="si">}</span> from \'../stores/fauna\';\n\n    export let category;\n\n    let [ ref, name ] = category;\n    let items = [];\n\n    onMount(async () =&gt; <span class="si">{</span>\n        <span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">$fauna</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>\n            <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Paginate</span><span class="p">(</span>\n                <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Match</span><span class="p">(</span>\n                    <span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Index</span><span class="p">(</span><span class="dl">\'</span><span class="s1">product_by_category</span><span class="dl">\'</span><span class="p">),</span> \n                    <span class="nx">ref</span>\n                <span class="p">)</span>\n            <span class="p">)</span>\n        <span class="p">);</span>\n        <span class="nx">items</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>\n    <span class="si">}</span>)\n<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n\n<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>\n    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>\n    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="p">=</span><span class="s">"items"</span><span class="p">&gt;</span>\n        <span class="si">{</span><span class="err">#</span><span class="nx">each</span> <span class="nx">items</span> <span class="k">as</span> <span class="nx">item</span><span class="si">}</span>\n            <span class="p">&lt;</span><span class="nc">MenuItem</span> <span class="si">{</span><span class="nx">item</span><span class="si">}</span> <span class="p">/&gt;</span>\n        <span class="si">{</span><span class="sr">/each</span><span class="err">}\n</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;\n</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;\n</span>\n<span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>\n    <span class="p">.</span><span class="nx">items</span> <span class="p">{</span>\n        <span class="nl">display</span><span class="p">:</span> <span class="nx">flex</span><span class="p">;</span>\n        <span class="nl">gap</span><span class="p">:</span> <span class="mi">2</span><span class="nx">rem</span><span class="p">;</span>\n        <span class="nx">justify</span><span class="o">-</span><span class="nx">content</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>\n        <span class="nx">flex</span><span class="o">-</span><span class="nx">wrap</span><span class="p">:</span> <span class="nx">wrap</span><span class="p">;</span>\n    <span class="p">}</span>\n<span class="p">&lt;</span><span class="err">/</span><span class="na">style</span><span class="p">&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This code gives us one thing we haven’t seen yet in our previous Svelte components: the <code>export let</code> statement. Export let defines a parameter that is passed into this component by its parent. In this case, we’ve defined category as something that will be passed in. You may have noticed that the MenuSection component was inserted in the ProductMenu with a <code>&lt;MenuSection {category} /&gt;</code>. Because the variable passed in is named category, and the component is expecting one named category, I was able to enclose category in braces and leave it at that. If the variable had a different name in <code>ProductMenu</code>, say <code>c</code> for instance, I would have had to type <code>&lt;MenuSection category={c} /&gt;</code> instead. This nice little bit of syntactic sugar is Svelte-specific.</p>\n\n<p>Back to the <code>MenuSection</code> component — we’re also using <code>onMount</code> here. This is one of <a href="https://svelte.dev/tutorial/onmount">Svelte’s lifecycle methods</a> and allows us to run code when the component has been mounted in the DOM. In contrast to <code>ProductMenu</code>, we know that we’ll have an instantiated Fauna client by the time the <code>MenuSection</code> is mounted, so we don’t have to use the reactive statement workaround we created earlier. In this case, we can cleanly call the Fauna client inside <code>onMount</code>.</p>\n\n<p>I’m using the <code>product_by_category</code> index here, which lets us search by <code>category_id</code>. Since we passed that data into the component along with the category name, we can query to get all of the products in a particular category. Then, I’m using another each block to iterate through and send each one to a <code>MenuItem</code> component. Take a look at the last piece of the menu, <code>MenuItem</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>\n    import <span class="si">{</span> <span class="nx">shoppingCart</span> <span class="si">}</span> from "../stores/shoppingCart";\n\n    export let item;\n\n    let [ name, price ] = item;\n\n    function addToCart() <span class="si">{</span>\n        <span class="nx">shoppingCart</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">n</span> <span class="o">=&gt;</span> <span class="p">{</span>\n            <span class="k">return</span> <span class="p">[</span> <span class="p">...</span><span class="nx">n</span><span class="p">,</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="nx">name</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="nx">price</span><span class="p">}];</span>\n        <span class="p">});</span>\n    <span class="si">}</span>\n<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n\n<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>\n    <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>\n    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span> $<span class="si">{</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>\n    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">on</span><span class="err">:</span><span class="na">click</span><span class="p">=</span><span class="si">{</span><span class="nx">addToCart</span><span class="si">}</span><span class="p">&gt;</span>Add to cart<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>\n<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n\n<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>\n    div <span class="si">{</span>\n        <span class="nx">display</span><span class="p">:</span> <span class="nx">flex</span><span class="p">;</span>\n        <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="p">:</span> <span class="nx">column</span><span class="p">;</span>\n        <span class="nl">width</span><span class="p">:</span> <span class="mi">90</span><span class="o">%</span><span class="p">;</span>\n        <span class="nl">border</span><span class="p">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="mi">000</span><span class="p">;</span>\n        <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="p">:</span> <span class="mi">5</span><span class="nx">px</span><span class="p">;</span>\n    <span class="si">}</span>\n\n    @media(min-width: 768px) <span class="si">{</span>\n        <span class="nx">div</span> <span class="p">{</span>\n            <span class="nl">width</span><span class="p">:</span> <span class="mi">15</span><span class="o">%</span><span class="p">;</span>\n        <span class="p">}</span>\n    <span class="si">}</span>\n\n    button <span class="si">{</span>\n        <span class="nx">width</span><span class="p">:</span> <span class="nx">fit</span><span class="o">-</span><span class="nx">content</span><span class="p">;</span>\n        <span class="nl">margin</span><span class="p">:</span> <span class="mi">1</span><span class="nx">rem</span> <span class="nx">auto</span><span class="p">;</span>\n    <span class="si">}</span>\n<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>In the script section, I’ve imported the <code>shoppingCart</code> store, as we will write items to the cart here as they are added. I also once again have an <code>export let</code> declaration, as the specific item object will get passed in from <code>MenuSection</code>. Finally, I define the <code>addToCart</code> function, which will add the item to the <code>shoppingCart</code> store using the <code>shoppingCart.update</code> method.</p>\n\n<p>The HTML and CSS are pretty straightforward; I’ll just call specific attention to the <code>on:click</code> declared on the button. This is Svelte’s syntax for putting an event handler on an element. Since the item name and price are scoped to the component, I don’t have to worry about passing parameters to the function, as those are already known.</p>\n\n<p>We’re getting close to the end! Let’s now take a look at the cart and checkout processes. Here’s <code>ShoppingCart.svelte</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>\nimport <span class="si">{</span> <span class="nx">shoppingCart</span> <span class="si">}</span> from "../stores/shoppingCart";\nimport <span class="si">{</span> <span class="nx">fauna</span> <span class="si">}</span> from \'../stores/fauna\';\n\nconst reducer = (previousValue, currentValue) =&gt; previousValue + parseFloat(currentValue.price);\nlet total;\nlet customerName;\nlet confirmed = false;\n\n$: total = $shoppingCart.reduce(reducer, 0);\n\nfunction removeItem(idx) <span class="si">{</span>\n<span class="nx">shoppingCart</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">n</span> <span class="o">=&gt;</span> <span class="p">{</span>\n<span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="p">[...</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)];</span>\n<span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">===</span> <span class="nx">n</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="p">[...</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">n</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>\n<span class="k">return</span> <span class="p">[...</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">idx</span><span class="p">),</span> <span class="p">...</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>\n<span class="p">})</span>\n<span class="si">}</span>\n\nfunction submitOrder() <span class="si">{</span>\n<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">customerName</span><span class="p">);</span>\n\n<span class="nx">$fauna</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>\n<span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Create</span><span class="p">(</span>\n<span class="nx">$fauna</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">\'</span><span class="s1">Orders</span><span class="dl">\'</span><span class="p">),</span>\n<span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">customerName</span><span class="p">:</span> <span class="nx">customerName</span><span class="p">,</span> <span class="na">details</span><span class="p">:</span> <span class="nx">$shoppingCart</span><span class="p">,</span> <span class="na">total</span><span class="p">:</span> <span class="nx">total</span> <span class="p">}</span> <span class="p">}</span>\n<span class="p">)</span>\n<span class="p">).</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n<span class="nx">confirmed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>\n<span class="p">})</span>\n<span class="si">}</span>\n<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n\n<span class="p">&lt;</span><span class="nt">section</span><span class="p">&gt;</span>\n    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Shopping Cart<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>\n\n    <span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Item<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Price<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>\n            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>\n\n        <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>\n            <span class="si">{</span><span class="err">#</span><span class="nx">each</span> <span class="nx">$shoppingCart</span> <span class="k">as</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">idx</span><span class="si">}</span>\n                <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>\n                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>\n                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>$<span class="si">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>\n                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>\n                        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">on</span><span class="err">:</span><span class="na">click</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">removeItem</span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>Remove<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>\n                    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>\n                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>\n            <span class="si">{</span><span class="sr">/each</span><span class="err">}\n</span>        <span class="o">&lt;</span><span class="sr">/tbody</span><span class="err">&gt;\n</span>\n        <span class="o">&lt;</span><span class="nx">tfoot</span><span class="o">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Total<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>$<span class="si">{</span><span class="nx">total</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>\n                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>\n            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>\n        <span class="p">&lt;</span><span class="err">/</span><span class="na">tfoot</span><span class="p">&gt;</span>\n    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>\n\n    <span class="p">{</span><span class="err">#</span><span class="k">if</span> <span class="o">!</span><span class="nx">confirmed</span><span class="p">}</span>\n        <span class="p">&lt;</span><span class="nt">form</span> <span class="na">on</span><span class="err">:</span><span class="na">submit</span><span class="err">|</span><span class="na">preventDefault</span><span class="p">=</span><span class="si">{</span><span class="nx">submitOrder</span><span class="si">}</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="p">=</span><span class="s">"name"</span><span class="p">&gt;</span>Name: <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>\n            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="p">=</span><span class="s">"text"</span> <span class="na">id</span><span class="p">=</span><span class="s">"name"</span> <span class="na">bind</span><span class="err">:</span><span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">customerName</span><span class="si">}</span> <span class="p">/&gt;</span>\n            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="p">=</span><span class="s">"submit"</span> <span class="p">/&gt;</span>\n        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>\n    <span class="p">{:</span><span class="k">else</span><span class="p">}</span>\n        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Thank you very much for your order!<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>\n    <span class="p">{</span><span class="o">/</span><span class="k">if</span><span class="p">}</span>\n<span class="p">&lt;</span><span class="err">/</span><span class="na">section</span><span class="p">&gt;</span>\n\n<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>\n    section, table <span class="si">{</span>\n        <span class="nx">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>\n    <span class="si">}</span>\n\n    table <span class="si">{</span>\n        <span class="nx">border</span><span class="p">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="mi">000</span><span class="p">;</span>\n        <span class="nx">border</span><span class="o">-</span><span class="nx">collapse</span><span class="p">:</span> <span class="nx">collapse</span><span class="p">;</span>\n    <span class="si">}</span>\n\n    td, th <span class="si">{</span>\n        <span class="nx">padding</span><span class="p">:</span> <span class="mi">1</span><span class="nx">rem</span><span class="p">;</span>\n    <span class="si">}</span>\n\n    tr:nth-child(even) <span class="si">{</span>\n        <span class="nx">background</span><span class="p">:</span> <span class="nx">rgb</span><span class="p">(</span><span class="mi">172</span><span class="p">,</span> <span class="mi">170</span><span class="p">,</span> <span class="mi">170</span><span class="p">);</span>\n    <span class="si">}</span>\n\n    thead, tfoot <span class="si">{</span>\n        <span class="nx">font</span><span class="o">-</span><span class="nx">weight</span><span class="p">:</span> <span class="nx">bold</span><span class="p">;</span>\n    <span class="si">}</span>\n<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>We’re importing both of our stores this time, as we’ll need <code>shoppingCart</code> to read the data we’ve put in the cart, and we’ll need our Fauna driver to create a new document in the Orders collection. I’m using a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">reducer</a> to sum the prices for all items in the cart and give me a single grand total value.</p>\n\n<p>I’ve built a table in the HTML section that will pull in my shopping cart details. Each row also has a button that calls a <code>removeItem</code> function, which will delete that item from the cart. In contrast to the <code>each</code> blocks I’ve used earlier, I also used an index on this one, as that allows me to track the index for each row in the table, so that I can use that value to remove the right record from my <code>shoppingCart</code> store.</p>\n\n<p>Finally, I have a conditional section that will either show an ordering form if the order has not been submitted, or a confirmation text if it has. Submitting the form calls <code>submitOrder</code>, which will use the <code>Create</code> function in Fauna to add a new document to our Orders collection (recall that the role we made earlier allows this). I’m using Svelte’s form binding to bind the name input to the customerName variable, which makes working with forms extremely smooth.</p>\n\n<p>After a test run of the shopping cart, here’s an example of final data in the Orders collection:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight jsx"><code><span class="p">{</span>\n    <span class="dl">"</span><span class="s2">ref</span><span class="dl">"</span><span class="p">:</span> <span class="nx">Ref</span><span class="p">(</span><span class="nx">Collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">Orders</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">321462934244950082</span><span class="dl">"</span><span class="p">),</span>\n    <span class="dl">"</span><span class="s2">ts</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1642829794070000</span><span class="p">,</span>\n    <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>\n        <span class="dl">"</span><span class="s2">customerName</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Alexander Popoutsis</span><span class="dl">"</span><span class="p">,</span>\n        <span class="dl">"</span><span class="s2">details</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>\n            <span class="p">{</span>\n                <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Potato Chips</span><span class="dl">"</span><span class="p">,</span>\n                <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">1.25</span>\n            <span class="p">},</span>\n            <span class="p">{</span>\n                <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Potato Salad</span><span class="dl">"</span><span class="p">,</span>\n                <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">2.99</span>\n            <span class="p">},</span>\n            <span class="p">{</span>\n                <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Soup of the Day</span><span class="dl">"</span><span class="p">,</span>\n                <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">3.99</span>\n            <span class="p">}</span>\n        <span class="p">],</span>\n        <span class="dl">"</span><span class="s2">total</span><span class="dl">"</span><span class="p">:</span> <span class="mf">8.23</span>\n    <span class="p">}</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<h2>\n  <a name="next-steps" href="#next-steps">\n  </a>\n  Next Steps\n</h2>\n\n<p>If you’d like to see the full code in one place, it’s <a href="https://github.com/apop880/SvelteBakery">on GitHub</a>.</p>\n\n<p>This is, of course, a basic demonstration, and there are many more things that could be done to make it more advanced (for example, handling item quantities and improving the styling). In addition, since this is a fully client-side app, the Fauna key is visible to end users, and security is especially important. To add a server-side component, you could use SvelteKit and hide the Fauna pieces behind a SvelteKit API endpoint.</p>\n\n<p>You now have everything you need to get started with a basic app, using the fantastic combination of Fauna and Svelte. If you haven’t already, <a href="https://dashboard.fauna.com/accounts/register?utm_source=hashnode&amp;utm_medium=referral&amp;utm_campaign=Alex_Popoutsis_Svelte_Ecom">click here</a> to get signed up with a Fauna account. And if you get stuck at all, the <a href="https://community.fauna.com/?utm_source=DevTo&amp;utm_medium=referral&amp;utm_campaign=Alex_Popoutsis_Svelte_Ecom">Fauna community</a> is a fantastic resource as well.</p>\n\n',a.body_markdown="_This article was contributed by [Alex Popoutsis](https://twitter.com/apopoutsis?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor)._\n\nToday, I’ll be looking at how we can combine two newer, fast-growing web technologies to get a web application rapidly built and set up to scale infinitely.\n\nThose two technologies are Svelte and Fauna. Svelte is one of the newest technologies in the world of frontend development, building on what React, Angular, Vue and others before have done but also simplifying things quite a bit. If you’re new to Svelte, [I recommend starting with their tutorial here](https://svelte.dev/tutorial/basics). Fauna is a modern, document-based, serverless database that runs in the cloud and offers a generous free tier to get you started. Here’s [a link to Fauna’s documentation](https://docs.fauna.com/fauna/current/?utm_source=DevTo&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom) if you need to get acquainted with it before starting into this tutorial.\n\nThis tutorial will cover all the basics you need to create a small eCommerce site using Fauna and Svelte. You’ll learn:\n\n- How to create a Fauna database and populate it with collections, indexes, and documents\n- The basic principles of Fauna database design and the Fauna Query Language (FQL)\n- How to connect a Svelte application to Fauna and display data\n- How to implement a basic shopping cart for a Svelte eCommerce application\n- How to write data back to Fauna from our Svelte application\n\n## Getting Started\n\nGo to [fauna.com](https://dashboard.fauna.com/accounts/register?utm_source=DevTo&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom) and register for a new account. In the dashboard, click Create Database. Our eCommerce site is going to be for a sample bakery, so I’ve named my database SvelteBakery and put it under the US region group:\n\n![https://lh3.googleusercontent.com/zvAZTd4oqzl82ftDQgEHiuLTksge9g05M8NoYDWzYLxOE3IyztRlo4HRWZwbU1DokZAJnrsFsjf47SL1Hcr6ZpIml--2hCydsE-_rZf33rJHNf6SNbXWoZeKwFYMXxXDo3NgNJSn]\n(https://lh3.googleusercontent.com/zvAZTd4oqzl82ftDQgEHiuLTksge9g05M8NoYDWzYLxOE3IyztRlo4HRWZwbU1DokZAJnrsFsjf47SL1Hcr6ZpIml--2hCydsE-_rZf33rJHNf6SNbXWoZeKwFYMXxXDo3NgNJSn)\n\nOnce the database is up and running, we’ll create a couple of collections — Fauna’s equivalent of a table in a traditional relational database. I’ve selected the default of 30 days of retained history for each document (equivalent to a row) in the collection, and no TTL specified. Specifying a TTL would remove records that have been untouched for a certain number of days. I’m creating one collection for product categories, one for the products themselves, and one to hold order data.\n\n![https://lh6.googleusercontent.com/wTLUV7bsO5u2kiuFJSIq5Io--0eyJOoRFwCbZ5draGiPFmFC5bXt9g6EFOFy9JIxaZrHcMSeI0UReCpzNNkXcXdhEUacgzgDGV2Zgk9084JjRqUdxwrvrYLiK55lAjH_wJ9N7kWt](https://lh6.googleusercontent.com/wTLUV7bsO5u2kiuFJSIq5Io--0eyJOoRFwCbZ5draGiPFmFC5bXt9g6EFOFy9JIxaZrHcMSeI0UReCpzNNkXcXdhEUacgzgDGV2Zgk9084JjRqUdxwrvrYLiK55lAjH_wJ9N7kWt)\n\n![https://lh4.googleusercontent.com/iwY4l-CBcTzq9NFpc1E6ZhSZtNHRfP36C-a49gW33SjHMw_iTgiuHHwwzCAOCikkJ5iO_xVIgefZA52Gjk3vqG19WJiw70RW-cNsVWciMMApTBViwcCsGC2i9jw8cJjnXkKpDard](https://lh4.googleusercontent.com/iwY4l-CBcTzq9NFpc1E6ZhSZtNHRfP36C-a49gW33SjHMw_iTgiuHHwwzCAOCikkJ5iO_xVIgefZA52Gjk3vqG19WJiw70RW-cNsVWciMMApTBViwcCsGC2i9jw8cJjnXkKpDard)\n\n![https://lh4.googleusercontent.com/48iuiCNkRih-s-M2J6__MsJc-q2mNy1FBdyOB4AEHpPtcI36g1nmTtNA-qLRRBxWILfB0WmiIhCQSKyjoGsxfCt7uVqZSXn-HDDrQCWkEAAnIOksLEkOCAQ7DDS7yH3qTtyrhORN](https://lh4.googleusercontent.com/48iuiCNkRih-s-M2J6__MsJc-q2mNy1FBdyOB4AEHpPtcI36g1nmTtNA-qLRRBxWILfB0WmiIhCQSKyjoGsxfCt7uVqZSXn-HDDrQCWkEAAnIOksLEkOCAQ7DDS7yH3qTtyrhORN)\n\nNext, I’m going to insert some data into my database. I’ll start with the Categories collection, click in there and then click New Document. If you’re familiar with JSON, this will be pretty straightforward, you can put any JSON you want inside the brackets. For example, to add a category called Dessert, you can do the following:\n\n![https://lh3.googleusercontent.com/kqwVA29ZIHqQAwl_DzraKRW4-kLLkUYawube-E56TraV2aYXm_vJW1OI2JqRqFlior9LNgCtsaw8ty8P2nsEcFlbER8B54Kxffa7NMfMkrmvvQERJtiEjburz6wEWaylOILqzvNE](https://lh3.googleusercontent.com/kqwVA29ZIHqQAwl_DzraKRW4-kLLkUYawube-E56TraV2aYXm_vJW1OI2JqRqFlior9LNgCtsaw8ty8P2nsEcFlbER8B54Kxffa7NMfMkrmvvQERJtiEjburz6wEWaylOILqzvNE)\n\nYou can also use the shell (either inside the Fauna dashboard or via the fauna-shell [NPM package](https://www.npmjs.com/package/fauna-shell?activeTab=readme)), or any language that supports the Fauna API, which I’ve used in this case to add items in bulk:\n\n```jsx\nCreate(Collection(\"Categories\"), { data: { name: \"Sandwiches\" } })\n\nCreate(Collection(\"Categories\"), { data: { name: \"Sides\" } })\n\nCreate(Collection(\"Categories\"), { data: { name: \"Beverages\" } })\n\nCreate(Collection(\"Categories\"), { data: { name: \"Desserts\" } })\n```\n\nWe’ll get back the inserted data, with a unique reference for each that we’ll need to use later to add items:\n\n```jsx\n[\n  {\n    ref: Ref(Collection(\"Categories\"), \"322794748885598273\"),\n    ts: 1644099911490000,\n    data: {\n      name: \"Sandwiches\"\n    }\n  },\n  {\n    ref: Ref(Collection(\"Categories\"), \"322794748889792577\"),\n    ts: 1644099911492000,\n    data: {\n      name: \"Sides\"\n    }\n  },\n  {\n    ref: Ref(Collection(\"Categories\"), \"322794748889793601\"),\n    ts: 1644099911495000,\n    data: {\n      name: \"Beverages\"\n    }\n  },\n  {\n    ref: Ref(Collection(\"Categories\"), \"322794748889794625\"),\n    ts: 1644099911497000,\n    data: {\n      name: \"Desserts\"\n    }\n  }\n]\n```\n\nNext, let’s create a product. Go to the Products collection, and let’s start with a BLT sandwich:\n\n\n![BLT](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/u3gclt14as50m7zoar7c.png)\n\nThe name and price look pretty straightforward, but what’s going on with that category? This is what’s known as a reference in Fauna. Essentially, we’re telling the database to refer to the Categories collection and bring back the document with an ID of 322794748885598273.\n\nUsing the ID as a reference rather than just adding the category name makes it easy to change category details later on. For example, if I want to change a category name from Beverages to Drinks, I can do so in the Categories collection without having to touch the Products collection at all.\n\nNext, I’m going to go ahead and bulk add a bunch of products to the database. I’ll do this through the Fauna shell, using Fauna’s [Map](https://docs.fauna.com/fauna/current/api/fql/functions/map?utm_source=hashnode&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom) and [Lambda](https://docs.fauna.com/fauna/current/api/fql/functions/lambda?utm_source=DevTo&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom) functions:\n\n```jsx\nMap(\n\t[\n\t\t['BLT', 6.99, '322794748885598273'],\n\t\t['Turkey and Swiss', 7.99, '322794748885598273'],\n\t\t['Egg, Bacon, and Cheese', 4.99, '322794748885598273'],\n\t\t['Chicken Bacon Ranch', 7.99, '322794748885598273'],\n\t\t['Grilled Cheese', 5.99, '322794748885598273'],\n\t\t['Potato Chips', 1.25, '322794748889792577'],\n\t\t['Mac and Cheese', 3.99, '322794748889792577'],\n\t\t['Potato Salad', 2.99, '322794748889792577'],\n\t\t['Soup of the Day', 3.99, '322794748889792577'],\n\t\t['Bottled Water', 1.50, '322794748889793601'],\n\t\t['Fountain Drink', 1.99, '322794748889793601'],\n\t\t['Coffee', 1.99, '322794748889793601'],\n\t\t['Cold Brew', 2.99, '322794748889793601'],\n\t\t['Espresso', 3.99, '322794748889793601'],\n\t\t['Blueberry Muffin', 1.99, '322794748889794625'],\n\t\t['Chocolate Chip Muffin', 1.99, '322794748889794625'],\n\t\t['Croissant', 1.49, '322794748889794625'],\n\t\t['Brownie', 1.49, '322794748889794625'],\n\t\t['Chocolate Chip Cookie', .99, '322794748889794625'],\n\t\t['Slice of Cheesecake', 2.99, '322794748889794625']\n\t],\n\n\tLambda(\n\t\t['name', 'price', 'category'],\n\t\tCreate(\n\t\t\tCollection('Products'),\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tname: Var('name'),\n\t\t\t\t\tprice: Var('price'),\n\t\t\t\t\tcategory: Ref(Collection('Categories'), Var('category'))\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t)\n)\n```\n\nIf you’re familiar with the map function in JavaScript, this may look familiar to you. Essentially, I’ve built an array of arrays, and the map function loops through the outer array and passes each inner array to a Lambda function for processing. The Lambda destructures the inner array into its components: the name, price, and category ID. Then I take that data and pass it into a Create function to add a new document to the Products collection. This allowed me to add all of these rows in less than half a second, and it saved me some extra typing.\n\nNext, I’m going to create a few indexes to help with data retrieval. First, we’ll need one for all_categories, as this is how we’ll group our menu in the frontend. Go ahead and run the following in the Fauna console:\n\n```jsx\nCreateIndex({\n\tname: \"all_categories\",\n\tsource: Collection(\"Categories\"),\n\tvalues: [\n\t\t{ field: [\"ref\"] },\n\t\t{ field: [\"data\", \"name\"] }\n\t]\n})\n```\n\nThis will create an index called `all_categories` that will return each category’s ID and name. I’ve listed the ref (ID) first because we’ll use that to sort.\n\nNext, I’m going to create the main index we’ll actually be using in the application. I’m planning on having the menu of products, grouped by category. So, we’ll want an index where the field to search is the category, and the values returned are the product names and prices. Here’s an example of how to create an Index in the dashboard GUI, rather than the console:\n\n![https://lh4.googleusercontent.com/hwL03D8ZVh8_5zOyfmy3DEa1eP6IldPUH0tqpPXi0jdUw-wYNt8VPl03GpWYfZ45i3wvprn1COnIjSxO39Ezc6CglivfBLUuwidoIS98311glRrB539zd1lOysn2S3rhT1VF9TrU](https://lh4.googleusercontent.com/hwL03D8ZVh8_5zOyfmy3DEa1eP6IldPUH0tqpPXi0jdUw-wYNt8VPl03GpWYfZ45i3wvprn1COnIjSxO39Ezc6CglivfBLUuwidoIS98311glRrB539zd1lOysn2S3rhT1VF9TrU)\n\nNow, when I go back to that index, I can use the FQL option to search it. The code snippet gets cut off in the screenshot, but it’s just `Ref(Collection(‘Categories’), ‘322794748885598273’)`.\n\n![https://lh6.googleusercontent.com/znKhPZzLBmFE7LOfPuyJLt5eqtbXZrAnMfSKxGuLvr7roYoA9Jojouyts6d61YQQA_mJC2CnJKnSxBZtUaQnR-kd10hWP2ZA_1DvC2l4ll74g8c_sGq_60YPaB2MAAatKKnLhe1u](https://lh6.googleusercontent.com/znKhPZzLBmFE7LOfPuyJLt5eqtbXZrAnMfSKxGuLvr7roYoA9Jojouyts6d61YQQA_mJC2CnJKnSxBZtUaQnR-kd10hWP2ZA_1DvC2l4ll74g8c_sGq_60YPaB2MAAatKKnLhe1u)\n\nThat will bring back the name and price for each item in category 322794748885598273, which is Sandwiches.\n\n## Security\n\nThere’s one other thing we need to do on the database side before we move over to building our application. We’ll need to create a role in Fauna that we can use for fetching data. On the security tab in the dashboard, select Roles, and click New Custom Role. I used the title `Svelte` here, but you can pick whatever you’d like. Then, add all three of our Collections and our Indexes using the dropdowns. Give the Products and Categories the Read permission by checking the box in that column, and give Orders the Create permission. Then, give both Indexes the Read permission.\n\n![https://lh5.googleusercontent.com/RwiWVrI08CmN6LDVVH99OCkuxYevZTZh2a5BtfswjnUrt0KuKQNzOkp6_hq6Dta6Wlo3tD6j0WmNPYLaVtRDl2LemrPZwbOPgfVwhw_uXgGLEqouXUpPTjQNJOD4w7ziK2orf4Hh](https://lh5.googleusercontent.com/RwiWVrI08CmN6LDVVH99OCkuxYevZTZh2a5BtfswjnUrt0KuKQNzOkp6_hq6Dta6Wlo3tD6j0WmNPYLaVtRDl2LemrPZwbOPgfVwhw_uXgGLEqouXUpPTjQNJOD4w7ziK2orf4Hh)\n\nHere we’re telling Fauna that we want read access to our products and categories to populate the menu on the frontend. We also want to be able to write new orders to the orders collection when an order is submitted. Finally, we want read-only access to our indexes. We don’t want to give this role access to do anything nefarious, like create new products in our Products collection, or to delete Categories, so it’s important to be very choosy here.\n\nOnce that’s done, go back to the Security tab, select Keys, and create a new key using the Svelte role:\n\n![https://lh4.googleusercontent.com/qJU1GNXtr_viti9lx9zVvtCunxIu3hvShJHQnjUNuv-WLU_9hfly-iR9Yxt9QpvANTXFk1OhLonJdxFNQrZqZB3sH3Uueq8GYVS8iA-YyV64itoB5VlNtv2czBNGayXCiCjypTXA](https://lh4.googleusercontent.com/qJU1GNXtr_viti9lx9zVvtCunxIu3hvShJHQnjUNuv-WLU_9hfly-iR9Yxt9QpvANTXFk1OhLonJdxFNQrZqZB3sH3Uueq8GYVS8iA-YyV64itoB5VlNtv2czBNGayXCiCjypTXA)\n\nYou’ll get the key back when you submit it; keep it somewhere safe because you will only see it this one time.\n\n## Building the Frontend\n\nWe now have enough set up on the database to begin working on our Svelte application. In Visual Studio Code, I’ve opened a folder I created called SvelteBakery, and then I ran the following terminal commands to spin up my project:\n\n```jsx\nnpx degit sveltejs/template .\nnpm install\n```\n\nInside of the src folder, I’ve also created a components sub-folder and a stores sub-folder. The folder structure should look like this now:\n\n![https://lh5.googleusercontent.com/OXsCrrwD2K2hROqdh_W3EQiQf9OLILElwIBAfMoEx6DrFEhlDAqNCUegUICQWWrPs1ozXk91mTNlgrAhGjLoDjjGFFI6uG1qFTafJIeGTKi6D7eq0aOHumbBEBp0zH3J9UBqN0ju](https://lh5.googleusercontent.com/OXsCrrwD2K2hROqdh_W3EQiQf9OLILElwIBAfMoEx6DrFEhlDAqNCUegUICQWWrPs1ozXk91mTNlgrAhGjLoDjjGFFI6uG1qFTafJIeGTKi6D7eq0aOHumbBEBp0zH3J9UBqN0ju)\n\nLet’s begin with the stores folder. Here, we’re going to create a file called `stores.js` and populate it with the following code:\n\n```jsx\nimport { writable } from ‘svelte/store’\n\nexport const shoppingCart = writable([])\n```\n\nSvelte makes it very easy to share data across your components with these built-in stores. If you’re coming from another framework, such as React, you may be used to using something like Redux for state management, but Svelte includes this out of the box. We’ll use that store later in the tutorial to track items in our cart.\n\nI’m also creating a store to make it easy to share our Fauna client across components. To do this, I’ve created a file called `fauna.js` inside the same stores folder and populated it with this similar looking code:\n\n```jsx\nimport { writable } from 'svelte/store'\n\nexport const fauna = writable({})\n```\n\nThe only real difference is that the shoppingCart was initialized with an empty array, while the fauna store was initialized with an empty object.\n\nI’m going to use that in our main App.svelte file, which now looks like the following:\n\n```jsx\n<script>\n\timport ProductMenu from \"./components/ProductMenu.svelte\";\n\timport ShoppingCart from \"./components/ShoppingCart.svelte\";\n\timport Nav from \"./components/Nav.svelte\";\n\timport { fauna } from './stores/fauna';\n\t\n\tlet currentPage = \"menu\";\n\t\n\tfunction connectToFauna() {\n\t\tconnectToFauna = () => {};\n\t\tfauna.set(\n\t\t\t{\n\t\t\t\tclient: new window.faunadb.Client({ domain: 'db.us.fauna.com', scheme: 'https', secret: \"INSERT_SECRET_HERE\" }),\n\t\t\t\tq: window.faunadb.query\n\t\t\t}\n\t\t)\n\t}\n\t\n\tfunction handlePageChange(e) {\n\t\tcurrentPage = e.detail.newPage;\n\t}\n<\/script>\n\n<main>\n\t<Nav on:changepage={handlePageChange} />\n\t{#if currentPage === \"menu\"}\n\t\t<ProductMenu />\n\t{:else if currentPage === \"cart\"}\n\t\t<ShoppingCart />\n\t{/if}\n</main>\n\n<svelte:head>\n\t<script src=\"//cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb-min.js\" on:load={connectToFauna}><\/script>\n</svelte:head>\n\n<style>\n\tmain {\n\t\ttext-align: center;\n\t\tpadding: 1em;\n\t\tmargin: 0 auto;\n\t}\n</style>\n```\n\nA few things to note here:\n\n- At the top, I’ve got four imports: `ProductMenu`, `ShoppingCart`, and `Nav` (three Svelte components which we’ll create below), and our Fauna client store that we created above.\n- I’m using a `svelte:head` block down below. This allows for code to be injected in the head section of the compiled HTML. In this case, I’ve opted to use the Fauna JavaScript driver from a CDN, rather than attempting to install from npm and deal with a polyfill.\n- I have an `onload` parameter, so that once the Fauna driver is loaded, the `connectToFauna` function will run and instantiate the connection. Credit to the Svelte REPL I found [here](https://svelte.dev/repl/c56ca90d0b3f4e888ad9a71263decbff?version=3.31.0) for this function.\n- One issue I ran into here was the domain. Depending on the region your Fauna database is in, you will need to customize this accordingly — each region group has its own subdomain that you *must* use, or else you’ll be confused why you can’t access any of your data.\n- In addition to the domain, you’ll need to insert the secret key generated earlier for the Svelte database role. Fill that in where it says “INSERT_SECRET_HERE”.\n- I have a `handlePageChange` function and an if block in the actual HTML to determine whether to display the menu or shopping cart. I’ll have more on that below.\n\nNext, let’s jump over to the components folder and start scaffolding our layout. Our application will be pretty simple, with a navigation bar at the top to switch between the menu and the shopping cart/checkout process. Inside of the components folder, let’s go ahead and create the following blank files:\n\n- `Nav.svelte`\n- `ProductMenu.svelte`\n- `MenuSection.svelte`\n- `MenuItem.svelte`\n- `ShoppingCart.svelte`\n\nWe’ll begin with the Nav component, as this will allow us to jump back and forth between the product menu and shopping cart. Here’s the full code for Nav:\n\n```jsx\n<script>\n\timport { shoppingCart } from '../stores/shoppingCart';\n\timport { createEventDispatcher } from 'svelte';\n\t\n\tconst dispatch = createEventDispatcher();\n\t\n\tfunction changePage(newPage) {\n\t\tif (newPage === \"menu\" || $shoppingCart.length > 0)\n\t\t\tdispatch('changepage', {\n\t\t\t\tnewPage: newPage\n\t\t\t});\n\t}\n<\/script>\n\n<nav>\n\t<h1>Svelte Bakery Demo</h1>\n\t\t<a href=\"#\" on:click={() => changePage(\"menu\")}>Menu</a>\n\t\t<a href=\"#\" on:click={() => changePage(\"cart\")}>Cart\n\t\t\t{#if $shoppingCart.length > 0}({$shoppingCart.length} items){/if}\n\t\t</a>\n</nav>\n\n<style>\n\tnav {\n\t\tdisplay: flex;\n\t\tcolor: #FFF;\n\t\tbackground-color: rgb(14, 14, 46);\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n\t\n\t@media(min-width: 768px) {\n\t\tnav {\n\t\t\tflex-direction: row;\n\t\t\tgap: 3rem;\n\t\t}\n\t}\n\t\n\th1 {\n\t\tflex-basis: 50%;\n\t}\n\t\n\ta {\n\t\ttext-decoration: none;\n\t\tcolor: #FFF;\n\t\tfont-weight: bold;\n\t}\n\t\n\ta:hover {\n\t\ttext-decoration: underline;\n\t}\n</style>\n```\n\nIn the script section, I’m using `createEventDispatcher` to dispatch a custom event to the parent (App.svelte). When clicking on one of the links, `changePage` is called, and that function will send up an event to the main app with the new page name. Recall this code above from `App.svelte`, when we placed our `Nav` component in the HTML:\n\n```jsx\n<Nav on:changepage={handlePageChange} />\n```\n\nYou can see that I’ve set it up to call the `handlePageChange` function in `App.svelte` when that `changepage` event is dispatched. That will update the `currentPage` variable in `App.svelte`, which drives whether the end user sees the menu or cart.\n\nIn addition to the functionality around changing pages, you can also see another if block in `Nav.svelte`. I’ve imported my shopping cart store and am using `shoppingCart.length` in a couple places to determine whether to show the number of items in the cart in the navbar, as well as whether the shopping cart link should even do anything — we won’t direct the user to the cart if it is currently empty. Store variables must be prefixed with a dollar sign in order to access them, but otherwise they work just like regular variables for reading, which makes it very easy.\n\nNext, we’ll get started on the actual menu of products. The ProductMenu component will be our wrapper for the menu, and it’ll contain a MenuSection component for each category that holds our items. Inside each MenuSection will be individual MenuItem components for each product. Let’s start at the highest level, ProductMenu, and work our way down:\n\n```jsx\n<script>\n\timport MenuSection from './MenuSection.svelte';\n\timport { fauna } from '../stores/fauna';\n\t\n\tlet loaded = false;\n\tlet categories = [];\n\t\n\t$: {\n\t\tif ($fauna.client && !loaded) {\n\t\t\tloaded = true;\n\t\t\t$fauna.client.query(\n\t\t\t\t$fauna.q.Paginate(\n\t\t\t\t\t$fauna.q.Match(\n\t\t\t\t\t\t$fauna.q.Index('all_categories')\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t\t.then((res) => {\n\t\t\t\tcategories = res.data;\n\t\t\t})\n\t\t}\n\t}\n<\/script>\n\n<section>\n\t<h2>Menu</h2>\n\t{#each categories as category}\n\t\t<MenuSection {category} />\n\t{/each}\n</section>\n```\n\nHere in `ProductMenu.svelte`, I’m importing our Fauna client from its store, as well as the MenuSection component which will be the next level down. Then, I’ve instantiated a couple of variables, one to hold the load state and one to hold the category list. I also checked the load state because I don’t want to attempt to query Fauna until the client is ready to go.\n\nI’m then using a reactive block (the `$:` in Svelte indicates a code block that will run when something inside of it has changed, in this case when the `$fauna.client` store has changed). This block will query the `all_categories` index and will bring back the `id` and `name` of each category. I’m populating the categories array with this returned data. Down below, I’m using a Svelte each block to iterate through the categories array. Each category will spawn a MenuSection component with the category passed as a parameter to it. Let’s look at the MenuSection next.\n\n```jsx\n<script>\n\timport MenuItem from './MenuItem.svelte';\n\timport { onMount } from 'svelte';\n\timport { fauna } from '../stores/fauna';\n\t\n\texport let category;\n\t\n\tlet [ ref, name ] = category;\n\tlet items = [];\n\t\n\tonMount(async () => {\n\t\tlet x = await $fauna.client.query(\n\t\t\t$fauna.q.Paginate(\n\t\t\t\t$fauna.q.Match(\n\t\t\t\t\t$fauna.q.Index('product_by_category'), \n\t\t\t\t\tref\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t\titems = x.data;\n\t})\n<\/script>\n\n<div>\n\t<h3>{name}</h3>\n\t<div class=\"items\">\n\t\t{#each items as item}\n\t\t\t<MenuItem {item} />\n\t\t{/each}\n\t</div>\n</div>\n\n<style>\n\t.items {\n\t\tdisplay: flex;\n\t\tgap: 2rem;\n\t\tjustify-content: center;\n\t\tflex-wrap: wrap;\n\t}\n</style>\n```\n\nThis code gives us one thing we haven’t seen yet in our previous Svelte components: the `export let` statement. Export let defines a parameter that is passed into this component by its parent. In this case, we’ve defined category as something that will be passed in. You may have noticed that the MenuSection component was inserted in the ProductMenu with a `<MenuSection {category} />`. Because the variable passed in is named category, and the component is expecting one named category, I was able to enclose category in braces and leave it at that. If the variable had a different name in `ProductMenu`, say `c` for instance, I would have had to type `<MenuSection category={c} />` instead. This nice little bit of syntactic sugar is Svelte-specific.\n\nBack to the `MenuSection` component — we’re also using `onMount` here. This is one of [Svelte’s lifecycle methods](https://svelte.dev/tutorial/onmount) and allows us to run code when the component has been mounted in the DOM. In contrast to `ProductMenu`, we know that we’ll have an instantiated Fauna client by the time the `MenuSection` is mounted, so we don’t have to use the reactive statement workaround we created earlier. In this case, we can cleanly call the Fauna client inside `onMount`.\n\nI’m using the `product_by_category` index here, which lets us search by `category_id`. Since we passed that data into the component along with the category name, we can query to get all of the products in a particular category. Then, I’m using another each block to iterate through and send each one to a `MenuItem` component. Take a look at the last piece of the menu, `MenuItem`:\n\n```jsx\n<script>\n\timport { shoppingCart } from \"../stores/shoppingCart\";\n\t\n\texport let item;\n\t\n\tlet [ name, price ] = item;\n\t\n\tfunction addToCart() {\n\t\tshoppingCart.update(n => {\n\t\t\treturn [ ...n, {name: name, price: price}];\n\t\t});\n\t}\n<\/script>\n\n<div>\n\t<h4>{name}</h4>\n\t<strong> ${price.toFixed(2)}</strong>\n\t<button on:click={addToCart}>Add to cart</button>\n</div>\n\n<style>\n\tdiv {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 90%;\n\t\tborder: 1px solid #000;\n\t\tborder-radius: 5px;\n\t}\n\t\n\t@media(min-width: 768px) {\n\t\tdiv {\n\t\t\twidth: 15%;\n\t\t}\n\t}\n\t\n\tbutton {\n\t\twidth: fit-content;\n\t\tmargin: 1rem auto;\n\t}\n</style>\n```\n\nIn the script section, I’ve imported the `shoppingCart` store, as we will write items to the cart here as they are added. I also once again have an `export let` declaration, as the specific item object will get passed in from `MenuSection`. Finally, I define the `addToCart` function, which will add the item to the `shoppingCart` store using the `shoppingCart.update` method.\n\nThe HTML and CSS are pretty straightforward; I’ll just call specific attention to the `on:click` declared on the button. This is Svelte’s syntax for putting an event handler on an element. Since the item name and price are scoped to the component, I don’t have to worry about passing parameters to the function, as those are already known.\n\nWe’re getting close to the end! Let’s now take a look at the cart and checkout processes. Here’s `ShoppingCart.svelte`:\n\n```jsx\n<script>\nimport { shoppingCart } from \"../stores/shoppingCart\";\nimport { fauna } from '../stores/fauna';\n\nconst reducer = (previousValue, currentValue) => previousValue + parseFloat(currentValue.price);\nlet total;\nlet customerName;\nlet confirmed = false;\n\n$: total = $shoppingCart.reduce(reducer, 0);\n\nfunction removeItem(idx) {\nshoppingCart.update(n => {\nif (idx === 0) return [...n.slice(1)];\nif (idx === n.length - 1) return [...n.slice(0, n.length - 1)]\nreturn [...n.slice(0, idx), ...n.slice(idx+1)]\n})\n}\n\nfunction submitOrder() {\nconsole.log(customerName);\n\n$fauna.client.query(\n$fauna.q.Create(\n$fauna.q.Collection('Orders'),\n{ data: { customerName: customerName, details: $shoppingCart, total: total } }\n)\n).then(() => {\nconfirmed = true;\n})\n}\n<\/script>\n\n<section>\n\t<h2>Shopping Cart</h2>\n\n\t<table>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>Item</th>\n\t\t\t\t<th>Price</th>\n\t\t\t\t<th></th>\n\t\t\t</tr>\n\t\t</thead>\n\n\t\t<tbody>\n\t\t\t{#each $shoppingCart as item, idx}\n\t\t\t\t<tr>\n\t\t\t\t\t<td>{item.name}</td>\n\t\t\t\t\t<td>${item.price.toFixed(2)}</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button on:click={() => removeItem(idx)}>Remove</button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t{/each}\n\t\t</tbody>\n\n\t\t<tfoot>\n\t\t\t<tr>\n\t\t\t\t<td>Total</td>\n\t\t\t\t<td>${total.toFixed(2)}</td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t</tfoot>\n\t</table>\n\t\n\t{#if !confirmed}\n\t\t<form on:submit|preventDefault={submitOrder}>\n\t\t\t<label for=\"name\">Name: </label>\n\t\t\t<input type=\"text\" id=\"name\" bind:value={customerName} />\n\t\t\t<input type=\"submit\" />\n\t\t</form>\n\t{:else}\n\t\t<div>Thank you very much for your order!</div>\n\t{/if}\n</section>\n\n<style>\n\tsection, table {\n\t\tmargin: 0 auto;\n\t}\n\t\n\ttable {\n\t\tborder: 1px solid #000;\n\t\tborder-collapse: collapse;\n\t}\n\t\n\ttd, th {\n\t\tpadding: 1rem;\n\t}\n\t\n\ttr:nth-child(even) {\n\t\tbackground: rgb(172, 170, 170);\n\t}\n\t\n\tthead, tfoot {\n\t\tfont-weight: bold;\n\t}\n</style>\n```\n\nWe’re importing both of our stores this time, as we’ll need `shoppingCart` to read the data we’ve put in the cart, and we’ll need our Fauna driver to create a new document in the Orders collection. I’m using a [reducer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce) to sum the prices for all items in the cart and give me a single grand total value.\n\nI’ve built a table in the HTML section that will pull in my shopping cart details. Each row also has a button that calls a `removeItem` function, which will delete that item from the cart. In contrast to the `each` blocks I’ve used earlier, I also used an index on this one, as that allows me to track the index for each row in the table, so that I can use that value to remove the right record from my `shoppingCart` store.\n\nFinally, I have a conditional section that will either show an ordering form if the order has not been submitted, or a confirmation text if it has. Submitting the form calls `submitOrder`, which will use the `Create` function in Fauna to add a new document to our Orders collection (recall that the role we made earlier allows this). I’m using Svelte’s form binding to bind the name input to the customerName variable, which makes working with forms extremely smooth.\n\nAfter a test run of the shopping cart, here’s an example of final data in the Orders collection:\n\n```jsx\n{\n\t\"ref\": Ref(Collection(\"Orders\"), \"321462934244950082\"),\n\t\"ts\": 1642829794070000,\n\t\"data\": {\n\t\t\"customerName\": \"Alexander Popoutsis\",\n\t\t\"details\": [\n\t\t\t{\n\t\t\t\t\"name\": \"Potato Chips\",\n\t\t\t\t\"price\": 1.25\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Potato Salad\",\n\t\t\t\t\"price\": 2.99\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Soup of the Day\",\n\t\t\t\t\"price\": 3.99\n\t\t\t}\n\t\t],\n\t\t\"total\": 8.23\n\t}\n}\n```\n\n## Next Steps\n\nIf you’d like to see the full code in one place, it’s [on GitHub](https://github.com/apop880/SvelteBakery).\n\nThis is, of course, a basic demonstration, and there are many more things that could be done to make it more advanced (for example, handling item quantities and improving the styling). In addition, since this is a fully client-side app, the Fauna key is visible to end users, and security is especially important. To add a server-side component, you could use SvelteKit and hide the Fauna pieces behind a SvelteKit API endpoint.\n\nYou now have everything you need to get started with a basic app, using the fantastic combination of Fauna and Svelte. If you haven’t already, [click here](https://dashboard.fauna.com/accounts/register?utm_source=hashnode&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom) to get signed up with a Fauna account. And if you get stuck at all, the [Fauna community](https://community.fauna.com/?utm_source=DevTo&utm_medium=referral&utm_campaign=Alex_Popoutsis_Svelte_Ecom) is a fantastic resource as well.",a.user={name:"Fauna",username:"fauna_admin",twitter_username:t,github_username:s,website_url:"https://fauna.com",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--Qo2AjKRX--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/220097/6333f971-f032-4097-a7c8-64749ae2630c.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--NzoFB6fZ--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/220097/6333f971-f032-4097-a7c8-64749ae2630c.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:a}},error:s,state:{currentArticle:a},serverRendered:!0,routePath:"/fauna_admin/1024135",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:s}}}}(null,{},"https://dev.to/fauna_admin/building-a-svelte-ecom-site-i02","2022-03-16T16:16:12Z","fauna")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
