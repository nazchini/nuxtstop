<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Best Practices for Argo CD</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Best Practices for Argo CD</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/argocd" class="tag" data-v-70afb46a>
          #argocd
        </a><a href="/nuxtstop/t/gitops" class="tag" data-v-70afb46a>
          #gitops
        </a><a href="/nuxtstop/t/bestpractices" class="tag" data-v-70afb46a>
          #bestpractices
        </a><a href="/nuxtstop/t/cd" class="tag" data-v-70afb46a>
          #cd
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--buFmgAIr--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cb01keq0gy16eip7514a.png" alt="Best Practices for Argo CD" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            7
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            0
          </span></div> <time data-v-70afb46a>Apr 4</time></div></header> <div class="content" data-v-70afb46a><h4>What are some best practices when using Argo CD?</h4>

<p>Within this blog post, we’ll be highlighting some best practices tied to <a href="https://argo-cd.readthedocs.io/en/stable/#what-is-argo-cd">Argo CD</a>, that allow you to leverage GitOps easily within your deployment workflow.<br>
Below we will explain the following:</p>

<ul>
    <li>What is Argo CD</li>
    <li>What are some best practices with Argo CD?</li>
</ul>

<h3>What is Argo CD</h3>

<p>Argo CD is the most popular and fastest-growing <a href="https://codefresh.io/gitops/" rel="noopener">GitOps</a> tool for Kubernetes. When following a GitOps deployment pattern, Argo CD makes it easy to define a set of applications with their desired state in a repository and where they should be deployed. After a deployment, Argo CD constantly monitors the state and can even catch configuration drift.</p>

<p>Argo CD's core component is the <a href="https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/" rel="noopener">Applications Controller</a> that executes continuous monitoring of applications and then compares them to the live application state against your target state defined within your Git repository.</p>

<p>The Application controller retrieves the desired resource manifest from the Git repository and compares it to the live resource from your Kubernetes cluster.</p>

<p>This approach enables GitOps for your deployment workflow by leveraging Git as your source of truth. Now, let's further explore how we can leverage Argo CD best for our deployments!</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--coIGyZsa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/app-status-in-sync.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--coIGyZsa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/app-status-in-sync.png" alt="App Status - In Sync" loading="lazy" width="807" height="600"></a></p>

<p>The image above shows the primary Argo CD dashboard with a single Argo application successfully deployed.</p>

<p><a href="https://lh3.googleusercontent.com/AQ28k1lG1SA_xvJjki5PQJD3Cy4RrxL7BlNca30kW3L_scMn6b9LHPfQkLHrj2dyuetUMQQvQyO2loFmQ0l8V742f3V29ow1ztan82FLuJoXhJCy7AoFERrpT34uRBR-pmTqWaS9"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--g4gjyJC6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/hierarchical-view-of-all-kubernetes-resources.png" alt="Hierarchical view of all Kubernetes resources" loading="lazy" width="880" height="308"></a></p>

<p>The dashboard above provides a detailed view of the same Argo application deployed in the image above. However, it also provides an understanding of the status of the Kubernetes resources.</p>

<p>Now, let's explore how we can apply best practices to our Argo CD deployments!</p>

<h3>
<a id="post-21871-_m13x9eymh82e"></a><strong>Argo CD Best Practices</strong>
</h3>

<p>Argo CD has several best practices; however, we will review some of the most important ones we've gathered from the Argo community and prioritized below.</p>

<ol>
<h4>1. <strong>Separate your Git repositories</strong>
</h4>
</ol>

<p>It's super important to separate your configurations and source code into different Git repositories. Separating your configs in their repository limits commit access to avoid something being pushed to production environments. For example, if you accidentally push manifest changes to the config repo, it can trigger an infinite loop of build jobs and Git commit triggers. Using an automated CI pipeline, you can also prevent pushing manifest changes to the same repo.</p>

<p>Separating your repositories is also more secure and restricts commit access, so someone does not accidentally misconfigure an application.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--wVdTgQSL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174003.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--wVdTgQSL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174003.png" loading="lazy" width="880" height="396"></a></p>

<p>Argo CD does not connect to your source code repository. However, if you make a change to your code and you want to deploy the change to a specific environment, you can do the following:</p>

<ul>
    <li>Build a new application code version and then merge a pull request (PR) in the configuration repo to use the new application version you created.</li>
    <li>Utilize automation for the update you made to your source code by using a pipeline in the source code repository.</li>
    <li>Argo CD Image Updater allows you to update your container images of the Kubernetes workload managed by Argo CD.</li>
</ul>

<p>These approaches allow you to maintain logs for any auditing process. You can quickly identify development activity and reference your Git history for easy traceability.</p>

<ol>
<h4>2. <strong>Create a directory structure to enable a multi-application system for your Argo CD deployments</strong>
</h4>
</ol>

<p>Once you've separated your source code and configs into separate repositories, it's essential to set up a directory structure that applies GitOps for Argo CD deployments. You can leverage several approaches for your Git repository structure that best serves your organization's needs.</p>

<p>However, we'll highlight some tips to best structure your directory when using Argo CD.</p>

<ul>
    <li>Do: We suggest modeling your environments or clusters using different folders instead of branches in your configuration repository (e.g., prod, staging, testing, etc.).</li>
    <li>Do: Make sure your cluster and environment configurations repositories are separated (i.e., separate your prod configuration in a different repository from staging).</li>
    <li>Do: Utilize some sort of manifest management, such as a raw Kubernetes YAML file, Kustomize, or Helm for your environment definitions for your apps.</li>
    <li>Do: Create an 'argocd' folder in your configuration repository for each cluster and create an Argo CD Application manifest for each app in the cluster's repository.
<ul>
    <li>By creating the separate 'argocd' folder, you can also implement role-based access control for different clusters if you wish with Git repository permissions.</li>
</ul>




</li>

    <li>Do: Leverage a multi-folder or a multi-repo structure instead of a multi-branch approach. You should NOT have permanent branches for your clusters or environments.</li>

    <li>Don't: Never put any independent applications or applications managed by different teams in the same repository.</li>

</ul>
<br><br>
Implementing these strategies above for your directory structure provides several advantages. Those advantages include improved security, easy rollbacks, audit log, easier testing, and automating your manifest updates. It also allows you to create and delete applications dynamically. If you'd like to see some examples of these directory structures, look <a href="https://github.com/argoproj/argocd-example-apps" rel="noopener">here</a>.

<ol>
<h4>3. <strong>Determine a promotion strategy</strong>
</h4>
</ol>

<p>Now that you've established a directory structure, you may face a challenge regarding the best promotion practice between clusters. When deploying multiple applications with Argo CD, it's best to pick one promotion strategy that suits your directory structure and stick with it. Below we'll highlight how you can do this based on your own needs.</p>

<h5>
<a id="post-21871-_9m9qm130wnjz"></a>Group your applications</h5>

<ul>
    <li><a href="https://argocd-applicationset.readthedocs.io/en/stable/" rel="noopener">ApplicationSets</a></li>
</ul>

<p>First and foremost, once you've established a way to manage your applications and deployments, and there are too many apps to keep track of - the ApplicationSet is your best solution. We should also note that the ApplicationSet was previously an external controller that you had to install on your own, and now it's integrated and makes things much easier! However, you need some extra support when using the ApplicationSet instead of the App of Apps pattern that is easy enough to use right away without any additional help or a learning curve.</p>

<p>Yet, when deploying to production, an ApplicationSet is the best choice. This is because an ApplicationSet is a Kubernetes controller/custom resource definition (CRD) that enables automation and allows flexibility when managing multiple applications across several clusters.</p>

<p>The ApplicationSet consists of two main components:</p>

<ul>
    <li><a href="https://argocd-applicationset.readthedocs.io/en/stable/Generators/" rel="noopener">Generators</a></li>
    <li><a href="https://argocd-applicationset.readthedocs.io/en/stable/Template/#templates" rel="noopener">Application template</a></li>
</ul>

<p>You are essentially allowing the ApplicationSet to act as a templating agent.</p>

<p>The generators used with the ApplicationSet are responsible for generating params, utilizing the template to consume the variables, and then applying them to the cluster as Argo CD applications. So, any changes made to an ApplicationSet template and its fields will automatically be applied to each application created.</p>

<p>This way, you can simultaneously deploy your Argo apps to multiple Kubernetes clusters.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xmOGxzBg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174007.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xmOGxzBg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174007.png" loading="lazy" width="880" height="470"></a></p>

<ul>
    <li><a href="https://argoproj.github.io/argo-cd/operator-manual/cluster-bootstrapping/#app-of-apps-pattern" rel="noopener">App of Apps</a></li>
</ul>

<p>When managing ten or fewer applications, it's best to use the App of Apps pattern.</p>

<p>App of Apps was the pioneer before ApplicationSets that allowed us to deploy multiple applications at once with ease.</p>

<p>You are leveraging the actual app itself, aka a "Root App," to contain the other applications instead of individual Kubernetes objects. This, in turn, allows you to manage a group of applications that you can deploy declaratively. Essentially this pattern supports the declaration of children apps in a recursive way.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--e_NHDu1Y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174013.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--e_NHDu1Y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174013.png" loading="lazy" width="678" height="440"></a></p>

<p><span><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/cluster-bootstrapping/">Image from the Argo CD documentation</a></span></p>

<p>Another possible approach to promoting changes is the <a href="https://argocd-image-updater.readthedocs.io/en/stable/#argo-cd-image-updater" rel="noopener">Argo CD Image Updater</a>. It's still a relatively new project, but it provides a manual way to update your manifest versions.</p>

<p>However, we should note that this approach is not GitOps friendly. Meaning it goes against the declarative nature of GitOps, but perhaps its functionality is what you and your team needs.</p>

<h5>
<a id="post-21871-_ojk5dlxw0p0e"></a>Which to choose?</h5>

<p>One does not "need" a promotion strategy when beginning to deploy with Argo CD. The strategies listed above are needed when trying to solve "too many apps." This problem dramatically depends on the number of Argo CD applications you are managing and whether or not you already have a deployment process in place or not.</p>

<p>The Argo community has developed the strategies listed above to help you manage all your Argo CD application deployments, depending on your scale, directory structure, and manifest types, amongst other factors.</p>

<p>However, it's ultimately up to you and your workload, which is best for you and your team.</p>

<ol>
<h4>4. <strong>Manage your secrets securely</strong>
</h4>
</ol>

<p>No one solution for <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/secret-management/" rel="noopener">secret management</a> will work for all organizations. However, some common approaches for how to best handle your secrets with Argo CD can help based on these two significant factors:</p>

<h5>
<a id="post-21871-_w2ry0j4kjmyh"></a>Encrypt your secrets directly in your Git repository:</h5>

<ul>
    <li><a href="https://engineering.bitnami.com/" rel="noopener">Bitnami Sealed Secrets</a></li>
</ul>

<p>Sealed secrets are one way to encrypt secrets created by anyone but can only be decrypted by the controller running within the target cluster.</p>

<ul>
    <li><a href="https://github.com/mozilla/sops" rel="noopener">SOPS</a></li>
</ul>

<p>SOPS (Secret OperationS) is an open source solution that allows you to encrypt and decrypt an entire file or field for your Kubernetes secrets. This approach will enable you to store your secrets, and other Kubernetes manifests directly in your Git repository.</p>

<h5>
<a id="post-21871-_22nwzap9k2bt"></a>Externalizing your secrets from your Git repository:</h5>

<ul>
    <li><a href="https://github.com/argoproj-labs/argocd-vault-plugin" rel="noopener">Argo CD Vault plugin</a></li>
</ul>

<p>This solution creates debate about whether it's GitOps or not. Nonetheless, it's a solution using Kubernetes auth in Vault. The Argo CD repo server authorizes Vault to use the service account token in the secret manifest, substituting the required value and creating a secret for you.</p>

<ul>
    <li>Cloud Provider Secrets</li>
</ul>

<p>Cloud provider secrets are created by your cloud service providers (CSP) depending on the cloud service. It depends on what your CSP offers and if their secret management solution meets your needs. Ensure you evaluate which strategy secures your data best.</p>

<p>Firstly, storing your secrets in a Git repository isn't easy! Perhaps your organization has a different policy for secrets, or you already have a system in place, so in this case, you may want to externalize your secrets.</p>

<p>However, if you want to store your secrets in your Git repository, plaintext secrets cannot be stored in your repo, and you never want to risk storing sensitive data and exposing it!</p>

<p>But, Git can truly be the source of truth, including your secrets, and you won't have to risk getting fired when they are encrypted asymmetrically. You can use Argo CD to manage your deployment state from Git into your cluster, including your secrets, by ensuring processes are put in place, and the tools above are used safely.</p>

<ol>
<h4>5. <a id="post-21871-_igoj40bhubr"></a><strong>Confirm how your team accesses Argo CD </strong>
</h4>
</ol>

<p>Essentially, we cannot say what the best practice for you and your team is to access Argo CD. However, we can advise you and your team to choose which approach works best for your organization and set a standard for your team.</p>

<h5>
<a id="post-21871-_u8z9ow43nf9v"></a>Developers require access to Argo CD, so you need to set security measures and role-based access control (RBAC).</h5>

<p>This approach allows your developers to access the Argo CD UI and ensure that each team has the appropriate access to their applications and their applications only.</p>

<p>Argo CD provides an <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/rbac/#rbac-configuration" rel="noopener">RBAC configuration</a> that includes two pre-defined roles:</p>

<ul>
    <li>Read-only</li>
    <li>Admin</li>
</ul>

<p>You can also implement a permissions definition for your applications and other resource types with Argo CD. You can then sync these roles and permissions together to create a policy to define access to your system.</p>

<h5>
<a id="post-21871-_vmpdf9n1pfnd"></a>No one within your organization requires access to Argo CD.</h5>

<p>Some organizations do not want anyone to access the Argo CD UI or the API server. Perhaps the organization would like to use the automation but does not want to leverage the UI component. In this case, you can use a variant of Argo CD, also known as <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/installation/#core" rel="noopener">Argo CD Core</a>. This allows developers to make a commit and ignore the UI aspects and reduce complexity. However, we should note that you lose multi-tenancy benefits by installing Argo CD Core.</p>

<p>So, whichever approach you choose above - as long as it benefits you and your team, you're making the right choice.</p>

<ol>
<h4>6. <a id="post-21871-_twnsu4heyo9s"></a><strong>Increase automation for your system with the other Argo projects</strong>
</h4>
</ol>

<p>If you're using <a href="https://codefresh.io/learn/argo-cd/" rel="noopener">Argo CD for Continuous Delivery (CD)</a>, you want to elevate the rest of your workflow to automate everything in Kubernetes to reduce downtime. Then, you should check out the other <a href="https://github.com/argoproj" rel="noopener">Argo projects</a> and learn more about how they can help.</p>

<p>We don't encourage you to use any specific projects to leverage best practices, but instead, we encourage you to use those that will help you and your system best.</p>

<p>In the meantime, we can explore how we could use Argo Events, Workflows, and Rollouts to enhance your system if you choose to.</p>

<h5>
<a id="post-21871-_xfyh0qwuofic"></a>Progressive Delivery</h5>

<p>Progressive delivery is a set of practices that roll out new features gradually instead of all at once.</p>

<ul>
    <li><a href="https://github.com/argoproj/argo-rollouts" rel="noopener">Argo Rollouts</a></li>
</ul>

<p>Rollouts provide advanced deployment capabilities and rolling updates for progressive delivery approaches you might already know, such as blue-green, canary, etc.</p>

<h5>
<a id="post-21871-_cr8bufalkf5s"></a> Advanced Deployment with CI</h5>

<p>Argo Workflows and Events require you to have an existing Continuous Integration (CI) process to leverage these projects.</p>

<ul>
    <li><a href="https://github.com/argoproj/argo-workflows" rel="noopener">Argo Workflows</a></li>
</ul>

<p>Workflows allow you to build and orchestrate parallel jobs and utilize a pipeline on Kubernetes.</p>

<ul>
    <li><a href="https://github.com/argoproj/argo-events" rel="noopener">Argo Events</a></li>
</ul>

<p>Events is an event-driven workflow automation framework that is used with Kubernetes.</p>

<p>By utilizing these other Argo projects, you can easily manage your clusters, run workflows, and implement GitOps for your Kubernetes system! However, not all organizations are ready to implement automation for everything in Kubernetes. Combining all these tools requires time and understanding of how your system works before identifying which tool will best help your team's process.</p>

<h4>
<a id="post-21871-_sbcsl1bw8rj8"></a><strong>Conclusion</strong>
</h4>

<p>Argo CD and the other Argo projects certainly make life easier by allowing you to automate each step for a production release, migration, and the operation workflows for your system!</p>

<p>By leveraging these best practices above, you're on the right track to empower your teams and apply GitOps for your infrastructure so you can deploy to prod more frequently.</p>

<p>I'd like to thank those who are part of the Argo community who participated and provided feedback for this blog. If you have any questions or think there are better ways to work with Argo CD, please reach out and let me know!</p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/hseligson/best-practices-for-argo-cd-4h38" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(e,o,t,a){return t.type_of="article",t.id=1044303,t.title="Best Practices for Argo CD",t.description="What are some best practices when using Argo CD?  Within this blog post, we’ll be highlighting some...",t.readable_publish_date="Apr 4",t.slug="best-practices-for-argo-cd-4h38",t.path="/codefreshio/best-practices-for-argo-cd-4h38",t.url="https://dev.to/codefreshio/best-practices-for-argo-cd-4h38",t.comments_count=0,t.public_reactions_count=7,t.collection_id=e,t.published_timestamp=o,t.positive_reactions_count=7,t.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--buFmgAIr--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cb01keq0gy16eip7514a.png",t.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--R9HNhw4F--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cb01keq0gy16eip7514a.png",t.canonical_url="https://codefresh.io/argo-platform/argo-cd-best-practices/",t.created_at=o,t.edited_at=e,t.crossposted_at=e,t.published_at=o,t.last_comment_at=o,t.reading_time_minutes=11,t.tag_list="argocd, gitops, bestpractices, cd",t.tags=["argocd","gitops","bestpractices","cd"],t.body_html='<h4>What are some best practices when using Argo CD?</h4>\n\n<p>Within this blog post, we’ll be highlighting some best practices tied to <a href="https://argo-cd.readthedocs.io/en/stable/#what-is-argo-cd">Argo CD</a>, that allow you to leverage GitOps easily within your deployment workflow.<br>\nBelow we will explain the following:</p>\n\n<ul>\n    <li>What is Argo CD</li>\n    <li>What are some best practices with Argo CD?</li>\n</ul>\n\n<h3>What is Argo CD</h3>\n\n<p>Argo CD is the most popular and fastest-growing <a href="https://codefresh.io/gitops/" rel="noopener">GitOps</a> tool for Kubernetes. When following a GitOps deployment pattern, Argo CD makes it easy to define a set of applications with their desired state in a repository and where they should be deployed. After a deployment, Argo CD constantly monitors the state and can even catch configuration drift.</p>\n\n<p>Argo CD\'s core component is the <a href="https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/" rel="noopener">Applications Controller</a> that executes continuous monitoring of applications and then compares them to the live application state against your target state defined within your Git repository.</p>\n\n<p>The Application controller retrieves the desired resource manifest from the Git repository and compares it to the live resource from your Kubernetes cluster.</p>\n\n<p>This approach enables GitOps for your deployment workflow by leveraging Git as your source of truth. Now, let\'s further explore how we can leverage Argo CD best for our deployments!</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--coIGyZsa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/app-status-in-sync.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--coIGyZsa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/app-status-in-sync.png" alt="App Status - In Sync" loading="lazy" width="807" height="600"></a></p>\n\n<p>The image above shows the primary Argo CD dashboard with a single Argo application successfully deployed.</p>\n\n<p><a href="https://lh3.googleusercontent.com/AQ28k1lG1SA_xvJjki5PQJD3Cy4RrxL7BlNca30kW3L_scMn6b9LHPfQkLHrj2dyuetUMQQvQyO2loFmQ0l8V742f3V29ow1ztan82FLuJoXhJCy7AoFERrpT34uRBR-pmTqWaS9"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--g4gjyJC6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/hierarchical-view-of-all-kubernetes-resources.png" alt="Hierarchical view of all Kubernetes resources" loading="lazy" width="880" height="308"></a></p>\n\n<p>The dashboard above provides a detailed view of the same Argo application deployed in the image above. However, it also provides an understanding of the status of the Kubernetes resources.</p>\n\n<p>Now, let\'s explore how we can apply best practices to our Argo CD deployments!</p>\n\n<h3>\n<a id="post-21871-_m13x9eymh82e"></a><strong>Argo CD Best Practices</strong>\n</h3>\n\n<p>Argo CD has several best practices; however, we will review some of the most important ones we\'ve gathered from the Argo community and prioritized below.</p>\n\n<ol>\n<h4>1. <strong>Separate your Git repositories</strong>\n</h4>\n</ol>\n\n<p>It\'s super important to separate your configurations and source code into different Git repositories. Separating your configs in their repository limits commit access to avoid something being pushed to production environments. For example, if you accidentally push manifest changes to the config repo, it can trigger an infinite loop of build jobs and Git commit triggers. Using an automated CI pipeline, you can also prevent pushing manifest changes to the same repo.</p>\n\n<p>Separating your repositories is also more secure and restricts commit access, so someone does not accidentally misconfigure an application.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--wVdTgQSL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174003.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--wVdTgQSL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174003.png" loading="lazy" width="880" height="396"></a></p>\n\n<p>Argo CD does not connect to your source code repository. However, if you make a change to your code and you want to deploy the change to a specific environment, you can do the following:</p>\n\n<ul>\n    <li>Build a new application code version and then merge a pull request (PR) in the configuration repo to use the new application version you created.</li>\n    <li>Utilize automation for the update you made to your source code by using a pipeline in the source code repository.</li>\n    <li>Argo CD Image Updater allows you to update your container images of the Kubernetes workload managed by Argo CD.</li>\n</ul>\n\n<p>These approaches allow you to maintain logs for any auditing process. You can quickly identify development activity and reference your Git history for easy traceability.</p>\n\n<ol>\n<h4>2. <strong>Create a directory structure to enable a multi-application system for your Argo CD deployments</strong>\n</h4>\n</ol>\n\n<p>Once you\'ve separated your source code and configs into separate repositories, it\'s essential to set up a directory structure that applies GitOps for Argo CD deployments. You can leverage several approaches for your Git repository structure that best serves your organization\'s needs.</p>\n\n<p>However, we\'ll highlight some tips to best structure your directory when using Argo CD.</p>\n\n<ul>\n    <li>Do: We suggest modeling your environments or clusters using different folders instead of branches in your configuration repository (e.g., prod, staging, testing, etc.).</li>\n    <li>Do: Make sure your cluster and environment configurations repositories are separated (i.e., separate your prod configuration in a different repository from staging).</li>\n    <li>Do: Utilize some sort of manifest management, such as a raw Kubernetes YAML file, Kustomize, or Helm for your environment definitions for your apps.</li>\n    <li>Do: Create an \'argocd\' folder in your configuration repository for each cluster and create an Argo CD Application manifest for each app in the cluster\'s repository.\n<ul>\n    <li>By creating the separate \'argocd\' folder, you can also implement role-based access control for different clusters if you wish with Git repository permissions.</li>\n</ul>\n\n\n\n\n</li>\n\n    <li>Do: Leverage a multi-folder or a multi-repo structure instead of a multi-branch approach. You should NOT have permanent branches for your clusters or environments.</li>\n\n    <li>Don\'t: Never put any independent applications or applications managed by different teams in the same repository.</li>\n\n</ul>\n<br><br>\nImplementing these strategies above for your directory structure provides several advantages. Those advantages include improved security, easy rollbacks, audit log, easier testing, and automating your manifest updates. It also allows you to create and delete applications dynamically. If you\'d like to see some examples of these directory structures, look <a href="https://github.com/argoproj/argocd-example-apps" rel="noopener">here</a>.\n\n<ol>\n<h4>3. <strong>Determine a promotion strategy</strong>\n</h4>\n</ol>\n\n<p>Now that you\'ve established a directory structure, you may face a challenge regarding the best promotion practice between clusters. When deploying multiple applications with Argo CD, it\'s best to pick one promotion strategy that suits your directory structure and stick with it. Below we\'ll highlight how you can do this based on your own needs.</p>\n\n<h5>\n<a id="post-21871-_9m9qm130wnjz"></a>Group your applications</h5>\n\n<ul>\n    <li><a href="https://argocd-applicationset.readthedocs.io/en/stable/" rel="noopener">ApplicationSets</a></li>\n</ul>\n\n<p>First and foremost, once you\'ve established a way to manage your applications and deployments, and there are too many apps to keep track of - the ApplicationSet is your best solution. We should also note that the ApplicationSet was previously an external controller that you had to install on your own, and now it\'s integrated and makes things much easier! However, you need some extra support when using the ApplicationSet instead of the App of Apps pattern that is easy enough to use right away without any additional help or a learning curve.</p>\n\n<p>Yet, when deploying to production, an ApplicationSet is the best choice. This is because an ApplicationSet is a Kubernetes controller/custom resource definition (CRD) that enables automation and allows flexibility when managing multiple applications across several clusters.</p>\n\n<p>The ApplicationSet consists of two main components:</p>\n\n<ul>\n    <li><a href="https://argocd-applicationset.readthedocs.io/en/stable/Generators/" rel="noopener">Generators</a></li>\n    <li><a href="https://argocd-applicationset.readthedocs.io/en/stable/Template/#templates" rel="noopener">Application template</a></li>\n</ul>\n\n<p>You are essentially allowing the ApplicationSet to act as a templating agent.</p>\n\n<p>The generators used with the ApplicationSet are responsible for generating params, utilizing the template to consume the variables, and then applying them to the cluster as Argo CD applications. So, any changes made to an ApplicationSet template and its fields will automatically be applied to each application created.</p>\n\n<p>This way, you can simultaneously deploy your Argo apps to multiple Kubernetes clusters.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xmOGxzBg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174007.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xmOGxzBg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174007.png" loading="lazy" width="880" height="470"></a></p>\n\n<ul>\n    <li><a href="https://argoproj.github.io/argo-cd/operator-manual/cluster-bootstrapping/#app-of-apps-pattern" rel="noopener">App of Apps</a></li>\n</ul>\n\n<p>When managing ten or fewer applications, it\'s best to use the App of Apps pattern.</p>\n\n<p>App of Apps was the pioneer before ApplicationSets that allowed us to deploy multiple applications at once with ease.</p>\n\n<p>You are leveraging the actual app itself, aka a "Root App," to contain the other applications instead of individual Kubernetes objects. This, in turn, allows you to manage a group of applications that you can deploy declaratively. Essentially this pattern supports the declaration of children apps in a recursive way.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--e_NHDu1Y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174013.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--e_NHDu1Y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174013.png" loading="lazy" width="678" height="440"></a></p>\n\n<p><span><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/cluster-bootstrapping/">Image from the Argo CD documentation</a></span></p>\n\n<p>Another possible approach to promoting changes is the <a href="https://argocd-image-updater.readthedocs.io/en/stable/#argo-cd-image-updater" rel="noopener">Argo CD Image Updater</a>. It\'s still a relatively new project, but it provides a manual way to update your manifest versions.</p>\n\n<p>However, we should note that this approach is not GitOps friendly. Meaning it goes against the declarative nature of GitOps, but perhaps its functionality is what you and your team needs.</p>\n\n<h5>\n<a id="post-21871-_ojk5dlxw0p0e"></a>Which to choose?</h5>\n\n<p>One does not "need" a promotion strategy when beginning to deploy with Argo CD. The strategies listed above are needed when trying to solve "too many apps." This problem dramatically depends on the number of Argo CD applications you are managing and whether or not you already have a deployment process in place or not.</p>\n\n<p>The Argo community has developed the strategies listed above to help you manage all your Argo CD application deployments, depending on your scale, directory structure, and manifest types, amongst other factors.</p>\n\n<p>However, it\'s ultimately up to you and your workload, which is best for you and your team.</p>\n\n<ol>\n<h4>4. <strong>Manage your secrets securely</strong>\n</h4>\n</ol>\n\n<p>No one solution for <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/secret-management/" rel="noopener">secret management</a> will work for all organizations. However, some common approaches for how to best handle your secrets with Argo CD can help based on these two significant factors:</p>\n\n<h5>\n<a id="post-21871-_w2ry0j4kjmyh"></a>Encrypt your secrets directly in your Git repository:</h5>\n\n<ul>\n    <li><a href="https://engineering.bitnami.com/" rel="noopener">Bitnami Sealed Secrets</a></li>\n</ul>\n\n<p>Sealed secrets are one way to encrypt secrets created by anyone but can only be decrypted by the controller running within the target cluster.</p>\n\n<ul>\n    <li><a href="https://github.com/mozilla/sops" rel="noopener">SOPS</a></li>\n</ul>\n\n<p>SOPS (Secret OperationS) is an open source solution that allows you to encrypt and decrypt an entire file or field for your Kubernetes secrets. This approach will enable you to store your secrets, and other Kubernetes manifests directly in your Git repository.</p>\n\n<h5>\n<a id="post-21871-_22nwzap9k2bt"></a>Externalizing your secrets from your Git repository:</h5>\n\n<ul>\n    <li><a href="https://github.com/argoproj-labs/argocd-vault-plugin" rel="noopener">Argo CD Vault plugin</a></li>\n</ul>\n\n<p>This solution creates debate about whether it\'s GitOps or not. Nonetheless, it\'s a solution using Kubernetes auth in Vault. The Argo CD repo server authorizes Vault to use the service account token in the secret manifest, substituting the required value and creating a secret for you.</p>\n\n<ul>\n    <li>Cloud Provider Secrets</li>\n</ul>\n\n<p>Cloud provider secrets are created by your cloud service providers (CSP) depending on the cloud service. It depends on what your CSP offers and if their secret management solution meets your needs. Ensure you evaluate which strategy secures your data best.</p>\n\n<p>Firstly, storing your secrets in a Git repository isn\'t easy! Perhaps your organization has a different policy for secrets, or you already have a system in place, so in this case, you may want to externalize your secrets.</p>\n\n<p>However, if you want to store your secrets in your Git repository, plaintext secrets cannot be stored in your repo, and you never want to risk storing sensitive data and exposing it!</p>\n\n<p>But, Git can truly be the source of truth, including your secrets, and you won\'t have to risk getting fired when they are encrypted asymmetrically. You can use Argo CD to manage your deployment state from Git into your cluster, including your secrets, by ensuring processes are put in place, and the tools above are used safely.</p>\n\n<ol>\n<h4>5. <a id="post-21871-_igoj40bhubr"></a><strong>Confirm how your team accesses Argo CD </strong>\n</h4>\n</ol>\n\n<p>Essentially, we cannot say what the best practice for you and your team is to access Argo CD. However, we can advise you and your team to choose which approach works best for your organization and set a standard for your team.</p>\n\n<h5>\n<a id="post-21871-_u8z9ow43nf9v"></a>Developers require access to Argo CD, so you need to set security measures and role-based access control (RBAC).</h5>\n\n<p>This approach allows your developers to access the Argo CD UI and ensure that each team has the appropriate access to their applications and their applications only.</p>\n\n<p>Argo CD provides an <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/rbac/#rbac-configuration" rel="noopener">RBAC configuration</a> that includes two pre-defined roles:</p>\n\n<ul>\n    <li>Read-only</li>\n    <li>Admin</li>\n</ul>\n\n<p>You can also implement a permissions definition for your applications and other resource types with Argo CD. You can then sync these roles and permissions together to create a policy to define access to your system.</p>\n\n<h5>\n<a id="post-21871-_vmpdf9n1pfnd"></a>No one within your organization requires access to Argo CD.</h5>\n\n<p>Some organizations do not want anyone to access the Argo CD UI or the API server. Perhaps the organization would like to use the automation but does not want to leverage the UI component. In this case, you can use a variant of Argo CD, also known as <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/installation/#core" rel="noopener">Argo CD Core</a>. This allows developers to make a commit and ignore the UI aspects and reduce complexity. However, we should note that you lose multi-tenancy benefits by installing Argo CD Core.</p>\n\n<p>So, whichever approach you choose above - as long as it benefits you and your team, you\'re making the right choice.</p>\n\n<ol>\n<h4>6. <a id="post-21871-_twnsu4heyo9s"></a><strong>Increase automation for your system with the other Argo projects</strong>\n</h4>\n</ol>\n\n<p>If you\'re using <a href="https://codefresh.io/learn/argo-cd/" rel="noopener">Argo CD for Continuous Delivery (CD)</a>, you want to elevate the rest of your workflow to automate everything in Kubernetes to reduce downtime. Then, you should check out the other <a href="https://github.com/argoproj" rel="noopener">Argo projects</a> and learn more about how they can help.</p>\n\n<p>We don\'t encourage you to use any specific projects to leverage best practices, but instead, we encourage you to use those that will help you and your system best.</p>\n\n<p>In the meantime, we can explore how we could use Argo Events, Workflows, and Rollouts to enhance your system if you choose to.</p>\n\n<h5>\n<a id="post-21871-_xfyh0qwuofic"></a>Progressive Delivery</h5>\n\n<p>Progressive delivery is a set of practices that roll out new features gradually instead of all at once.</p>\n\n<ul>\n    <li><a href="https://github.com/argoproj/argo-rollouts" rel="noopener">Argo Rollouts</a></li>\n</ul>\n\n<p>Rollouts provide advanced deployment capabilities and rolling updates for progressive delivery approaches you might already know, such as blue-green, canary, etc.</p>\n\n<h5>\n<a id="post-21871-_cr8bufalkf5s"></a> Advanced Deployment with CI</h5>\n\n<p>Argo Workflows and Events require you to have an existing Continuous Integration (CI) process to leverage these projects.</p>\n\n<ul>\n    <li><a href="https://github.com/argoproj/argo-workflows" rel="noopener">Argo Workflows</a></li>\n</ul>\n\n<p>Workflows allow you to build and orchestrate parallel jobs and utilize a pipeline on Kubernetes.</p>\n\n<ul>\n    <li><a href="https://github.com/argoproj/argo-events" rel="noopener">Argo Events</a></li>\n</ul>\n\n<p>Events is an event-driven workflow automation framework that is used with Kubernetes.</p>\n\n<p>By utilizing these other Argo projects, you can easily manage your clusters, run workflows, and implement GitOps for your Kubernetes system! However, not all organizations are ready to implement automation for everything in Kubernetes. Combining all these tools requires time and understanding of how your system works before identifying which tool will best help your team\'s process.</p>\n\n<h4>\n<a id="post-21871-_sbcsl1bw8rj8"></a><strong>Conclusion</strong>\n</h4>\n\n<p>Argo CD and the other Argo projects certainly make life easier by allowing you to automate each step for a production release, migration, and the operation workflows for your system!</p>\n\n<p>By leveraging these best practices above, you\'re on the right track to empower your teams and apply GitOps for your infrastructure so you can deploy to prod more frequently.</p>\n\n<p>I\'d like to thank those who are part of the Argo community who participated and provided feedback for this blog. If you have any questions or think there are better ways to work with Argo CD, please reach out and let me know!</p>\n\n',t.body_markdown='<h4>What are some best practices when using Argo CD?</h4>\nWithin this blog post, we’ll be highlighting some best practices tied to <a href="https://argo-cd.readthedocs.io/en/stable/#what-is-argo-cd">Argo CD</a>, that allow you to leverage GitOps easily within your deployment workflow.\nBelow we will explain the following:\n<ul>\n \t<li>What is Argo CD</li>\n \t<li>What are some best practices with Argo CD?</li>\n</ul>\n<h3>What is Argo CD</h3>\nArgo CD is the most popular and fastest-growing <a href="https://codefresh.io/gitops/" target="_blank" rel="noopener">GitOps</a> tool for Kubernetes. When following a GitOps deployment pattern, Argo CD makes it easy to define a set of applications with their desired state in a repository and where they should be deployed. After a deployment, Argo CD constantly monitors the state and can even catch configuration drift.\n\nArgo CD\'s core component is the <a href="https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/" target="_blank" rel="noopener">Applications Controller</a> that executes continuous monitoring of applications and then compares them to the live application state against your target state defined within your Git repository.\n\nThe Application controller retrieves the desired resource manifest from the Git repository and compares it to the live resource from your Kubernetes cluster.\n\nThis approach enables GitOps for your deployment workflow by leveraging Git as your source of truth. Now, let\'s further explore how we can leverage Argo CD best for our deployments!\n\n<img class="wp-image-22014" src="https://codefresh.io/wp-content/uploads/2022/03/app-status-in-sync.png" alt="App Status - In Sync" />\n\nThe image above shows the primary Argo CD dashboard with a single Argo application successfully deployed.\n\n<a href="https://lh3.googleusercontent.com/AQ28k1lG1SA_xvJjki5PQJD3Cy4RrxL7BlNca30kW3L_scMn6b9LHPfQkLHrj2dyuetUMQQvQyO2loFmQ0l8V742f3V29ow1ztan82FLuJoXhJCy7AoFERrpT34uRBR-pmTqWaS9"><img class="wp-image-22015" src="https://codefresh.io/wp-content/uploads/2022/03/hierarchical-view-of-all-kubernetes-resources.png" alt="Hierarchical view of all Kubernetes resources" /></a>\n\nThe dashboard above provides a detailed view of the same Argo application deployed in the image above. However, it also provides an understanding of the status of the Kubernetes resources.\n\nNow, let\'s explore how we can apply best practices to our Argo CD deployments!\n<h3><a id="post-21871-_m13x9eymh82e"></a><strong>Argo CD Best Practices</strong></h3>\nArgo CD has several best practices; however, we will review some of the most important ones we\'ve gathered from the Argo community and prioritized below.\n<ol>\n<h4>1. <strong>Separate your Git repositories</strong></h4>\n</ol>\nIt\'s super important to separate your configurations and source code into different Git repositories. Separating your configs in their repository limits commit access to avoid something being pushed to production environments. For example, if you accidentally push manifest changes to the config repo, it can trigger an infinite loop of build jobs and Git commit triggers. Using an automated CI pipeline, you can also prevent pushing manifest changes to the same repo.\n\nSeparating your repositories is also more secure and restricts commit access, so someone does not accidentally misconfigure an application.\n\n<img class="wp-image-22016" src="https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174003.png" />\n\nArgo CD does not connect to your source code repository. However, if you make a change to your code and you want to deploy the change to a specific environment, you can do the following:\n<ul>\n \t<li>Build a new application code version and then merge a pull request (PR) in the configuration repo to use the new application version you created.</li>\n \t<li>Utilize automation for the update you made to your source code by using a pipeline in the source code repository.</li>\n \t<li>Argo CD Image Updater allows you to update your container images of the Kubernetes workload managed by Argo CD.</li>\n</ul>\nThese approaches allow you to maintain logs for any auditing process. You can quickly identify development activity and reference your Git history for easy traceability.\n<ol>\n<h4>2. <strong>Create a directory structure to enable a multi-application system for your Argo CD deployments</strong></h4>\n</ol>\nOnce you\'ve separated your source code and configs into separate repositories, it\'s essential to set up a directory structure that applies GitOps for Argo CD deployments. You can leverage several approaches for your Git repository structure that best serves your organization\'s needs.\n\nHowever, we\'ll highlight some tips to best structure your directory when using Argo CD.\n<ul>\n \t<li>Do: We suggest modeling your environments or clusters using different folders instead of branches in your configuration repository (e.g., prod, staging, testing, etc.).</li>\n \t<li>Do: Make sure your cluster and environment configurations repositories are separated (i.e., separate your prod configuration in a different repository from staging).</li>\n \t<li>Do: Utilize some sort of manifest management, such as a raw Kubernetes YAML file, Kustomize, or Helm for your environment definitions for your apps.</li>\n \t<li>Do: Create an \'argocd\' folder in your configuration repository for each cluster and create an Argo CD Application manifest for each app in the cluster\'s repository.\n<ul>\n \t<li>By creating the separate \'argocd\' folder, you can also implement role-based access control for different clusters if you wish with Git repository permissions.</li>\n</ul>\n</li>\n \t<li>Do: Leverage a multi-folder or a multi-repo structure instead of a multi-branch approach. You should NOT have permanent branches for your clusters or environments.</li>\n \t<li>Don\'t: Never put any independent applications or applications managed by different teams in the same repository.</li>\n</ul>\nImplementing these strategies above for your directory structure provides several advantages. Those advantages include improved security, easy rollbacks, audit log, easier testing, and automating your manifest updates. It also allows you to create and delete applications dynamically. If you\'d like to see some examples of these directory structures, look <a href="https://github.com/argoproj/argocd-example-apps" target="_blank" rel="noopener">here</a>.\n<ol>\n<h4>3. <strong>Determine a promotion strategy</strong></h4>\n</ol>\nNow that you\'ve established a directory structure, you may face a challenge regarding the best promotion practice between clusters. When deploying multiple applications with Argo CD, it\'s best to pick one promotion strategy that suits your directory structure and stick with it. Below we\'ll highlight how you can do this based on your own needs.\n<h5><a id="post-21871-_9m9qm130wnjz"></a>Group your applications</h5>\n<ul>\n \t<li><a href="https://argocd-applicationset.readthedocs.io/en/stable/" target="_blank" rel="noopener">ApplicationSets</a></li>\n</ul>\nFirst and foremost, once you\'ve established a way to manage your applications and deployments, and there are too many apps to keep track of - the ApplicationSet is your best solution. We should also note that the ApplicationSet was previously an external controller that you had to install on your own, and now it\'s integrated and makes things much easier! However, you need some extra support when using the ApplicationSet instead of the App of Apps pattern that is easy enough to use right away without any additional help or a learning curve.\n\nYet, when deploying to production, an ApplicationSet is the best choice. This is because an ApplicationSet is a Kubernetes controller/custom resource definition (CRD) that enables automation and allows flexibility when managing multiple applications across several clusters.\n\nThe ApplicationSet consists of two main components:\n<ul>\n \t<li><a href="https://argocd-applicationset.readthedocs.io/en/stable/Generators/" target="_blank" rel="noopener">Generators</a></li>\n \t<li><a href="https://argocd-applicationset.readthedocs.io/en/stable/Template/#templates" target="_blank" rel="noopener">Application template</a></li>\n</ul>\nYou are essentially allowing the ApplicationSet to act as a templating agent.\n\nThe generators used with the ApplicationSet are responsible for generating params, utilizing the template to consume the variables, and then applying them to the cluster as Argo CD applications. So, any changes made to an ApplicationSet template and its fields will automatically be applied to each application created.\n\nThis way, you can simultaneously deploy your Argo apps to multiple Kubernetes clusters.\n\n<img class="wp-image-22017" src="https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174007.png" />\n<ul>\n \t<li><a href="https://argoproj.github.io/argo-cd/operator-manual/cluster-bootstrapping/#app-of-apps-pattern" target="_blank" rel="noopener">App of Apps</a></li>\n</ul>\nWhen managing ten or fewer applications, it\'s best to use the App of Apps pattern.\n\nApp of Apps was the pioneer before ApplicationSets that allowed us to deploy multiple applications at once with ease.\n\nYou are leveraging the actual app itself, aka a "Root App," to contain the other applications instead of individual Kubernetes objects. This, in turn, allows you to manage a group of applications that you can deploy declaratively. Essentially this pattern supports the declaration of children apps in a recursive way.\n\n<img class="wp-image-22018" src="https://codefresh.io/wp-content/uploads/2022/03/word-image-20220330-174013.png" />\n\n<span style="font-size: 8pt;"><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/cluster-bootstrapping/">Image from the Argo CD documentation</a></span>\n\nAnother possible approach to promoting changes is the <a href="https://argocd-image-updater.readthedocs.io/en/stable/#argo-cd-image-updater" target="_blank" rel="noopener">Argo CD Image Updater</a>. It\'s still a relatively new project, but it provides a manual way to update your manifest versions.\n\nHowever, we should note that this approach is not GitOps friendly. Meaning it goes against the declarative nature of GitOps, but perhaps its functionality is what you and your team needs.\n<h5><a id="post-21871-_ojk5dlxw0p0e"></a>Which to choose?</h5>\nOne does not "need" a promotion strategy when beginning to deploy with Argo CD. The strategies listed above are needed when trying to solve "too many apps." This problem dramatically depends on the number of Argo CD applications you are managing and whether or not you already have a deployment process in place or not.\n\nThe Argo community has developed the strategies listed above to help you manage all your Argo CD application deployments, depending on your scale, directory structure, and manifest types, amongst other factors.\n\nHowever, it\'s ultimately up to you and your workload, which is best for you and your team.\n<ol>\n<h4>4. <strong>Manage your secrets securely</strong></h4>\n</ol>\nNo one solution for <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/secret-management/" target="_blank" rel="noopener">secret management</a> will work for all organizations. However, some common approaches for how to best handle your secrets with Argo CD can help based on these two significant factors:\n<h5><a id="post-21871-_w2ry0j4kjmyh"></a>Encrypt your secrets directly in your Git repository:</h5>\n<ul>\n \t<li><a href="https://engineering.bitnami.com/" target="_blank" rel="noopener">Bitnami Sealed Secrets</a></li>\n</ul>\nSealed secrets are one way to encrypt secrets created by anyone but can only be decrypted by the controller running within the target cluster.\n<ul>\n \t<li><a href="https://github.com/mozilla/sops" target="_blank" rel="noopener">SOPS</a></li>\n</ul>\nSOPS (Secret OperationS) is an open source solution that allows you to encrypt and decrypt an entire file or field for your Kubernetes secrets. This approach will enable you to store your secrets, and other Kubernetes manifests directly in your Git repository.\n<h5><a id="post-21871-_22nwzap9k2bt"></a>Externalizing your secrets from your Git repository:</h5>\n<ul>\n \t<li><a href="https://github.com/argoproj-labs/argocd-vault-plugin" target="_blank" rel="noopener">Argo CD Vault plugin</a></li>\n</ul>\nThis solution creates debate about whether it\'s GitOps or not. Nonetheless, it\'s a solution using Kubernetes auth in Vault. The Argo CD repo server authorizes Vault to use the service account token in the secret manifest, substituting the required value and creating a secret for you.\n<ul>\n \t<li>Cloud Provider Secrets</li>\n</ul>\nCloud provider secrets are created by your cloud service providers (CSP) depending on the cloud service. It depends on what your CSP offers and if their secret management solution meets your needs. Ensure you evaluate which strategy secures your data best.\n\nFirstly, storing your secrets in a Git repository isn\'t easy! Perhaps your organization has a different policy for secrets, or you already have a system in place, so in this case, you may want to externalize your secrets.\n\nHowever, if you want to store your secrets in your Git repository, plaintext secrets cannot be stored in your repo, and you never want to risk storing sensitive data and exposing it!\n\nBut, Git can truly be the source of truth, including your secrets, and you won\'t have to risk getting fired when they are encrypted asymmetrically. You can use Argo CD to manage your deployment state from Git into your cluster, including your secrets, by ensuring processes are put in place, and the tools above are used safely.\n<ol>\n<h4>5. <a id="post-21871-_igoj40bhubr"></a><strong>Confirm how your team accesses Argo CD </strong></h4>\n</ol>\nEssentially, we cannot say what the best practice for you and your team is to access Argo CD. However, we can advise you and your team to choose which approach works best for your organization and set a standard for your team.\n<h5><a id="post-21871-_u8z9ow43nf9v"></a>Developers require access to Argo CD, so you need to set security measures and role-based access control (RBAC).</h5>\nThis approach allows your developers to access the Argo CD UI and ensure that each team has the appropriate access to their applications and their applications only.\n\nArgo CD provides an <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/rbac/#rbac-configuration" target="_blank" rel="noopener">RBAC configuration</a> that includes two pre-defined roles:\n<ul>\n \t<li>Read-only</li>\n \t<li>Admin</li>\n</ul>\nYou can also implement a permissions definition for your applications and other resource types with Argo CD. You can then sync these roles and permissions together to create a policy to define access to your system.\n<h5><a id="post-21871-_vmpdf9n1pfnd"></a>No one within your organization requires access to Argo CD.</h5>\nSome organizations do not want anyone to access the Argo CD UI or the API server. Perhaps the organization would like to use the automation but does not want to leverage the UI component. In this case, you can use a variant of Argo CD, also known as <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/installation/#core" target="_blank" rel="noopener">Argo CD Core</a>. This allows developers to make a commit and ignore the UI aspects and reduce complexity. However, we should note that you lose multi-tenancy benefits by installing Argo CD Core.\n\nSo, whichever approach you choose above - as long as it benefits you and your team, you\'re making the right choice.\n<ol>\n<h4>6. <a id="post-21871-_twnsu4heyo9s"></a><strong>Increase automation for your system with the other Argo projects</strong></h4>\n</ol>\nIf you\'re using <a href="https://codefresh.io/learn/argo-cd/" target="_blank" rel="noopener">Argo CD for Continuous Delivery (CD)</a>, you want to elevate the rest of your workflow to automate everything in Kubernetes to reduce downtime. Then, you should check out the other <a href="https://github.com/argoproj" target="_blank" rel="noopener">Argo projects</a> and learn more about how they can help.\n\nWe don\'t encourage you to use any specific projects to leverage best practices, but instead, we encourage you to use those that will help you and your system best.\n\nIn the meantime, we can explore how we could use Argo Events, Workflows, and Rollouts to enhance your system if you choose to.\n<h5><a id="post-21871-_xfyh0qwuofic"></a>Progressive Delivery</h5>\nProgressive delivery is a set of practices that roll out new features gradually instead of all at once.\n<ul>\n \t<li><a href="https://github.com/argoproj/argo-rollouts" target="_blank" rel="noopener">Argo Rollouts</a></li>\n</ul>\nRollouts provide advanced deployment capabilities and rolling updates for progressive delivery approaches you might already know, such as blue-green, canary, etc.\n<h5><a id="post-21871-_cr8bufalkf5s"></a> Advanced Deployment with CI</h5>\nArgo Workflows and Events require you to have an existing Continuous Integration (CI) process to leverage these projects.\n<ul>\n \t<li><a href="https://github.com/argoproj/argo-workflows" target="_blank" rel="noopener">Argo Workflows</a></li>\n</ul>\nWorkflows allow you to build and orchestrate parallel jobs and utilize a pipeline on Kubernetes.\n<ul>\n \t<li><a href="https://github.com/argoproj/argo-events" target="_blank" rel="noopener">Argo Events</a></li>\n</ul>\nEvents is an event-driven workflow automation framework that is used with Kubernetes.\n\nBy utilizing these other Argo projects, you can easily manage your clusters, run workflows, and implement GitOps for your Kubernetes system! However, not all organizations are ready to implement automation for everything in Kubernetes. Combining all these tools requires time and understanding of how your system works before identifying which tool will best help your team\'s process.\n<h4><a id="post-21871-_sbcsl1bw8rj8"></a><strong>Conclusion</strong></h4>\nArgo CD and the other Argo projects certainly make life easier by allowing you to automate each step for a production release, migration, and the operation workflows for your system!\n\nBy leveraging these best practices above, you\'re on the right track to empower your teams and apply GitOps for your infrastructure so you can deploy to prod more frequently.\n\nI\'d like to thank those who are part of the Argo community who participated and provided feedback for this blog. If you have any questions or think there are better ways to work with Argo CD, please reach out and let me know!',t.user={name:"Hannah",username:"hseligson",twitter_username:"TechWithHannah",github_username:"hseligson1",website_url:"https://www.techwithhannah.com",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--46LxXUsZ--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/653868/5f3a8ff9-e54d-44a0-8cce-428b27a31590.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--uH1Xj_Jg--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/653868/5f3a8ff9-e54d-44a0-8cce-428b27a31590.png"},t.organization={name:"Codefresh",username:a,slug:a,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--eVMCUH5x--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/3138/a894848c-dd79-44fd-b477-3af28338d874.jpg",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--iHuWL-6D--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/3138/a894848c-dd79-44fd-b477-3af28338d874.jpg"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:t}},error:e,state:{currentArticle:t},serverRendered:!0,routePath:"/hseligson/1044303",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:e}}}}(null,"2022-04-04T15:20:18Z",{},"codefreshio")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
