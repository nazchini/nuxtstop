<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Frontend Optimization at LitmusChaos</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Frontend Optimization at LitmusChaos</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/react" class="tag" data-v-70afb46a>
          #react
        </a><a href="/nuxtstop/t/litmuschaos" class="tag" data-v-70afb46a>
          #litmuschaos
        </a><a href="/nuxtstop/t/optimization" class="tag" data-v-70afb46a>
          #optimization
        </a><a href="/nuxtstop/t/javascript" class="tag" data-v-70afb46a>
          #javascript
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Ozm5hSh1--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/iwlykb1ch6qvlckx1ph1.png" alt="Frontend Optimization at LitmusChaos" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            11
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            0
          </span></div> <time data-v-70afb46a>Mar 1</time></div></header> <div class="content" data-v-70afb46a><p><em>Hi Folks!!</em></p>

<p><em>Hmm, So you have already developed an application & you are looking at how to optimize it?</em></p>

<p><em>In this article, We will be taking you through the journey that we followed while working on frontend optimization at LitmusChaos.</em></p>

<h2>
  <a name="firstly-why-did-we-have-to-work-on-optimization-for-our-frontend" href="#firstly-why-did-we-have-to-work-on-optimization-for-our-frontend">
  </a>
  Firstly, Why did we have to work on optimization for our frontend?
</h2>

<p>So, as we all know, first impressions make sure how further things are going to move forward, right? The same thing goes with your Software. And as we are talking about Software, When your client is going to open that great application you made, What if that application takes a very long time to load & they are waiting just to log in. And that even when that application is not even at its peak level or I would say it is not having a huge load on itself.</p>

<p>Well, the same thing happened to us. We have been working on ChaosCenter for quite a long time now and it has grown to a very large extent. Last year, We found that our application was taking around 50 seconds just to load a login page. This motivated us to look into it deeply.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--vI-VSICD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2drewlls7suwwt3l8byd.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--vI-VSICD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2drewlls7suwwt3l8byd.gif" alt="Sherlock-Holmes-Start" loading="lazy" width="426" height="498" data-animated="true"></a></p>

<p>Well, as a developer you always start with Developer-tools, right? We also did the same & started looking at chunks getting transferred while loading a single page. We found that it was transferring around ~5MBs when a user was just trying to load the login page for logging in.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0Kl5ioRA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bu2z362wvffgn4ee1ylu.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0Kl5ioRA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bu2z362wvffgn4ee1ylu.png" alt="Network requests" loading="lazy" width="880" height="95"></a></p>

<p>Now, that is a problem, right? Your application shouldn't be taking that much time to load or even that much of a big chunk shouldn't be getting transferred just for a single page.</p>

<h2>
  <a name="so-are-you-ready-for-this-journey" href="#so-are-you-ready-for-this-journey">
  </a>
  So, Are you ready for this journey?
</h2>

<p>Well, with the benchmarking numbers we had, we started digging into the working/bundling process of React JS & different ways of optimizing that. And Oh!, by the way, I forgot to tell you, Our application is built using React. So, many things are already taken care of.</p>

<p>While looking into the bundling process of Webpack, we got to know different styles of importing components (Static/Dynamic). Well, if your application is small, it doesn't matter which style you pick but an application like ours does matter.</p>

<p>This leads us to the concept of Lazy-loading & code-splitting.</p>

<h2>
  <a name="lazyloading-amp-codesplitting" href="#lazyloading-amp-codesplitting">
  </a>
  Lazy-Loading & Code-splitting
</h2>

<p>Fortunately, we had written our codebase in such a way that all components are well isolated & implemented. The only problem there was that we were using static imports everywhere, due to which all the components were getting loaded, whichever was imported in a file. And when we started looking into our codebase, we found that we had a central file, which has the routing logic & all the pages/views were getting imported there. </p>

<p>Let's look at the below example snippet from our Router file.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>import CreateWorkflow from '../../pages/CreateWorkflow';
import LoginPage from '../../pages/LoginPage';
import GetStarted from '../../pages/GetStartedPage';
import WorkflowDetails from '../../pages/WorkflowDetails'

# Router component
&lt;Router history={history}>
  {/* &lt;Routes /> */}
  &lt;Routes />
&lt;/Router>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>


<p>So If you see here, the router was working as intended, whenever a user started the app, it was routed to the sign-in page. But if we check the background, <strong>it was loading all the pages/views & then redirecting to the sign-in page</strong>.<br>
Here, what we wanted was to <strong>just load the sign-in page & route to it</strong>.</p>

<p>So we started with Router-based code-splitting. We changed all static imports from static to dynamic imports using built-in lazy-loading from Webpack & React.<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>const CreateWorkflow = lazy(() => import('../../pages/CreateWorkflow'));
const LoginPage = lazy(() => import('../../pages/LoginPage'));
const GetStarted = lazy(() => import('../../pages/GetStartedPage'));
const WorkflowDetails = lazy(() => import('../../pages/WorkflowDetails'));

# Router component
&lt;Suspense fallback={&lt;Loader />} >
  &lt;Router history={history}>
     {/* &lt;Routes /> */}
     &lt;Routes />
  &lt;/Router>
&lt;/Suspense>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>


<p>With the above changes, On trying to login to the application, Webpack will fetch the Router component chunk & then only the Login-page chunk as only that is required.</p>

<p>Now, at this time, we tried to build our frontend. And believe me, we knew that we had something because we had divided our build chunks from having size 3MBs to 1.5-2MBs.</p>

<p>Moving ahead, We also followed the same approach at the components level & changed all component imports in our pages by analyzing user stories to dynamic ones. </p>

<p>Well, you might be having a question why would a component imported on a page be imported as dynamic?</p>

<p>Let's take an example, you can have a page, where on clicking on a button, you show a modal or in our case a complete Code Editor. Well, a code editor is a big component and users might not even click on that button. So, We changed the imports everywhere to dynamic ones. I think with this you must have got the point here.</p>

<p>The previous exercise had a great impact on our number of chunks (~98 chunks) & their sizes, (Obviously on load time as well) as you can see in the below screenshot.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oLIXD1BF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7bgj0qcpwueovggsk6eg.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oLIXD1BF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7bgj0qcpwueovggsk6eg.png" alt="Build" loading="lazy" width="643" height="561"></a></p>
<h2>
  <a name="sources-tab-your-good-friend" href="#sources-tab-your-good-friend">
  </a>
  Sources Tab, Your good friend?
</h2>

<p>We started digging more into different functionalities of Chrome, lighthouse & other tools. We found that Chrome provides a sources tab in Developer tools. Whenever we open an application or website, Source Tab provides us with all resources imported to that instance for having that software/website/app working as ideal. We saw that when we were just trying to open the Login page, It was importing all components from our component library, even though no other page/screen was getting loaded. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--89foNcDe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qn26bma3hpmoz9vk38u2.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--89foNcDe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qn26bma3hpmoz9vk38u2.jpg" alt="Sources Tab" loading="lazy" width="880" height="639"></a></p>

<p>Okay okay, I didn't tell you, we also have our Component library <a href="https://github.com/litmuschaos/litmus-ui">(litmus-ui)</a> built upon Rollup. This is a very well maintained & optimized component library that we use for our different products.</p>

<p>Well, interestingly, if you see in the above image, Our Login page was only using text-boxes & buttons. But, other components including analytics-related graphical components, icons & even lab components were getting loaded in the browser, which was not getting used or imported into the login page.</p>

<p>So, we started looking deeply in our Library, tried making some changes here & there, and tested with a small React App (Well, you don't want to wait for a build just for a single change, right). In all cases, it was importing all components from our library.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--mnd1vu7L--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z0uvywcaar45ejmbzfoi.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--mnd1vu7L--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z0uvywcaar45ejmbzfoi.gif" alt="Starting the Investigation" loading="lazy" width="498" height="269" data-animated="true"></a></p>

<p>After looking into other component libraries, we found one pattern and that was for every component, they were having <strong>default exports</strong> along with named exports. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--UWaM4g77--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/i7l8yhwptkzc1oveonub.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--UWaM4g77--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/i7l8yhwptkzc1oveonub.png" alt="Enhancing Imports" loading="lazy" width="652" height="136"></a></p>

<p>This ensured that no redundant code/components were loaded whenever a single component was imported from the library and also <strong>helped us in allowing path-based imports from our library</strong> as shown below.<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code># Previously only this was possible
import {ButtonFilled} from "litmus-ui";

# Now, all below given imports are possible
import { ButtonFilled } from "litmus-ui";
import { ButtonFilled } from "litmus-ui/core";
import { ButtonFilled } from "litmus-ui/core/Button";
import { ButtonFilled } from "litmus-ui/core/Button/ButtonFilled";
import ButtonFilled from "litmus-ui/core/Button/ButtonFilled"; 
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<h2>
  <a name="what-about-treeshaking-at-the-componentslibrary-level" href="#what-about-treeshaking-at-the-componentslibrary-level">
  </a>
  What about Tree-shaking at the Components-library level?
</h2>

<p>Well, with the above analysis we were sure that tree-shaking in our library wasn't working as expected. We started looking into tree-shaking more at the library level.</p>

<p>We stepped inside <strong>node_modules</strong>, after many hits & trials and comparing other libraries, we found that our library wasn't even supporting tree-shaking. Let's see the reason in the below picture as well as <code>rollup.config.js</code> that we had earlier -<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>  output: [
    {
      dir: "dist",
      format: "cjs",
      sourcemap: true,
    },
  ],
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>


<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--GiCo_sNH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oq449nu839ix9jaixw2m.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--GiCo_sNH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oq449nu839ix9jaixw2m.png" alt="Node_Modules" loading="lazy" width="291" height="396"></a></p>

<p>In the above picture, if you see, our library was only bundled to <code>cjs</code> (commonJS) format, which doesn't support tree-shaking.</p>

<p>Then we started looking into what we can do to achieve it. Well, this was the time when we found that <code>esm</code> (ES Modules) format is the one that supports this. So we changed our configuration file of the library to create the bundle in <code>esm</code> format.<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>  output: [
    {
      dir: "dist",
      format: "cjs",
      sourcemap: true,
    },
    {
      dir: "dist",
      format: "esm",
      sourcemap: true,
    },
  ],
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>


<p>Well, in the above configuration, we had made one mistake i.e. we had given the same destination directory as <code>dist</code> in both outputs, which in return was overriding each other and we were only getting <code>cjs</code> format.</p>

<p>So we changed the output dir for <code>esm</code> to <code>dist/esm</code>, with this in place, we had our <code>esm</code> bundle generated.</p>

<p>Now, our rollup.config.js was looking like below -<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>  output: [
    {
      dir: "dist",
      format: "cjs",
      sourcemap: true,
    },
    {
      dir: "dist/esm",
      format: "esm",
      sourcemap: true,
    },
  ],
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>


<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--PgDOnEAU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/008elzemg7ivn7my8fye.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--PgDOnEAU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/008elzemg7ivn7my8fye.png" alt="Node_Modules-1" loading="lazy" width="295" height="427"></a></p>

<p>Still, the same result, React wasn't using the <code>esm</code> module in our application. And we were also having one question in our mind, well we have bundled our library in 2 formats but how are we going to tell React to use <code>esm</code> format?</p>

<p>After a little research, we found that we have to provide a path for <code>esm</code> bundle in the <code>module</code> field in package.json of our component library. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--gUvzWA-d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1du0fw3oxda41iz8lyys.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--gUvzWA-d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1du0fw3oxda41iz8lyys.gif" alt="Found It" loading="lazy" width="498" height="249" data-animated="true"></a></p>

<p>So, we added both paths for <code>cjs</code> & <code>esm</code> in package.json in the fields <code>main</code> & <code>module</code> respectively. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--pTujssG---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7ycppptu3mvx8s6yrdo5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--pTujssG---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7ycppptu3mvx8s6yrdo5.png" alt="Tress-shakable" loading="lazy" width="306" height="51"></a></p>

<p>The above configuration made our library be used easily by both traditional bundlers as well as modern bundlers like webpack.</p>

<p>NOTE: Traditional bundlers who don't understand the <code>esm</code> type can make use of <code>cjs</code> with this configuration.</p>

<p>Well, while we were looking into this, we got our eyes on the build output of the library, we saw that it was creating only one chunk because we were giving only one entry-point in config. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XC__xv2N--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1mk4dgy2dlggr0qni7hb.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XC__xv2N--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1mk4dgy2dlggr0qni7hb.png" alt="Terminal-1" loading="lazy" width="880" height="97"></a></p>

<p>We tried with an array of entry points (One root & one for only one of the components). And well, guess what we had achieved what we wanted. We tried importing the same component, and only that component was loaded.<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>input: ["./src/index.ts","./src/core/Button/ButtonFilled/index.ts" ],
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>


<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OUxbBGef--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/dbon32tme23i7mt1hbbz.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OUxbBGef--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/dbon32tme23i7mt1hbbz.png" alt="Terminal-2" loading="lazy" width="714" height="116"></a></p>

<p>So, now we had all the things with us and we knew what we had to do. Firstly we thought let's just make a rule for every developer to add an entry-point in an array whenever he/she adds a new component. But then we thought this can have issues as we can forget to do so every time, After all, We all are Humans :-).</p>

<p>So, we made a script in JS which would go through all components and extract their relative paths & provide them as an array to the entry point in the config input.<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code># scripts/inputs.js
const fs = require("fs");
const path = require("path");

const getAllEntryPoints = function (dirPath, arrayOfFiles) {
  let files = fs.readdirSync(dirPath);
  arrayOfFiles = arrayOfFiles || [];

  files.forEach(function (file) {
    if (fs.statSync(dirPath + "/" + file).isDirectory()) {
      arrayOfFiles = getAllEntryPoints(dirPath + "/" + file, arrayOfFiles);
    } else {
      if (file === "index.ts") {
        arrayOfFiles.push(path.join(dirPath, "/", file));
      }
    }
  });

  return arrayOfFiles;
};

export default getAllEntryPoints;


# In rollup.config.js

import getAllEntryPoints from "./scripts/inputs";
const input = getAllEntryPoints("./src");
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>


<p>And with this, we were able to make our library Tree-shakable & still developer-friendly at the same time. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--9O6vml_1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zb644rwkh5ywplu5kpmb.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--9O6vml_1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zb644rwkh5ywplu5kpmb.png" alt="Terminal-2" loading="lazy" width="880" height="120"></a></p>

<p>Well, After this whole exercise & brain-storming, what we saw - </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8XZB2IKm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tcith9m33ze5xjkj51e5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8XZB2IKm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tcith9m33ze5xjkj51e5.png" alt="Opti-1" loading="lazy" width="880" height="93"></a></p>

<p>And with help of different compression techniques using brotli & gzip, we were able to achieve the below results - </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--5ipX3fyL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qhir45lw0wbwur999og0.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--5ipX3fyL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qhir45lw0wbwur999og0.png" alt="Compression" loading="lazy" width="880" height="129"></a></p>

<p>This was a great exercise for us as we got to know more about the bundling process, optimization techniques as well as the working of component libraries.</p>

<p>Well, This is it for now, Thanks for staying with me till here, Will be sharing more..as this is going to be continued, let's see what can be done to go below 2 MBs without compression.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--B3UOsrGp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/10z76nh4iq88n9170w11.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--B3UOsrGp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/10z76nh4iq88n9170w11.gif" alt="Making Life Better" loading="lazy" width="498" height="280" data-animated="true"></a></p>
<h3>
  <a name="conclusion" href="#conclusion">
  </a>
  <strong>Conclusion</strong>
</h3>

<p>Feel free to check out our ongoing project - <a href="https://github.com/litmuschaos/litmus/tree/master/litmus-portal">Chaos Center</a> and do let us know if you have any suggestions or feedback regarding the same. You can always submit a PR if you find any required changes.</p>

<p>Make sure to reach out to us if you have any feedback or queries. Hope you found the blog informative!</p>

<p>If chaos engineering is something that excites you or if you want to know more about cloud-native chaos engineering, donâ€™t forget to check out our <a href="https://litmuschaos.io/">Litmus website</a>, <a href="https://hub.litmuschaos.io/">ChaosHub</a>, and the <a href="https://github.com/litmuschaos/litmus">Litmus repo</a>. Do leave a star if you find it insightful. ðŸ˜Š</p>

<p>I would love to invite you to our community to stay connected with us and get your Chaos Engineering doubts cleared.<br>
To join our slack please follow the following steps!</p>

<p>Step 1: Join the Kubernetes slack using the following link: <a href="https://slack.k8s.io/">https://slack.k8s.io/</a></p>

<p>Step 2: Join the #litmus channel on the Kubernetes slack or use this link after joining the Kubernetes slack: <a href="https://slack.litmuschaos.io/">https://slack.litmuschaos.io/</a></p>

<p>Cheers!</p>


<div class="ltag-github-readme-tag">
  <div class="readme-overview">
    <h2>
      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--566lAguM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev.to/assets/github-logo-5a155e1f9a670af7944dd5e12375bc76ed542ea80224905ecaf878b9157cdefc.svg" alt="GitHub logo" loading="lazy">
      <a href="https://github.com/litmuschaos">
        litmuschaos
      </a> / <a style="font-weight:600" href="https://github.com/litmuschaos/litmus">
        litmus
      </a>
    </h2>
    <h3>
      Litmus helps  SREs and developers practice chaos engineering in a Cloud-native way. Chaos experiments are published at the ChaosHub  (https://hub.litmuschaos.io). Community notes is at https://hackmd.io/a4Zu_sH4TZGeih-xCimi3Q
    </h3>
  </div>
  <div class="ltag-github-body">
    
<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p><a target="_blank" rel="noopener noreferrer" href="https://avatars.githubusercontent.com/u/49853472?s=200&v=4"><img alt="LitmusChaos" src="https://res.cloudinary.com/practicaldev/image/fetch/s--p1TwlzEI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://avatars.githubusercontent.com/u/49853472%3Fs%3D200%26v%3D4" width="200" align="left" style="max-width:100%" loading="lazy"></a></p>
<h1 dir="auto">
Litmus</h1>
<h3 dir="auto">
Open Source Chaos Engineering Platform</h3>
<p dir="auto"><a href="https://slack.litmuschaos.io" rel="nofollow"><img src="https://camo.githubusercontent.com/b047ba96a77b6653f6c8d66341469fe42b3df6f720742b50a5b7b389822c877f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f536c61636b2d4a6f696e2d707572706c65" alt="Slack Channel" data-canonical-src="https://img.shields.io/badge/Slack-Join-purple" style="max-width:100%"></a>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/litmuschaos/litmus/actions/workflows/push.yml/badge.svg?branch=master"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--nDbbZbKx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://github.com/litmuschaos/litmus/actions/workflows/push.yml/badge.svg%3Fbranch%3Dmaster" alt="GitHub Workflow" style="max-width:100%" loading="lazy"></a>
<a href="https://hub.docker.com/r/litmuschaos/chaos-operator" rel="nofollow"><img src="https://camo.githubusercontent.com/f247ca264100c14f50ba143d04fdffaf2a0356080e246bc4d7f5cf64a10cce64/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f70756c6c732f6c69746d75736368616f732f6368616f732d6f70657261746f722e737667" alt="Docker Pulls" data-canonical-src="https://img.shields.io/docker/pulls/litmuschaos/chaos-operator.svg" style="max-width:100%"></a>
<a href="https://github.com/litmuschaos/litmus/stargazers"><img src="https://camo.githubusercontent.com/66f125c1f4c85d997327d4bb8359e00d10ca4aa80fbb6541eb14c817ef2cd14e/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f6c69746d75736368616f732f6c69746d75733f7374796c653d736f6369616c" alt="GitHub stars" data-canonical-src="https://img.shields.io/github/stars/litmuschaos/litmus?style=social" style="max-width:100%"></a>
<a href="https://github.com/litmuschaos/litmus/issues"><img src="https://camo.githubusercontent.com/ea31ad5156719209e5e2147e68f165d2627bc8f2b26ee4d43840663744061934/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f6c69746d75736368616f732f6c69746d7573" alt="GitHub issues" data-canonical-src="https://img.shields.io/github/issues/litmuschaos/litmus" style="max-width:100%"></a>
<a href="https://twitter.com/LitmusChaos" rel="nofollow"><img src="https://camo.githubusercontent.com/bed9fe80689ef57c302d8da8f44054aeed0d401da75d9ca9db85230a6f91e499/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f6c69746d75736368616f733f7374796c653d736f6369616c" alt="Twitter Follow" data-canonical-src="https://img.shields.io/twitter/follow/litmuschaos?style=social" style="max-width:100%"></a>
<a href="https://bestpractices.coreinfrastructure.org/projects/3202" rel="nofollow"><img src="https://camo.githubusercontent.com/9db8c7d1792b97cb894979f7ef425e1eaa433e34206e8cb863788ef33e4cef8a/68747470733a2f2f626573747072616374696365732e636f7265696e6672617374727563747572652e6f72672f70726f6a656374732f333230322f6261646765" alt="CII Best Practices" data-canonical-src="https://bestpractices.coreinfrastructure.org/projects/3202/badge" style="max-width:100%"></a>
<a href="https://bettercodehub.com/" rel="nofollow"><img src="https://camo.githubusercontent.com/0a97a152858c6207b625cf455450c232e9ccd94335cc0d03d73e6e1dc16f4846/68747470733a2f2f626574746572636f64656875622e636f6d2f656467652f62616467652f6c69746d75736368616f732f6c69746d75733f6272616e63683d6d6173746572" alt="BCH compliance" data-canonical-src="https://bettercodehub.com/edge/badge/litmuschaos/litmus?branch=master" style="max-width:100%"></a>
<a href="https://app.fossa.io/projects/git%2Bgithub.com%2Flitmuschaos%2Flitmus?ref=badge_shield" rel="nofollow"><img src="https://camo.githubusercontent.com/ff9b7f45294a2ef987056d9b8fd111df9adaa593e2b98281eec44a315ab09309/68747470733a2f2f6170702e666f7373612e696f2f6170692f70726f6a656374732f6769742532426769746875622e636f6d2532466c69746d75736368616f732532466c69746d75732e7376673f747970653d736869656c64" alt="FOSSA Status" data-canonical-src="https://app.fossa.io/api/projects/git%2Bgithub.com%2Flitmuschaos%2Flitmus.svg?type=shield" style="max-width:100%"></a>
<a href="https://www.youtube.com/channel/UCa57PMqmz_j0wnteRa9nCaw" rel="nofollow"><img src="https://camo.githubusercontent.com/a6c3642de765a25715f27bbef1cbec3a3e1725ceb8d9445b74564451e0d4e368/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f596f75547562652d5375627363726962652d726564" alt="YouTube Channel" data-canonical-src="https://img.shields.io/badge/YouTube-Subscribe-red" style="max-width:100%"></a>
<br><br><br><br></p>
<h4 dir="auto">
<em>Read this in <a href="https://github.com/litmuschaos/litmustranslations/TRANSLATIONS.md">other languages</a>.</em>
</h4>
<p dir="auto"><a href="https://github.com/litmuschaos/litmustranslations/README-ko.md"><g-emoji class="g-emoji" alias="kr" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f1f0-1f1f7.png">ðŸ‡°ðŸ‡·</g-emoji></a> <a href="https://github.com/litmuschaos/litmustranslations/README-chn.md"><g-emoji class="g-emoji" alias="cn" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e8-1f1f3.png">ðŸ‡¨ðŸ‡³</g-emoji></a> <a href="https://github.com/litmuschaos/litmustranslations/README-pt-br.md"><g-emoji class="g-emoji" alias="brazil" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e7-1f1f7.png">ðŸ‡§ðŸ‡·</g-emoji></a> <a href="https://github.com/litmuschaos/litmustranslations/README-hi.md"><g-emoji class="g-emoji" alias="india" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ee-1f1f3.png">ðŸ‡®ðŸ‡³</g-emoji></a></p>
<h2 dir="auto">
Overview</h2>
<p dir="auto">LitmusChaos is an open source Chaos Engineering platform that enables teams to identify weaknesses & potential outages in infrastructures by
inducing chaos tests in a controlled way. Developers & SREs can practice Chaos Engineering with Litmus as it is easy to use, based on modern
chaos engineering principles & community collaborated. It is 100% open source & a CNCF project.</p>
<p dir="auto">Litmus takes a cloud-native approach to create, manage and monitor chaos. The platform itself runs as a set of microservices and uses Kubernetes
custom resources to define the chaos intent, as well as the steady state hypothesis.</p>
<p dir="auto">At a high-level, Litmus comprises of:</p>
<ul dir="auto">
<li>
<strong>Chaos Control Plane</strong>: A centralized chaos management tool called chaos-center, which helps construct, schedule and visualize Litmus chaos workflows</li>
<li>
<strong>Chaos Execution Plane Services</strong>: Made up of a chaosâ€¦</li>
</ul></article></div>
  </div>
  <div class="gh-btn-container"><a class="gh-btn" href="https://github.com/litmuschaos/litmus">View on GitHub</a></div>
</div>



</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/jonsy13/frontend-optimization-at-litmuschaos-1p14" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(e,t,o,a,n){return o.type_of="article",o.id=990174,o.title="Frontend Optimization at LitmusChaos",o.description="Hi Folks!!  Hmm, So you have already developed an application &amp; you are looking at how to...",o.readable_publish_date="Mar 1",o.slug="frontend-optimization-at-litmuschaos-1p14",o.path="/litmus-chaos/frontend-optimization-at-litmuschaos-1p14",o.url=a,o.comments_count=0,o.public_reactions_count=11,o.collection_id=e,o.published_timestamp=t,o.positive_reactions_count=11,o.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--Ozm5hSh1--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/iwlykb1ch6qvlckx1ph1.png",o.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--SRIzQDKt--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/iwlykb1ch6qvlckx1ph1.png",o.canonical_url=a,o.created_at="2022-02-15T14:41:34Z",o.edited_at=e,o.crossposted_at=e,o.published_at=t,o.last_comment_at=t,o.reading_time_minutes=9,o.tag_list="react, litmuschaos, optimization, javascript",o.tags=["react","litmuschaos","optimization","javascript"],o.body_html='<p><em>Hi Folks!!</em></p>\n\n<p><em>Hmm, So you have already developed an application &amp; you are looking at how to optimize it?</em></p>\n\n<p><em>In this article, We will be taking you through the journey that we followed while working on frontend optimization at LitmusChaos.</em></p>\n\n<h2>\n  <a name="firstly-why-did-we-have-to-work-on-optimization-for-our-frontend" href="#firstly-why-did-we-have-to-work-on-optimization-for-our-frontend">\n  </a>\n  Firstly, Why did we have to work on optimization for our frontend?\n</h2>\n\n<p>So, as we all know, first impressions make sure how further things are going to move forward, right? The same thing goes with your Software. And as we are talking about Software, When your client is going to open that great application you made, What if that application takes a very long time to load &amp; they are waiting just to log in. And that even when that application is not even at its peak level or I would say it is not having a huge load on itself.</p>\n\n<p>Well, the same thing happened to us. We have been working on ChaosCenter for quite a long time now and it has grown to a very large extent. Last year, We found that our application was taking around 50 seconds just to load a login page. This motivated us to look into it deeply.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--vI-VSICD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2drewlls7suwwt3l8byd.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--vI-VSICD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2drewlls7suwwt3l8byd.gif" alt="Sherlock-Holmes-Start" loading="lazy" width="426" height="498" data-animated="true"></a></p>\n\n<p>Well, as a developer you always start with Developer-tools, right? We also did the same &amp; started looking at chunks getting transferred while loading a single page. We found that it was transferring around ~5MBs when a user was just trying to load the login page for logging in.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0Kl5ioRA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bu2z362wvffgn4ee1ylu.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0Kl5ioRA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bu2z362wvffgn4ee1ylu.png" alt="Network requests" loading="lazy" width="880" height="95"></a></p>\n\n<p>Now, that is a problem, right? Your application shouldn\'t be taking that much time to load or even that much of a big chunk shouldn\'t be getting transferred just for a single page.</p>\n\n<h2>\n  <a name="so-are-you-ready-for-this-journey" href="#so-are-you-ready-for-this-journey">\n  </a>\n  So, Are you ready for this journey?\n</h2>\n\n<p>Well, with the benchmarking numbers we had, we started digging into the working/bundling process of React JS &amp; different ways of optimizing that. And Oh!, by the way, I forgot to tell you, Our application is built using React. So, many things are already taken care of.</p>\n\n<p>While looking into the bundling process of Webpack, we got to know different styles of importing components (Static/Dynamic). Well, if your application is small, it doesn\'t matter which style you pick but an application like ours does matter.</p>\n\n<p>This leads us to the concept of Lazy-loading &amp; code-splitting.</p>\n\n<h2>\n  <a name="lazyloading-amp-codesplitting" href="#lazyloading-amp-codesplitting">\n  </a>\n  Lazy-Loading &amp; Code-splitting\n</h2>\n\n<p>Fortunately, we had written our codebase in such a way that all components are well isolated &amp; implemented. The only problem there was that we were using static imports everywhere, due to which all the components were getting loaded, whichever was imported in a file. And when we started looking into our codebase, we found that we had a central file, which has the routing logic &amp; all the pages/views were getting imported there. </p>\n\n<p>Let\'s look at the below example snippet from our Router file.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>import CreateWorkflow from \'../../pages/CreateWorkflow\';\nimport LoginPage from \'../../pages/LoginPage\';\nimport GetStarted from \'../../pages/GetStartedPage\';\nimport WorkflowDetails from \'../../pages/WorkflowDetails\'\n\n# Router component\n&lt;Router history={history}&gt;\n  {/* &lt;Routes /&gt; */}\n  &lt;Routes /&gt;\n&lt;/Router&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n<p>So If you see here, the router was working as intended, whenever a user started the app, it was routed to the sign-in page. But if we check the background, <strong>it was loading all the pages/views &amp; then redirecting to the sign-in page</strong>.<br>\nHere, what we wanted was to <strong>just load the sign-in page &amp; route to it</strong>.</p>\n\n<p>So we started with Router-based code-splitting. We changed all static imports from static to dynamic imports using built-in lazy-loading from Webpack &amp; React.<br>\n</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>const CreateWorkflow = lazy(() =&gt; import(\'../../pages/CreateWorkflow\'));\nconst LoginPage = lazy(() =&gt; import(\'../../pages/LoginPage\'));\nconst GetStarted = lazy(() =&gt; import(\'../../pages/GetStartedPage\'));\nconst WorkflowDetails = lazy(() =&gt; import(\'../../pages/WorkflowDetails\'));\n\n# Router component\n&lt;Suspense fallback={&lt;Loader /&gt;} &gt;\n  &lt;Router history={history}&gt;\n     {/* &lt;Routes /&gt; */}\n     &lt;Routes /&gt;\n  &lt;/Router&gt;\n&lt;/Suspense&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n<p>With the above changes, On trying to login to the application, Webpack will fetch the Router component chunk &amp; then only the Login-page chunk as only that is required.</p>\n\n<p>Now, at this time, we tried to build our frontend. And believe me, we knew that we had something because we had divided our build chunks from having size 3MBs to 1.5-2MBs.</p>\n\n<p>Moving ahead, We also followed the same approach at the components level &amp; changed all component imports in our pages by analyzing user stories to dynamic ones. </p>\n\n<p>Well, you might be having a question why would a component imported on a page be imported as dynamic?</p>\n\n<p>Let\'s take an example, you can have a page, where on clicking on a button, you show a modal or in our case a complete Code Editor. Well, a code editor is a big component and users might not even click on that button. So, We changed the imports everywhere to dynamic ones. I think with this you must have got the point here.</p>\n\n<p>The previous exercise had a great impact on our number of chunks (~98 chunks) &amp; their sizes, (Obviously on load time as well) as you can see in the below screenshot.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oLIXD1BF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7bgj0qcpwueovggsk6eg.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oLIXD1BF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7bgj0qcpwueovggsk6eg.png" alt="Build" loading="lazy" width="643" height="561"></a></p>\n<h2>\n  <a name="sources-tab-your-good-friend" href="#sources-tab-your-good-friend">\n  </a>\n  Sources Tab, Your good friend?\n</h2>\n\n<p>We started digging more into different functionalities of Chrome, lighthouse &amp; other tools. We found that Chrome provides a sources tab in Developer tools. Whenever we open an application or website, Source Tab provides us with all resources imported to that instance for having that software/website/app working as ideal. We saw that when we were just trying to open the Login page, It was importing all components from our component library, even though no other page/screen was getting loaded. </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--89foNcDe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qn26bma3hpmoz9vk38u2.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--89foNcDe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qn26bma3hpmoz9vk38u2.jpg" alt="Sources Tab" loading="lazy" width="880" height="639"></a></p>\n\n<p>Okay okay, I didn\'t tell you, we also have our Component library <a href="https://github.com/litmuschaos/litmus-ui">(litmus-ui)</a> built upon Rollup. This is a very well maintained &amp; optimized component library that we use for our different products.</p>\n\n<p>Well, interestingly, if you see in the above image, Our Login page was only using text-boxes &amp; buttons. But, other components including analytics-related graphical components, icons &amp; even lab components were getting loaded in the browser, which was not getting used or imported into the login page.</p>\n\n<p>So, we started looking deeply in our Library, tried making some changes here &amp; there, and tested with a small React App (Well, you don\'t want to wait for a build just for a single change, right). In all cases, it was importing all components from our library.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--mnd1vu7L--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z0uvywcaar45ejmbzfoi.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--mnd1vu7L--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z0uvywcaar45ejmbzfoi.gif" alt="Starting the Investigation" loading="lazy" width="498" height="269" data-animated="true"></a></p>\n\n<p>After looking into other component libraries, we found one pattern and that was for every component, they were having <strong>default exports</strong> along with named exports. </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--UWaM4g77--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/i7l8yhwptkzc1oveonub.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--UWaM4g77--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/i7l8yhwptkzc1oveonub.png" alt="Enhancing Imports" loading="lazy" width="652" height="136"></a></p>\n\n<p>This ensured that no redundant code/components were loaded whenever a single component was imported from the library and also <strong>helped us in allowing path-based imports from our library</strong> as shown below.<br>\n</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code># Previously only this was possible\nimport {ButtonFilled} from "litmus-ui";\n\n# Now, all below given imports are possible\nimport { ButtonFilled } from "litmus-ui";\nimport { ButtonFilled } from "litmus-ui/core";\nimport { ButtonFilled } from "litmus-ui/core/Button";\nimport { ButtonFilled } from "litmus-ui/core/Button/ButtonFilled";\nimport ButtonFilled from "litmus-ui/core/Button/ButtonFilled"; \n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n<h2>\n  <a name="what-about-treeshaking-at-the-componentslibrary-level" href="#what-about-treeshaking-at-the-componentslibrary-level">\n  </a>\n  What about Tree-shaking at the Components-library level?\n</h2>\n\n<p>Well, with the above analysis we were sure that tree-shaking in our library wasn\'t working as expected. We started looking into tree-shaking more at the library level.</p>\n\n<p>We stepped inside <strong>node_modules</strong>, after many hits &amp; trials and comparing other libraries, we found that our library wasn\'t even supporting tree-shaking. Let\'s see the reason in the below picture as well as <code>rollup.config.js</code> that we had earlier -<br>\n</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>  output: [\n    {\n      dir: "dist",\n      format: "cjs",\n      sourcemap: true,\n    },\n  ],\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--GiCo_sNH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oq449nu839ix9jaixw2m.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--GiCo_sNH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oq449nu839ix9jaixw2m.png" alt="Node_Modules" loading="lazy" width="291" height="396"></a></p>\n\n<p>In the above picture, if you see, our library was only bundled to <code>cjs</code> (commonJS) format, which doesn\'t support tree-shaking.</p>\n\n<p>Then we started looking into what we can do to achieve it. Well, this was the time when we found that <code>esm</code> (ES Modules) format is the one that supports this. So we changed our configuration file of the library to create the bundle in <code>esm</code> format.<br>\n</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>  output: [\n    {\n      dir: "dist",\n      format: "cjs",\n      sourcemap: true,\n    },\n    {\n      dir: "dist",\n      format: "esm",\n      sourcemap: true,\n    },\n  ],\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n<p>Well, in the above configuration, we had made one mistake i.e. we had given the same destination directory as <code>dist</code> in both outputs, which in return was overriding each other and we were only getting <code>cjs</code> format.</p>\n\n<p>So we changed the output dir for <code>esm</code> to <code>dist/esm</code>, with this in place, we had our <code>esm</code> bundle generated.</p>\n\n<p>Now, our rollup.config.js was looking like below -<br>\n</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>  output: [\n    {\n      dir: "dist",\n      format: "cjs",\n      sourcemap: true,\n    },\n    {\n      dir: "dist/esm",\n      format: "esm",\n      sourcemap: true,\n    },\n  ],\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--PgDOnEAU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/008elzemg7ivn7my8fye.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--PgDOnEAU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/008elzemg7ivn7my8fye.png" alt="Node_Modules-1" loading="lazy" width="295" height="427"></a></p>\n\n<p>Still, the same result, React wasn\'t using the <code>esm</code> module in our application. And we were also having one question in our mind, well we have bundled our library in 2 formats but how are we going to tell React to use <code>esm</code> format?</p>\n\n<p>After a little research, we found that we have to provide a path for <code>esm</code> bundle in the <code>module</code> field in package.json of our component library. </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--gUvzWA-d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1du0fw3oxda41iz8lyys.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--gUvzWA-d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1du0fw3oxda41iz8lyys.gif" alt="Found It" loading="lazy" width="498" height="249" data-animated="true"></a></p>\n\n<p>So, we added both paths for <code>cjs</code> &amp; <code>esm</code> in package.json in the fields <code>main</code> &amp; <code>module</code> respectively. </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--pTujssG---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7ycppptu3mvx8s6yrdo5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--pTujssG---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7ycppptu3mvx8s6yrdo5.png" alt="Tress-shakable" loading="lazy" width="306" height="51"></a></p>\n\n<p>The above configuration made our library be used easily by both traditional bundlers as well as modern bundlers like webpack.</p>\n\n<p>NOTE: Traditional bundlers who don\'t understand the <code>esm</code> type can make use of <code>cjs</code> with this configuration.</p>\n\n<p>Well, while we were looking into this, we got our eyes on the build output of the library, we saw that it was creating only one chunk because we were giving only one entry-point in config. </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XC__xv2N--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1mk4dgy2dlggr0qni7hb.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XC__xv2N--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1mk4dgy2dlggr0qni7hb.png" alt="Terminal-1" loading="lazy" width="880" height="97"></a></p>\n\n<p>We tried with an array of entry points (One root &amp; one for only one of the components). And well, guess what we had achieved what we wanted. We tried importing the same component, and only that component was loaded.<br>\n</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>input: ["./src/index.ts","./src/core/Button/ButtonFilled/index.ts" ],\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OUxbBGef--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/dbon32tme23i7mt1hbbz.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OUxbBGef--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/dbon32tme23i7mt1hbbz.png" alt="Terminal-2" loading="lazy" width="714" height="116"></a></p>\n\n<p>So, now we had all the things with us and we knew what we had to do. Firstly we thought let\'s just make a rule for every developer to add an entry-point in an array whenever he/she adds a new component. But then we thought this can have issues as we can forget to do so every time, After all, We all are Humans :-).</p>\n\n<p>So, we made a script in JS which would go through all components and extract their relative paths &amp; provide them as an array to the entry point in the config input.<br>\n</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code># scripts/inputs.js\nconst fs = require("fs");\nconst path = require("path");\n\nconst getAllEntryPoints = function (dirPath, arrayOfFiles) {\n  let files = fs.readdirSync(dirPath);\n  arrayOfFiles = arrayOfFiles || [];\n\n  files.forEach(function (file) {\n    if (fs.statSync(dirPath + "/" + file).isDirectory()) {\n      arrayOfFiles = getAllEntryPoints(dirPath + "/" + file, arrayOfFiles);\n    } else {\n      if (file === "index.ts") {\n        arrayOfFiles.push(path.join(dirPath, "/", file));\n      }\n    }\n  });\n\n  return arrayOfFiles;\n};\n\nexport default getAllEntryPoints;\n\n\n# In rollup.config.js\n\nimport getAllEntryPoints from "./scripts/inputs";\nconst input = getAllEntryPoints("./src");\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n<p>And with this, we were able to make our library Tree-shakable &amp; still developer-friendly at the same time. </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--9O6vml_1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zb644rwkh5ywplu5kpmb.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--9O6vml_1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zb644rwkh5ywplu5kpmb.png" alt="Terminal-2" loading="lazy" width="880" height="120"></a></p>\n\n<p>Well, After this whole exercise &amp; brain-storming, what we saw - </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8XZB2IKm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tcith9m33ze5xjkj51e5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8XZB2IKm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tcith9m33ze5xjkj51e5.png" alt="Opti-1" loading="lazy" width="880" height="93"></a></p>\n\n<p>And with help of different compression techniques using brotli &amp; gzip, we were able to achieve the below results - </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--5ipX3fyL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qhir45lw0wbwur999og0.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--5ipX3fyL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qhir45lw0wbwur999og0.png" alt="Compression" loading="lazy" width="880" height="129"></a></p>\n\n<p>This was a great exercise for us as we got to know more about the bundling process, optimization techniques as well as the working of component libraries.</p>\n\n<p>Well, This is it for now, Thanks for staying with me till here, Will be sharing more..as this is going to be continued, let\'s see what can be done to go below 2 MBs without compression.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--B3UOsrGp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/10z76nh4iq88n9170w11.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--B3UOsrGp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/10z76nh4iq88n9170w11.gif" alt="Making Life Better" loading="lazy" width="498" height="280" data-animated="true"></a></p>\n<h3>\n  <a name="conclusion" href="#conclusion">\n  </a>\n  <strong>Conclusion</strong>\n</h3>\n\n<p>Feel free to check out our ongoing project - <a href="https://github.com/litmuschaos/litmus/tree/master/litmus-portal">Chaos Center</a> and do let us know if you have any suggestions or feedback regarding the same. You can always submit a PR if you find any required changes.</p>\n\n<p>Make sure to reach out to us if you have any feedback or queries. Hope you found the blog informative!</p>\n\n<p>If chaos engineering is something that excites you or if you want to know more about cloud-native chaos engineering, donâ€™t forget to check out our <a href="https://litmuschaos.io/">Litmus website</a>, <a href="https://hub.litmuschaos.io/">ChaosHub</a>, and the <a href="https://github.com/litmuschaos/litmus">Litmus repo</a>. Do leave a star if you find it insightful. ðŸ˜Š</p>\n\n<p>I would love to invite you to our community to stay connected with us and get your Chaos Engineering doubts cleared.<br>\nTo join our slack please follow the following steps!</p>\n\n<p>Step 1: Join the Kubernetes slack using the following link: <a href="https://slack.k8s.io/">https://slack.k8s.io/</a></p>\n\n<p>Step 2: Join the #litmus channel on the Kubernetes slack or use this link after joining the Kubernetes slack: <a href="https://slack.litmuschaos.io/">https://slack.litmuschaos.io/</a></p>\n\n<p>Cheers!</p>\n\n\n<div class="ltag-github-readme-tag">\n  <div class="readme-overview">\n    <h2>\n      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--566lAguM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev.to/assets/github-logo-5a155e1f9a670af7944dd5e12375bc76ed542ea80224905ecaf878b9157cdefc.svg" alt="GitHub logo" loading="lazy">\n      <a href="https://github.com/litmuschaos">\n        litmuschaos\n      </a> / <a style="font-weight: 600;" href="https://github.com/litmuschaos/litmus">\n        litmus\n      </a>\n    </h2>\n    <h3>\n      Litmus helps  SREs and developers practice chaos engineering in a Cloud-native way. Chaos experiments are published at the ChaosHub  (https://hub.litmuschaos.io). Community notes is at https://hackmd.io/a4Zu_sH4TZGeih-xCimi3Q\n    </h3>\n  </div>\n  <div class="ltag-github-body">\n    \n<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p><a target="_blank" rel="noopener noreferrer" href="https://avatars.githubusercontent.com/u/49853472?s=200&amp;v=4"><img alt="LitmusChaos" src="https://res.cloudinary.com/practicaldev/image/fetch/s--p1TwlzEI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://avatars.githubusercontent.com/u/49853472%3Fs%3D200%26v%3D4" width="200" align="left" style="max-width: 100%;" loading="lazy"></a></p>\n<h1 dir="auto">\nLitmus</h1>\n<h3 dir="auto">\nOpen Source Chaos Engineering Platform</h3>\n<p dir="auto"><a href="https://slack.litmuschaos.io" rel="nofollow"><img src="https://camo.githubusercontent.com/b047ba96a77b6653f6c8d66341469fe42b3df6f720742b50a5b7b389822c877f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f536c61636b2d4a6f696e2d707572706c65" alt="Slack Channel" data-canonical-src="https://img.shields.io/badge/Slack-Join-purple" style="max-width: 100%;"></a>\n<a target="_blank" rel="noopener noreferrer" href="https://github.com/litmuschaos/litmus/actions/workflows/push.yml/badge.svg?branch=master"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--nDbbZbKx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://github.com/litmuschaos/litmus/actions/workflows/push.yml/badge.svg%3Fbranch%3Dmaster" alt="GitHub Workflow" style="max-width: 100%;" loading="lazy"></a>\n<a href="https://hub.docker.com/r/litmuschaos/chaos-operator" rel="nofollow"><img src="https://camo.githubusercontent.com/f247ca264100c14f50ba143d04fdffaf2a0356080e246bc4d7f5cf64a10cce64/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f70756c6c732f6c69746d75736368616f732f6368616f732d6f70657261746f722e737667" alt="Docker Pulls" data-canonical-src="https://img.shields.io/docker/pulls/litmuschaos/chaos-operator.svg" style="max-width: 100%;"></a>\n<a href="https://github.com/litmuschaos/litmus/stargazers"><img src="https://camo.githubusercontent.com/66f125c1f4c85d997327d4bb8359e00d10ca4aa80fbb6541eb14c817ef2cd14e/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f6c69746d75736368616f732f6c69746d75733f7374796c653d736f6369616c" alt="GitHub stars" data-canonical-src="https://img.shields.io/github/stars/litmuschaos/litmus?style=social" style="max-width: 100%;"></a>\n<a href="https://github.com/litmuschaos/litmus/issues"><img src="https://camo.githubusercontent.com/ea31ad5156719209e5e2147e68f165d2627bc8f2b26ee4d43840663744061934/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f6c69746d75736368616f732f6c69746d7573" alt="GitHub issues" data-canonical-src="https://img.shields.io/github/issues/litmuschaos/litmus" style="max-width: 100%;"></a>\n<a href="https://twitter.com/LitmusChaos" rel="nofollow"><img src="https://camo.githubusercontent.com/bed9fe80689ef57c302d8da8f44054aeed0d401da75d9ca9db85230a6f91e499/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f6c69746d75736368616f733f7374796c653d736f6369616c" alt="Twitter Follow" data-canonical-src="https://img.shields.io/twitter/follow/litmuschaos?style=social" style="max-width: 100%;"></a>\n<a href="https://bestpractices.coreinfrastructure.org/projects/3202" rel="nofollow"><img src="https://camo.githubusercontent.com/9db8c7d1792b97cb894979f7ef425e1eaa433e34206e8cb863788ef33e4cef8a/68747470733a2f2f626573747072616374696365732e636f7265696e6672617374727563747572652e6f72672f70726f6a656374732f333230322f6261646765" alt="CII Best Practices" data-canonical-src="https://bestpractices.coreinfrastructure.org/projects/3202/badge" style="max-width: 100%;"></a>\n<a href="https://bettercodehub.com/" rel="nofollow"><img src="https://camo.githubusercontent.com/0a97a152858c6207b625cf455450c232e9ccd94335cc0d03d73e6e1dc16f4846/68747470733a2f2f626574746572636f64656875622e636f6d2f656467652f62616467652f6c69746d75736368616f732f6c69746d75733f6272616e63683d6d6173746572" alt="BCH compliance" data-canonical-src="https://bettercodehub.com/edge/badge/litmuschaos/litmus?branch=master" style="max-width: 100%;"></a>\n<a href="https://app.fossa.io/projects/git%2Bgithub.com%2Flitmuschaos%2Flitmus?ref=badge_shield" rel="nofollow"><img src="https://camo.githubusercontent.com/ff9b7f45294a2ef987056d9b8fd111df9adaa593e2b98281eec44a315ab09309/68747470733a2f2f6170702e666f7373612e696f2f6170692f70726f6a656374732f6769742532426769746875622e636f6d2532466c69746d75736368616f732532466c69746d75732e7376673f747970653d736869656c64" alt="FOSSA Status" data-canonical-src="https://app.fossa.io/api/projects/git%2Bgithub.com%2Flitmuschaos%2Flitmus.svg?type=shield" style="max-width: 100%;"></a>\n<a href="https://www.youtube.com/channel/UCa57PMqmz_j0wnteRa9nCaw" rel="nofollow"><img src="https://camo.githubusercontent.com/a6c3642de765a25715f27bbef1cbec3a3e1725ceb8d9445b74564451e0d4e368/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f596f75547562652d5375627363726962652d726564" alt="YouTube Channel" data-canonical-src="https://img.shields.io/badge/YouTube-Subscribe-red" style="max-width: 100%;"></a>\n<br><br><br><br></p>\n<h4 dir="auto">\n<em>Read this in <a href="https://github.com/litmuschaos/litmustranslations/TRANSLATIONS.md">other languages</a>.</em>\n</h4>\n<p dir="auto"><a href="https://github.com/litmuschaos/litmustranslations/README-ko.md"><g-emoji class="g-emoji" alias="kr" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f1f0-1f1f7.png">ðŸ‡°ðŸ‡·</g-emoji></a> <a href="https://github.com/litmuschaos/litmustranslations/README-chn.md"><g-emoji class="g-emoji" alias="cn" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e8-1f1f3.png">ðŸ‡¨ðŸ‡³</g-emoji></a> <a href="https://github.com/litmuschaos/litmustranslations/README-pt-br.md"><g-emoji class="g-emoji" alias="brazil" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e7-1f1f7.png">ðŸ‡§ðŸ‡·</g-emoji></a> <a href="https://github.com/litmuschaos/litmustranslations/README-hi.md"><g-emoji class="g-emoji" alias="india" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ee-1f1f3.png">ðŸ‡®ðŸ‡³</g-emoji></a></p>\n<h2 dir="auto">\nOverview</h2>\n<p dir="auto">LitmusChaos is an open source Chaos Engineering platform that enables teams to identify weaknesses &amp; potential outages in infrastructures by\ninducing chaos tests in a controlled way. Developers &amp; SREs can practice Chaos Engineering with Litmus as it is easy to use, based on modern\nchaos engineering principles &amp; community collaborated. It is 100% open source &amp; a CNCF project.</p>\n<p dir="auto">Litmus takes a cloud-native approach to create, manage and monitor chaos. The platform itself runs as a set of microservices and uses Kubernetes\ncustom resources to define the chaos intent, as well as the steady state hypothesis.</p>\n<p dir="auto">At a high-level, Litmus comprises of:</p>\n<ul dir="auto">\n<li>\n<strong>Chaos Control Plane</strong>: A centralized chaos management tool called chaos-center, which helps construct, schedule and visualize Litmus chaos workflows</li>\n<li>\n<strong>Chaos Execution Plane Services</strong>: Made up of a chaosâ€¦</li>\n</ul></article></div>\n  </div>\n  <div class="gh-btn-container"><a class="gh-btn" href="https://github.com/litmuschaos/litmus">View on GitHub</a></div>\n</div>\n\n\n\n',o.body_markdown='_Hi Folks!!_\n\n_Hmm, So you have already developed an application & you are looking at how to optimize it?_\n\n_In this article, We will be taking you through the journey that we followed while working on frontend optimization at LitmusChaos._\n\n## Firstly, Why did we have to work on optimization for our frontend?\n\nSo, as we all know, first impressions make sure how further things are going to move forward, right? The same thing goes with your Software. And as we are talking about Software, When your client is going to open that great application you made, What if that application takes a very long time to load & they are waiting just to log in. And that even when that application is not even at its peak level or I would say it is not having a huge load on itself.\n\nWell, the same thing happened to us. We have been working on ChaosCenter for quite a long time now and it has grown to a very large extent. Last year, We found that our application was taking around 50 seconds just to load a login page. This motivated us to look into it deeply.\n\n![Sherlock-Holmes-Start](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2drewlls7suwwt3l8byd.gif)\n\nWell, as a developer you always start with Developer-tools, right? We also did the same & started looking at chunks getting transferred while loading a single page. We found that it was transferring around ~5MBs when a user was just trying to load the login page for logging in.\n\n\n![Network requests](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bu2z362wvffgn4ee1ylu.png)\n\n\nNow, that is a problem, right? Your application shouldn\'t be taking that much time to load or even that much of a big chunk shouldn\'t be getting transferred just for a single page.\n\n## So, Are you ready for this journey?\n\nWell, with the benchmarking numbers we had, we started digging into the working/bundling process of React JS & different ways of optimizing that. And Oh!, by the way, I forgot to tell you, Our application is built using React. So, many things are already taken care of.\n\nWhile looking into the bundling process of Webpack, we got to know different styles of importing components (Static/Dynamic). Well, if your application is small, it doesn\'t matter which style you pick but an application like ours does matter.\n\nThis leads us to the concept of Lazy-loading & code-splitting.\n\n## Lazy-Loading & Code-splitting\n\nFortunately, we had written our codebase in such a way that all components are well isolated & implemented. The only problem there was that we were using static imports everywhere, due to which all the components were getting loaded, whichever was imported in a file. And when we started looking into our codebase, we found that we had a central file, which has the routing logic & all the pages/views were getting imported there. \n\nLet\'s look at the below example snippet from our Router file.\n\n```\nimport CreateWorkflow from \'../../pages/CreateWorkflow\';\nimport LoginPage from \'../../pages/LoginPage\';\nimport GetStarted from \'../../pages/GetStartedPage\';\nimport WorkflowDetails from \'../../pages/WorkflowDetails\'\n\n# Router component\n<Router history={history}>\n  {/* <Routes /> */}\n  <Routes />\n</Router>\n```\n\nSo If you see here, the router was working as intended, whenever a user started the app, it was routed to the sign-in page. But if we check the background, **it was loading all the pages/views & then redirecting to the sign-in page**.\nHere, what we wanted was to **just load the sign-in page & route to it**.\n\nSo we started with Router-based code-splitting. We changed all static imports from static to dynamic imports using built-in lazy-loading from Webpack & React.\n\n```\nconst CreateWorkflow = lazy(() => import(\'../../pages/CreateWorkflow\'));\nconst LoginPage = lazy(() => import(\'../../pages/LoginPage\'));\nconst GetStarted = lazy(() => import(\'../../pages/GetStartedPage\'));\nconst WorkflowDetails = lazy(() => import(\'../../pages/WorkflowDetails\'));\n\n# Router component\n<Suspense fallback={<Loader />} >\n  <Router history={history}>\n     {/* <Routes /> */}\n     <Routes />\n  </Router>\n</Suspense>\n```\n\nWith the above changes, On trying to login to the application, Webpack will fetch the Router component chunk & then only the Login-page chunk as only that is required.\n \nNow, at this time, we tried to build our frontend. And believe me, we knew that we had something because we had divided our build chunks from having size 3MBs to 1.5-2MBs.\n\nMoving ahead, We also followed the same approach at the components level & changed all component imports in our pages by analyzing user stories to dynamic ones. \n\nWell, you might be having a question why would a component imported on a page be imported as dynamic?\n\nLet\'s take an example, you can have a page, where on clicking on a button, you show a modal or in our case a complete Code Editor. Well, a code editor is a big component and users might not even click on that button. So, We changed the imports everywhere to dynamic ones. I think with this you must have got the point here.\n\nThe previous exercise had a great impact on our number of chunks (~98 chunks) & their sizes, (Obviously on load time as well) as you can see in the below screenshot.\n\n![Build](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7bgj0qcpwueovggsk6eg.png)\n\n## Sources Tab, Your good friend?\n\nWe started digging more into different functionalities of Chrome, lighthouse & other tools. We found that Chrome provides a sources tab in Developer tools. Whenever we open an application or website, Source Tab provides us with all resources imported to that instance for having that software/website/app working as ideal. We saw that when we were just trying to open the Login page, It was importing all components from our component library, even though no other page/screen was getting loaded. \n\n![Sources Tab](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qn26bma3hpmoz9vk38u2.jpg)\n\nOkay okay, I didn\'t tell you, we also have our Component library [(litmus-ui)](https://github.com/litmuschaos/litmus-ui) built upon Rollup. This is a very well maintained & optimized component library that we use for our different products.\n\nWell, interestingly, if you see in the above image, Our Login page was only using text-boxes & buttons. But, other components including analytics-related graphical components, icons & even lab components were getting loaded in the browser, which was not getting used or imported into the login page.\n\nSo, we started looking deeply in our Library, tried making some changes here & there, and tested with a small React App (Well, you don\'t want to wait for a build just for a single change, right). In all cases, it was importing all components from our library.\n\n![Starting the Investigation](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z0uvywcaar45ejmbzfoi.gif)\n\nAfter looking into other component libraries, we found one pattern and that was for every component, they were having **default exports** along with named exports. \n\n![Enhancing Imports](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/i7l8yhwptkzc1oveonub.png)\n\nThis ensured that no redundant code/components were loaded whenever a single component was imported from the library and also **helped us in allowing path-based imports from our library** as shown below.\n\n```\n# Previously only this was possible\nimport {ButtonFilled} from "litmus-ui";\n\n# Now, all below given imports are possible\nimport { ButtonFilled } from "litmus-ui";\nimport { ButtonFilled } from "litmus-ui/core";\nimport { ButtonFilled } from "litmus-ui/core/Button";\nimport { ButtonFilled } from "litmus-ui/core/Button/ButtonFilled";\nimport ButtonFilled from "litmus-ui/core/Button/ButtonFilled"; \n```\n\n## What about Tree-shaking at the Components-library level?\n\nWell, with the above analysis we were sure that tree-shaking in our library wasn\'t working as expected. We started looking into tree-shaking more at the library level.\n\nWe stepped inside **node_modules**, after many hits & trials and comparing other libraries, we found that our library wasn\'t even supporting tree-shaking. Let\'s see the reason in the below picture as well as `rollup.config.js` that we had earlier -\n\n```\n  output: [\n    {\n      dir: "dist",\n      format: "cjs",\n      sourcemap: true,\n    },\n  ],\n``` \n\n![Node_Modules](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oq449nu839ix9jaixw2m.png)\n\nIn the above picture, if you see, our library was only bundled to `cjs` (commonJS) format, which doesn\'t support tree-shaking.\n\nThen we started looking into what we can do to achieve it. Well, this was the time when we found that `esm` (ES Modules) format is the one that supports this. So we changed our configuration file of the library to create the bundle in `esm` format. \n\n```\n  output: [\n    {\n      dir: "dist",\n      format: "cjs",\n      sourcemap: true,\n    },\n    {\n      dir: "dist",\n      format: "esm",\n      sourcemap: true,\n    },\n  ],\n```\n\nWell, in the above configuration, we had made one mistake i.e. we had given the same destination directory as `dist` in both outputs, which in return was overriding each other and we were only getting `cjs` format.\n\nSo we changed the output dir for `esm` to `dist/esm`, with this in place, we had our `esm` bundle generated.\n\nNow, our rollup.config.js was looking like below - \n\n```\n  output: [\n    {\n      dir: "dist",\n      format: "cjs",\n      sourcemap: true,\n    },\n    {\n      dir: "dist/esm",\n      format: "esm",\n      sourcemap: true,\n    },\n  ],\n```\n\n![Node_Modules-1](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/008elzemg7ivn7my8fye.png)\n\nStill, the same result, React wasn\'t using the `esm` module in our application. And we were also having one question in our mind, well we have bundled our library in 2 formats but how are we going to tell React to use `esm` format?\n\nAfter a little research, we found that we have to provide a path for `esm` bundle in the `module` field in package.json of our component library. \n\n![Found It](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1du0fw3oxda41iz8lyys.gif)\n\nSo, we added both paths for `cjs` & `esm` in package.json in the fields `main` & `module` respectively. \n\n![Tress-shakable](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7ycppptu3mvx8s6yrdo5.png)\n\nThe above configuration made our library be used easily by both traditional bundlers as well as modern bundlers like webpack.\n\nNOTE: Traditional bundlers who don\'t understand the `esm` type can make use of `cjs` with this configuration.\n\nWell, while we were looking into this, we got our eyes on the build output of the library, we saw that it was creating only one chunk because we were giving only one entry-point in config. \n\n![Terminal-1](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1mk4dgy2dlggr0qni7hb.png)\n\nWe tried with an array of entry points (One root & one for only one of the components). And well, guess what we had achieved what we wanted. We tried importing the same component, and only that component was loaded.\n\n```\ninput: ["./src/index.ts","./src/core/Button/ButtonFilled/index.ts" ],\n```\n\n![Terminal-2](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/dbon32tme23i7mt1hbbz.png)\n\nSo, now we had all the things with us and we knew what we had to do. Firstly we thought let\'s just make a rule for every developer to add an entry-point in an array whenever he/she adds a new component. But then we thought this can have issues as we can forget to do so every time, After all, We all are Humans :-).\n\nSo, we made a script in JS which would go through all components and extract their relative paths & provide them as an array to the entry point in the config input.\n\n```\n# scripts/inputs.js\nconst fs = require("fs");\nconst path = require("path");\n\nconst getAllEntryPoints = function (dirPath, arrayOfFiles) {\n  let files = fs.readdirSync(dirPath);\n  arrayOfFiles = arrayOfFiles || [];\n\n  files.forEach(function (file) {\n    if (fs.statSync(dirPath + "/" + file).isDirectory()) {\n      arrayOfFiles = getAllEntryPoints(dirPath + "/" + file, arrayOfFiles);\n    } else {\n      if (file === "index.ts") {\n        arrayOfFiles.push(path.join(dirPath, "/", file));\n      }\n    }\n  });\n\n  return arrayOfFiles;\n};\n\nexport default getAllEntryPoints;\n\n\n# In rollup.config.js\n\nimport getAllEntryPoints from "./scripts/inputs";\nconst input = getAllEntryPoints("./src");\n```\n\nAnd with this, we were able to make our library Tree-shakable & still developer-friendly at the same time. \n\n![Terminal-2](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zb644rwkh5ywplu5kpmb.png)\n\nWell, After this whole exercise & brain-storming, what we saw - \n\n![Opti-1](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tcith9m33ze5xjkj51e5.png)\n\nAnd with help of different compression techniques using brotli & gzip, we were able to achieve the below results - \n\n![Compression](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qhir45lw0wbwur999og0.png)\n\nThis was a great exercise for us as we got to know more about the bundling process, optimization techniques as well as the working of component libraries.\n\nWell, This is it for now, Thanks for staying with me till here, Will be sharing more..as this is going to be continued, let\'s see what can be done to go below 2 MBs without compression.\n\n![Making Life Better](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/10z76nh4iq88n9170w11.gif)\n\n### **Conclusion**\n\nFeel free to check out our ongoing project - [Chaos Center](https://github.com/litmuschaos/litmus/tree/master/litmus-portal) and do let us know if you have any suggestions or feedback regarding the same. You can always submit a PR if you find any required changes.\n\nMake sure to reach out to us if you have any feedback or queries. Hope you found the blog informative!\n\nIf chaos engineering is something that excites you or if you want to know more about cloud-native chaos engineering, donâ€™t forget to check out our [Litmus website](https://litmuschaos.io/), [ChaosHub](https://hub.litmuschaos.io/), and the [Litmus repo](https://github.com/litmuschaos/litmus). Do leave a star if you find it insightful. ðŸ˜Š\n\nI would love to invite you to our community to stay connected with us and get your Chaos Engineering doubts cleared.\nTo join our slack please follow the following steps!\n\nStep 1: Join the Kubernetes slack using the following link: https://slack.k8s.io/\n\nStep 2: Join the #litmus channel on the Kubernetes slack or use this link after joining the Kubernetes slack: https://slack.litmuschaos.io/\n\nCheers!\n\n{% github litmuschaos/litmus %}',o.user={name:"Vedant Shrotria",username:"jonsy13",twitter_username:e,github_username:"Jonsy13",website_url:e,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--xZ3dUX2P--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/415007/19e1d8e6-508b-44e6-a39e-567381d047e9.jpg",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--sTDMTKpi--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/415007/19e1d8e6-508b-44e6-a39e-567381d047e9.jpg"},o.organization={name:"LitmusChaos",username:n,slug:n,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--muLYSTsc--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/3775/9c0dac2d-078a-4e1b-bf87-aab26ac22759.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--BXyQdW4O--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/3775/9c0dac2d-078a-4e1b-bf87-aab26ac22759.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:o}},error:e,state:{currentArticle:o},serverRendered:!0,routePath:"/jonsy13/990174",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:e}}}}(null,"2022-03-01T12:00:00Z",{},"https://dev.to/litmus-chaos/frontend-optimization-at-litmuschaos-1p14","litmus-chaos")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
