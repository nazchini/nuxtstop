<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>A Gentle Introduction to AWS Lambda</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>A Gentle Introduction to AWS Lambda</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/aws" class="tag" data-v-70afb46a>
          #aws
        </a><a href="/nuxtstop/t/lambda" class="tag" data-v-70afb46a>
          #lambda
        </a><a href="/nuxtstop/t/serverless" class="tag" data-v-70afb46a>
          #serverless
        </a><a href="/nuxtstop/t/python" class="tag" data-v-70afb46a>
          #python
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0OwqDgaF--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://bacchi.org/images/computer-coffee.jpg" alt="A Gentle Introduction to AWS Lambda" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            33
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            0
          </span></div> <time data-v-70afb46a>Feb 2</time></div></header> <div class="content" data-v-70afb46a><p>You've probably heard of AWS Lambda and serverless by now. But what is Lambda all about? The short definition of AWS Lambda is a "Functions as a Service" (FaaS) technology. The longer and more complicated answer is that Lambda is a lightweight runtime that requires no infrastructure to be defined by the developer.</p>

<p>FaaS allows developers to build software features quickly with less emphasis on the question of <em>where</em> and <em>how</em> they run. This allows for more focus on the business logic that users interact with. Functions as a Service is the most recent innovation in the long line of virtualization technologies. Compute virtualization started with physical servers, then moved to virtual machines (VMs), which grew into Infrastructure as a Service (IaaS). Platforms as a Service came next with companies like Heroku allowing developers to deploy without caring about infrastructure specifics. Now we're arriving at FaaS, which promises to abstract all these details away.  <a href="https://dashbird.io/blog/origin-of-serverless/">Here</a> are a <a href="https://joshfechter.com/iaas-paas-saas/">couple</a> good descriptions of these origins and where we are as an industry today.</p>

<h2>
  <a name="lambda-vs-serverless-terminology" href="#lambda-vs-serverless-terminology">
  </a>
  Lambda vs. Serverless Terminology
</h2>

<p>The terms serverless and AWS Lambda are often used interchangeably, but they aren't exactly the same thing. Serverless refers to a collection of tools that require no infrastructure configurations from the developer, including databases, queues, functions and gateways as a service. AWS Lambda is only the FaaS component in this list. That means there are many more products such as API gateways, message queueing systems, notification tools, and serverless databases that fill out the serverless landscape. In this blog post we'll only work with a couple of these, namely AWS Lambda and AWS API Gateway for our demonstration.</p>

<h2>
  <a name="faas-platforms" href="#faas-platforms">
  </a>
  FaaS Platforms
</h2>

<p>There are many <a href="https://fauna.com/blog/comparison-faas-providers">FaaS providers</a> in the industry.  From the big players like Google, IBM, and AWS to the smaller ones like the open source OpenWhisk and OpenFaaS, they all provide similar functionality (generally) with different developer experiences.</p>

<p>There are also Edge computing FaaS providers, which instead of executing the code in one central data center, run the code in a data center nearest the user, known as the "Edge". The players in this area of serverless technology are companies like Cloudflare, Lambda@Edge (AWS), and Fastly.</p>

<h2>
  <a name="aws-lambda-in-plan-english" href="#aws-lambda-in-plan-english">
  </a>
  AWS Lambda in Plan English
</h2>

<p>After reading the above definition of serverless, Functions as a Service, and AWS Lambda, your understanding might still be cloudy (no pun intended). I'll attempt to explain it in more simple terms.</p>

<p>The description on the <a href="https://docs.aws.amazon.com/lambda/latest/dg/welcome.html">AWS documentation website</a> says "Lambda is a compute service that lets you run code without provisioning or managing servers." The essence of Lambda is that AWS built all the scaffolding to allow you and I to send them a single piece of code, which they will run for us.</p>

<p>We don't need to build servers or container images in order to run this single piece of code. All we have to think about is writing code, and then a small SAM template file which defines the requirements of the deployment, and finally shipping it.</p>

<h3>
  <a name="is-it-really-a-single-function" href="#is-it-really-a-single-function">
  </a>
  Is it Really a Single Function?
</h3>

<p>In order to wrap your brain around this idea of functions as a service, think of a single method or function in a small program. The function is called by another function, and may return a result.</p>

<p>Below you see a simple Python program in which there is a parent function (<code>main()</code>) calling a child function (<code>childfunction()</code>).<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight python"><code><span class="k">def</span> <span class="nf">childfunction</span><span class="p">(</span><span class="n">inputstring</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">inputstring</span> <span class="o">==</span> <span class="s">"hello"</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">"world"</span>
    <span class="k">return</span> <span class="s">"hi"</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">childfunction</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"value: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The output of this program looks like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>python hello.py
value: world
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>At it's simplest form, AWS Lambda can be thought of as a single child function being called by a parent function. AWS owns the parent function, which executes your function (the child function) in it's own virtual environment.</p>

<p>Your objective during the rest of this blog post is to write, deploy and execute a single Lambda function.</p>

<h2>
  <a name="lets-write-one-bite-sized-function" href="#lets-write-one-bite-sized-function">
  </a>
  Let's Write One Bite Sized Function
</h2>

<p>For this example, we'll write a small function that does nothing particularly important, but demonstrates the mechanics of running a function in AWS Lambda.  You are probably familiar with shell environment variables. In your terminal you can print out the environment variables defined in your session, or even create new environment variables.</p>

<p>The below terminal command prints out an environment variable showing the user name that you are logged in as:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$USER</span>
mbacchi
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h3>
  <a name="what-will-the-function-do" href="#what-will-the-function-do">
  </a>
  What Will the Function Do?
</h3>

<p>The function we'll deploy will print out the default <a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html#configuration-envvars-runtime">runtime environment variables</a> in the AWS Lambda execution environment.</p>

<p>Similar to the terminal session above, our Lambda function can access the default environment variables such as <code>AWS_LAMBDA_FUNCTION_NAME</code>, <code>AWS_LAMBDA_LOG_GROUP_NAME</code>, or <code>TZ</code>. But how do we see the output of <code>print</code> statements in a Lambda? Anything that gets printed to STDOUT <a href="https://docs.aws.amazon.com/lambda/latest/dg/python-logging.html">will be logged to CloudWatch Logs</a> using the log group name of the function.</p>

<h2>
  <a name="how-does-lambda-work" href="#how-does-lambda-work">
  </a>
  How Does Lambda Work?
</h2>

<p>The concepts that you'll need to understand are described in the AWS <a href="https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-concepts.html">Lambda documentation</a>.</p>

<p>Here are some of the most important details you'll need to write your Lambda functions:</p>

<ul>
<li>
<strong>Invocation:</strong> The function is <a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-invocation.html">invoked</a> by one of the triggers that AWS provides. It can also be triggered by cron like <a href="https://docs.aws.amazon.com/lambda/latest/dg/services-cloudwatchevents-expressions.html">scheduling events</a>.</li>
<li>
<strong>Entrypoint:</strong> Your Lambda function needs to implement a <a href="https://docs.aws.amazon.com/lambda/latest/dg/python-handler.html">handler</a> which is the method (or function) that gets called by AWS when triggered.</li>
<li>
<strong>Environment:</strong> The handler is passed an <a href="https://docs.aws.amazon.com/lambda/latest/dg/python-handler.html#python-handler-how">event object and context object</a> from AWS that provides your function both data to be processed and context (information) about how it was called and other clues that you can use in your code.</li>
<li>
<strong>Response:</strong> In certain cases you will want to syncronously <a href="https://docs.aws.amazon.com/lambda/latest/dg/python-handler.html#python-handler-return">return a value</a> from your function, but that is optional. If you are writing an API backend you will return a value through API Gateway. If instead you are performing some scheduled data processing you may not return a value.</li>
</ul>

<h2>
  <a name="background-on-associated-serverless-components" href="#background-on-associated-serverless-components">
  </a>
  Background on Associated Serverless Components
</h2>

<p>We mentioned earlier how serverless isn't just AWS Lambda, and in this project we'll use API Gateway and CloudWatch Logs, but only to enable us to show how our Lambda function executes.</p>

<p>AWS <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html">API Gateway</a> is, as the name suggests, an API gateway product. But it also allows for more than just API calls. For example it enables generic HTTP/HTTPS traffic, REST APIs and Websocket APIs. You can host a standard web server with API Gateway and Lambda, you aren't limited to just APIs with API Gateway.</p>

<p><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html">CloudWatch Logs</a> is a logging product from AWS that allows all other AWS products to log their activity to a central location. In our example we'll be looking at the output of our Lambda function to see the environment variables available in the Lambda itself during runtime.</p>

<p>We're not going to cover these in any more detail because they're not the main focus of this post.</p>

<h2>
  <a name="sample-lambda-function" href="#sample-lambda-function">
  </a>
  Sample Lambda Function
</h2>

<p>For this example deployment, we'll use <a href="https://github.com/mbacchi/lambda-env-vars">a GitHub repository that has our AWS Lambda function</a> defined. The Lambda function in this repo was written with the intention of being used for demonstration purposes, and as a simple function that can be deployed when testing out CI/CD or the many serverless deployment tools available today (such as <a href="https://github.com/serverless/serverless">Serverless Framework</a>, <a href="https://github.com/aws/aws-cdk">Cloud Development Kit (CDK)</a> etc.)</p>

<h2>
  <a name="deploying-a-lambda-function-with-aws-sam" href="#deploying-a-lambda-function-with-aws-sam">
  </a>
  Deploying a Lambda Function with AWS SAM
</h2>

<p>AWS SAM is the <a href="https://aws.amazon.com/serverless/sam/">Serverless Application Model</a>, which allows you to <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification-template-anatomy.html">write a template</a> describing the Lambda function, and any related resources you need to run your Lambda. The SAM template uses the YAML markup language and is based on AWS Cloudformation. After reading the template, SAM performs the deployment for you, and you can watch Cloudformation events to identify what the outcome was.</p>

<p>We are going to use the <a href="https://github.com/mbacchi/lambda-env-vars/blob/master/template.yaml">template</a> in the above repository to deploy the function. I won't go into detail breaking down all of the items in the template for now. That information can be found in the documentation above or in other blogs. But I do want to highlight the two resources used here, the <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/template.yaml#L14">LambdaEnvVarsFunction</a> which is of the type <code>AWS::Serverless::Function</code> and the <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/template.yaml#L26">LambdaLogGroup</a>, which is the definition of our <code>AWS::Logs::LogGroup</code> CloudWatch log group, where our Lambda output will be collected.</p>

<h2>
  <a name="install-sam-cli" href="#install-sam-cli">
  </a>
  Install SAM CLI
</h2>

<p>You'll need to install a few components before running SAM. I would recommend running this in a Python virtual environment (venv), and I will provide basic steps here to set that up.</p>

<p>From your terminal run these commands (this is on a Linux system):</p>

<ul>
<li>Step 1: Make sure you have Python 3.8 (you may have to install this first, on Fedora Linux the command would be <code>sudo dnf install python3.8</code>)
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>  <span class="nv">$ </span>which python3.8
  /usr/bin/python3.8
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>Step 2: Create a Python 3.8 virtual environment
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>  <span class="nv">$ </span>python3.8 <span class="nt">-m</span> venv venv38
  <span class="nv">$ </span><span class="nb">ls </span>venv38
  bin  include  lib  lib64  pyvenv.cfg
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>Step 3: Activate the virtual environment
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>  <span class="nv">$ </span><span class="nb">.</span> venv38/bin/activate
  <span class="nv">$ </span>which python
  ~/FAKE_PATH/lambda-env-vars7/venv38/bin/python
  <span class="nv">$ </span>which pip
  ~/FAKE_PATH/lambda-env-vars7/venv38/bin/pip
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>Step 4: Install SAM CLI <strong>NOTE: This installs Docker in the Python virtual environment</strong>
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>  <span class="nv">$ </span>pip <span class="nb">install </span>aws-sam-cli
  Collecting aws-sam-cli
    Using cached aws_sam_cli-1.37.0-py3-none-any.whl <span class="o">(</span>5.0 MB<span class="o">)</span>
  Collecting <span class="nv">boto3</span><span class="o">==</span>1.<span class="k">*</span>,><span class="o">=</span>1.18.32
    Using cached boto3-1.20.46-py3-none-any.whl <span class="o">(</span>131 kB<span class="o">)</span>
  ...
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now you can move on to the next step, where we run the Lambda function locally.</p>

<h2>
  <a name="running-your-lambda-function-with-sam-local" href="#running-your-lambda-function-with-sam-local">
  </a>
  Running Your Lambda Function with SAM Local
</h2>

<p>Before we deploy to AWS itself, we want to test our code by invoking the Lambda function locally. What is this magic you ask? SAM provides a utility command called <code>sam local invoke</code> which allows your function to run locally in a Docker container to test that it runs as expected before deploying to AWS.</p>

<p><strong>NOTE:</strong> We assume you haven't left the terminal session in step 4 above. If you have, activate your Python virtual environment as in step 3 above.</p>

<p>Run <code>sam local invoke</code> as <a href="https://github.com/mbacchi/lambda-env-vars#testing-using-sam-local">described in the Git repository</a> (this uses <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/events/event.json">test events</a> supplied with Lambda function in the repository)<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>sam <span class="nb">local </span>invoke LambdaEnvVarsFunction <span class="nt">--event</span> events/event.json
Invoking app.lambda_handler <span class="o">(</span>python3.8<span class="o">)</span>
Skip pulling image and use <span class="nb">local </span>one: public.ecr.aws/sam/emulation-python3.8:rapid-1.37.0-x86_64.

Mounting /home/mbacchi/data/repos/mbacchi/lambda-env-vars7/.aws-sam/build/LambdaEnvVarsFunction as /var/task:ro,delegated inside runtime container
START RequestId: f97086cf-e8b6-4d9f-b2bc-b627ca5961e6 Version: <span class="nv">$LATEST</span>
Hello there this is the body: <span class="o">{</span><span class="s1">'_HANDLER'</span>: <span class="s1">'app.lambda_handler'</span>, <span class="s1">'AWS_REGION'</span>: <span class="s1">'us-east-1'</span>, <span class="s1">'AWS_EXECUTION_ENV'</span>: <span class="s1">'AWS_Lambda_python3.8'</span>, <span class="s1">'AWS_LAMBDA_FUNCTION_NAME'</span>: <span class="s1">'LambdaEnvVarsFunction'</span>, <span class="s1">'AWS_LAMBDA_FUNCTION_MEMORY_SIZE'</span>: <span class="s1">'128'</span>, <span class="s1">'AWS_LAMBDA_FUNCTION_VERSION'</span>: <span class="s1">'$LATEST'</span>, <span class="s1">'AWS_LAMBDA_LOG_GROUP_NAME'</span>: <span class="s1">'aws/lambda/LambdaEnvVarsFunction'</span>, <span class="s1">'AWS_LAMBDA_LOG_STREAM_NAME'</span>: <span class="s1">'$LATEST'</span>, <span class="s1">'LANG'</span>: <span class="s1">'en_US.UTF-8'</span>, <span class="s1">'TZ'</span>: <span class="s1">':/etc/localtime'</span>, <span class="s1">'LAMBDA_TASK_ROOT'</span>: <span class="s1">'/var/task'</span>, <span class="s1">'LAMBDA_RUNTIME_DIR'</span>: <span class="s1">'/var/runtime'</span>, <span class="s1">'PATH'</span>: <span class="s1">'/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin'</span>, <span class="s1">'LD_LIBRARY_PATH'</span>: <span class="s1">'/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib'</span>, <span class="s1">'PYTHONPATH'</span>: <span class="s1">'/var/runtime'</span>, <span class="s1">'AWS_LAMBDA_RUNTIME_API'</span>: <span class="s1">'127.0.0.1:9001'</span><span class="o">}</span>
END RequestId: f97086cf-e8b6-4d9f-b2bc-b627ca5961e6
REPORT RequestId: f97086cf-e8b6-4d9f-b2bc-b627ca5961e6  Init Duration: 0.11 ms  Duration: 100.72 ms Billed Duration: 101 ms Memory Size: 128 MB Max Memory Used: 128 MB 
<span class="o">{</span><span class="s2">"statusCode"</span>: 200, <span class="s2">"body"</span>: <span class="s2">"{</span><span class="se">\"</span><span class="s2">_HANDLER</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">app.lambda_handler</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">AWS_REGION</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">us-east-1</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">AWS_EXECUTION_ENV</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">AWS_Lambda_python3.8</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">AWS_LAMBDA_FUNCTION_NAME</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">LambdaEnvVarsFunction</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">AWS_LAMBDA_FUNCTION_MEMORY_SIZE</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">128</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">AWS_LAMBDA_FUNCTION_VERSION</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$LATEST</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">AWS_LAMBDA_LOG_GROUP_NAME</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">aws/lambda/LambdaEnvVarsFunction</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">AWS_LAMBDA_LOG_STREAM_NAME</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$LATEST</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">LANG</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">en_US.UTF-8</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">TZ</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">:/etc/localtime</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">LAMBDA_TASK_ROOT</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">/var/task</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">LAMBDA_RUNTIME_DIR</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">/var/runtime</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">PATH</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">LD_LIBRARY_PATH</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">PYTHONPATH</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">/var/runtime</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">AWS_LAMBDA_RUNTIME_API</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">127.0.0.1:9001</span><span class="se">\"</span><span class="s2">}"</span><span class="o">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h2>
  <a name="deploy-to-aws" href="#deploy-to-aws">
  </a>
  Deploy to AWS
</h2>

<p><strong>NOTE:</strong> Before deploying you need to setup your <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html">AWS credentials</a> properly.</p>

<p>In order to deploy the Lambda function, we'll follow the steps in the <a href="https://github.com/mbacchi/lambda-env-vars#deploying-to-aws">lambda-env-vars</a> repository:</p>

<ul>
<li>Step 1: Run <code>sam build</code>
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>  <span class="nv">$ </span>sam build
  Building codeuri: /home/mbacchi/data/repos/mbacchi/lambda-env-vars7/env_vars runtime: python3.8 metadata: <span class="o">{}</span> architecture: x86_64 functions: <span class="o">[</span><span class="s1">'LambdaEnvVarsFunction'</span><span class="o">]</span>
  Running PythonPipBuilder:ResolveDependencies
  Running PythonPipBuilder:CopySource

  Build Succeeded

  Built Artifacts  : .aws-sam/build
  Built Template   : .aws-sam/build/template.yaml

  Commands you can use next
  <span class="o">=========================</span>
  <span class="o">[</span><span class="k">*</span><span class="o">]</span> Invoke Function: sam <span class="nb">local </span>invoke
  <span class="o">[</span><span class="k">*</span><span class="o">]</span> Test Function <span class="k">in </span>the Cloud: sam <span class="nb">sync</span> <span class="nt">--stack-name</span> <span class="o">{</span>stack-name<span class="o">}</span> <span class="nt">--watch</span>
  <span class="o">[</span><span class="k">*</span><span class="o">]</span> Deploy: sam deploy <span class="nt">--guided</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>Step 2: Run <code>sam package</code> (this creates an S3 bucket, which must be removed later)
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>  <span class="nv">$ </span>sam package <span class="nt">--output-template-file</span> packaged.yaml <span class="nt">--resolve-s3</span>
    Creating the required resources...
    Successfully created!

      Managed S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0
      A different default S3 bucket can be <span class="nb">set </span><span class="k">in </span>samconfig.toml
      Or by specifying <span class="nt">--s3-bucket</span> explicitly.
  Uploading to eb6c7534d67a5b044653e48f2802a548  452695 / 452695  <span class="o">(</span>100.00%<span class="o">)</span>

  Successfully packaged artifacts and wrote output template to file packaged.yaml.
  Execute the following <span class="nb">command </span>to deploy the packaged template
  sam deploy <span class="nt">--template-file</span> /home/mbacchi/data/repos/mbacchi/lambda-env-vars7/packaged.yaml <span class="nt">--stack-name</span> &lt;YOUR STACK NAME>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>Step 3: Run <code>sam deploy</code>
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>  <span class="nv">$ </span>sam deploy <span class="nt">--template-file</span> packaged.yaml <span class="nt">--region</span> us-east-2 <span class="nt">--capabilities</span> CAPABILITY_IAM <span class="nt">--stack-name</span> lambda-env-vars <span class="nt">--resolve-s3</span>

      Managed S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0
      A different default S3 bucket can be <span class="nb">set </span><span class="k">in </span>samconfig.toml
      Or by specifying <span class="nt">--s3-bucket</span> explicitly.

    Deploying with following values
    <span class="o">===============================</span>
    Stack name                   : lambda-env-vars
    Region                       : us-east-2
    Confirm changeset            : False
    Disable rollback             : False
    Deployment s3 bucket         : aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0
    Capabilities                 : <span class="o">[</span><span class="s2">"CAPABILITY_IAM"</span><span class="o">]</span>
    Parameter overrides          : <span class="o">{}</span>
    Signing Profiles             : <span class="o">{}</span>

  Initiating deployment
  <span class="o">=====================</span>
  Uploading to 77524ed205c6d82d5487433831c24c0f.template  1635 / 1635  <span class="o">(</span>100.00%<span class="o">)</span>

  Waiting <span class="k">for </span>changeset to be created..

  CloudFormation stack changeset
  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
  Operation                                                  LogicalResourceId                                          ResourceType                                               Replacement                                              
  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
  + Add                                                      LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           AWS::Lambda::Permission                                    N/A                                                      
  + Add                                                      LambdaEnvVarsFunctionRole                                  AWS::IAM::Role                                             N/A                                                      
  + Add                                                      LambdaEnvVarsFunction                                      AWS::Lambda::Function                                      N/A                                                      
  + Add                                                      LambdaLogGroup                                             AWS::Logs::LogGroup                                        N/A                                                      
  + Add                                                      ServerlessRestApiDeploymentcaa6ada684                      AWS::ApiGateway::Deployment                                N/A                                                      
  + Add                                                      ServerlessRestApiProdStage                                 AWS::ApiGateway::Stage                                     N/A                                                      
  + Add                                                      ServerlessRestApi                                          AWS::ApiGateway::RestApi                                   N/A                                                      
  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>

  Changeset created successfully. arn:aws:cloudformation:us-east-2:592431548397:changeSet/samcli-deploy1643607514/85a31faf-1358-47ff-9eeb-4428020bb482


  2022-01-30 22:38:46 - Waiting <span class="k">for </span>stack create/update to <span class="nb">complete

  </span>CloudFormation events from stack operations
  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
  ResourceStatus                                             ResourceType                                               LogicalResourceId                                          ResourceStatusReason                                     
  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
  CREATE_IN_PROGRESS                                         AWS::IAM::Role                                             LambdaEnvVarsFunctionRole                                  -                                                        
  CREATE_IN_PROGRESS                                         AWS::IAM::Role                                             LambdaEnvVarsFunctionRole                                  Resource creation Initiated                              
  CREATE_COMPLETE                                            AWS::IAM::Role                                             LambdaEnvVarsFunctionRole                                  -                                                        
  CREATE_IN_PROGRESS                                         AWS::Lambda::Function                                      LambdaEnvVarsFunction                                      -                                                        
  CREATE_IN_PROGRESS                                         AWS::Lambda::Function                                      LambdaEnvVarsFunction                                      Resource creation Initiated                              
  CREATE_COMPLETE                                            AWS::Lambda::Function                                      LambdaEnvVarsFunction                                      -                                                        
  CREATE_IN_PROGRESS                                         AWS::Logs::LogGroup                                        LambdaLogGroup                                             -                                                        
  CREATE_IN_PROGRESS                                         AWS::ApiGateway::RestApi                                   ServerlessRestApi                                          -                                                        
  CREATE_IN_PROGRESS                                         AWS::ApiGateway::RestApi                                   ServerlessRestApi                                          Resource creation Initiated                              
  CREATE_COMPLETE                                            AWS::ApiGateway::RestApi                                   ServerlessRestApi                                          -                                                        
  CREATE_IN_PROGRESS                                         AWS::Logs::LogGroup                                        LambdaLogGroup                                             Resource creation Initiated                              
  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Deployment                                ServerlessRestApiDeploymentcaa6ada684                      -                                                        
  CREATE_IN_PROGRESS                                         AWS::Lambda::Permission                                    LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           Resource creation Initiated                              
  CREATE_IN_PROGRESS                                         AWS::Lambda::Permission                                    LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           -                                                        
  CREATE_COMPLETE                                            AWS::Logs::LogGroup                                        LambdaLogGroup                                             -                                                        
  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Deployment                                ServerlessRestApiDeploymentcaa6ada684                      Resource creation Initiated                              
  CREATE_COMPLETE                                            AWS::ApiGateway::Deployment                                ServerlessRestApiDeploymentcaa6ada684                      -                                                        
  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Stage                                     ServerlessRestApiProdStage                                 -                                                        
  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Stage                                     ServerlessRestApiProdStage                                 Resource creation Initiated                              
  CREATE_COMPLETE                                            AWS::ApiGateway::Stage                                     ServerlessRestApiProdStage                                 -                                                        
  CREATE_COMPLETE                                            AWS::Lambda::Permission                                    LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           -                                                        
  CREATE_COMPLETE                                            AWS::CloudFormation::Stack                                 lambda-env-vars                                            -                                                        
  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>

  CloudFormation outputs from deployed stack
  <span class="nt">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
  Outputs                                                                                                                                                                                                                                   
  <span class="nt">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
  Key                 LambdaEnvVarsApi                                                                                                                                                                                                      
  Description         API Gateway endpoint URL <span class="k">for </span>Prod stage <span class="k">for </span>Lambda Env Vars <span class="k">function                                                                                                                                                  
  </span>Value               https://e4cusxvy7f.execute-api.us-east-2.amazonaws.com/Prod/env_vars/                                                                                                                                                 

  Key                 LambdaLogGroup                                                                                                                                                                                                        
  Description         Cloudwatch Log Group ARN                                                                                                                                                                                              
  Value               /aws/lambda/lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp                                                                                                                                                        

  Key                 LambdaEnvVarsFunctionIamRole                                                                                                                                                                                          
  Description         Implicit IAM Role created <span class="k">for </span>Lambda Env Vars <span class="k">function                                                                                                                                                                
  </span>Value               arn:aws:iam::592431548397:role/lambda-env-vars-LambdaEnvVarsFunctionRole-L05B77IT7WK0                                                                                                                                 

  Key                 LambdaEnvVarsFunction                                                                                                                                                                                                 
  Description         Lambda Env Vars Function ARN                                                                                                                                                                                          
  Value               arn:aws:lambda:us-east-2:592431548397:function:lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp                                                                                                                     
  <span class="nt">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>

  Successfully created/updated stack - lambda-env-vars <span class="k">in </span>us-east-2
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The <code>sam deploy</code> command has deployed the Lambda function to AWS and returned the API Gateway endpoint which we can use to invoke the Lambda with an API call.  We need the API Gateway URL from the above output, look for the <code>LambdaEnvVarsApi</code> key. In our example above, this is:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>https://e4cusxvy7f.execute-api.us-east-2.amazonaws.com/Prod/env_vars/
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h2>
  <a name="get-request-to-invoke-the-lambda-function" href="#get-request-to-invoke-the-lambda-function">
  </a>
  GET Request to Invoke the Lambda Function
</h2>

<p>Now that we have the API Gateway URL (also known as the endpoint,) we can use a tool like curl to perform an HTTP GET request against the endpoint. Because we defined the <code>Events</code> <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/template.yaml#L20-L25">stanza</a> with a <code>Type</code> of <code>Api</code>, and <code>Method</code> <code>get</code>, SAM has deployed an API Gateway resource to trigger our Function. (More detailed discussion on this implicit API Gateway resource <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-api.html">here</a>).</p>

<p>We will use the command <code>curl</code> to perform a <code>GET</code> request as below:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>curl <span class="nt">-X</span> GET https://e4cusxvy7f.execute-api.us-east-2.amazonaws.com/Prod/env_vars/
<span class="o">{</span><span class="s2">"_HANDLER"</span>: <span class="s2">"app.lambda_handler"</span>, <span class="s2">"AWS_REGION"</span>: <span class="s2">"us-east-2"</span>, <span class="s2">"AWS_EXECUTION_ENV"</span>: <span class="s2">"AWS_Lambda_python3.8"</span>, <span class="s2">"AWS_LAMBDA_FUNCTION_NAME"</span>: <span class="s2">"lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp"</span>, <span class="s2">"AWS_LAMBDA_FUNCTION_MEMORY_SIZE"</span>: <span class="s2">"128"</span>, <span class="s2">"AWS_LAMBDA_FUNCTION_VERSION"</span>: <span class="s2">"</span><span class="nv">$LATEST</span><span class="s2">"</span>, <span class="s2">"AWS_LAMBDA_LOG_GROUP_NAME"</span>: <span class="s2">"/aws/lambda/lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp"</span>, <span class="s2">"AWS_LAMBDA_LOG_STREAM_NAME"</span>: <span class="s2">"2022/01/31/[</span><span class="nv">$LATEST</span><span class="s2">]c2b9b9c953154c8daa7c9b2c0637b70e"</span>, <span class="s2">"LANG"</span>: <span class="s2">"en_US.UTF-8"</span>, <span class="s2">"TZ"</span>: <span class="s2">":UTC"</span>, <span class="s2">"LAMBDA_TASK_ROOT"</span>: <span class="s2">"/var/task"</span>, <span class="s2">"LAMBDA_RUNTIME_DIR"</span>: <span class="s2">"/var/runtime"</span>, <span class="s2">"PATH"</span>: <span class="s2">"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin"</span>, <span class="s2">"LD_LIBRARY_PATH"</span>: <span class="s2">"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib"</span>, <span class="s2">"PYTHONPATH"</span>: <span class="s2">"/var/runtime"</span>, <span class="s2">"AWS_LAMBDA_RUNTIME_API"</span>: <span class="s2">"127.0.0.1:9001"</span><span class="o">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>On line 2, we can see the response JSON, which is what the <br>
Lambda function returned to us via the API Gateway. And we see all the environment variables that we had expected, just as in the <code>sam local invoke</code> command earlier.</p>

<p>But how can we observe the output of the <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/env_vars/app.py#L50">print statement at line 50</a>?</p>

<p>To do that we look at the CloudWatch log output. Browse to your AWS console, and search for the Cloudwatch log group name that was in the <code>Outputs</code> section of the <code>sam deploy</code> command output.</p>

<p>In our case the LambdaLogGroup name was: <code>/aws/lambda/lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp</code></p>

<p>When I browse there in CloudWatch, I see the "Hello there" line in the output, which was sent to CloudWatch because we performed a <code>print</code> to standard output within the Lambda function code:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--BTssM0LO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://bacchi.org/images/cloudwatch-log-output.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--BTssM0LO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://bacchi.org/images/cloudwatch-log-output.png" alt="CloudWatch Log Output" loading="lazy" width="880" height="322"></a></p>

<h2>
  <a name="what-just-occurred-whats-next" href="#what-just-occurred-whats-next">
  </a>
  What Just Occurred? What's Next?
</h2>

<p>Congratulations, you just deployed and invoked your first Lambda function.</p>

<p>Take some time to examine the output of the function in CloudWatch Logs, as well as what was returned during your <code>curl</code> command.</p>

<p>Challenge 1: If you've heard of the <a href="https://www.postman.com/">Postman</a> tool, you can also call the API endpoint from there. Give it a shot.</p>

<p>Challenge 2: You can display the HTTP headers when calling the API endpoint. How would you see the headers with the <code>curl</code> command? How would you see them with Postman?</p>

<p>Challenge 3: Read more about Lambda functions, SAM, Serverless Framework, CDK.  Build your own Lambda and deploy it. Let me know how it goes on Twitter <a href="https://twitter.com/fshwsprr">@fshwsprr</a>.</p>

<h2>
  <a name="clean-up-aws-resources" href="#clean-up-aws-resources">
  </a>
  Clean Up AWS Resources
</h2>

<p>When you are done playing around with this Lambda function, run these commands to remove your resources:</p>

<ol>
<li><code>aws cloudformation delete-stack --stack-name lambda-env-vars --region us-east-2</code></li>
<li>
<code>aws s3 rb s3://aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0 --force</code> <strong>NOTE:</strong> This requires you to look at the output of your <code>sam package</code> or <code>sam deploy</code> command above to get the name of the S3 bucket to remove!</li>
<li>Finally, you can deactivate your python virtual environment with the command: <code>deactivate</code>
</li>
</ol>

<h2>
  <a name="summary" href="#summary">
  </a>
  Summary
</h2>

<p>If you've read this far, the important takeaways about AWS Lambda in my opinion, are:</p>

<ul>
<li>The concept that Lambda functions are only one part of the cloud serverless landscape.</li>
<li>Understanding invocation options and how your single function gets called by AWS.
</li>
<li>The fact that you can locally invoke the function in SAM Local before you deploy to AWS.</li>
<li>Anything you print inside your function will be written to CloudWatch Logs (assuming you created a Log Group for your Lambda.)</li>
</ul>

<p>Thanks for reading! Enjoy your serverless and Lambda journey!</p>

<p>Cover photo by <a href="https://unsplash.com/@chuklanov">Avel Chuklanov</a> on <a href="https://unsplash.com/s/photos/learn">Unsplash</a></p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/mbacchi/a-gentle-introduction-to-aws-lambda-20eb" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(a,n,e,s,t){return e.type_of="article",e.id=975679,e.title="A Gentle Introduction to AWS Lambda",e.description="You've probably heard of AWS Lambda and serverless by now. But what is Lambda all about? The short...",e.readable_publish_date="Feb 2",e.slug="a-gentle-introduction-to-aws-lambda-20eb",e.path="/aws-builders/a-gentle-introduction-to-aws-lambda-20eb",e.url="https://dev.to/aws-builders/a-gentle-introduction-to-aws-lambda-20eb",e.comments_count=0,e.public_reactions_count=33,e.collection_id=a,e.published_timestamp=n,e.positive_reactions_count=33,e.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--0OwqDgaF--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://bacchi.org/images/computer-coffee.jpg",e.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--L262dgZ3--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://bacchi.org/images/computer-coffee.jpg",e.canonical_url="https://bacchi.org/posts/gentle-intro-lambda",e.created_at="2022-02-02T02:36:35Z",e.edited_at=a,e.crossposted_at=a,e.published_at=n,e.last_comment_at=n,e.reading_time_minutes=14,e.tag_list="aws, lambda, serverless, python",e.tags=["aws","lambda","serverless","python"],e.body_html='<p>You\'ve probably heard of AWS Lambda and serverless by now. But what is Lambda all about? The short definition of AWS Lambda is a "Functions as a Service" (FaaS) technology. The longer and more complicated answer is that Lambda is a lightweight runtime that requires no infrastructure to be defined by the developer.</p>\n\n<p>FaaS allows developers to build software features quickly with less emphasis on the question of <em>where</em> and <em>how</em> they run. This allows for more focus on the business logic that users interact with. Functions as a Service is the most recent innovation in the long line of virtualization technologies. Compute virtualization started with physical servers, then moved to virtual machines (VMs), which grew into Infrastructure as a Service (IaaS). Platforms as a Service came next with companies like Heroku allowing developers to deploy without caring about infrastructure specifics. Now we\'re arriving at FaaS, which promises to abstract all these details away.  <a href="https://dashbird.io/blog/origin-of-serverless/">Here</a> are a <a href="https://joshfechter.com/iaas-paas-saas/">couple</a> good descriptions of these origins and where we are as an industry today.</p>\n\n<h2>\n  <a name="lambda-vs-serverless-terminology" href="#lambda-vs-serverless-terminology">\n  </a>\n  Lambda vs. Serverless Terminology\n</h2>\n\n<p>The terms serverless and AWS Lambda are often used interchangeably, but they aren\'t exactly the same thing. Serverless refers to a collection of tools that require no infrastructure configurations from the developer, including databases, queues, functions and gateways as a service. AWS Lambda is only the FaaS component in this list. That means there are many more products such as API gateways, message queueing systems, notification tools, and serverless databases that fill out the serverless landscape. In this blog post we\'ll only work with a couple of these, namely AWS Lambda and AWS API Gateway for our demonstration.</p>\n\n<h2>\n  <a name="faas-platforms" href="#faas-platforms">\n  </a>\n  FaaS Platforms\n</h2>\n\n<p>There are many <a href="https://fauna.com/blog/comparison-faas-providers">FaaS providers</a> in the industry.  From the big players like Google, IBM, and AWS to the smaller ones like the open source OpenWhisk and OpenFaaS, they all provide similar functionality (generally) with different developer experiences.</p>\n\n<p>There are also Edge computing FaaS providers, which instead of executing the code in one central data center, run the code in a data center nearest the user, known as the "Edge". The players in this area of serverless technology are companies like Cloudflare, Lambda@Edge (AWS), and Fastly.</p>\n\n<h2>\n  <a name="aws-lambda-in-plan-english" href="#aws-lambda-in-plan-english">\n  </a>\n  AWS Lambda in Plan English\n</h2>\n\n<p>After reading the above definition of serverless, Functions as a Service, and AWS Lambda, your understanding might still be cloudy (no pun intended). I\'ll attempt to explain it in more simple terms.</p>\n\n<p>The description on the <a href="https://docs.aws.amazon.com/lambda/latest/dg/welcome.html">AWS documentation website</a> says "Lambda is a compute service that lets you run code without provisioning or managing servers." The essence of Lambda is that AWS built all the scaffolding to allow you and I to send them a single piece of code, which they will run for us.</p>\n\n<p>We don\'t need to build servers or container images in order to run this single piece of code. All we have to think about is writing code, and then a small SAM template file which defines the requirements of the deployment, and finally shipping it.</p>\n\n<h3>\n  <a name="is-it-really-a-single-function" href="#is-it-really-a-single-function">\n  </a>\n  Is it Really a Single Function?\n</h3>\n\n<p>In order to wrap your brain around this idea of functions as a service, think of a single method or function in a small program. The function is called by another function, and may return a result.</p>\n\n<p>Below you see a simple Python program in which there is a parent function (<code>main()</code>) calling a child function (<code>childfunction()</code>).<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight python"><code><span class="k">def</span> <span class="nf">childfunction</span><span class="p">(</span><span class="n">inputstring</span><span class="p">):</span>\n    <span class="k">if</span> <span class="n">inputstring</span> <span class="o">==</span> <span class="s">"hello"</span><span class="p">:</span>\n        <span class="k">return</span> <span class="s">"world"</span>\n    <span class="k">return</span> <span class="s">"hi"</span>\n\n\n<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>\n    <span class="n">value</span> <span class="o">=</span> <span class="n">childfunction</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>\n    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"value: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>\n\n\n<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>\n    <span class="n">main</span><span class="p">()</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The output of this program looks like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code><span class="nv">$ </span>python hello.py\nvalue: world\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>At it\'s simplest form, AWS Lambda can be thought of as a single child function being called by a parent function. AWS owns the parent function, which executes your function (the child function) in it\'s own virtual environment.</p>\n\n<p>Your objective during the rest of this blog post is to write, deploy and execute a single Lambda function.</p>\n\n<h2>\n  <a name="lets-write-one-bite-sized-function" href="#lets-write-one-bite-sized-function">\n  </a>\n  Let\'s Write One Bite Sized Function\n</h2>\n\n<p>For this example, we\'ll write a small function that does nothing particularly important, but demonstrates the mechanics of running a function in AWS Lambda.  You are probably familiar with shell environment variables. In your terminal you can print out the environment variables defined in your session, or even create new environment variables.</p>\n\n<p>The below terminal command prints out an environment variable showing the user name that you are logged in as:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$USER</span>\nmbacchi\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<h3>\n  <a name="what-will-the-function-do" href="#what-will-the-function-do">\n  </a>\n  What Will the Function Do?\n</h3>\n\n<p>The function we\'ll deploy will print out the default <a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html#configuration-envvars-runtime">runtime environment variables</a> in the AWS Lambda execution environment.</p>\n\n<p>Similar to the terminal session above, our Lambda function can access the default environment variables such as <code>AWS_LAMBDA_FUNCTION_NAME</code>, <code>AWS_LAMBDA_LOG_GROUP_NAME</code>, or <code>TZ</code>. But how do we see the output of <code>print</code> statements in a Lambda? Anything that gets printed to STDOUT <a href="https://docs.aws.amazon.com/lambda/latest/dg/python-logging.html">will be logged to CloudWatch Logs</a> using the log group name of the function.</p>\n\n<h2>\n  <a name="how-does-lambda-work" href="#how-does-lambda-work">\n  </a>\n  How Does Lambda Work?\n</h2>\n\n<p>The concepts that you\'ll need to understand are described in the AWS <a href="https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-concepts.html">Lambda documentation</a>.</p>\n\n<p>Here are some of the most important details you\'ll need to write your Lambda functions:</p>\n\n<ul>\n<li>\n<strong>Invocation:</strong> The function is <a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-invocation.html">invoked</a> by one of the triggers that AWS provides. It can also be triggered by cron like <a href="https://docs.aws.amazon.com/lambda/latest/dg/services-cloudwatchevents-expressions.html">scheduling events</a>.</li>\n<li>\n<strong>Entrypoint:</strong> Your Lambda function needs to implement a <a href="https://docs.aws.amazon.com/lambda/latest/dg/python-handler.html">handler</a> which is the method (or function) that gets called by AWS when triggered.</li>\n<li>\n<strong>Environment:</strong> The handler is passed an <a href="https://docs.aws.amazon.com/lambda/latest/dg/python-handler.html#python-handler-how">event object and context object</a> from AWS that provides your function both data to be processed and context (information) about how it was called and other clues that you can use in your code.</li>\n<li>\n<strong>Response:</strong> In certain cases you will want to syncronously <a href="https://docs.aws.amazon.com/lambda/latest/dg/python-handler.html#python-handler-return">return a value</a> from your function, but that is optional. If you are writing an API backend you will return a value through API Gateway. If instead you are performing some scheduled data processing you may not return a value.</li>\n</ul>\n\n<h2>\n  <a name="background-on-associated-serverless-components" href="#background-on-associated-serverless-components">\n  </a>\n  Background on Associated Serverless Components\n</h2>\n\n<p>We mentioned earlier how serverless isn\'t just AWS Lambda, and in this project we\'ll use API Gateway and CloudWatch Logs, but only to enable us to show how our Lambda function executes.</p>\n\n<p>AWS <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html">API Gateway</a> is, as the name suggests, an API gateway product. But it also allows for more than just API calls. For example it enables generic HTTP/HTTPS traffic, REST APIs and Websocket APIs. You can host a standard web server with API Gateway and Lambda, you aren\'t limited to just APIs with API Gateway.</p>\n\n<p><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html">CloudWatch Logs</a> is a logging product from AWS that allows all other AWS products to log their activity to a central location. In our example we\'ll be looking at the output of our Lambda function to see the environment variables available in the Lambda itself during runtime.</p>\n\n<p>We\'re not going to cover these in any more detail because they\'re not the main focus of this post.</p>\n\n<h2>\n  <a name="sample-lambda-function" href="#sample-lambda-function">\n  </a>\n  Sample Lambda Function\n</h2>\n\n<p>For this example deployment, we\'ll use <a href="https://github.com/mbacchi/lambda-env-vars">a GitHub repository that has our AWS Lambda function</a> defined. The Lambda function in this repo was written with the intention of being used for demonstration purposes, and as a simple function that can be deployed when testing out CI/CD or the many serverless deployment tools available today (such as <a href="https://github.com/serverless/serverless">Serverless Framework</a>, <a href="https://github.com/aws/aws-cdk">Cloud Development Kit (CDK)</a> etc.)</p>\n\n<h2>\n  <a name="deploying-a-lambda-function-with-aws-sam" href="#deploying-a-lambda-function-with-aws-sam">\n  </a>\n  Deploying a Lambda Function with AWS SAM\n</h2>\n\n<p>AWS SAM is the <a href="https://aws.amazon.com/serverless/sam/">Serverless Application Model</a>, which allows you to <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification-template-anatomy.html">write a template</a> describing the Lambda function, and any related resources you need to run your Lambda. The SAM template uses the YAML markup language and is based on AWS Cloudformation. After reading the template, SAM performs the deployment for you, and you can watch Cloudformation events to identify what the outcome was.</p>\n\n<p>We are going to use the <a href="https://github.com/mbacchi/lambda-env-vars/blob/master/template.yaml">template</a> in the above repository to deploy the function. I won\'t go into detail breaking down all of the items in the template for now. That information can be found in the documentation above or in other blogs. But I do want to highlight the two resources used here, the <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/template.yaml#L14">LambdaEnvVarsFunction</a> which is of the type <code>AWS::Serverless::Function</code> and the <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/template.yaml#L26">LambdaLogGroup</a>, which is the definition of our <code>AWS::Logs::LogGroup</code> CloudWatch log group, where our Lambda output will be collected.</p>\n\n<h2>\n  <a name="install-sam-cli" href="#install-sam-cli">\n  </a>\n  Install SAM CLI\n</h2>\n\n<p>You\'ll need to install a few components before running SAM. I would recommend running this in a Python virtual environment (venv), and I will provide basic steps here to set that up.</p>\n\n<p>From your terminal run these commands (this is on a Linux system):</p>\n\n<ul>\n<li>Step 1: Make sure you have Python 3.8 (you may have to install this first, on Fedora Linux the command would be <code>sudo dnf install python3.8</code>)\n</li>\n</ul>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>  <span class="nv">$ </span>which python3.8\n  /usr/bin/python3.8\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>Step 2: Create a Python 3.8 virtual environment\n</li>\n</ul>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>  <span class="nv">$ </span>python3.8 <span class="nt">-m</span> venv venv38\n  <span class="nv">$ </span><span class="nb">ls </span>venv38\n  bin  include  lib  lib64  pyvenv.cfg\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>Step 3: Activate the virtual environment\n</li>\n</ul>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>  <span class="nv">$ </span><span class="nb">.</span> venv38/bin/activate\n  <span class="nv">$ </span>which python\n  ~/FAKE_PATH/lambda-env-vars7/venv38/bin/python\n  <span class="nv">$ </span>which pip\n  ~/FAKE_PATH/lambda-env-vars7/venv38/bin/pip\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>Step 4: Install SAM CLI <strong>NOTE: This installs Docker in the Python virtual environment</strong>\n</li>\n</ul>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>  <span class="nv">$ </span>pip <span class="nb">install </span>aws-sam-cli\n  Collecting aws-sam-cli\n    Using cached aws_sam_cli-1.37.0-py3-none-any.whl <span class="o">(</span>5.0 MB<span class="o">)</span>\n  Collecting <span class="nv">boto3</span><span class="o">==</span>1.<span class="k">*</span>,&gt;<span class="o">=</span>1.18.32\n    Using cached boto3-1.20.46-py3-none-any.whl <span class="o">(</span>131 kB<span class="o">)</span>\n  ...\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now you can move on to the next step, where we run the Lambda function locally.</p>\n\n<h2>\n  <a name="running-your-lambda-function-with-sam-local" href="#running-your-lambda-function-with-sam-local">\n  </a>\n  Running Your Lambda Function with SAM Local\n</h2>\n\n<p>Before we deploy to AWS itself, we want to test our code by invoking the Lambda function locally. What is this magic you ask? SAM provides a utility command called <code>sam local invoke</code> which allows your function to run locally in a Docker container to test that it runs as expected before deploying to AWS.</p>\n\n<p><strong>NOTE:</strong> We assume you haven\'t left the terminal session in step 4 above. If you have, activate your Python virtual environment as in step 3 above.</p>\n\n<p>Run <code>sam local invoke</code> as <a href="https://github.com/mbacchi/lambda-env-vars#testing-using-sam-local">described in the Git repository</a> (this uses <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/events/event.json">test events</a> supplied with Lambda function in the repository)<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code><span class="nv">$ </span>sam <span class="nb">local </span>invoke LambdaEnvVarsFunction <span class="nt">--event</span> events/event.json\nInvoking app.lambda_handler <span class="o">(</span>python3.8<span class="o">)</span>\nSkip pulling image and use <span class="nb">local </span>one: public.ecr.aws/sam/emulation-python3.8:rapid-1.37.0-x86_64.\n\nMounting /home/mbacchi/data/repos/mbacchi/lambda-env-vars7/.aws-sam/build/LambdaEnvVarsFunction as /var/task:ro,delegated inside runtime container\nSTART RequestId: f97086cf-e8b6-4d9f-b2bc-b627ca5961e6 Version: <span class="nv">$LATEST</span>\nHello there this is the body: <span class="o">{</span><span class="s1">\'_HANDLER\'</span>: <span class="s1">\'app.lambda_handler\'</span>, <span class="s1">\'AWS_REGION\'</span>: <span class="s1">\'us-east-1\'</span>, <span class="s1">\'AWS_EXECUTION_ENV\'</span>: <span class="s1">\'AWS_Lambda_python3.8\'</span>, <span class="s1">\'AWS_LAMBDA_FUNCTION_NAME\'</span>: <span class="s1">\'LambdaEnvVarsFunction\'</span>, <span class="s1">\'AWS_LAMBDA_FUNCTION_MEMORY_SIZE\'</span>: <span class="s1">\'128\'</span>, <span class="s1">\'AWS_LAMBDA_FUNCTION_VERSION\'</span>: <span class="s1">\'$LATEST\'</span>, <span class="s1">\'AWS_LAMBDA_LOG_GROUP_NAME\'</span>: <span class="s1">\'aws/lambda/LambdaEnvVarsFunction\'</span>, <span class="s1">\'AWS_LAMBDA_LOG_STREAM_NAME\'</span>: <span class="s1">\'$LATEST\'</span>, <span class="s1">\'LANG\'</span>: <span class="s1">\'en_US.UTF-8\'</span>, <span class="s1">\'TZ\'</span>: <span class="s1">\':/etc/localtime\'</span>, <span class="s1">\'LAMBDA_TASK_ROOT\'</span>: <span class="s1">\'/var/task\'</span>, <span class="s1">\'LAMBDA_RUNTIME_DIR\'</span>: <span class="s1">\'/var/runtime\'</span>, <span class="s1">\'PATH\'</span>: <span class="s1">\'/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\'</span>, <span class="s1">\'LD_LIBRARY_PATH\'</span>: <span class="s1">\'/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\'</span>, <span class="s1">\'PYTHONPATH\'</span>: <span class="s1">\'/var/runtime\'</span>, <span class="s1">\'AWS_LAMBDA_RUNTIME_API\'</span>: <span class="s1">\'127.0.0.1:9001\'</span><span class="o">}</span>\nEND RequestId: f97086cf-e8b6-4d9f-b2bc-b627ca5961e6\nREPORT RequestId: f97086cf-e8b6-4d9f-b2bc-b627ca5961e6  Init Duration: 0.11 ms  Duration: 100.72 ms Billed Duration: 101 ms Memory Size: 128 MB Max Memory Used: 128 MB \n<span class="o">{</span><span class="s2">"statusCode"</span>: 200, <span class="s2">"body"</span>: <span class="s2">"{</span><span class="se">\\"</span><span class="s2">_HANDLER</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">app.lambda_handler</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">AWS_REGION</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">us-east-1</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">AWS_EXECUTION_ENV</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">AWS_Lambda_python3.8</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">AWS_LAMBDA_FUNCTION_NAME</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">LambdaEnvVarsFunction</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">AWS_LAMBDA_FUNCTION_MEMORY_SIZE</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">128</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">AWS_LAMBDA_FUNCTION_VERSION</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="nv">$LATEST</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">AWS_LAMBDA_LOG_GROUP_NAME</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">aws/lambda/LambdaEnvVarsFunction</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">AWS_LAMBDA_LOG_STREAM_NAME</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="nv">$LATEST</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">LANG</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">en_US.UTF-8</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">TZ</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">:/etc/localtime</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">LAMBDA_TASK_ROOT</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">/var/task</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">LAMBDA_RUNTIME_DIR</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">/var/runtime</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">PATH</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">LD_LIBRARY_PATH</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">PYTHONPATH</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">/var/runtime</span><span class="se">\\"</span><span class="s2">, </span><span class="se">\\"</span><span class="s2">AWS_LAMBDA_RUNTIME_API</span><span class="se">\\"</span><span class="s2">: </span><span class="se">\\"</span><span class="s2">127.0.0.1:9001</span><span class="se">\\"</span><span class="s2">}"</span><span class="o">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<h2>\n  <a name="deploy-to-aws" href="#deploy-to-aws">\n  </a>\n  Deploy to AWS\n</h2>\n\n<p><strong>NOTE:</strong> Before deploying you need to setup your <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html">AWS credentials</a> properly.</p>\n\n<p>In order to deploy the Lambda function, we\'ll follow the steps in the <a href="https://github.com/mbacchi/lambda-env-vars#deploying-to-aws">lambda-env-vars</a> repository:</p>\n\n<ul>\n<li>Step 1: Run <code>sam build</code>\n</li>\n</ul>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>  <span class="nv">$ </span>sam build\n  Building codeuri: /home/mbacchi/data/repos/mbacchi/lambda-env-vars7/env_vars runtime: python3.8 metadata: <span class="o">{}</span> architecture: x86_64 functions: <span class="o">[</span><span class="s1">\'LambdaEnvVarsFunction\'</span><span class="o">]</span>\n  Running PythonPipBuilder:ResolveDependencies\n  Running PythonPipBuilder:CopySource\n\n  Build Succeeded\n\n  Built Artifacts  : .aws-sam/build\n  Built Template   : .aws-sam/build/template.yaml\n\n  Commands you can use next\n  <span class="o">=========================</span>\n  <span class="o">[</span><span class="k">*</span><span class="o">]</span> Invoke Function: sam <span class="nb">local </span>invoke\n  <span class="o">[</span><span class="k">*</span><span class="o">]</span> Test Function <span class="k">in </span>the Cloud: sam <span class="nb">sync</span> <span class="nt">--stack-name</span> <span class="o">{</span>stack-name<span class="o">}</span> <span class="nt">--watch</span>\n  <span class="o">[</span><span class="k">*</span><span class="o">]</span> Deploy: sam deploy <span class="nt">--guided</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>Step 2: Run <code>sam package</code> (this creates an S3 bucket, which must be removed later)\n</li>\n</ul>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>  <span class="nv">$ </span>sam package <span class="nt">--output-template-file</span> packaged.yaml <span class="nt">--resolve-s3</span>\n    Creating the required resources...\n    Successfully created!\n\n      Managed S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0\n      A different default S3 bucket can be <span class="nb">set </span><span class="k">in </span>samconfig.toml\n      Or by specifying <span class="nt">--s3-bucket</span> explicitly.\n  Uploading to eb6c7534d67a5b044653e48f2802a548  452695 / 452695  <span class="o">(</span>100.00%<span class="o">)</span>\n\n  Successfully packaged artifacts and wrote output template to file packaged.yaml.\n  Execute the following <span class="nb">command </span>to deploy the packaged template\n  sam deploy <span class="nt">--template-file</span> /home/mbacchi/data/repos/mbacchi/lambda-env-vars7/packaged.yaml <span class="nt">--stack-name</span> &lt;YOUR STACK NAME&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>Step 3: Run <code>sam deploy</code>\n</li>\n</ul>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>  <span class="nv">$ </span>sam deploy <span class="nt">--template-file</span> packaged.yaml <span class="nt">--region</span> us-east-2 <span class="nt">--capabilities</span> CAPABILITY_IAM <span class="nt">--stack-name</span> lambda-env-vars <span class="nt">--resolve-s3</span>\n\n      Managed S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0\n      A different default S3 bucket can be <span class="nb">set </span><span class="k">in </span>samconfig.toml\n      Or by specifying <span class="nt">--s3-bucket</span> explicitly.\n\n    Deploying with following values\n    <span class="o">===============================</span>\n    Stack name                   : lambda-env-vars\n    Region                       : us-east-2\n    Confirm changeset            : False\n    Disable rollback             : False\n    Deployment s3 bucket         : aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0\n    Capabilities                 : <span class="o">[</span><span class="s2">"CAPABILITY_IAM"</span><span class="o">]</span>\n    Parameter overrides          : <span class="o">{}</span>\n    Signing Profiles             : <span class="o">{}</span>\n\n  Initiating deployment\n  <span class="o">=====================</span>\n  Uploading to 77524ed205c6d82d5487433831c24c0f.template  1635 / 1635  <span class="o">(</span>100.00%<span class="o">)</span>\n\n  Waiting <span class="k">for </span>changeset to be created..\n\n  CloudFormation stack changeset\n  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n  Operation                                                  LogicalResourceId                                          ResourceType                                               Replacement                                              \n  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n  + Add                                                      LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           AWS::Lambda::Permission                                    N/A                                                      \n  + Add                                                      LambdaEnvVarsFunctionRole                                  AWS::IAM::Role                                             N/A                                                      \n  + Add                                                      LambdaEnvVarsFunction                                      AWS::Lambda::Function                                      N/A                                                      \n  + Add                                                      LambdaLogGroup                                             AWS::Logs::LogGroup                                        N/A                                                      \n  + Add                                                      ServerlessRestApiDeploymentcaa6ada684                      AWS::ApiGateway::Deployment                                N/A                                                      \n  + Add                                                      ServerlessRestApiProdStage                                 AWS::ApiGateway::Stage                                     N/A                                                      \n  + Add                                                      ServerlessRestApi                                          AWS::ApiGateway::RestApi                                   N/A                                                      \n  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n\n  Changeset created successfully. arn:aws:cloudformation:us-east-2:592431548397:changeSet/samcli-deploy1643607514/85a31faf-1358-47ff-9eeb-4428020bb482\n\n\n  2022-01-30 22:38:46 - Waiting <span class="k">for </span>stack create/update to <span class="nb">complete\n\n  </span>CloudFormation events from stack operations\n  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n  ResourceStatus                                             ResourceType                                               LogicalResourceId                                          ResourceStatusReason                                     \n  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n  CREATE_IN_PROGRESS                                         AWS::IAM::Role                                             LambdaEnvVarsFunctionRole                                  -                                                        \n  CREATE_IN_PROGRESS                                         AWS::IAM::Role                                             LambdaEnvVarsFunctionRole                                  Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::IAM::Role                                             LambdaEnvVarsFunctionRole                                  -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Lambda::Function                                      LambdaEnvVarsFunction                                      -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Lambda::Function                                      LambdaEnvVarsFunction                                      Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::Lambda::Function                                      LambdaEnvVarsFunction                                      -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Logs::LogGroup                                        LambdaLogGroup                                             -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::RestApi                                   ServerlessRestApi                                          -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::RestApi                                   ServerlessRestApi                                          Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::ApiGateway::RestApi                                   ServerlessRestApi                                          -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Logs::LogGroup                                        LambdaLogGroup                                             Resource creation Initiated                              \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Deployment                                ServerlessRestApiDeploymentcaa6ada684                      -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Lambda::Permission                                    LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           Resource creation Initiated                              \n  CREATE_IN_PROGRESS                                         AWS::Lambda::Permission                                    LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           -                                                        \n  CREATE_COMPLETE                                            AWS::Logs::LogGroup                                        LambdaLogGroup                                             -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Deployment                                ServerlessRestApiDeploymentcaa6ada684                      Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::ApiGateway::Deployment                                ServerlessRestApiDeploymentcaa6ada684                      -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Stage                                     ServerlessRestApiProdStage                                 -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Stage                                     ServerlessRestApiProdStage                                 Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::ApiGateway::Stage                                     ServerlessRestApiProdStage                                 -                                                        \n  CREATE_COMPLETE                                            AWS::Lambda::Permission                                    LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           -                                                        \n  CREATE_COMPLETE                                            AWS::CloudFormation::Stack                                 lambda-env-vars                                            -                                                        \n  <span class="nt">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n\n  CloudFormation outputs from deployed stack\n  <span class="nt">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n  Outputs                                                                                                                                                                                                                                   \n  <span class="nt">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n  Key                 LambdaEnvVarsApi                                                                                                                                                                                                      \n  Description         API Gateway endpoint URL <span class="k">for </span>Prod stage <span class="k">for </span>Lambda Env Vars <span class="k">function                                                                                                                                                  \n  </span>Value               https://e4cusxvy7f.execute-api.us-east-2.amazonaws.com/Prod/env_vars/                                                                                                                                                 \n\n  Key                 LambdaLogGroup                                                                                                                                                                                                        \n  Description         Cloudwatch Log Group ARN                                                                                                                                                                                              \n  Value               /aws/lambda/lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp                                                                                                                                                        \n\n  Key                 LambdaEnvVarsFunctionIamRole                                                                                                                                                                                          \n  Description         Implicit IAM Role created <span class="k">for </span>Lambda Env Vars <span class="k">function                                                                                                                                                                \n  </span>Value               arn:aws:iam::592431548397:role/lambda-env-vars-LambdaEnvVarsFunctionRole-L05B77IT7WK0                                                                                                                                 \n\n  Key                 LambdaEnvVarsFunction                                                                                                                                                                                                 \n  Description         Lambda Env Vars Function ARN                                                                                                                                                                                          \n  Value               arn:aws:lambda:us-east-2:592431548397:function:lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp                                                                                                                     \n  <span class="nt">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n\n  Successfully created/updated stack - lambda-env-vars <span class="k">in </span>us-east-2\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The <code>sam deploy</code> command has deployed the Lambda function to AWS and returned the API Gateway endpoint which we can use to invoke the Lambda with an API call.  We need the API Gateway URL from the above output, look for the <code>LambdaEnvVarsApi</code> key. In our example above, this is:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>https://e4cusxvy7f.execute-api.us-east-2.amazonaws.com/Prod/env_vars/\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<h2>\n  <a name="get-request-to-invoke-the-lambda-function" href="#get-request-to-invoke-the-lambda-function">\n  </a>\n  GET Request to Invoke the Lambda Function\n</h2>\n\n<p>Now that we have the API Gateway URL (also known as the endpoint,) we can use a tool like curl to perform an HTTP GET request against the endpoint. Because we defined the <code>Events</code> <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/template.yaml#L20-L25">stanza</a> with a <code>Type</code> of <code>Api</code>, and <code>Method</code> <code>get</code>, SAM has deployed an API Gateway resource to trigger our Function. (More detailed discussion on this implicit API Gateway resource <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-api.html">here</a>).</p>\n\n<p>We will use the command <code>curl</code> to perform a <code>GET</code> request as below:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code><span class="nv">$ </span>curl <span class="nt">-X</span> GET https://e4cusxvy7f.execute-api.us-east-2.amazonaws.com/Prod/env_vars/\n<span class="o">{</span><span class="s2">"_HANDLER"</span>: <span class="s2">"app.lambda_handler"</span>, <span class="s2">"AWS_REGION"</span>: <span class="s2">"us-east-2"</span>, <span class="s2">"AWS_EXECUTION_ENV"</span>: <span class="s2">"AWS_Lambda_python3.8"</span>, <span class="s2">"AWS_LAMBDA_FUNCTION_NAME"</span>: <span class="s2">"lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp"</span>, <span class="s2">"AWS_LAMBDA_FUNCTION_MEMORY_SIZE"</span>: <span class="s2">"128"</span>, <span class="s2">"AWS_LAMBDA_FUNCTION_VERSION"</span>: <span class="s2">"</span><span class="nv">$LATEST</span><span class="s2">"</span>, <span class="s2">"AWS_LAMBDA_LOG_GROUP_NAME"</span>: <span class="s2">"/aws/lambda/lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp"</span>, <span class="s2">"AWS_LAMBDA_LOG_STREAM_NAME"</span>: <span class="s2">"2022/01/31/[</span><span class="nv">$LATEST</span><span class="s2">]c2b9b9c953154c8daa7c9b2c0637b70e"</span>, <span class="s2">"LANG"</span>: <span class="s2">"en_US.UTF-8"</span>, <span class="s2">"TZ"</span>: <span class="s2">":UTC"</span>, <span class="s2">"LAMBDA_TASK_ROOT"</span>: <span class="s2">"/var/task"</span>, <span class="s2">"LAMBDA_RUNTIME_DIR"</span>: <span class="s2">"/var/runtime"</span>, <span class="s2">"PATH"</span>: <span class="s2">"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin"</span>, <span class="s2">"LD_LIBRARY_PATH"</span>: <span class="s2">"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib"</span>, <span class="s2">"PYTHONPATH"</span>: <span class="s2">"/var/runtime"</span>, <span class="s2">"AWS_LAMBDA_RUNTIME_API"</span>: <span class="s2">"127.0.0.1:9001"</span><span class="o">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>On line 2, we can see the response JSON, which is what the <br>\nLambda function returned to us via the API Gateway. And we see all the environment variables that we had expected, just as in the <code>sam local invoke</code> command earlier.</p>\n\n<p>But how can we observe the output of the <a href="https://github.com/mbacchi/lambda-env-vars/blob/main/env_vars/app.py#L50">print statement at line 50</a>?</p>\n\n<p>To do that we look at the CloudWatch log output. Browse to your AWS console, and search for the Cloudwatch log group name that was in the <code>Outputs</code> section of the <code>sam deploy</code> command output.</p>\n\n<p>In our case the LambdaLogGroup name was: <code>/aws/lambda/lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp</code></p>\n\n<p>When I browse there in CloudWatch, I see the "Hello there" line in the output, which was sent to CloudWatch because we performed a <code>print</code> to standard output within the Lambda function code:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--BTssM0LO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://bacchi.org/images/cloudwatch-log-output.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--BTssM0LO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://bacchi.org/images/cloudwatch-log-output.png" alt="CloudWatch Log Output" loading="lazy" width="880" height="322"></a></p>\n\n<h2>\n  <a name="what-just-occurred-whats-next" href="#what-just-occurred-whats-next">\n  </a>\n  What Just Occurred? What\'s Next?\n</h2>\n\n<p>Congratulations, you just deployed and invoked your first Lambda function.</p>\n\n<p>Take some time to examine the output of the function in CloudWatch Logs, as well as what was returned during your <code>curl</code> command.</p>\n\n<p>Challenge 1: If you\'ve heard of the <a href="https://www.postman.com/">Postman</a> tool, you can also call the API endpoint from there. Give it a shot.</p>\n\n<p>Challenge 2: You can display the HTTP headers when calling the API endpoint. How would you see the headers with the <code>curl</code> command? How would you see them with Postman?</p>\n\n<p>Challenge 3: Read more about Lambda functions, SAM, Serverless Framework, CDK.  Build your own Lambda and deploy it. Let me know how it goes on Twitter <a href="https://twitter.com/fshwsprr">@fshwsprr</a>.</p>\n\n<h2>\n  <a name="clean-up-aws-resources" href="#clean-up-aws-resources">\n  </a>\n  Clean Up AWS Resources\n</h2>\n\n<p>When you are done playing around with this Lambda function, run these commands to remove your resources:</p>\n\n<ol>\n<li><code>aws cloudformation delete-stack --stack-name lambda-env-vars --region us-east-2</code></li>\n<li>\n<code>aws s3 rb s3://aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0 --force</code> <strong>NOTE:</strong> This requires you to look at the output of your <code>sam package</code> or <code>sam deploy</code> command above to get the name of the S3 bucket to remove!</li>\n<li>Finally, you can deactivate your python virtual environment with the command: <code>deactivate</code>\n</li>\n</ol>\n\n<h2>\n  <a name="summary" href="#summary">\n  </a>\n  Summary\n</h2>\n\n<p>If you\'ve read this far, the important takeaways about AWS Lambda in my opinion, are:</p>\n\n<ul>\n<li>The concept that Lambda functions are only one part of the cloud serverless landscape.</li>\n<li>Understanding invocation options and how your single function gets called by AWS.\n</li>\n<li>The fact that you can locally invoke the function in SAM Local before you deploy to AWS.</li>\n<li>Anything you print inside your function will be written to CloudWatch Logs (assuming you created a Log Group for your Lambda.)</li>\n</ul>\n\n<p>Thanks for reading! Enjoy your serverless and Lambda journey!</p>\n\n<p>Cover photo by <a href="https://unsplash.com/@chuklanov">Avel Chuklanov</a> on <a href="https://unsplash.com/s/photos/learn">Unsplash</a></p>\n\n',e.body_markdown='---\ntitle: "A Gentle Introduction to AWS Lambda"\npublished: true\ndescription: \ntags: \n  - aws\n  - lambda\n  - serverless\n  - python\ncanonical_url: https://bacchi.org/posts/gentle-intro-lambda\ncover_image: https://bacchi.org/images/computer-coffee.jpg\n---\n\nYou\'ve probably heard of AWS Lambda and serverless by now. But what is Lambda all about? The short definition of AWS Lambda is a "Functions as a Service" (FaaS) technology. The longer and more complicated answer is that Lambda is a lightweight runtime that requires no infrastructure to be defined by the developer.\n\nFaaS allows developers to build software features quickly with less emphasis on the question of *where* and *how* they run. This allows for more focus on the business logic that users interact with. Functions as a Service is the most recent innovation in the long line of virtualization technologies. Compute virtualization started with physical servers, then moved to virtual machines (VMs), which grew into Infrastructure as a Service (IaaS). Platforms as a Service came next with companies like Heroku allowing developers to deploy without caring about infrastructure specifics. Now we\'re arriving at FaaS, which promises to abstract all these details away.  [Here](https://dashbird.io/blog/origin-of-serverless/) are a [couple](https://joshfechter.com/iaas-paas-saas/) good descriptions of these origins and where we are as an industry today.\n\n## Lambda vs. Serverless Terminology\n\nThe terms serverless and AWS Lambda are often used interchangeably, but they aren\'t exactly the same thing. Serverless refers to a collection of tools that require no infrastructure configurations from the developer, including databases, queues, functions and gateways as a service. AWS Lambda is only the FaaS component in this list. That means there are many more products such as API gateways, message queueing systems, notification tools, and serverless databases that fill out the serverless landscape. In this blog post we\'ll only work with a couple of these, namely AWS Lambda and AWS API Gateway for our demonstration.\n\n## FaaS Platforms\n\nThere are many [FaaS providers](https://fauna.com/blog/comparison-faas-providers) in the industry.  From the big players like Google, IBM, and AWS to the smaller ones like the open source OpenWhisk and OpenFaaS, they all provide similar functionality (generally) with different developer experiences.\n\nThere are also Edge computing FaaS providers, which instead of executing the code in one central data center, run the code in a data center nearest the user, known as the "Edge". The players in this area of serverless technology are companies like Cloudflare, Lambda@Edge (AWS), and Fastly.\n\n## AWS Lambda in Plan English\n\nAfter reading the above definition of serverless, Functions as a Service, and AWS Lambda, your understanding might still be cloudy (no pun intended). I\'ll attempt to explain it in more simple terms.\n\nThe description on the [AWS documentation website](https://docs.aws.amazon.com/lambda/latest/dg/welcome.html) says "Lambda is a compute service that lets you run code without provisioning or managing servers." The essence of Lambda is that AWS built all the scaffolding to allow you and I to send them a single piece of code, which they will run for us.\n\nWe don\'t need to build servers or container images in order to run this single piece of code. All we have to think about is writing code, and then a small SAM template file which defines the requirements of the deployment, and finally shipping it.\n\n### Is it Really a Single Function?\n\nIn order to wrap your brain around this idea of functions as a service, think of a single method or function in a small program. The function is called by another function, and may return a result.\n\nBelow you see a simple Python program in which there is a parent function (`main()`) calling a child function (`childfunction()`).\n\n```python\ndef childfunction(inputstring):\n    if inputstring == "hello":\n        return "world"\n    return "hi"\n\n\ndef main():\n    value = childfunction("hello")\n    print(f"value: {value}")\n\n\nif __name__ == "__main__":\n    main()\n```\n\nThe output of this program looks like this:\n\n```bash\n$ python hello.py\nvalue: world\n```\n\nAt it\'s simplest form, AWS Lambda can be thought of as a single child function being called by a parent function. AWS owns the parent function, which executes your function (the child function) in it\'s own virtual environment.\n\nYour objective during the rest of this blog post is to write, deploy and execute a single Lambda function.\n\n## Let\'s Write One Bite Sized Function\n\nFor this example, we\'ll write a small function that does nothing particularly important, but demonstrates the mechanics of running a function in AWS Lambda.  You are probably familiar with shell environment variables. In your terminal you can print out the environment variables defined in your session, or even create new environment variables.\n\nThe below terminal command prints out an environment variable showing the user name that you are logged in as:\n\n```bash\n$ echo $USER\nmbacchi\n```\n\n### What Will the Function Do?\n\nThe function we\'ll deploy will print out the default [runtime environment variables](https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html#configuration-envvars-runtime) in the AWS Lambda execution environment.\n\nSimilar to the terminal session above, our Lambda function can access the default environment variables such as `AWS_LAMBDA_FUNCTION_NAME`, `AWS_LAMBDA_LOG_GROUP_NAME`, or `TZ`. But how do we see the output of `print` statements in a Lambda? Anything that gets printed to STDOUT [will be logged to CloudWatch Logs](https://docs.aws.amazon.com/lambda/latest/dg/python-logging.html) using the log group name of the function.\n\n## How Does Lambda Work?\n\nThe concepts that you\'ll need to understand are described in the AWS [Lambda documentation](https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-concepts.html).\n\nHere are some of the most important details you\'ll need to write your Lambda functions:\n\n* **Invocation:** The function is [invoked](https://docs.aws.amazon.com/lambda/latest/dg/lambda-invocation.html) by one of the triggers that AWS provides. It can also be triggered by cron like [scheduling events](https://docs.aws.amazon.com/lambda/latest/dg/services-cloudwatchevents-expressions.html).\n* **Entrypoint:** Your Lambda function needs to implement a [handler](https://docs.aws.amazon.com/lambda/latest/dg/python-handler.html) which is the method (or function) that gets called by AWS when triggered.\n* **Environment:** The handler is passed an [event object and context object](https://docs.aws.amazon.com/lambda/latest/dg/python-handler.html#python-handler-how) from AWS that provides your function both data to be processed and context (information) about how it was called and other clues that you can use in your code.\n* **Response:** In certain cases you will want to syncronously [return a value](https://docs.aws.amazon.com/lambda/latest/dg/python-handler.html#python-handler-return) from your function, but that is optional. If you are writing an API backend you will return a value through API Gateway. If instead you are performing some scheduled data processing you may not return a value.\n\n## Background on Associated Serverless Components\n\nWe mentioned earlier how serverless isn\'t just AWS Lambda, and in this project we\'ll use API Gateway and CloudWatch Logs, but only to enable us to show how our Lambda function executes.\n\nAWS [API Gateway](https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html) is, as the name suggests, an API gateway product. But it also allows for more than just API calls. For example it enables generic HTTP/HTTPS traffic, REST APIs and Websocket APIs. You can host a standard web server with API Gateway and Lambda, you aren\'t limited to just APIs with API Gateway.\n\n[CloudWatch Logs](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html) is a logging product from AWS that allows all other AWS products to log their activity to a central location. In our example we\'ll be looking at the output of our Lambda function to see the environment variables available in the Lambda itself during runtime.\n\nWe\'re not going to cover these in any more detail because they\'re not the main focus of this post.\n\n## Sample Lambda Function\n\nFor this example deployment, we\'ll use [a GitHub repository that has our AWS Lambda function](https://github.com/mbacchi/lambda-env-vars) defined. The Lambda function in this repo was written with the intention of being used for demonstration purposes, and as a simple function that can be deployed when testing out CI/CD or the many serverless deployment tools available today (such as [Serverless Framework](https://github.com/serverless/serverless), [Cloud Development Kit (CDK)](https://github.com/aws/aws-cdk) etc.)\n\n## Deploying a Lambda Function with AWS SAM\n\nAWS SAM is the [Serverless Application Model](https://aws.amazon.com/serverless/sam/), which allows you to [write a template](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification-template-anatomy.html) describing the Lambda function, and any related resources you need to run your Lambda. The SAM template uses the YAML markup language and is based on AWS Cloudformation. After reading the template, SAM performs the deployment for you, and you can watch Cloudformation events to identify what the outcome was.\n\nWe are going to use the [template](https://github.com/mbacchi/lambda-env-vars/blob/master/template.yaml) in the above repository to deploy the function. I won\'t go into detail breaking down all of the items in the template for now. That information can be found in the documentation above or in other blogs. But I do want to highlight the two resources used here, the [LambdaEnvVarsFunction](https://github.com/mbacchi/lambda-env-vars/blob/main/template.yaml#L14) which is of the type `AWS::Serverless::Function` and the [LambdaLogGroup](https://github.com/mbacchi/lambda-env-vars/blob/main/template.yaml#L26), which is the definition of our `AWS::Logs::LogGroup` CloudWatch log group, where our Lambda output will be collected.\n\n## Install SAM CLI\n\nYou\'ll need to install a few components before running SAM. I would recommend running this in a Python virtual environment (venv), and I will provide basic steps here to set that up.\n\nFrom your terminal run these commands (this is on a Linux system):\n\n* Step 1: Make sure you have Python 3.8 (you may have to install this first, on Fedora Linux the command would be `sudo dnf install python3.8`)\n\n  ```shell\n  $ which python3.8\n  /usr/bin/python3.8\n  ```\n\n* Step 2: Create a Python 3.8 virtual environment\n\n  ```shell\n  $ python3.8 -m venv venv38\n  $ ls venv38\n  bin  include  lib  lib64  pyvenv.cfg\n  ```\n\n* Step 3: Activate the virtual environment\n\n  ```shell\n  $ . venv38/bin/activate\n  $ which python\n  ~/FAKE_PATH/lambda-env-vars7/venv38/bin/python\n  $ which pip\n  ~/FAKE_PATH/lambda-env-vars7/venv38/bin/pip\n  ```\n\n* Step 4: Install SAM CLI **NOTE: This installs Docker in the Python virtual environment**\n\n  ```shell\n  $ pip install aws-sam-cli\n  Collecting aws-sam-cli\n    Using cached aws_sam_cli-1.37.0-py3-none-any.whl (5.0 MB)\n  Collecting boto3==1.*,>=1.18.32\n    Using cached boto3-1.20.46-py3-none-any.whl (131 kB)\n  ...\n  ```\n\nNow you can move on to the next step, where we run the Lambda function locally.\n\n## Running Your Lambda Function with SAM Local\n\nBefore we deploy to AWS itself, we want to test our code by invoking the Lambda function locally. What is this magic you ask? SAM provides a utility command called `sam local invoke` which allows your function to run locally in a Docker container to test that it runs as expected before deploying to AWS.\n\n**NOTE:** We assume you haven\'t left the terminal session in step 4 above. If you have, activate your Python virtual environment as in step 3 above.\n\nRun `sam local invoke` as [described in the Git repository](https://github.com/mbacchi/lambda-env-vars#testing-using-sam-local) (this uses [test events](https://github.com/mbacchi/lambda-env-vars/blob/main/events/event.json) supplied with Lambda function in the repository)\n\n```shell\n$ sam local invoke LambdaEnvVarsFunction --event events/event.json\nInvoking app.lambda_handler (python3.8)\nSkip pulling image and use local one: public.ecr.aws/sam/emulation-python3.8:rapid-1.37.0-x86_64.\n\nMounting /home/mbacchi/data/repos/mbacchi/lambda-env-vars7/.aws-sam/build/LambdaEnvVarsFunction as /var/task:ro,delegated inside runtime container\nSTART RequestId: f97086cf-e8b6-4d9f-b2bc-b627ca5961e6 Version: $LATEST\nHello there this is the body: {\'_HANDLER\': \'app.lambda_handler\', \'AWS_REGION\': \'us-east-1\', \'AWS_EXECUTION_ENV\': \'AWS_Lambda_python3.8\', \'AWS_LAMBDA_FUNCTION_NAME\': \'LambdaEnvVarsFunction\', \'AWS_LAMBDA_FUNCTION_MEMORY_SIZE\': \'128\', \'AWS_LAMBDA_FUNCTION_VERSION\': \'$LATEST\', \'AWS_LAMBDA_LOG_GROUP_NAME\': \'aws/lambda/LambdaEnvVarsFunction\', \'AWS_LAMBDA_LOG_STREAM_NAME\': \'$LATEST\', \'LANG\': \'en_US.UTF-8\', \'TZ\': \':/etc/localtime\', \'LAMBDA_TASK_ROOT\': \'/var/task\', \'LAMBDA_RUNTIME_DIR\': \'/var/runtime\', \'PATH\': \'/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\', \'LD_LIBRARY_PATH\': \'/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\', \'PYTHONPATH\': \'/var/runtime\', \'AWS_LAMBDA_RUNTIME_API\': \'127.0.0.1:9001\'}\nEND RequestId: f97086cf-e8b6-4d9f-b2bc-b627ca5961e6\nREPORT RequestId: f97086cf-e8b6-4d9f-b2bc-b627ca5961e6\tInit Duration: 0.11 ms\tDuration: 100.72 ms\tBilled Duration: 101 ms\tMemory Size: 128 MB\tMax Memory Used: 128 MB\t\n{"statusCode": 200, "body": "{\\"_HANDLER\\": \\"app.lambda_handler\\", \\"AWS_REGION\\": \\"us-east-1\\", \\"AWS_EXECUTION_ENV\\": \\"AWS_Lambda_python3.8\\", \\"AWS_LAMBDA_FUNCTION_NAME\\": \\"LambdaEnvVarsFunction\\", \\"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\\": \\"128\\", \\"AWS_LAMBDA_FUNCTION_VERSION\\": \\"$LATEST\\", \\"AWS_LAMBDA_LOG_GROUP_NAME\\": \\"aws/lambda/LambdaEnvVarsFunction\\", \\"AWS_LAMBDA_LOG_STREAM_NAME\\": \\"$LATEST\\", \\"LANG\\": \\"en_US.UTF-8\\", \\"TZ\\": \\":/etc/localtime\\", \\"LAMBDA_TASK_ROOT\\": \\"/var/task\\", \\"LAMBDA_RUNTIME_DIR\\": \\"/var/runtime\\", \\"PATH\\": \\"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\\", \\"LD_LIBRARY_PATH\\": \\"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\\", \\"PYTHONPATH\\": \\"/var/runtime\\", \\"AWS_LAMBDA_RUNTIME_API\\": \\"127.0.0.1:9001\\"}"}\n```\n\n## Deploy to AWS\n\n**NOTE:** Before deploying you need to setup your [AWS credentials](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html) properly.\n\nIn order to deploy the Lambda function, we\'ll follow the steps in the [lambda-env-vars](https://github.com/mbacchi/lambda-env-vars#deploying-to-aws) repository:\n\n* Step 1: Run `sam build`\n\n  ```shell\n  $ sam build\n  Building codeuri: /home/mbacchi/data/repos/mbacchi/lambda-env-vars7/env_vars runtime: python3.8 metadata: {} architecture: x86_64 functions: [\'LambdaEnvVarsFunction\']\n  Running PythonPipBuilder:ResolveDependencies\n  Running PythonPipBuilder:CopySource\n\n  Build Succeeded\n\n  Built Artifacts  : .aws-sam/build\n  Built Template   : .aws-sam/build/template.yaml\n\n  Commands you can use next\n  =========================\n  [*] Invoke Function: sam local invoke\n  [*] Test Function in the Cloud: sam sync --stack-name {stack-name} --watch\n  [*] Deploy: sam deploy --guided\n  ```\n\n* Step 2: Run `sam package` (this creates an S3 bucket, which must be removed later)\n\n  ```shell\n  $ sam package --output-template-file packaged.yaml --resolve-s3\n    Creating the required resources...\n    Successfully created!\n\n      Managed S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0\n      A different default S3 bucket can be set in samconfig.toml\n      Or by specifying --s3-bucket explicitly.\n  Uploading to eb6c7534d67a5b044653e48f2802a548  452695 / 452695  (100.00%)\n\n  Successfully packaged artifacts and wrote output template to file packaged.yaml.\n  Execute the following command to deploy the packaged template\n  sam deploy --template-file /home/mbacchi/data/repos/mbacchi/lambda-env-vars7/packaged.yaml --stack-name <YOUR STACK NAME>\n  ```\n\n* Step 3: Run `sam deploy`\n\n  ```shell\n  $ sam deploy --template-file packaged.yaml --region us-east-2 --capabilities CAPABILITY_IAM --stack-name lambda-env-vars --resolve-s3\n\n      Managed S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0\n      A different default S3 bucket can be set in samconfig.toml\n      Or by specifying --s3-bucket explicitly.\n\n    Deploying with following values\n    ===============================\n    Stack name                   : lambda-env-vars\n    Region                       : us-east-2\n    Confirm changeset            : False\n    Disable rollback             : False\n    Deployment s3 bucket         : aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0\n    Capabilities                 : ["CAPABILITY_IAM"]\n    Parameter overrides          : {}\n    Signing Profiles             : {}\n\n  Initiating deployment\n  =====================\n  Uploading to 77524ed205c6d82d5487433831c24c0f.template  1635 / 1635  (100.00%)\n\n  Waiting for changeset to be created..\n\n  CloudFormation stack changeset\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  Operation                                                  LogicalResourceId                                          ResourceType                                               Replacement                                              \n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  + Add                                                      LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           AWS::Lambda::Permission                                    N/A                                                      \n  + Add                                                      LambdaEnvVarsFunctionRole                                  AWS::IAM::Role                                             N/A                                                      \n  + Add                                                      LambdaEnvVarsFunction                                      AWS::Lambda::Function                                      N/A                                                      \n  + Add                                                      LambdaLogGroup                                             AWS::Logs::LogGroup                                        N/A                                                      \n  + Add                                                      ServerlessRestApiDeploymentcaa6ada684                      AWS::ApiGateway::Deployment                                N/A                                                      \n  + Add                                                      ServerlessRestApiProdStage                                 AWS::ApiGateway::Stage                                     N/A                                                      \n  + Add                                                      ServerlessRestApi                                          AWS::ApiGateway::RestApi                                   N/A                                                      \n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n  Changeset created successfully. arn:aws:cloudformation:us-east-2:592431548397:changeSet/samcli-deploy1643607514/85a31faf-1358-47ff-9eeb-4428020bb482\n\n\n  2022-01-30 22:38:46 - Waiting for stack create/update to complete\n\n  CloudFormation events from stack operations\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ResourceStatus                                             ResourceType                                               LogicalResourceId                                          ResourceStatusReason                                     \n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  CREATE_IN_PROGRESS                                         AWS::IAM::Role                                             LambdaEnvVarsFunctionRole                                  -                                                        \n  CREATE_IN_PROGRESS                                         AWS::IAM::Role                                             LambdaEnvVarsFunctionRole                                  Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::IAM::Role                                             LambdaEnvVarsFunctionRole                                  -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Lambda::Function                                      LambdaEnvVarsFunction                                      -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Lambda::Function                                      LambdaEnvVarsFunction                                      Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::Lambda::Function                                      LambdaEnvVarsFunction                                      -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Logs::LogGroup                                        LambdaLogGroup                                             -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::RestApi                                   ServerlessRestApi                                          -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::RestApi                                   ServerlessRestApi                                          Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::ApiGateway::RestApi                                   ServerlessRestApi                                          -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Logs::LogGroup                                        LambdaLogGroup                                             Resource creation Initiated                              \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Deployment                                ServerlessRestApiDeploymentcaa6ada684                      -                                                        \n  CREATE_IN_PROGRESS                                         AWS::Lambda::Permission                                    LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           Resource creation Initiated                              \n  CREATE_IN_PROGRESS                                         AWS::Lambda::Permission                                    LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           -                                                        \n  CREATE_COMPLETE                                            AWS::Logs::LogGroup                                        LambdaLogGroup                                             -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Deployment                                ServerlessRestApiDeploymentcaa6ada684                      Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::ApiGateway::Deployment                                ServerlessRestApiDeploymentcaa6ada684                      -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Stage                                     ServerlessRestApiProdStage                                 -                                                        \n  CREATE_IN_PROGRESS                                         AWS::ApiGateway::Stage                                     ServerlessRestApiProdStage                                 Resource creation Initiated                              \n  CREATE_COMPLETE                                            AWS::ApiGateway::Stage                                     ServerlessRestApiProdStage                                 -                                                        \n  CREATE_COMPLETE                                            AWS::Lambda::Permission                                    LambdaEnvVarsFunctionLambdaEnvVarsPermissionProd           -                                                        \n  CREATE_COMPLETE                                            AWS::CloudFormation::Stack                                 lambda-env-vars                                            -                                                        \n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n  CloudFormation outputs from deployed stack\n  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  Outputs                                                                                                                                                                                                                                   \n  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  Key                 LambdaEnvVarsApi                                                                                                                                                                                                      \n  Description         API Gateway endpoint URL for Prod stage for Lambda Env Vars function                                                                                                                                                  \n  Value               https://e4cusxvy7f.execute-api.us-east-2.amazonaws.com/Prod/env_vars/                                                                                                                                                 \n\n  Key                 LambdaLogGroup                                                                                                                                                                                                        \n  Description         Cloudwatch Log Group ARN                                                                                                                                                                                              \n  Value               /aws/lambda/lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp                                                                                                                                                        \n\n  Key                 LambdaEnvVarsFunctionIamRole                                                                                                                                                                                          \n  Description         Implicit IAM Role created for Lambda Env Vars function                                                                                                                                                                \n  Value               arn:aws:iam::592431548397:role/lambda-env-vars-LambdaEnvVarsFunctionRole-L05B77IT7WK0                                                                                                                                 \n\n  Key                 LambdaEnvVarsFunction                                                                                                                                                                                                 \n  Description         Lambda Env Vars Function ARN                                                                                                                                                                                          \n  Value               arn:aws:lambda:us-east-2:592431548397:function:lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp                                                                                                                     \n  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n  Successfully created/updated stack - lambda-env-vars in us-east-2\n  ```\n\nThe `sam deploy` command has deployed the Lambda function to AWS and returned the API Gateway endpoint which we can use to invoke the Lambda with an API call.  We need the API Gateway URL from the above output, look for the `LambdaEnvVarsApi` key. In our example above, this is:\n\n```\nhttps://e4cusxvy7f.execute-api.us-east-2.amazonaws.com/Prod/env_vars/\n```\n\n## GET Request to Invoke the Lambda Function\n\nNow that we have the API Gateway URL (also known as the endpoint,) we can use a tool like curl to perform an HTTP GET request against the endpoint. Because we defined the `Events` [stanza](https://github.com/mbacchi/lambda-env-vars/blob/main/template.yaml#L20-L25) with a `Type` of `Api`, and `Method` `get`, SAM has deployed an API Gateway resource to trigger our Function. (More detailed discussion on this implicit API Gateway resource [here](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-api.html)).\n\nWe will use the command `curl` to perform a `GET` request as below:\n\n```shell\n$ curl -X GET https://e4cusxvy7f.execute-api.us-east-2.amazonaws.com/Prod/env_vars/\n{"_HANDLER": "app.lambda_handler", "AWS_REGION": "us-east-2", "AWS_EXECUTION_ENV": "AWS_Lambda_python3.8", "AWS_LAMBDA_FUNCTION_NAME": "lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp", "AWS_LAMBDA_FUNCTION_MEMORY_SIZE": "128", "AWS_LAMBDA_FUNCTION_VERSION": "$LATEST", "AWS_LAMBDA_LOG_GROUP_NAME": "/aws/lambda/lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp", "AWS_LAMBDA_LOG_STREAM_NAME": "2022/01/31/[$LATEST]c2b9b9c953154c8daa7c9b2c0637b70e", "LANG": "en_US.UTF-8", "TZ": ":UTC", "LAMBDA_TASK_ROOT": "/var/task", "LAMBDA_RUNTIME_DIR": "/var/runtime", "PATH": "/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin", "LD_LIBRARY_PATH": "/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib", "PYTHONPATH": "/var/runtime", "AWS_LAMBDA_RUNTIME_API": "127.0.0.1:9001"}\n```\n\nOn line 2, we can see the response JSON, which is what the \nLambda function returned to us via the API Gateway. And we see all the environment variables that we had expected, just as in the `sam local invoke` command earlier.\n\nBut how can we observe the output of the [print statement at line 50](https://github.com/mbacchi/lambda-env-vars/blob/main/env_vars/app.py#L50)?\n\nTo do that we look at the CloudWatch log output. Browse to your AWS console, and search for the Cloudwatch log group name that was in the `Outputs` section of the `sam deploy` command output.\n\nIn our case the LambdaLogGroup name was: `/aws/lambda/lambda-env-vars-LambdaEnvVarsFunction-6r0qwkWGeZSp`\n\nWhen I browse there in CloudWatch, I see the "Hello there" line in the output, which was sent to CloudWatch because we performed a `print` to standard output within the Lambda function code:\n\n![CloudWatch Log Output](https://bacchi.org/images/cloudwatch-log-output.png)\n\n## What Just Occurred? What\'s Next?\n\nCongratulations, you just deployed and invoked your first Lambda function.\n\nTake some time to examine the output of the function in CloudWatch Logs, as well as what was returned during your `curl` command.\n\nChallenge 1: If you\'ve heard of the [Postman](https://www.postman.com/) tool, you can also call the API endpoint from there. Give it a shot.\n\nChallenge 2: You can display the HTTP headers when calling the API endpoint. How would you see the headers with the `curl` command? How would you see them with Postman?\n\nChallenge 3: Read more about Lambda functions, SAM, Serverless Framework, CDK.  Build your own Lambda and deploy it. Let me know how it goes on Twitter [@fshwsprr](https://twitter.com/fshwsprr).\n\n## Clean Up AWS Resources\n\nWhen you are done playing around with this Lambda function, run these commands to remove your resources:\n\n1. `aws cloudformation delete-stack --stack-name lambda-env-vars --region us-east-2`\n2. `aws s3 rb s3://aws-sam-cli-managed-default-samclisourcebucket-61z4v277mwy0 --force` **NOTE:** This requires you to look at the output of your `sam package` or `sam deploy` command above to get the name of the S3 bucket to remove!\n3. Finally, you can deactivate your python virtual environment with the command: `deactivate`\n\n## Summary\n\nIf you\'ve read this far, the important takeaways about AWS Lambda in my opinion, are:\n\n* The concept that Lambda functions are only one part of the cloud serverless landscape.\n* Understanding invocation options and how your single function gets called by AWS.  \n* The fact that you can locally invoke the function in SAM Local before you deploy to AWS.\n* Anything you print inside your function will be written to CloudWatch Logs (assuming you created a Log Group for your Lambda.)\n\nThanks for reading! Enjoy your serverless and Lambda journey!\n\nCover photo by [Avel Chuklanov](https://unsplash.com/@chuklanov) on [Unsplash](https://unsplash.com/s/photos/learn)\n',e.user={name:"Matt Bacchi",username:s,twitter_username:"fshwsprr",github_username:s,website_url:"https://bacchi.org",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--SX5GVzPZ--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/50678/a76099bb-e16d-4a2d-bb89-186bd729c319.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--GCjVOEsn--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/50678/a76099bb-e16d-4a2d-bb89-186bd729c319.png"},e.organization={name:"AWS Community Builders ",username:t,slug:t,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--zmOZQNzv--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/2794/88da75b6-aadd-4ea1-8083-ae2dfca8be94.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--vWmcJ-ty--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/2794/88da75b6-aadd-4ea1-8083-ae2dfca8be94.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:e}},error:a,state:{currentArticle:e},serverRendered:!0,routePath:"/mbacchi/975679",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:a}}}}(null,"2022-02-02T14:44:48Z",{},"mbacchi","aws-builders")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
