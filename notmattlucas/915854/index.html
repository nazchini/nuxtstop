<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>“Finding Stuff” — Building a Great Search Experience</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>“Finding Stuff” — Building a Great Search Experience</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/programming" class="tag" data-v-70afb46a>
          #programming
        </a><a href="/nuxtstop/t/search" class="tag" data-v-70afb46a>
          #search
        </a><a href="/nuxtstop/t/architecture" class="tag" data-v-70afb46a>
          #architecture
        </a><a href="/nuxtstop/t/tutorial" class="tag" data-v-70afb46a>
          #tutorial
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--x1JgF9yi--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ru0zan86re4f5gb2kqvd.png" alt="“Finding Stuff” — Building a Great Search Experience" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            5
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            0
          </span></div> <time data-v-70afb46a>Dec 2 '21</time></div></header> <div class="content" data-v-70afb46a><p>Search is everywhere. How would you survive a day without it!? It’s on every website and part of every product. Whether you’re purchasing underwear, trawling Netflix for a Friday night movie, or even leading a cutting-edge research team, it can be a modern miracle to summon what you need at the cost of a few key presses.</p>

<p>Despite being ubiquitous, why is search so often terrible? It’s frequently seen as second class, a bonus. It is plugged in and expected to work out of the box. It takes time, thought, and effort to craft a well-balanced search experience.</p>


<hr>

<h2>
  <a name="before-we-begin" href="#before-we-begin">
  </a>
  Before We Begin
</h2>

<p>Talking about concepts without an actual example to stare at can often become a challenge. For this post, we’ll be using a sample of around 10,000 books sourced from the <a href="https://www.goodreads.com/">Goodreads</a> website. The data set itself, and scripts to load it into <a href="https://www.elastic.co/elasticsearch/">Elasticsearch</a>, can be found here:</p>

<p><a href="https://github.com/lucas-matt/search_playground">https://github.com/lucas-matt/search_playground</a></p>


<hr>

<h2>
  <a name="principle-1-search-engines-are-dumb-you-are-not" href="#principle-1-search-engines-are-dumb-you-are-not">
  </a>
  Principle 1. Search Engines Are Dumb, You Are Not
</h2>

<p>Often search engines are seen as just another database. They do look and act similar in many ways, but once you scratch the surface, you reveal a wealth of fancy algorithms and highly optimized data structures that differ quite drastically from a standard data store.</p>

<p>There are a number of parts to any search tool that we need to understand so that we can build upon them:</p>

<ul>
<li>
<strong>analysis</strong> (zapping a chunk of text into fragments)</li>
<li>
<strong>the inverted index</strong> (a lightning-fast mapping of tokens to the documents in which they appear)</li>
<li>
<strong>the ranking algorithm</strong> (identification and ordering of information based upon its relevance to the query)</li>
</ul>

<h3>
  <a name="analysis" href="#analysis">
  </a>
  Analysis
</h3>

<p>As we push documents into our search engine, they get sliced and diced into lots of little chunks. These chunks, or tokens (as we should call them from now on), are the core currency of the search engine.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Q-iffQyi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nmk9k99t3uvj2exmzy3h.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Q-iffQyi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nmk9k99t3uvj2exmzy3h.jpeg" alt="Tokens" loading="lazy" width="700" height="511"></a></p>

<p>We control the way tokens get generated through an index’s schema definition. How we leverage this power has a huge effect on how the search engine behaves down the line — it’s one of the primary levers we can pull to master it. The choices are wide-ranging and include transformations such as token size (n-grams), removal of troubling stopwords (e.g., <em>the, and, this</em>), and stemming of terms (e.g., <em>books to book</em>). We will take a look at some of these in a moment.</p>

<h3>
  <a name="the-index" href="#the-index">
  </a>
  The Index
</h3>

<p>Pick up any nonfiction textbook and flick to the back pages. Here we have a data structure that maps the key terms of the subject at hand to the passages in which they feature most heavily.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--4QQ4fjOx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vmkgairox836voapa0ze.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--4QQ4fjOx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vmkgairox836voapa0ze.jpeg" alt="Features" loading="lazy" width="436" height="339"></a></p>

<p>The <em>inverted index</em> of a search engine behaves very similarly. At a simple level, it maps the tokens present in a document to the documents in which it occurs.</p>

<h3>
  <a name="ranking" href="#ranking">
  </a>
  Ranking
</h3>

<p>When you search for something, the engine matches your tokenized query against the index and scores each result using a ranking algorithm. Traditionally an algorithm such as <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">TF-IDF</a> is used. It rates a document higher the more frequently the document matches a term (TF, term frequency) offset by how common that term is (IDF, inverse document frequency).</p>

<p>All records are given a score and pitted against one another to identify the winners: your search results.</p>

<h3>
  <a name="so-search-engines-are-smart-right" href="#so-search-engines-are-smart-right">
  </a>
  So search engines are smart, right?
</h3>

<p>Not exactly. Although the engineering underneath it all is a computer scientist’s dream, search engines are utter idiots! If the tokens generated from the query do not match any in the index exactly, you are out of luck. For example, if your index has <strong>horses</strong> but the query analyzer generates <strong>horse</strong>, too bad.</p>

<p>Garbage in, garbage out! It’s your job to curate.</p>

<p>Don’t just blindly add reams of data to the search engine. It’s your responsibility to turn the incoming mass of text into something useful.</p>


<hr>

<h2>
  <a name="principle-2-its-not-just-about-tokens-but-features" href="#principle-2-its-not-just-about-tokens-but-features">
  </a>
  Principle 2. It’s Not Just About Tokens but Features
</h2>

<p>The tokens generated from a document are more than just items in an index. They represent the core ideas about it.</p>

<p>What is a feature? Let’s take the example of the classic title Dracula from our dataset.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dracula"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"genres"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"classics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"horror"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fiction"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gothic"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"paranormal"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"vampire"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">1897</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isbn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"393970124"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A Chronology and a Selected Bibliography are included."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"publisher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Norton"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"average_rating"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.98</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ratings_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">618973</span><span class="p">,</span><span class="w">
    </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Bram Stoker"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here we see just a few of the features concerning the novel — it’s a gothic classic, published in 1897 by the author Bram Stoker, and has an average rating of 3.98/5.</p>

<p>The source material will usually contain a wealth of features just sitting there ready to be picked, but often the most golden ones need to be mined from just beneath the surface. You need to model features to help communicate the ideas in your document. This technique is named <strong>feature extraction</strong>. Here you can play the mad scientist, distilling the text down to its bare essentials, stripping away all the confusion and muddiness within.</p>

<p>Feature engineering takes place during the analysis phase of indexing. The search engine has several tools to help us do this effectively. Let’s review a couple of them.</p>

<h3>
  <a name="ngrams" href="#ngrams">
  </a>
  n-grams
</h3>

<p>The default tokenization strategy of any search engine is usually to (a) remove all punctuation and special characters, followed by (b) splitting on any whitespace. It can work quite well as an initial tactic because searching for a particular word will give you a successful match. For those long words that we have trouble spelling, however, this is not a great approach.</p>

<p>Imagine searching for the book Cryptonomicon. Half of your users are just going to type “Crypton” and hit return. With the standard analyzer, this is not going to get very far. Remember that search engines are dumb, and an out-of-the-box strategy is only going to produce the single token Cryptonomicon, which will not match our search request.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--nHJpAxCQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3uk47aospf57m790ixnb.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--nHJpAxCQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3uk47aospf57m790ixnb.jpeg" alt="Bad Search" loading="lazy" width="700" height="253"></a></p>

<p>N-grams, and in particular edge n-grams, are great for those fields in which you want to partially match. Take a look at the wealth of tokens generated by taking an n-grammed approach to “Cryptonomicon.”</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--uCpynJIk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7mfgi3ux6oftgvm56e7d.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--uCpynJIk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7mfgi3ux6oftgvm56e7d.jpeg" alt="Explode" loading="lazy" width="700" height="343"></a></p>

<p>Using this strategy, because <em>crypto</em> is one of those tokens generated by the n-gram analyzer, we get our match.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OLNSWiR8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kh3mjrpuv846gpa90x9b.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OLNSWiR8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kh3mjrpuv846gpa90x9b.jpeg" alt="Good Search" loading="lazy" width="700" height="253"></a></p>

<h3>
  <a name="stemming" href="#stemming">
  </a>
  Stemming
</h3>

<p>Stemming involves getting to the root of a word. Many terms have the same core meaning: <em>quick, quickly,</em> and <em>quicker</em> all come from the same place, as do <em>happy, happier, happiest, and happiness</em>.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s---5IlbG7W--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/targ96vlexemqd6dma4y.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s---5IlbG7W--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/targ96vlexemqd6dma4y.jpeg" alt="Stemming" loading="lazy" width="700" height="350"></a></p>

<p>By reducing a term to its stem, you are distilling it to its core essence. Utilizing this approach, you can translate those thoughts in the head of a user into a successful search result. You’re allowing them to converse at the level of ideas rather than worrying about syntax.</p>

<p>For a more detailed dive into stemming, check out the following section in <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/stemming.html">Elasticsearch’s documentation</a>.</p>


<hr>

<h2>
  <a name="principle-3-tuning-in-to-signals" href="#principle-3-tuning-in-to-signals">
  </a>
  Principle 3. Tuning In to Signals
</h2>

<p>Feature extraction is paramount to building a well-tuned search experience, but you must always keep the end user in mind while tackling it. What are the use cases for search? What kinds of items are users likely to be tracking down? What properties are most helpful in identifying or suggesting this? How can we manipulate features for maximum effect?</p>

<p>We must understand the user and anticipate their intent. One approach to thinking about this (as described in the book <a href="https://www.manning.com/books/relevant-search">Relevant Search</a>) is the strength of a signal.</p>

<h3>
  <a name="signals" href="#signals">
  </a>
  Signals
</h3>

<p>When someone makes a search request, they’re hunting for documents that resonate most strongly with their wants. They are giving us several clues to help us help them: author, genre, title, year, etc. The documents that align most closely with the concepts respond with the strongest signal (as measured by the relevance score).</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--CcwVKGJV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mayr4dwvno9qerp9z9px.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--CcwVKGJV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mayr4dwvno9qerp9z9px.jpeg" alt="Signals" loading="lazy" width="700" height="257"></a></p>

<p>Not all signals are as clear as others, and some may actively work against you. While one feature may allow for a resounding match, others may generate noise, causing a false positive and detracting from the overall quality of the search results. We have the tools, however, to amplify those signals that are crystal clear and to quieten those that may occasionally be useful but more often than not get in the way.</p>

<h3>
  <a name="boosting" href="#boosting">
  </a>
  Boosting
</h3>

<p>It is commonly the case that a hit on one property (title, for example) is much more valuable than on another (e.g., description). We can influence the search engine to take our preferences into account.</p>

<p>By raising one field above another, it increases the importance of its match over a peer. Those that resonate with your query will do so much more clearly, and those false positives will fade into insignificance. Boosting one field over another is as simple as assigning it a positive number.</p>

<p>Let’s say we fancy a classic Charles Dickens book, and we feed our search algorithm with the term <em>dickens</em>.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--nHHqbyi9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qicwu9fkb81situvakc5.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--nHHqbyi9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qicwu9fkb81situvakc5.jpeg" alt="Dickens" loading="lazy" width="700" height="375"></a></p>

<p>The results are a mixed bag. Some are Charles Dickens books, for sure, were but beaten to the podium by a number of others. Your users may think it strange for Moby-Dick to win this competition! We can change that outcome by levelling the playing field and adding a boost to the authors field.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Mx3SaJ0f--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/m2let4g85k53vxnbj659.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Mx3SaJ0f--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/m2let4g85k53vxnbj659.jpeg" alt="Dickens Boost" loading="lazy" width="700" height="375"></a></p>

<p>Names are often a more precise match than something in a title or description — especially a full name, but we’ll see that later. By adding a boost to the authors field, we’re emphasising those records to show as more relevant to our search.</p>

<p>A word of warning though. It is a bit of an art weighting and balancing fields. Overly promote and you may end up fixing one problem (e.g., searching for the title) but introduce another (e.g., ability to search by publisher).</p>

<h3>
  <a name="match-difficulty-and-boosting" href="#match-difficulty-and-boosting">
  </a>
  Match difficulty and boosting
</h3>

<p>One solution to the balancing problem is to correlate the size of the weight with the difficulty of obtaining a winning match on the field.</p>

<p>Properties that provide us with a crystal-clear signal include:</p>

<ul>
<li>ID</li>
<li>Full name</li>
<li>ISBN</li>
</ul>

<p>Hit upon one of these and you’re on to a winner. Match against the description field, however, and you can never be completely confident because of the wide breadth of the content.</p>

<p>You can sleep easier elevating a feature that’s almost akin to a binary signal: It either matches or it doesn’t.</p>

<h3>
  <a name="same-text-different-analysis" href="#same-text-different-analysis">
  </a>
  Same text, different analysis
</h3>

<p>Consider the author’s name. There are at least two different signals you can see here:</p>

<ul>
<li>Partial match, e.g., surname: King</li>
<li>Complete match, e.g., full name: Stephen King</li>
</ul>

<p>The latter signal is clearly of more significance than the former. It is much more valuable for us to know that the user is looking for an author by their full name. However, that doesn’t mean a partial match isn’t valuable at all, even if it could just be coincidental — you don’t always know the exact spelling of an author’s full name.</p>

<p>How can we handle both cases when we have but one name field? We can use feature modelling here to split this into two separate fields. Each feature can be tuned independently, the balance giving higher precedence to the more thorough match but allowing the weaker one to add value when appropriate.</p>

<h3>
  <a name="multimatching" href="#multimatching">
  </a>
  Multi-matching
</h3>

<p>You do not always look for just one feature, but often mash a ton of different clues into one search string. You might search not only for an author but also specific subject matter from that author — Christmas novels by Charles Dickens, for instance.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zu2-RVn3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hmj3yjvs1xcioomganp5.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zu2-RVn3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hmj3yjvs1xcioomganp5.jpeg" alt="Search" loading="lazy" width="700" height="375"></a></p>

<p>By using a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html">best-fields</a> approach, Elasticsearch is going to pick the best match of the bunch: the signal giving us the strongest reaction. This approach can get in a bit of a muddle with the cross-feature query we just saw. What we want is to match primarily against the strongest signal, <em>Christmas</em>, and then augment this with a second field to emphasize its importance.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ap0E3wXI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/x6tsx9g4dlfooqibdysw.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ap0E3wXI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/x6tsx9g4dlfooqibdysw.jpeg" alt="Search" loading="lazy" width="700" height="375"></a></p>

<p>By setting up a tie-breaker, a value between 0 and 1, the search engine will still proceed to match on the best field, but then it will go one step further and use the other signals to further refine the results. In our example, Christmas could be our primary hit, with <em>Dickens</em> adding enough additional weight to hoist those novels into first place.</p>


<hr>

<h2>
  <a name="principle-4-feedback-feedback-feedback" href="#principle-4-feedback-feedback-feedback">
  </a>
  Principle 4. Feedback, feedback, feedback
</h2>

<p>Search isn’t a one-way street. It’s not <em>just</em> about handling a search request and blindly serving the user; it’s critical to have a conversation with them.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--2NXHKFpi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mnkz7zccymnp4tlnyyeq.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--2NXHKFpi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mnkz7zccymnp4tlnyyeq.jpeg" alt="Knows More" loading="lazy" width="700" height="350"></a></p>

<h3>
  <a name="suggestions" href="#suggestions">
  </a>
  Suggestions
</h3>

<p>Often the user does not quite know what they’re seeking. They bash out a vague notion of what they want on the keyboard and see what bounces back. Without a little assistance, this can be a bit of a shot in the dark. They try, fail, and try again until they either flounder into something usable or give up.</p>

<p>By presenting auto-completing suggestions, you’re giving immediate feedback on the kinds of things available, with the bonus of not needing perfect recall or spelling ability.</p>

<p>Suggestions are supported out of the box by most, if not all, search engines. In Elasticsearch, it is just another (albeit special) field into which you copy your titles, author names, genres, and the like.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Z6HS8Fx9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o3tc48qtgmiie71ez7l.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Z6HS8Fx9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o3tc48qtgmiie71ez7l.jpeg" alt="Suggestions" loading="lazy" width="700" height="279"></a></p>

<h3>
  <a name="highlighting" href="#highlighting">
  </a>
  Highlighting
</h3>

<p>Have you ever searched for something and wondered how the heck you got the results you did? If your documents are data-rich, it can sometimes become unclear what you’ve hit when searching.</p>

<p>Providing feedback by highlighting the terms that were matched can turn out to be invaluable, allowing the user to tweak their request to be more specific or to filter out unwanted results.</p>

<p>For more information, read about how to highlight in the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/highlighting.html">Elasticsearch documentation</a>.</p>

<h3>
  <a name="monitoring-and-iteration" href="#monitoring-and-iteration">
  </a>
  Monitoring and iteration
</h3>

<blockquote>
<p>“What gets measured gets managed” — Peter Drucker</p>
</blockquote>

<p>Building a truly useful search experience requires learning from your users. Domain expertise is clearly important, but actually seeing what your users come up with can reveal some key insights.</p>

<p><strong>Bouncing around?</strong> Search after search after search and still not sticking on any one result. Why is this? What terms are being looked for?</p>

<p><strong>No results?</strong> Are a lot of different users looking for something that doesn’t return anything useful? Is your search engine badly tuned, or maybe there’s an opportunity to be pounced upon.</p>

<p><strong>A successful outcome?</strong> Did the session have a successful outcome? Was something bought, watched, read?</p>

<p>Gather and analyze this information to continually improve your solution.</p>


<hr>

<h2>
  <a name="the-last-word" href="#the-last-word">
  </a>
  The Last Word
</h2>

<p>We’ve touched upon quite a few different aspects that need to be considered when putting together an engaging search experience. We’ve only just scratched the surface here, and I’d advise checking out the resources below for more information.</p>

<p>Search is a complete subject area in its own right, branching out at the more cutting edges into related topics, including recommendations and machine learning. As with most engineering projects, a successful outcome can be achieved by approaching it in small steps. Make sure you start simple, collect feedback, iterate, and evolve as required.</p>

<p>Thanks for reading!</p>


<hr>

<h2>
  <a name="resources" href="#resources">
  </a>
  Resources
</h2>

<ul>
<li><a href="https://www.manning.com/books/relevant-search">Relevant Search</a></li>
<li><a href="https://www.manning.com/books/elasticsearch-in-action">Elasticsearch in Action</a></li>
<li><a href="https://github.com/lucas-matt/search_playground">https://github.com/lucas-matt/search_playground</a></li>
</ul>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/notmattlucas/finding-stuff-building-a-great-search-experience-2f9f" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(e,a,t){return t.type_of="article",t.id=915854,t.title="“Finding Stuff” — Building a Great Search Experience",t.description="Search is everywhere. How would you survive a day without it!? It’s on every website and part of...",t.readable_publish_date="Dec 2 '21",t.slug="finding-stuff-building-a-great-search-experience-2f9f",t.path="/notmattlucas/finding-stuff-building-a-great-search-experience-2f9f",t.url="https://dev.to/notmattlucas/finding-stuff-building-a-great-search-experience-2f9f",t.comments_count=0,t.public_reactions_count=5,t.collection_id=e,t.published_timestamp=a,t.positive_reactions_count=5,t.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--x1JgF9yi--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ru0zan86re4f5gb2kqvd.png",t.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--j9Zi-DbH--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ru0zan86re4f5gb2kqvd.png",t.canonical_url="https://betterprogramming.pub/finding-stuff-building-a-great-search-experience-e001d994d7db",t.created_at=a,t.edited_at=e,t.crossposted_at=e,t.published_at=a,t.last_comment_at=a,t.reading_time_minutes=11,t.tag_list="programming, search, architecture, tutorial",t.tags=["programming","search","architecture","tutorial"],t.body_html='<p>Search is everywhere. How would you survive a day without it!? It’s on every website and part of every product. Whether you’re purchasing underwear, trawling Netflix for a Friday night movie, or even leading a cutting-edge research team, it can be a modern miracle to summon what you need at the cost of a few key presses.</p>\n\n<p>Despite being ubiquitous, why is search so often terrible? It’s frequently seen as second class, a bonus. It is plugged in and expected to work out of the box. It takes time, thought, and effort to craft a well-balanced search experience.</p>\n\n\n<hr>\n\n<h2>\n  <a name="before-we-begin" href="#before-we-begin">\n  </a>\n  Before We Begin\n</h2>\n\n<p>Talking about concepts without an actual example to stare at can often become a challenge. For this post, we’ll be using a sample of around 10,000 books sourced from the <a href="https://www.goodreads.com/">Goodreads</a> website. The data set itself, and scripts to load it into <a href="https://www.elastic.co/elasticsearch/">Elasticsearch</a>, can be found here:</p>\n\n<p><a href="https://github.com/lucas-matt/search_playground">https://github.com/lucas-matt/search_playground</a></p>\n\n\n<hr>\n\n<h2>\n  <a name="principle-1-search-engines-are-dumb-you-are-not" href="#principle-1-search-engines-are-dumb-you-are-not">\n  </a>\n  Principle 1. Search Engines Are Dumb, You Are Not\n</h2>\n\n<p>Often search engines are seen as just another database. They do look and act similar in many ways, but once you scratch the surface, you reveal a wealth of fancy algorithms and highly optimized data structures that differ quite drastically from a standard data store.</p>\n\n<p>There are a number of parts to any search tool that we need to understand so that we can build upon them:</p>\n\n<ul>\n<li>\n<strong>analysis</strong> (zapping a chunk of text into fragments)</li>\n<li>\n<strong>the inverted index</strong> (a lightning-fast mapping of tokens to the documents in which they appear)</li>\n<li>\n<strong>the ranking algorithm</strong> (identification and ordering of information based upon its relevance to the query)</li>\n</ul>\n\n<h3>\n  <a name="analysis" href="#analysis">\n  </a>\n  Analysis\n</h3>\n\n<p>As we push documents into our search engine, they get sliced and diced into lots of little chunks. These chunks, or tokens (as we should call them from now on), are the core currency of the search engine.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Q-iffQyi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nmk9k99t3uvj2exmzy3h.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Q-iffQyi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nmk9k99t3uvj2exmzy3h.jpeg" alt="Tokens" loading="lazy" width="700" height="511"></a></p>\n\n<p>We control the way tokens get generated through an index’s schema definition. How we leverage this power has a huge effect on how the search engine behaves down the line — it’s one of the primary levers we can pull to master it. The choices are wide-ranging and include transformations such as token size (n-grams), removal of troubling stopwords (e.g., <em>the, and, this</em>), and stemming of terms (e.g., <em>books to book</em>). We will take a look at some of these in a moment.</p>\n\n<h3>\n  <a name="the-index" href="#the-index">\n  </a>\n  The Index\n</h3>\n\n<p>Pick up any nonfiction textbook and flick to the back pages. Here we have a data structure that maps the key terms of the subject at hand to the passages in which they feature most heavily.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--4QQ4fjOx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vmkgairox836voapa0ze.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--4QQ4fjOx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vmkgairox836voapa0ze.jpeg" alt="Features" loading="lazy" width="436" height="339"></a></p>\n\n<p>The <em>inverted index</em> of a search engine behaves very similarly. At a simple level, it maps the tokens present in a document to the documents in which it occurs.</p>\n\n<h3>\n  <a name="ranking" href="#ranking">\n  </a>\n  Ranking\n</h3>\n\n<p>When you search for something, the engine matches your tokenized query against the index and scores each result using a ranking algorithm. Traditionally an algorithm such as <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">TF-IDF</a> is used. It rates a document higher the more frequently the document matches a term (TF, term frequency) offset by how common that term is (IDF, inverse document frequency).</p>\n\n<p>All records are given a score and pitted against one another to identify the winners: your search results.</p>\n\n<h3>\n  <a name="so-search-engines-are-smart-right" href="#so-search-engines-are-smart-right">\n  </a>\n  So search engines are smart, right?\n</h3>\n\n<p>Not exactly. Although the engineering underneath it all is a computer scientist’s dream, search engines are utter idiots! If the tokens generated from the query do not match any in the index exactly, you are out of luck. For example, if your index has <strong>horses</strong> but the query analyzer generates <strong>horse</strong>, too bad.</p>\n\n<p>Garbage in, garbage out! It’s your job to curate.</p>\n\n<p>Don’t just blindly add reams of data to the search engine. It’s your responsibility to turn the incoming mass of text into something useful.</p>\n\n\n<hr>\n\n<h2>\n  <a name="principle-2-its-not-just-about-tokens-but-features" href="#principle-2-its-not-just-about-tokens-but-features">\n  </a>\n  Principle 2. It’s Not Just About Tokens but Features\n</h2>\n\n<p>The tokens generated from a document are more than just items in an index. They represent the core ideas about it.</p>\n\n<p>What is a feature? Let’s take the example of the classic title Dracula from our dataset.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight json"><code><span class="p">{</span><span class="w">\n    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dracula"</span><span class="p">,</span><span class="w">\n    </span><span class="nl">"genres"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">\n        </span><span class="s2">"classics"</span><span class="p">,</span><span class="w">\n        </span><span class="s2">"horror"</span><span class="p">,</span><span class="w">\n        </span><span class="s2">"fiction"</span><span class="p">,</span><span class="w">\n        </span><span class="s2">"gothic"</span><span class="p">,</span><span class="w">\n        </span><span class="s2">"paranormal"</span><span class="p">,</span><span class="w">\n        </span><span class="s2">"vampire"</span><span class="w">\n    </span><span class="p">],</span><span class="w">\n    </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">1897</span><span class="p">,</span><span class="w">\n    </span><span class="nl">"isbn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"393970124"</span><span class="p">,</span><span class="w">\n    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A Chronology and a Selected Bibliography are included."</span><span class="p">,</span><span class="w">\n    </span><span class="nl">"publisher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Norton"</span><span class="p">,</span><span class="w">\n    </span><span class="nl">"average_rating"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.98</span><span class="p">,</span><span class="w">\n    </span><span class="nl">"ratings_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">618973</span><span class="p">,</span><span class="w">\n    </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">\n        </span><span class="s2">"Bram Stoker"</span><span class="w">\n    </span><span class="p">]</span><span class="w">\n</span><span class="p">}</span><span class="w">\n</span></code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Here we see just a few of the features concerning the novel — it’s a gothic classic, published in 1897 by the author Bram Stoker, and has an average rating of 3.98/5.</p>\n\n<p>The source material will usually contain a wealth of features just sitting there ready to be picked, but often the most golden ones need to be mined from just beneath the surface. You need to model features to help communicate the ideas in your document. This technique is named <strong>feature extraction</strong>. Here you can play the mad scientist, distilling the text down to its bare essentials, stripping away all the confusion and muddiness within.</p>\n\n<p>Feature engineering takes place during the analysis phase of indexing. The search engine has several tools to help us do this effectively. Let’s review a couple of them.</p>\n\n<h3>\n  <a name="ngrams" href="#ngrams">\n  </a>\n  n-grams\n</h3>\n\n<p>The default tokenization strategy of any search engine is usually to (a) remove all punctuation and special characters, followed by (b) splitting on any whitespace. It can work quite well as an initial tactic because searching for a particular word will give you a successful match. For those long words that we have trouble spelling, however, this is not a great approach.</p>\n\n<p>Imagine searching for the book Cryptonomicon. Half of your users are just going to type “Crypton” and hit return. With the standard analyzer, this is not going to get very far. Remember that search engines are dumb, and an out-of-the-box strategy is only going to produce the single token Cryptonomicon, which will not match our search request.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--nHJpAxCQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3uk47aospf57m790ixnb.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--nHJpAxCQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3uk47aospf57m790ixnb.jpeg" alt="Bad Search" loading="lazy" width="700" height="253"></a></p>\n\n<p>N-grams, and in particular edge n-grams, are great for those fields in which you want to partially match. Take a look at the wealth of tokens generated by taking an n-grammed approach to “Cryptonomicon.”</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--uCpynJIk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7mfgi3ux6oftgvm56e7d.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--uCpynJIk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7mfgi3ux6oftgvm56e7d.jpeg" alt="Explode" loading="lazy" width="700" height="343"></a></p>\n\n<p>Using this strategy, because <em>crypto</em> is one of those tokens generated by the n-gram analyzer, we get our match.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OLNSWiR8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kh3mjrpuv846gpa90x9b.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OLNSWiR8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kh3mjrpuv846gpa90x9b.jpeg" alt="Good Search" loading="lazy" width="700" height="253"></a></p>\n\n<h3>\n  <a name="stemming" href="#stemming">\n  </a>\n  Stemming\n</h3>\n\n<p>Stemming involves getting to the root of a word. Many terms have the same core meaning: <em>quick, quickly,</em> and <em>quicker</em> all come from the same place, as do <em>happy, happier, happiest, and happiness</em>.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s---5IlbG7W--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/targ96vlexemqd6dma4y.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s---5IlbG7W--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/targ96vlexemqd6dma4y.jpeg" alt="Stemming" loading="lazy" width="700" height="350"></a></p>\n\n<p>By reducing a term to its stem, you are distilling it to its core essence. Utilizing this approach, you can translate those thoughts in the head of a user into a successful search result. You’re allowing them to converse at the level of ideas rather than worrying about syntax.</p>\n\n<p>For a more detailed dive into stemming, check out the following section in <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/stemming.html">Elasticsearch’s documentation</a>.</p>\n\n\n<hr>\n\n<h2>\n  <a name="principle-3-tuning-in-to-signals" href="#principle-3-tuning-in-to-signals">\n  </a>\n  Principle 3. Tuning In to Signals\n</h2>\n\n<p>Feature extraction is paramount to building a well-tuned search experience, but you must always keep the end user in mind while tackling it. What are the use cases for search? What kinds of items are users likely to be tracking down? What properties are most helpful in identifying or suggesting this? How can we manipulate features for maximum effect?</p>\n\n<p>We must understand the user and anticipate their intent. One approach to thinking about this (as described in the book <a href="https://www.manning.com/books/relevant-search">Relevant Search</a>) is the strength of a signal.</p>\n\n<h3>\n  <a name="signals" href="#signals">\n  </a>\n  Signals\n</h3>\n\n<p>When someone makes a search request, they’re hunting for documents that resonate most strongly with their wants. They are giving us several clues to help us help them: author, genre, title, year, etc. The documents that align most closely with the concepts respond with the strongest signal (as measured by the relevance score).</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--CcwVKGJV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mayr4dwvno9qerp9z9px.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--CcwVKGJV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mayr4dwvno9qerp9z9px.jpeg" alt="Signals" loading="lazy" width="700" height="257"></a></p>\n\n<p>Not all signals are as clear as others, and some may actively work against you. While one feature may allow for a resounding match, others may generate noise, causing a false positive and detracting from the overall quality of the search results. We have the tools, however, to amplify those signals that are crystal clear and to quieten those that may occasionally be useful but more often than not get in the way.</p>\n\n<h3>\n  <a name="boosting" href="#boosting">\n  </a>\n  Boosting\n</h3>\n\n<p>It is commonly the case that a hit on one property (title, for example) is much more valuable than on another (e.g., description). We can influence the search engine to take our preferences into account.</p>\n\n<p>By raising one field above another, it increases the importance of its match over a peer. Those that resonate with your query will do so much more clearly, and those false positives will fade into insignificance. Boosting one field over another is as simple as assigning it a positive number.</p>\n\n<p>Let’s say we fancy a classic Charles Dickens book, and we feed our search algorithm with the term <em>dickens</em>.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--nHHqbyi9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qicwu9fkb81situvakc5.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--nHHqbyi9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qicwu9fkb81situvakc5.jpeg" alt="Dickens" loading="lazy" width="700" height="375"></a></p>\n\n<p>The results are a mixed bag. Some are Charles Dickens books, for sure, were but beaten to the podium by a number of others. Your users may think it strange for Moby-Dick to win this competition! We can change that outcome by levelling the playing field and adding a boost to the authors field.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Mx3SaJ0f--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/m2let4g85k53vxnbj659.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Mx3SaJ0f--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/m2let4g85k53vxnbj659.jpeg" alt="Dickens Boost" loading="lazy" width="700" height="375"></a></p>\n\n<p>Names are often a more precise match than something in a title or description — especially a full name, but we’ll see that later. By adding a boost to the authors field, we’re emphasising those records to show as more relevant to our search.</p>\n\n<p>A word of warning though. It is a bit of an art weighting and balancing fields. Overly promote and you may end up fixing one problem (e.g., searching for the title) but introduce another (e.g., ability to search by publisher).</p>\n\n<h3>\n  <a name="match-difficulty-and-boosting" href="#match-difficulty-and-boosting">\n  </a>\n  Match difficulty and boosting\n</h3>\n\n<p>One solution to the balancing problem is to correlate the size of the weight with the difficulty of obtaining a winning match on the field.</p>\n\n<p>Properties that provide us with a crystal-clear signal include:</p>\n\n<ul>\n<li>ID</li>\n<li>Full name</li>\n<li>ISBN</li>\n</ul>\n\n<p>Hit upon one of these and you’re on to a winner. Match against the description field, however, and you can never be completely confident because of the wide breadth of the content.</p>\n\n<p>You can sleep easier elevating a feature that’s almost akin to a binary signal: It either matches or it doesn’t.</p>\n\n<h3>\n  <a name="same-text-different-analysis" href="#same-text-different-analysis">\n  </a>\n  Same text, different analysis\n</h3>\n\n<p>Consider the author’s name. There are at least two different signals you can see here:</p>\n\n<ul>\n<li>Partial match, e.g., surname: King</li>\n<li>Complete match, e.g., full name: Stephen King</li>\n</ul>\n\n<p>The latter signal is clearly of more significance than the former. It is much more valuable for us to know that the user is looking for an author by their full name. However, that doesn’t mean a partial match isn’t valuable at all, even if it could just be coincidental — you don’t always know the exact spelling of an author’s full name.</p>\n\n<p>How can we handle both cases when we have but one name field? We can use feature modelling here to split this into two separate fields. Each feature can be tuned independently, the balance giving higher precedence to the more thorough match but allowing the weaker one to add value when appropriate.</p>\n\n<h3>\n  <a name="multimatching" href="#multimatching">\n  </a>\n  Multi-matching\n</h3>\n\n<p>You do not always look for just one feature, but often mash a ton of different clues into one search string. You might search not only for an author but also specific subject matter from that author — Christmas novels by Charles Dickens, for instance.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zu2-RVn3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hmj3yjvs1xcioomganp5.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zu2-RVn3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hmj3yjvs1xcioomganp5.jpeg" alt="Search" loading="lazy" width="700" height="375"></a></p>\n\n<p>By using a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html">best-fields</a> approach, Elasticsearch is going to pick the best match of the bunch: the signal giving us the strongest reaction. This approach can get in a bit of a muddle with the cross-feature query we just saw. What we want is to match primarily against the strongest signal, <em>Christmas</em>, and then augment this with a second field to emphasize its importance.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ap0E3wXI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/x6tsx9g4dlfooqibdysw.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ap0E3wXI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/x6tsx9g4dlfooqibdysw.jpeg" alt="Search" loading="lazy" width="700" height="375"></a></p>\n\n<p>By setting up a tie-breaker, a value between 0 and 1, the search engine will still proceed to match on the best field, but then it will go one step further and use the other signals to further refine the results. In our example, Christmas could be our primary hit, with <em>Dickens</em> adding enough additional weight to hoist those novels into first place.</p>\n\n\n<hr>\n\n<h2>\n  <a name="principle-4-feedback-feedback-feedback" href="#principle-4-feedback-feedback-feedback">\n  </a>\n  Principle 4. Feedback, feedback, feedback\n</h2>\n\n<p>Search isn’t a one-way street. It’s not <em>just</em> about handling a search request and blindly serving the user; it’s critical to have a conversation with them.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--2NXHKFpi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mnkz7zccymnp4tlnyyeq.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--2NXHKFpi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mnkz7zccymnp4tlnyyeq.jpeg" alt="Knows More" loading="lazy" width="700" height="350"></a></p>\n\n<h3>\n  <a name="suggestions" href="#suggestions">\n  </a>\n  Suggestions\n</h3>\n\n<p>Often the user does not quite know what they’re seeking. They bash out a vague notion of what they want on the keyboard and see what bounces back. Without a little assistance, this can be a bit of a shot in the dark. They try, fail, and try again until they either flounder into something usable or give up.</p>\n\n<p>By presenting auto-completing suggestions, you’re giving immediate feedback on the kinds of things available, with the bonus of not needing perfect recall or spelling ability.</p>\n\n<p>Suggestions are supported out of the box by most, if not all, search engines. In Elasticsearch, it is just another (albeit special) field into which you copy your titles, author names, genres, and the like.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Z6HS8Fx9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o3tc48qtgmiie71ez7l.jpeg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Z6HS8Fx9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o3tc48qtgmiie71ez7l.jpeg" alt="Suggestions" loading="lazy" width="700" height="279"></a></p>\n\n<h3>\n  <a name="highlighting" href="#highlighting">\n  </a>\n  Highlighting\n</h3>\n\n<p>Have you ever searched for something and wondered how the heck you got the results you did? If your documents are data-rich, it can sometimes become unclear what you’ve hit when searching.</p>\n\n<p>Providing feedback by highlighting the terms that were matched can turn out to be invaluable, allowing the user to tweak their request to be more specific or to filter out unwanted results.</p>\n\n<p>For more information, read about how to highlight in the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/highlighting.html">Elasticsearch documentation</a>.</p>\n\n<h3>\n  <a name="monitoring-and-iteration" href="#monitoring-and-iteration">\n  </a>\n  Monitoring and iteration\n</h3>\n\n<blockquote>\n<p>“What gets measured gets managed” — Peter Drucker</p>\n</blockquote>\n\n<p>Building a truly useful search experience requires learning from your users. Domain expertise is clearly important, but actually seeing what your users come up with can reveal some key insights.</p>\n\n<p><strong>Bouncing around?</strong> Search after search after search and still not sticking on any one result. Why is this? What terms are being looked for?</p>\n\n<p><strong>No results?</strong> Are a lot of different users looking for something that doesn’t return anything useful? Is your search engine badly tuned, or maybe there’s an opportunity to be pounced upon.</p>\n\n<p><strong>A successful outcome?</strong> Did the session have a successful outcome? Was something bought, watched, read?</p>\n\n<p>Gather and analyze this information to continually improve your solution.</p>\n\n\n<hr>\n\n<h2>\n  <a name="the-last-word" href="#the-last-word">\n  </a>\n  The Last Word\n</h2>\n\n<p>We’ve touched upon quite a few different aspects that need to be considered when putting together an engaging search experience. We’ve only just scratched the surface here, and I’d advise checking out the resources below for more information.</p>\n\n<p>Search is a complete subject area in its own right, branching out at the more cutting edges into related topics, including recommendations and machine learning. As with most engineering projects, a successful outcome can be achieved by approaching it in small steps. Make sure you start simple, collect feedback, iterate, and evolve as required.</p>\n\n<p>Thanks for reading!</p>\n\n\n<hr>\n\n<h2>\n  <a name="resources" href="#resources">\n  </a>\n  Resources\n</h2>\n\n<ul>\n<li><a href="https://www.manning.com/books/relevant-search">Relevant Search</a></li>\n<li><a href="https://www.manning.com/books/elasticsearch-in-action">Elasticsearch in Action</a></li>\n<li><a href="https://github.com/lucas-matt/search_playground">https://github.com/lucas-matt/search_playground</a></li>\n</ul>\n\n',t.body_markdown='Search is everywhere. How would you survive a day without it!? It’s on every website and part of every product. Whether you’re purchasing underwear, trawling Netflix for a Friday night movie, or even leading a cutting-edge research team, it can be a modern miracle to summon what you need at the cost of a few key presses.\n\nDespite being ubiquitous, why is search so often terrible? It’s frequently seen as second class, a bonus. It is plugged in and expected to work out of the box. It takes time, thought, and effort to craft a well-balanced search experience.\n\n---\n\n## Before We Begin\n\nTalking about concepts without an actual example to stare at can often become a challenge. For this post, we’ll be using a sample of around 10,000 books sourced from the [Goodreads](https://www.goodreads.com/) website. The data set itself, and scripts to load it into [Elasticsearch](https://www.elastic.co/elasticsearch/), can be found here:\n\n[https://github.com/lucas-matt/search_playground](https://github.com/lucas-matt/search_playground)\n\n---\n\n## Principle 1. Search Engines Are Dumb, You Are Not\n\nOften search engines are seen as just another database. They do look and act similar in many ways, but once you scratch the surface, you reveal a wealth of fancy algorithms and highly optimized data structures that differ quite drastically from a standard data store.\n\nThere are a number of parts to any search tool that we need to understand so that we can build upon them:\n\n* **analysis** (zapping a chunk of text into fragments)\n* **the inverted index** (a lightning-fast mapping of tokens to the documents in which they appear)\n* **the ranking algorithm** (identification and ordering of information based upon its relevance to the query)\n\n### Analysis\n\nAs we push documents into our search engine, they get sliced and diced into lots of little chunks. These chunks, or tokens (as we should call them from now on), are the core currency of the search engine.\n\n![Tokens](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nmk9k99t3uvj2exmzy3h.jpeg)\n\nWe control the way tokens get generated through an index’s schema definition. How we leverage this power has a huge effect on how the search engine behaves down the line — it’s one of the primary levers we can pull to master it. The choices are wide-ranging and include transformations such as token size (n-grams), removal of troubling stopwords (e.g., *the, and, this*), and stemming of terms (e.g., *books to book*). We will take a look at some of these in a moment.\n\n### The Index\n\nPick up any nonfiction textbook and flick to the back pages. Here we have a data structure that maps the key terms of the subject at hand to the passages in which they feature most heavily.\n\n![Features](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vmkgairox836voapa0ze.jpeg)\n\nThe *inverted index* of a search engine behaves very similarly. At a simple level, it maps the tokens present in a document to the documents in which it occurs.\n\n### Ranking\n\nWhen you search for something, the engine matches your tokenized query against the index and scores each result using a ranking algorithm. Traditionally an algorithm such as [TF-IDF](https://en.wikipedia.org/wiki/Tf%E2%80%93idf) is used. It rates a document higher the more frequently the document matches a term (TF, term frequency) offset by how common that term is (IDF, inverse document frequency).\n\nAll records are given a score and pitted against one another to identify the winners: your search results.\n\n### So search engines are smart, right?\n\nNot exactly. Although the engineering underneath it all is a computer scientist’s dream, search engines are utter idiots! If the tokens generated from the query do not match any in the index exactly, you are out of luck. For example, if your index has **horses** but the query analyzer generates **horse**, too bad.\n\nGarbage in, garbage out! It’s your job to curate.\n\nDon’t just blindly add reams of data to the search engine. It’s your responsibility to turn the incoming mass of text into something useful.\n\n---\n\n## Principle 2. It’s Not Just About Tokens but Features\n\nThe tokens generated from a document are more than just items in an index. They represent the core ideas about it.\n\nWhat is a feature? Let’s take the example of the classic title Dracula from our dataset.\n\n```json\n{\n\t"title": "Dracula",\n\t"genres": [\n\t\t"classics",\n\t\t"horror",\n\t\t"fiction",\n\t\t"gothic",\n\t\t"paranormal",\n\t\t"vampire"\n\t],\n\t"year": 1897,\n\t"isbn": "393970124",\n\t"description": "A Chronology and a Selected Bibliography are included.",\n\t"publisher": "Norton",\n\t"average_rating": 3.98,\n\t"ratings_count": 618973,\n\t"authors": [\n\t\t"Bram Stoker"\n\t]\n}\n```\n\nHere we see just a few of the features concerning the novel — it’s a gothic classic, published in 1897 by the author Bram Stoker, and has an average rating of 3.98/5.\n\nThe source material will usually contain a wealth of features just sitting there ready to be picked, but often the most golden ones need to be mined from just beneath the surface. You need to model features to help communicate the ideas in your document. This technique is named **feature extraction**. Here you can play the mad scientist, distilling the text down to its bare essentials, stripping away all the confusion and muddiness within.\n\nFeature engineering takes place during the analysis phase of indexing. The search engine has several tools to help us do this effectively. Let’s review a couple of them.\n\n### n-grams\n\nThe default tokenization strategy of any search engine is usually to (a) remove all punctuation and special characters, followed by (b) splitting on any whitespace. It can work quite well as an initial tactic because searching for a particular word will give you a successful match. For those long words that we have trouble spelling, however, this is not a great approach.\n\nImagine searching for the book Cryptonomicon. Half of your users are just going to type “Crypton” and hit return. With the standard analyzer, this is not going to get very far. Remember that search engines are dumb, and an out-of-the-box strategy is only going to produce the single token Cryptonomicon, which will not match our search request.\n\n![Bad Search](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3uk47aospf57m790ixnb.jpeg)\n\nN-grams, and in particular edge n-grams, are great for those fields in which you want to partially match. Take a look at the wealth of tokens generated by taking an n-grammed approach to “Cryptonomicon.”\n\n![Explode](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7mfgi3ux6oftgvm56e7d.jpeg)\n\nUsing this strategy, because *crypto* is one of those tokens generated by the n-gram analyzer, we get our match.\n\n![Good Search](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kh3mjrpuv846gpa90x9b.jpeg)\n\n### Stemming\n\nStemming involves getting to the root of a word. Many terms have the same core meaning: *quick, quickly,* and *quicker* all come from the same place, as do *happy, happier, happiest, and happiness*.\n\n![Stemming](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/targ96vlexemqd6dma4y.jpeg)\n\nBy reducing a term to its stem, you are distilling it to its core essence. Utilizing this approach, you can translate those thoughts in the head of a user into a successful search result. You’re allowing them to converse at the level of ideas rather than worrying about syntax.\n\nFor a more detailed dive into stemming, check out the following section in [Elasticsearch’s documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/stemming.html).\n\n---\n\n## Principle 3. Tuning In to Signals\n\nFeature extraction is paramount to building a well-tuned search experience, but you must always keep the end user in mind while tackling it. What are the use cases for search? What kinds of items are users likely to be tracking down? What properties are most helpful in identifying or suggesting this? How can we manipulate features for maximum effect?\n\nWe must understand the user and anticipate their intent. One approach to thinking about this (as described in the book [Relevant Search](https://www.manning.com/books/relevant-search)) is the strength of a signal.\n\n### Signals\n\nWhen someone makes a search request, they’re hunting for documents that resonate most strongly with their wants. They are giving us several clues to help us help them: author, genre, title, year, etc. The documents that align most closely with the concepts respond with the strongest signal (as measured by the relevance score).\n\n![Signals](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mayr4dwvno9qerp9z9px.jpeg)\n\nNot all signals are as clear as others, and some may actively work against you. While one feature may allow for a resounding match, others may generate noise, causing a false positive and detracting from the overall quality of the search results. We have the tools, however, to amplify those signals that are crystal clear and to quieten those that may occasionally be useful but more often than not get in the way.\n\n### Boosting\n\nIt is commonly the case that a hit on one property (title, for example) is much more valuable than on another (e.g., description). We can influence the search engine to take our preferences into account.\n\nBy raising one field above another, it increases the importance of its match over a peer. Those that resonate with your query will do so much more clearly, and those false positives will fade into insignificance. Boosting one field over another is as simple as assigning it a positive number.\n\nLet’s say we fancy a classic Charles Dickens book, and we feed our search algorithm with the term *dickens*.\n\n![Dickens](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qicwu9fkb81situvakc5.jpeg)\n\nThe results are a mixed bag. Some are Charles Dickens books, for sure, were but beaten to the podium by a number of others. Your users may think it strange for Moby-Dick to win this competition! We can change that outcome by levelling the playing field and adding a boost to the authors field.\n\n![Dickens Boost](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/m2let4g85k53vxnbj659.jpeg)\n\nNames are often a more precise match than something in a title or description — especially a full name, but we’ll see that later. By adding a boost to the authors field, we’re emphasising those records to show as more relevant to our search.\n\nA word of warning though. It is a bit of an art weighting and balancing fields. Overly promote and you may end up fixing one problem (e.g., searching for the title) but introduce another (e.g., ability to search by publisher).\n\n### Match difficulty and boosting\n\nOne solution to the balancing problem is to correlate the size of the weight with the difficulty of obtaining a winning match on the field.\n\nProperties that provide us with a crystal-clear signal include:\n\n* ID\n* Full name\n* ISBN\n\nHit upon one of these and you’re on to a winner. Match against the description field, however, and you can never be completely confident because of the wide breadth of the content.\n\nYou can sleep easier elevating a feature that’s almost akin to a binary signal: It either matches or it doesn’t.\n\n### Same text, different analysis\n\nConsider the author’s name. There are at least two different signals you can see here:\n\n* Partial match, e.g., surname: King\n* Complete match, e.g., full name: Stephen King\n\nThe latter signal is clearly of more significance than the former. It is much more valuable for us to know that the user is looking for an author by their full name. However, that doesn’t mean a partial match isn’t valuable at all, even if it could just be coincidental — you don’t always know the exact spelling of an author’s full name.\n\nHow can we handle both cases when we have but one name field? We can use feature modelling here to split this into two separate fields. Each feature can be tuned independently, the balance giving higher precedence to the more thorough match but allowing the weaker one to add value when appropriate.\n\n### Multi-matching\n\nYou do not always look for just one feature, but often mash a ton of different clues into one search string. You might search not only for an author but also specific subject matter from that author — Christmas novels by Charles Dickens, for instance.\n\n![Search](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hmj3yjvs1xcioomganp5.jpeg)\n\nBy using a [best-fields](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html) approach, Elasticsearch is going to pick the best match of the bunch: the signal giving us the strongest reaction. This approach can get in a bit of a muddle with the cross-feature query we just saw. What we want is to match primarily against the strongest signal, *Christmas*, and then augment this with a second field to emphasize its importance.\n\n![Search](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/x6tsx9g4dlfooqibdysw.jpeg)\n\nBy setting up a tie-breaker, a value between 0 and 1, the search engine will still proceed to match on the best field, but then it will go one step further and use the other signals to further refine the results. In our example, Christmas could be our primary hit, with *Dickens* adding enough additional weight to hoist those novels into first place.\n\n---\n\n## Principle 4. Feedback, feedback, feedback\n\nSearch isn’t a one-way street. It’s not *just* about handling a search request and blindly serving the user; it’s critical to have a conversation with them.\n\n![Knows More](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mnkz7zccymnp4tlnyyeq.jpeg)\n\n### Suggestions\n\nOften the user does not quite know what they’re seeking. They bash out a vague notion of what they want on the keyboard and see what bounces back. Without a little assistance, this can be a bit of a shot in the dark. They try, fail, and try again until they either flounder into something usable or give up.\n\nBy presenting auto-completing suggestions, you’re giving immediate feedback on the kinds of things available, with the bonus of not needing perfect recall or spelling ability.\n\nSuggestions are supported out of the box by most, if not all, search engines. In Elasticsearch, it is just another (albeit special) field into which you copy your titles, author names, genres, and the like.\n\n![Suggestions](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4o3tc48qtgmiie71ez7l.jpeg)\n\n### Highlighting\n\nHave you ever searched for something and wondered how the heck you got the results you did? If your documents are data-rich, it can sometimes become unclear what you’ve hit when searching.\n\nProviding feedback by highlighting the terms that were matched can turn out to be invaluable, allowing the user to tweak their request to be more specific or to filter out unwanted results.\n\nFor more information, read about how to highlight in the [Elasticsearch documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/highlighting.html).\n\n### Monitoring and iteration\n\n> “What gets measured gets managed” — Peter Drucker\n\nBuilding a truly useful search experience requires learning from your users. Domain expertise is clearly important, but actually seeing what your users come up with can reveal some key insights.\n\n**Bouncing around?** Search after search after search and still not sticking on any one result. Why is this? What terms are being looked for?\n\n**No results?** Are a lot of different users looking for something that doesn’t return anything useful? Is your search engine badly tuned, or maybe there’s an opportunity to be pounced upon.\n\n**A successful outcome?** Did the session have a successful outcome? Was something bought, watched, read?\n\nGather and analyze this information to continually improve your solution.\n\n---\n\n## The Last Word\n\nWe’ve touched upon quite a few different aspects that need to be considered when putting together an engaging search experience. We’ve only just scratched the surface here, and I’d advise checking out the resources below for more information.\n\nSearch is a complete subject area in its own right, branching out at the more cutting edges into related topics, including recommendations and machine learning. As with most engineering projects, a successful outcome can be achieved by approaching it in small steps. Make sure you start simple, collect feedback, iterate, and evolve as required.\n\nThanks for reading!\n\n---\n\n## Resources\n\n* [Relevant Search](https://www.manning.com/books/relevant-search)\n* [Elasticsearch in Action](https://www.manning.com/books/elasticsearch-in-action)\n* [https://github.com/lucas-matt/search_playground](https://github.com/lucas-matt/search_playground)',t.user={name:"Matthew Lucas",username:"notmattlucas",twitter_username:"NotMattLucas",github_username:"lucas-matt",website_url:"https://notmattlucas.com",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--zWmrxr53--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/745337/b5140acc-3a38-459b-baf8-b7262f693582.jpeg",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--krJPY7H0--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/745337/b5140acc-3a38-459b-baf8-b7262f693582.jpeg"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:t}},error:e,state:{currentArticle:t},serverRendered:!0,routePath:"/notmattlucas/915854",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:e}}}}(null,"2021-12-02T18:55:06Z",{})</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
