<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>The PaymentIntents Lifecycle</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>The PaymentIntents Lifecycle</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/stripe" class="tag" data-v-70afb46a>
          #stripe
        </a><a href="/nuxtstop/t/tutorial" class="tag" data-v-70afb46a>
          #tutorial
        </a><a href="/nuxtstop/t/webdev" class="tag" data-v-70afb46a>
          #webdev
        </a><a href="/nuxtstop/t/stripefundamentals" class="tag" data-v-70afb46a>
          #stripefundamentals
        </a></div> <!----> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            12
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            2
          </span></div> <time data-v-70afb46a>Nov 15 '21</time></div></header> <div class="content" data-v-70afb46a><p><em>Stripe tries to make payments as easy as can be, but sometimes it can be a bit overwhelming with all the industry terms and APIs available to you. This Stripe Payment Fundamentals series is a fortnightly blog where we tackle a fundamental topic each time and explain them in simple terms.</em></p>

<p><em>This week, <a href="https://twitter.com/paul_asjes">Paul Asjes</a> will explain how the PaymentIntents lifecycle works and how it affects your payments.</em></p>

<p><em>If you haven’t read the <a href="https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646">previous installment</a> of this series, you should check that out first to get a grasp on what these APIs actually do.</em></p>

<h2>
  <a name="previous-articles-in-this-series" href="#previous-articles-in-this-series">
  </a>
  Previous articles in this series
</h2>

<ul>
<li><a href="https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646">Fundamentals of the PaymentIntents and PaymentMethods APIs</a></li>
</ul>


<div class="ltag__link">
  <a href="/stripe" class="ltag__link__link">
    <div class="ltag__link__org__pic">
      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--q8QgCIVO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--kfXlFRLh--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/1963/8edb6241-abf3-463c-83a2-2d8a7d381d75.png" alt="Stripe" loading="lazy" width="150" height="150">
      <div class="ltag__link__user__pic">
        <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zcWHFVpu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--x4l5JCB2--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/666031/0e8b0768-4e62-4995-a956-daf4f350b105.jpg" alt="" loading="lazy" width="150" height="150">
      </div>
    </div>
  </a>
  <a href="/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646" class="ltag__link__link">
    <div class="ltag__link__content">
      <h2>Fundamentals of the PaymentIntents and PaymentMethods APIs</h2>
      <h3>Charles Watkins for Stripe ・ Oct 28 '21 ・ 4 min read</h3>
      <div class="ltag__link__taglist">
        <span class="ltag__link__tag">#stripe</span>
        <span class="ltag__link__tag">#webdev</span>
        <span class="ltag__link__tag">#tutorial</span>
        <span class="ltag__link__tag">#stripefundamentals</span>
      </div>
    </div>
  </a>
</div>



<hr>

<p>What do we mean by “lifecycles”? What do the various PaymentIntent statuses mean? What is 3DS and why does it matter? These are all questions we’re going to address in this edition of Stripe Payment Fundamentals, starting with the PaymentIntent lifecycle.</p>

<h2>
  <a name="what-does-lifecycle-mean" href="#what-does-lifecycle-mean">
  </a>
  What does “lifecycle” mean?
</h2>

<p>In the context of PaymentIntents, the <a href="https://stripe.com/docs/payments/intents">lifecycle</a> is the list of states that the PaymentIntent can be in and how it progresses through these states. Since PaymentIntents <a href="https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646">act as the source of truth of your payment</a>, understanding these states will help you identify issues like payment churn in your application.</p>

<p>Let’s first list out all the possible statuses a PaymentIntent can have:</p>

<ul>
<li><code>requires_payment_method</code></li>
<li><code>requires_confirmation</code></li>
<li><code>requires_action</code></li>
<li><code>processing</code></li>
<li><code>requires_capture</code></li>
<li><code>succeeded</code></li>
<li><code>canceled</code></li>
</ul>

<p>We’ll get to what these each mean individually, but first let’s examine what the lifecycle looks like for the most basic form of payment.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--lIeOnZF4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713281761_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--lIeOnZF4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713281761_image.png" alt="Simple PaymentIntent Lifecycle" loading="lazy" width="880" height="341"></a></p>

<p>That’s delightfully simple, let’s examine what it means.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--KJfh092X--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713487519_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--KJfh092X--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713487519_image.png" alt="Simple PaymentIntent Lifecycle - requires_payment_method" loading="lazy" width="880" height="98"></a></p>

<p>A PaymentIntent was created, it has the beginning state of <code>requires_payment_method</code> indicating that a PaymentMethod is needed before it can progress.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xOojszxh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713503421_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xOojszxh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713503421_image.png" alt="Simple PaymentIntent Lifecycle - processing" loading="lazy" width="880" height="98"></a></p>

<p>A PaymentMethod is attached to the PaymentIntent and the PaymentIntent is confirmed (for more information on confirmation, see the last edition of this series [link]). The payment details, amount, and currency are submitted and we’re awaiting the outcome as indicated by the state <code>processing</code>.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a>💡 When creating card payments it’s unlikely you’ll catch a PaymentIntent in the <code>processing</code> state, as card transactions tend to be handled within seconds. Other PaymentMethods can take up to a few days to complete.<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--f-PbK5O5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713541968_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--f-PbK5O5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713541968_image.png" alt="Simple PaymentIntent Lifecycle - completed" loading="lazy" width="880" height="98"></a></p>

<p>The payment has completed and we’ve transitioned to the success end state of <code>succeeded</code>.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a>💡 Once a PaymentIntent has reached an end state (<code>succeeded</code> or <code>canceled</code>) its state can no longer change and only its <code>metadata</code> property can be edited.<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a></p>

<p>This is the flow we’d expect for a payment involving a card that doesn’t require any authentication. It can in fact be done in a single API call:</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>curl https://api.stripe.com/v1/payment_intents \
  -u sk_test_xxxxxxxxxxxx: \
  -d amount=1000 \
  -d currency=usd \
  -d "payment_method_types[]"=card 
  -d payment_method=pm_xxxxxxxxxxxx
  -d confirm=true
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>This API call creates the PaymentIntent with an amount and currency, immediately specifies a PaymentMethod, and instructs the API to confirm the payment, all in one request.</p>

<p>Here’s a slightly more complex flow:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--jimLL7ve--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979218961_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--jimLL7ve--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979218961_image.png" alt="Complex PaymentIntent Lifecycle" loading="lazy" width="880" height="72"></a></p>

<p>This is almost identical to our earlier flow, but adds a new <code>requires_action</code> state.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--DT2SDVWD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979237001_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--DT2SDVWD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979237001_image.png" alt="Complex PaymentIntent Lifecycle - requires_action" loading="lazy" width="880" height="72"></a></p>

<p>Any state that begins with <code>requires</code> indicates that the PaymentIntent will not progress to a different state unless some action is taken. <code>requires_action</code> is no different here. Our PaymentIntent enters this state if the payment requires authentication before it can be processed. When working with cards, the most common type of authentication is 3D Secure (3DS).</p>
<h2>
  <a name="3ds-and-sca" href="#3ds-and-sca">
  </a>
  3DS and SCA
</h2>

<p>You can think of 3DS as two form authentication (2FA) for your credit card. It occurs when you attempt to make a payment but the issuing bank wants to ensure that it’s really you who’s making the request. </p>

<p>In September 2019 the European Union put the <a href="https://stripe.com/docs/strong-customer-authentication">Strong Customer Authentication</a> (SCA) ruling into effect. In practice this means that European cards that are enrolled now have mandatory 3DS checks before a payment can be completed. If said check can’t be completed, either due to the integration not supporting this flow or the customer failing the authentication check, the payment is declined by the issuing bank.</p>

<p>As a response to this, Stripe developed the PaymentIntents API, intended to abstract the complexity of SCA and other authentication laws away from your integration. Even if you don’t regularly do business in the EU, it’s highly recommended you build your Stripe integration with 3DS in mind. This has the benefit of ensuring your integration is ready if new laws similar to SCA are enforced within the regions of your customers.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a>💡 If you’re integrating with Checkout or Payment Links, then 3DS is automatically handled for you.<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a></p>
<h2>
  <a name="but-what-do-all-the-statuses-mean" href="#but-what-do-all-the-statuses-mean">
  </a>
  But what do all the statuses mean?
</h2>

<p>Now that we’ve established some concepts, let’s go through the list again with a simple explanation for each status.</p>

<ul>
<li>
<code>requires_payment_method</code> - The PaymentIntent needs an attached PaymentMethod before it can progress.</li>
<li>
<code>requires_confirmation</code> - A PaymentMethod was attached and the PaymentIntent needs to be confirmed.</li>
<li>
<code>requires_action</code> - After confirming, further action is required. Likely a 3DS check.</li>
<li>
<code>processing</code> - The payment is being processed, this status will automatically transfer to a new state without requiring your input.</li>
<li>
<code>requires_capture</code> - A special state only seen if your PaymentIntent is in <a href="https://stripe.com/docs/payments/capture-later">manual confirmation mode</a>. The PaymentIntent needs to be instructed to capture the funds.</li>
<li>
<code>succeeded</code> - The payment has succeeded. This is an end state.</li>
<li>
<code>canceled</code> - The payment was canceled. This is an end state.</li>
</ul>

<p>Note that the only end states are when the payment succeeds or is explicitly cancelled by you. In the case of a payment being declined, the PaymentIntent will automatically detach the PaymentMethod and transition back to the <code>requires_payment_method</code> status.</p>

<p>When examining the payments on your account, seeing what state abandoned payments are left in can help you identify issues with your checkout experience. For instance, a large amount of PaymentIntents in the  <code>requires_action</code> status can indicate that your users are churning when confronted with 3DS. Same scenario but with <code>requires_payment_method</code> can mean that there’s a problem with your integration where PaymentMethods aren’t being created and attached correctly.</p>

<hr>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xjR-4Nm8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--31Nrl8Cz--/c_limit%252Cf_auto%252Cfl_progressive%252Cq_auto%252Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rzuq6iubf4348lohitil.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xjR-4Nm8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--31Nrl8Cz--/c_limit%252Cf_auto%252Cfl_progressive%252Cq_auto%252Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rzuq6iubf4348lohitil.png" alt="https://stripe.com/docs/payments/quickstart" loading="lazy" width="880" height="338"></a></p>
<h2>
  <a name="build-an-integration-using-the-integration-builder" href="#build-an-integration-using-the-integration-builder">
  </a>
  Build an integration using the integration builder
</h2>

<p>Now that you’ve learned about the PaymentIntents lifecycle, learn how to build your own integration.</p>

<p>Stripe’s quick start <a href="https://stripe.com/docs/payments/quickstart">integration builder</a> walks through the many supported languages for client and server-side code.</p>

<p>You can learn more about integrating PaymentIntents in this <a href="https://www.youtube.com/watch?v=WG4ehXSEpz4">Stripe Developers video</a>.</p>

<p><iframe width="710" height="399" src="https://www.youtube.com/embed/WG4ehXSEpz4" allowfullscreen loading="lazy">
</iframe>
</p>

<h2>
  <a name="related-resources" href="#related-resources">
  </a>
  Related resources:
</h2>

<ul>
<li><a href="https://stripe.com/docs/payments/payment-intents">The Payment Intents API</a></li>
<li><a href="https://stripe.com/docs/strong-customer-authentication">Strong Customer Authentication readiness</a></li>
<li><a href="https://stripe.com/docs/payments/checkout">Stripe Checkout</a></li>
<li><a href="https://stripe.com/docs/payments/payment-links">Share a payment link</a></li>
<li><a href="https://stripe.com/docs/payments/quickstart">Custom payment flow</a></li>
</ul>

<h2>
  <a name="next-up-payment-element-vs-checkout-vs-payment-links" href="#next-up-payment-element-vs-checkout-vs-payment-links">
  </a>
  Next up: Payment Element vs Checkout vs Payment Links
</h2>

<p>In our next post in the Stripe Payment Fundamentals series, we’ll introduce the different Stripe products available to you for collecting payments and when you should choose one over the other.</p>

<p>In the meanwhile, you can stay up to date with Stripe in a few ways:</p>

<p>📣 <a href="https://twitter.com/stripedev">Follow us on Twitter</a><br>
💬 <a href="https://stripe.com/go/developer-chat">Join the official Discord server</a><br>
📺 Subscribe to our <a href="https://www.youtube.com/stripedevelopers">Youtube channel</a><br>
📧 <a href="https://go.stripe.global/dev-digest">Sign up for the Dev Digest</a></p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/paulasjes/the-paymentintents-lifecycle-4f5o" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(e,t,a,n,i){return a.type_of="article",a.id=898756,a.title="The PaymentIntents Lifecycle",a.description="Stripe tries to make payments as easy as can be, but sometimes it can be a bit overwhelming with all...",a.readable_publish_date="Nov 15 '21",a.slug="the-paymentintents-lifecycle-4f5o",a.path="/stripe/the-paymentintents-lifecycle-4f5o",a.url=n,a.comments_count=2,a.public_reactions_count=12,a.collection_id=e,a.published_timestamp=i,a.positive_reactions_count=12,a.cover_image=e,a.social_image="https://dev.to/social_previews/article/898756.png",a.canonical_url=n,a.created_at="2021-11-15T12:46:31Z",a.edited_at="2022-03-04T12:34:13Z",a.crossposted_at=e,a.published_at=i,a.last_comment_at="2022-03-23T17:59:55Z",a.reading_time_minutes=6,a.tag_list="stripe, tutorial, webdev, stripefundamentals",a.tags=[t,"tutorial","webdev","stripefundamentals"],a.body_html='<p><em>Stripe tries to make payments as easy as can be, but sometimes it can be a bit overwhelming with all the industry terms and APIs available to you. This Stripe Payment Fundamentals series is a fortnightly blog where we tackle a fundamental topic each time and explain them in simple terms.</em></p>\n\n<p><em>This week, <a href="https://twitter.com/paul_asjes">Paul Asjes</a> will explain how the PaymentIntents lifecycle works and how it affects your payments.</em></p>\n\n<p><em>If you haven’t read the <a href="https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646">previous installment</a> of this series, you should check that out first to get a grasp on what these APIs actually do.</em></p>\n\n<h2>\n  <a name="previous-articles-in-this-series" href="#previous-articles-in-this-series">\n  </a>\n  Previous articles in this series\n</h2>\n\n<ul>\n<li><a href="https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646">Fundamentals of the PaymentIntents and PaymentMethods APIs</a></li>\n</ul>\n\n\n<div class="ltag__link">\n  <a href="/stripe" class="ltag__link__link">\n    <div class="ltag__link__org__pic">\n      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--q8QgCIVO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--kfXlFRLh--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/1963/8edb6241-abf3-463c-83a2-2d8a7d381d75.png" alt="Stripe" loading="lazy" width="150" height="150">\n      <div class="ltag__link__user__pic">\n        <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zcWHFVpu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--x4l5JCB2--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/666031/0e8b0768-4e62-4995-a956-daf4f350b105.jpg" alt="" loading="lazy" width="150" height="150">\n      </div>\n    </div>\n  </a>\n  <a href="/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646" class="ltag__link__link">\n    <div class="ltag__link__content">\n      <h2>Fundamentals of the PaymentIntents and PaymentMethods APIs</h2>\n      <h3>Charles Watkins for Stripe ・ Oct 28 \'21 ・ 4 min read</h3>\n      <div class="ltag__link__taglist">\n        <span class="ltag__link__tag">#stripe</span>\n        <span class="ltag__link__tag">#webdev</span>\n        <span class="ltag__link__tag">#tutorial</span>\n        <span class="ltag__link__tag">#stripefundamentals</span>\n      </div>\n    </div>\n  </a>\n</div>\n\n\n\n<hr>\n\n<p>What do we mean by “lifecycles”? What do the various PaymentIntent statuses mean? What is 3DS and why does it matter? These are all questions we’re going to address in this edition of Stripe Payment Fundamentals, starting with the PaymentIntent lifecycle.</p>\n\n<h2>\n  <a name="what-does-lifecycle-mean" href="#what-does-lifecycle-mean">\n  </a>\n  What does “lifecycle” mean?\n</h2>\n\n<p>In the context of PaymentIntents, the <a href="https://stripe.com/docs/payments/intents">lifecycle</a> is the list of states that the PaymentIntent can be in and how it progresses through these states. Since PaymentIntents <a href="https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646">act as the source of truth of your payment</a>, understanding these states will help you identify issues like payment churn in your application.</p>\n\n<p>Let’s first list out all the possible statuses a PaymentIntent can have:</p>\n\n<ul>\n<li><code>requires_payment_method</code></li>\n<li><code>requires_confirmation</code></li>\n<li><code>requires_action</code></li>\n<li><code>processing</code></li>\n<li><code>requires_capture</code></li>\n<li><code>succeeded</code></li>\n<li><code>canceled</code></li>\n</ul>\n\n<p>We’ll get to what these each mean individually, but first let’s examine what the lifecycle looks like for the most basic form of payment.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--lIeOnZF4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713281761_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--lIeOnZF4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713281761_image.png" alt="Simple PaymentIntent Lifecycle" loading="lazy" width="880" height="341"></a></p>\n\n<p>That’s delightfully simple, let’s examine what it means.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--KJfh092X--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713487519_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--KJfh092X--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713487519_image.png" alt="Simple PaymentIntent Lifecycle - requires_payment_method" loading="lazy" width="880" height="98"></a></p>\n\n<p>A PaymentIntent was created, it has the beginning state of <code>requires_payment_method</code> indicating that a PaymentMethod is needed before it can progress.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xOojszxh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713503421_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xOojszxh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713503421_image.png" alt="Simple PaymentIntent Lifecycle - processing" loading="lazy" width="880" height="98"></a></p>\n\n<p>A PaymentMethod is attached to the PaymentIntent and the PaymentIntent is confirmed (for more information on confirmation, see the last edition of this series [link]). The payment details, amount, and currency are submitted and we’re awaiting the outcome as indicated by the state <code>processing</code>.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a>💡 When creating card payments it’s unlikely you’ll catch a PaymentIntent in the <code>processing</code> state, as card transactions tend to be handled within seconds. Other PaymentMethods can take up to a few days to complete.<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--f-PbK5O5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713541968_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--f-PbK5O5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713541968_image.png" alt="Simple PaymentIntent Lifecycle - completed" loading="lazy" width="880" height="98"></a></p>\n\n<p>The payment has completed and we’ve transitioned to the success end state of <code>succeeded</code>.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a>💡 Once a PaymentIntent has reached an end state (<code>succeeded</code> or <code>canceled</code>) its state can no longer change and only its <code>metadata</code> property can be edited.<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a></p>\n\n<p>This is the flow we’d expect for a payment involving a card that doesn’t require any authentication. It can in fact be done in a single API call:</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>curl https://api.stripe.com/v1/payment_intents \\\n  -u sk_test_xxxxxxxxxxxx: \\\n  -d amount=1000 \\\n  -d currency=usd \\\n  -d "payment_method_types[]"=card \n  -d payment_method=pm_xxxxxxxxxxxx\n  -d confirm=true\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>This API call creates the PaymentIntent with an amount and currency, immediately specifies a PaymentMethod, and instructs the API to confirm the payment, all in one request.</p>\n\n<p>Here’s a slightly more complex flow:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--jimLL7ve--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979218961_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--jimLL7ve--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979218961_image.png" alt="Complex PaymentIntent Lifecycle" loading="lazy" width="880" height="72"></a></p>\n\n<p>This is almost identical to our earlier flow, but adds a new <code>requires_action</code> state.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--DT2SDVWD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979237001_image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--DT2SDVWD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979237001_image.png" alt="Complex PaymentIntent Lifecycle - requires_action" loading="lazy" width="880" height="72"></a></p>\n\n<p>Any state that begins with <code>requires</code> indicates that the PaymentIntent will not progress to a different state unless some action is taken. <code>requires_action</code> is no different here. Our PaymentIntent enters this state if the payment requires authentication before it can be processed. When working with cards, the most common type of authentication is 3D Secure (3DS).</p>\n<h2>\n  <a name="3ds-and-sca" href="#3ds-and-sca">\n  </a>\n  3DS and SCA\n</h2>\n\n<p>You can think of 3DS as two form authentication (2FA) for your credit card. It occurs when you attempt to make a payment but the issuing bank wants to ensure that it’s really you who’s making the request. </p>\n\n<p>In September 2019 the European Union put the <a href="https://stripe.com/docs/strong-customer-authentication">Strong Customer Authentication</a> (SCA) ruling into effect. In practice this means that European cards that are enrolled now have mandatory 3DS checks before a payment can be completed. If said check can’t be completed, either due to the integration not supporting this flow or the customer failing the authentication check, the payment is declined by the issuing bank.</p>\n\n<p>As a response to this, Stripe developed the PaymentIntents API, intended to abstract the complexity of SCA and other authentication laws away from your integration. Even if you don’t regularly do business in the EU, it’s highly recommended you build your Stripe integration with 3DS in mind. This has the benefit of ensuring your integration is ready if new laws similar to SCA are enforced within the regions of your customers.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a>💡 If you’re integrating with Checkout or Payment Links, then 3DS is automatically handled for you.<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XRaNCJc4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png" alt="divider" loading="lazy" width="818" height="3"></a></p>\n<h2>\n  <a name="but-what-do-all-the-statuses-mean" href="#but-what-do-all-the-statuses-mean">\n  </a>\n  But what do all the statuses mean?\n</h2>\n\n<p>Now that we’ve established some concepts, let’s go through the list again with a simple explanation for each status.</p>\n\n<ul>\n<li>\n<code>requires_payment_method</code> - The PaymentIntent needs an attached PaymentMethod before it can progress.</li>\n<li>\n<code>requires_confirmation</code> - A PaymentMethod was attached and the PaymentIntent needs to be confirmed.</li>\n<li>\n<code>requires_action</code> - After confirming, further action is required. Likely a 3DS check.</li>\n<li>\n<code>processing</code> - The payment is being processed, this status will automatically transfer to a new state without requiring your input.</li>\n<li>\n<code>requires_capture</code> - A special state only seen if your PaymentIntent is in <a href="https://stripe.com/docs/payments/capture-later">manual confirmation mode</a>. The PaymentIntent needs to be instructed to capture the funds.</li>\n<li>\n<code>succeeded</code> - The payment has succeeded. This is an end state.</li>\n<li>\n<code>canceled</code> - The payment was canceled. This is an end state.</li>\n</ul>\n\n<p>Note that the only end states are when the payment succeeds or is explicitly cancelled by you. In the case of a payment being declined, the PaymentIntent will automatically detach the PaymentMethod and transition back to the <code>requires_payment_method</code> status.</p>\n\n<p>When examining the payments on your account, seeing what state abandoned payments are left in can help you identify issues with your checkout experience. For instance, a large amount of PaymentIntents in the  <code>requires_action</code> status can indicate that your users are churning when confronted with 3DS. Same scenario but with <code>requires_payment_method</code> can mean that there’s a problem with your integration where PaymentMethods aren’t being created and attached correctly.</p>\n\n<hr>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xjR-4Nm8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--31Nrl8Cz--/c_limit%252Cf_auto%252Cfl_progressive%252Cq_auto%252Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rzuq6iubf4348lohitil.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xjR-4Nm8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/practicaldev/image/fetch/s--31Nrl8Cz--/c_limit%252Cf_auto%252Cfl_progressive%252Cq_auto%252Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rzuq6iubf4348lohitil.png" alt="https://stripe.com/docs/payments/quickstart" loading="lazy" width="880" height="338"></a></p>\n<h2>\n  <a name="build-an-integration-using-the-integration-builder" href="#build-an-integration-using-the-integration-builder">\n  </a>\n  Build an integration using the integration builder\n</h2>\n\n<p>Now that you’ve learned about the PaymentIntents lifecycle, learn how to build your own integration.</p>\n\n<p>Stripe’s quick start <a href="https://stripe.com/docs/payments/quickstart">integration builder</a> walks through the many supported languages for client and server-side code.</p>\n\n<p>You can learn more about integrating PaymentIntents in this <a href="https://www.youtube.com/watch?v=WG4ehXSEpz4">Stripe Developers video</a>.</p>\n\n<p><iframe width="710" height="399" src="https://www.youtube.com/embed/WG4ehXSEpz4" allowfullscreen loading="lazy">\n</iframe>\n</p>\n\n<h2>\n  <a name="related-resources" href="#related-resources">\n  </a>\n  Related resources:\n</h2>\n\n<ul>\n<li><a href="https://stripe.com/docs/payments/payment-intents">The Payment Intents API</a></li>\n<li><a href="https://stripe.com/docs/strong-customer-authentication">Strong Customer Authentication readiness</a></li>\n<li><a href="https://stripe.com/docs/payments/checkout">Stripe Checkout</a></li>\n<li><a href="https://stripe.com/docs/payments/payment-links">Share a payment link</a></li>\n<li><a href="https://stripe.com/docs/payments/quickstart">Custom payment flow</a></li>\n</ul>\n\n<h2>\n  <a name="next-up-payment-element-vs-checkout-vs-payment-links" href="#next-up-payment-element-vs-checkout-vs-payment-links">\n  </a>\n  Next up: Payment Element vs Checkout vs Payment Links\n</h2>\n\n<p>In our next post in the Stripe Payment Fundamentals series, we’ll introduce the different Stripe products available to you for collecting payments and when you should choose one over the other.</p>\n\n<p>In the meanwhile, you can stay up to date with Stripe in a few ways:</p>\n\n<p>📣 <a href="https://twitter.com/stripedev">Follow us on Twitter</a><br>\n💬 <a href="https://stripe.com/go/developer-chat">Join the official Discord server</a><br>\n📺 Subscribe to our <a href="https://www.youtube.com/stripedevelopers">Youtube channel</a><br>\n📧 <a href="https://go.stripe.global/dev-digest">Sign up for the Dev Digest</a></p>\n\n',a.body_markdown='_Stripe tries to make payments as easy as can be, but sometimes it can be a bit overwhelming with all the industry terms and APIs available to you. This Stripe Payment Fundamentals series is a fortnightly blog where we tackle a fundamental topic each time and explain them in simple terms._\n\n_This week, [Paul Asjes](https://twitter.com/paul_asjes) will explain how the PaymentIntents lifecycle works and how it affects your payments._\n\n_If you haven’t read the [previous installment](https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646) of this series, you should check that out first to get a grasp on what these APIs actually do._\n\n## Previous articles in this series\n- [Fundamentals of the PaymentIntents and PaymentMethods APIs](https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646)\n\n{% link https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646 %}\n\n---\n\nWhat do we mean by “lifecycles”? What do the various PaymentIntent statuses mean? What is 3DS and why does it matter? These are all questions we’re going to address in this edition of Stripe Payment Fundamentals, starting with the PaymentIntent lifecycle.\n\n## What does “lifecycle” mean?\n\nIn the context of PaymentIntents, the [lifecycle](https://stripe.com/docs/payments/intents) is the list of states that the PaymentIntent can be in and how it progresses through these states. Since PaymentIntents [act as the source of truth of your payment](https://dev.to/stripe/fundamentals-of-the-paymentintents-and-paymentmethods-apis-3646), understanding these states will help you identify issues like payment churn in your application.\n\nLet’s first list out all the possible statuses a PaymentIntent can have:\n\n\n- `requires_payment_method`\n- `requires_confirmation`\n- `requires_action`\n- `processing`\n- `requires_capture`\n- `succeeded`\n- `canceled`\n\nWe’ll get to what these each mean individually, but first let’s examine what the lifecycle looks like for the most basic form of payment.\n\n\n![Simple PaymentIntent Lifecycle](https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713281761_image.png)\n\n\nThat’s delightfully simple, let’s examine what it means.\n\n\n![Simple PaymentIntent Lifecycle - requires_payment_method](https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713487519_image.png)\n\n\nA PaymentIntent was created, it has the beginning state of `requires_payment_method` indicating that a PaymentMethod is needed before it can progress.\n\n\n![Simple PaymentIntent Lifecycle - processing](https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713503421_image.png)\n\n\nA PaymentMethod is attached to the PaymentIntent and the PaymentIntent is confirmed (for more information on confirmation, see the last edition of this series [link]). The payment details, amount, and currency are submitted and we’re awaiting the outcome as indicated by the state `processing`.\n\n![divider](https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png)💡 When creating card payments it’s unlikely you’ll catch a PaymentIntent in the `processing` state, as card transactions tend to be handled within seconds. Other PaymentMethods can take up to a few days to complete.\n![divider](https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png)\n\n![Simple PaymentIntent Lifecycle - completed](https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636713541968_image.png)\n\n\nThe payment has completed and we’ve transitioned to the success end state of `succeeded`.\n\n![divider](https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png)💡 Once a PaymentIntent has reached an end state (`succeeded` or `canceled`) its state can no longer change and only its `metadata` property can be edited.\n![divider](https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png)\n\nThis is the flow we’d expect for a payment involving a card that doesn’t require any authentication. It can in fact be done in a single API call:\n\n\n    curl https://api.stripe.com/v1/payment_intents \\\n      -u sk_test_xxxxxxxxxxxx: \\\n      -d amount=1000 \\\n      -d currency=usd \\\n      -d "payment_method_types[]"=card \n      -d payment_method=pm_xxxxxxxxxxxx\n      -d confirm=true\n\nThis API call creates the PaymentIntent with an amount and currency, immediately specifies a PaymentMethod, and instructs the API to confirm the payment, all in one request.\n\nHere’s a slightly more complex flow:\n\n![Complex PaymentIntent Lifecycle](https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979218961_image.png)\n\n\nThis is almost identical to our earlier flow, but adds a new `requires_action` state.\n\n\n![Complex PaymentIntent Lifecycle - requires_action](https://paper-attachments.dropbox.com/s_3A9E8C52EB99000F249DD8F231C764E3985699AD2C6AEB0D48DAA24E5A18EC0F_1636979237001_image.png)\n\n\nAny state that begins with `requires` indicates that the PaymentIntent will not progress to a different state unless some action is taken. `requires_action` is no different here. Our PaymentIntent enters this state if the payment requires authentication before it can be processed. When working with cards, the most common type of authentication is 3D Secure (3DS).\n\n## 3DS and SCA\n\nYou can think of 3DS as two form authentication (2FA) for your credit card. It occurs when you attempt to make a payment but the issuing bank wants to ensure that it’s really you who’s making the request. \n\nIn September 2019 the European Union put the [Strong Customer Authentication](https://stripe.com/docs/strong-customer-authentication) (SCA) ruling into effect. In practice this means that European cards that are enrolled now have mandatory 3DS checks before a payment can be completed. If said check can’t be completed, either due to the integration not supporting this flow or the customer failing the authentication check, the payment is declined by the issuing bank.\n\nAs a response to this, Stripe developed the PaymentIntents API, intended to abstract the complexity of SCA and other authentication laws away from your integration. Even if you don’t regularly do business in the EU, it’s highly recommended you build your Stripe integration with 3DS in mind. This has the benefit of ensuring your integration is ready if new laws similar to SCA are enforced within the regions of your customers.\n\n![divider](https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png)💡 If you’re integrating with Checkout or Payment Links, then 3DS is automatically handled for you.\n![divider](https://dev-to-uploads.s3.amazonaws.com/i/kwi5h27a7elyignm8iie.png)\n\n## But what do all the statuses mean?\n\nNow that we’ve established some concepts, let’s go through the list again with a simple explanation for each status.\n\n\n- `requires_payment_method` - The PaymentIntent needs an attached PaymentMethod before it can progress.\n- `requires_confirmation` - A PaymentMethod was attached and the PaymentIntent needs to be confirmed.\n- `requires_action` - After confirming, further action is required. Likely a 3DS check.\n- `processing` - The payment is being processed, this status will automatically transfer to a new state without requiring your input.\n- `requires_capture` - A special state only seen if your PaymentIntent is in [manual confirmation mode](https://stripe.com/docs/payments/capture-later). The PaymentIntent needs to be instructed to capture the funds.\n- `succeeded` - The payment has succeeded. This is an end state.\n- `canceled` - The payment was canceled. This is an end state.\n\nNote that the only end states are when the payment succeeds or is explicitly cancelled by you. In the case of a payment being declined, the PaymentIntent will automatically detach the PaymentMethod and transition back to the `requires_payment_method` status.\n\nWhen examining the payments on your account, seeing what state abandoned payments are left in can help you identify issues with your checkout experience. For instance, a large amount of PaymentIntents in the  `requires_action` status can indicate that your users are churning when confronted with 3DS. Same scenario but with `requires_payment_method` can mean that there’s a problem with your integration where PaymentMethods aren’t being created and attached correctly.\n\n---\n\n![https://stripe.com/docs/payments/quickstart](https://res.cloudinary.com/practicaldev/image/fetch/s--31Nrl8Cz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rzuq6iubf4348lohitil.png)\n\n## Build an integration using the integration builder\nNow that you’ve learned about the PaymentIntents lifecycle, learn how to build your own integration.\n\nStripe’s quick start [integration builder](https://stripe.com/docs/payments/quickstart) walks through the many supported languages for client and server-side code.\n\nYou can learn more about integrating PaymentIntents in this [Stripe Developers video](https://www.youtube.com/watch?v=WG4ehXSEpz4).\n\n{% youtube WG4ehXSEpz4 %}\n\n## Related resources:\n* [The Payment Intents API](https://stripe.com/docs/payments/payment-intents)\n* [Strong Customer Authentication readiness](https://stripe.com/docs/strong-customer-authentication)\n* [Stripe Checkout](https://stripe.com/docs/payments/checkout)\n* [Share a payment link](https://stripe.com/docs/payments/payment-links)\n* [Custom payment flow](https://stripe.com/docs/payments/quickstart)\n\n## Next up: Payment Element vs Checkout vs Payment Links \n\nIn our next post in the Stripe Payment Fundamentals series, we’ll introduce the different Stripe products available to you for collecting payments and when you should choose one over the other.\n\nIn the meanwhile, you can stay up to date with Stripe in a few ways:\n\n📣 [Follow us on Twitter](https://twitter.com/stripedev)\n💬 [Join the official Discord server](https://stripe.com/go/developer-chat)\n📺 Subscribe to our [Youtube channel](https://www.youtube.com/stripedevelopers)\n📧 [Sign up for the Dev Digest](https://go.stripe.global/dev-digest)\n',a.user={name:"Paul Asjes",username:"paulasjes",twitter_username:e,github_username:"paulasjes-stripe",website_url:e,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--EONxFh5O--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/630983/b30d098b-19ae-46f6-8913-a5098bf05c6e.jpg",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--QR1o5Kml--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/630983/b30d098b-19ae-46f6-8913-a5098bf05c6e.jpg"},a.organization={name:"Stripe",username:t,slug:t,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--QHgSUs31--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/1963/8edb6241-abf3-463c-83a2-2d8a7d381d75.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--DYLDm1SO--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/1963/8edb6241-abf3-463c-83a2-2d8a7d381d75.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:a}},error:e,state:{currentArticle:a},serverRendered:!0,routePath:"/paulasjes/898756",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:e}}}}(null,"stripe",{},"https://dev.to/stripe/the-paymentintents-lifecycle-4f5o","2021-11-15T16:47:59Z")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
