<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Building a Fullstack Road trip mapper app using the absolute power of MERN stack 🔥</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Building a Fullstack Road trip mapper app using the absolute power of MERN stack 🔥</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/react" class="tag" data-v-70afb46a>
          #react
        </a><a href="/nuxtstop/t/javascript" class="tag" data-v-70afb46a>
          #javascript
        </a><a href="/nuxtstop/t/mern" class="tag" data-v-70afb46a>
          #mern
        </a><a href="/nuxtstop/t/webdev" class="tag" data-v-70afb46a>
          #webdev
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--3FWVzRrf--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6vecq8wfew3rdfrhd7y2.png" alt="Building a Fullstack Road trip mapper app using the absolute power of MERN stack 🔥" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            291
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            1
          </span></div> <time data-v-70afb46a>Dec 10 '21</time></div></header> <div class="content" data-v-70afb46a><p>This article concentrates on the most critical tasks and concepts for better understanding and building MERN stack applications from the ground up. It's for folks who are serious about learning about the MERN stack and want to concentrate on the essentials. We'll build a full-stack road trip mapper application where users can  pin and map locations and view the sites pinned by other users, all using the MERN stack and leveraging the power of the Mapbox API. This blog session will teach you the fundamentals of MERN stack technology as well as advanced concepts and operations.</p>

<p><strong><em>Here's a quick preview of our application's final version:</em></strong></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8zGgghdw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8zGgghdw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png" alt="Demo" loading="lazy" width="760" height="376"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1DLhm83v--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933711894-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1DLhm83v--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933711894-image-resized.png" alt="Demo" loading="lazy" width="760" height="378"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--YKzZLub1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933834026-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--YKzZLub1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933834026-image-resized.png" alt="Demo" loading="lazy" width="760" height="377"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--U2bRJcFe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637934178664-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--U2bRJcFe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637934178664-image-resized.png" alt="Demo" loading="lazy" width="760" height="375"></a></p>

<p>There is a separate article where you may learn about the MERN stack in very great detail.</p>

<p><a href="https://aviyel.com/post/1278/crafting-a-stunning-crud-application-with-mern-stack">https://aviyel.com/post/1278</a></p>

<p><strong><em>Setting up the folder structure</em></strong></p>

<p>Create two folders inside your project directory called client and server, then open them in Visual Studio Code or any other code editor of your choice.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--qVVuvow1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637928697125-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--qVVuvow1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637928697125-image-resized.png" alt="Making Directory" loading="lazy" width="760" height="431"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--3BupR6RD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637740494285-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--3BupR6RD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637740494285-image.png" alt="Folder structure" loading="lazy" width="174" height="76"></a></p>

<p>Now, we'll create a MongoDB database, a Node and Express server, a database schema to represent our project case study application, and API routes to create, read, update, and delete data and information from the database using npm and the appropriate packages. So, open a command prompt, navigate to your server's directory, and then run the code below.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm init <span class="nt">-yes</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong><em>Configuring package.json file</em></strong></p>

<p>Execute the following commands in the terminal to install the dependencies.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm <span class="nb">install </span>cors dotenv express express-rate-limit mongoose nodemon body-parser helmet morgan rate-limit-mongo
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OjOXTvcW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637929452248-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OjOXTvcW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637929452248-image-resized.png" alt="Dependencies" loading="lazy" width="760" height="152"></a></p>

<ul>
<li><p>Dotenv: Dotenv is a zero-dependency module that loads environment variables from a .env file into process.env</p></li>
<li><p>cors: This module allows to relax the security applied to an API</p></li>
<li><p>express: Fast, unopinionated, minimalist web framework for node.</p></li>
<li><p>express-rate-limit: Basic IP rate-limiting middleware for Express. It is used to limit repeated requests to public APIs and/or endpoints such as password reset.</p></li>
<li><p>mongoose: It is an Object Data Modeling library for MongoDB and Node. js</p></li>
<li><p>nodemon: This module helps to develop node.js based applications by automatically restarting the application when file changes in the directory are detected.</p></li>
<li><p>body-parser: Node.js body parsing middleware.</p></li>
<li><p>helmet: Helmet.js fills in the gap between Node.js and Express.js by securing HTTP headers that are returned by Express applications.</p></li>
<li><p>morgan : HTTP request logger middleware for node.js</p></li>
<li><p>rate-limit-mongo : MongoDB store for the express-rate-limit middleware.</p></li>
</ul>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ONfBH_d7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637935056359-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ONfBH_d7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637935056359-image-resized.png" alt="Dependencies Installation" loading="lazy" width="760" height="133"></a></p>

<p>The "package.json" file should look like this after the dependencies have been installed.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--_p2ZJEM1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637930533828-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--_p2ZJEM1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637930533828-image-resized.png" alt="Package JSON" loading="lazy" width="760" height="1136"></a></p>

<p>And also, remember to update the scripts as well.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--parquAzH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637930580698-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--parquAzH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637930580698-image-resized.png" alt="Scripts" loading="lazy" width="760" height="349"></a></p>

<p>Now go to your server directory, create a src folder, and an index.js file there.</p>

<p>Setting up index.js</p>

<ul>
<li><p>Import express module.</p></li>
<li><p>Import and configure dotenv module</p></li>
<li><p>Import helmet module.</p></li>
<li><p>Import morgan module.</p></li>
<li><p>Import CORS module</p></li>
<li><p>Use express() to initialize our app.<br>
</p></li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">//src/index.js</span>
<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// NOTE morgan is a logger</span>
<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">morgan</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">helmet</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">cors</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">dotenv</span><span class="dl">'</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>

<span class="c1">// app config</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>We may now utilize all of the other methods on that app instance. Let's start with the fundamentals and very basic setups. Don't forget to set up the port and cors, too.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// NOTE morgan is a logger</span>
<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">morgan</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">helmet</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">cors</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">dotenv</span><span class="dl">'</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">4000</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">morgan</span><span class="p">(</span><span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">({</span>
  <span class="na">origin</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CORS_ORIGIN</span><span class="p">,</span>
<span class="p">}));</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello There</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now it's time to connect our server application to a real database. Here we'll use the MongoDB database, specifically the MongoDB cloud Atlas version, which means our database will be hosted on their cloud.</p>

<h3>
  <a name="setting-up-mongodb-atlas-cloud-cluster" href="#setting-up-mongodb-atlas-cloud-cluster">
  </a>
  Setting up MongoDB Atlas cloud cluster
</h3>

<p>MongoDB is a document-oriented database that is open-source and cross-platform. MongoDB is a NoSQL database that stores data in JSON-like documents and has optional schemas. All versions were given under the AGPL license prior to October 16, 2018. All versions released after October 16, 2018, including bug fixes for prior versions, are covered by the SSPL license v1. You can also learn more about MongoDB setup and configuration from the following article.</p>

<p><a href="https://aviyel.com/post/1323/building-a-calorie-journal-saas-based-project-using-mern-stack">https://aviyel.com/post/1323</a></p>

<p>To set up and start your MongoDB cluster, follow the exact same steps mentioned below.</p>

<p><strong><em>Official MongoDB website</em></strong>*<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--z-tapM6I--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905447164-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--z-tapM6I--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905447164-image-resized.png" alt="MongoDB atlas started" loading="lazy" width="760" height="374"></a></p>

<p><strong><em>Sign-up MongoDB</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--NawkpF6e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905489282-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--NawkpF6e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905489282-image-resized.png" alt="MongoDB atlas Sign-up" loading="lazy" width="760" height="697"></a></p>

<p><strong><em>Sign-in to MongoDB</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oqWmY4uC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905522148-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oqWmY4uC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905522148-image-resized.png" alt="MongoDb Atlas Login" loading="lazy" width="760" height="368"></a></p>

<p><strong><em>Create a Project</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XlxmyjGi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905836002-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XlxmyjGi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905836002-image-resized.png" alt="Creating a Project" loading="lazy" width="760" height="370"></a></p>

<p><strong><em>Adding members</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--H-N8kq7A--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905874939-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--H-N8kq7A--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905874939-image-resized.png" alt="Adding a Members" loading="lazy" width="760" height="370"></a></p>

<p><strong><em>Building Database</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--e-Pavx1J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906045235-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--e-Pavx1J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906045235-image-resized.png" alt="Building a Database" loading="lazy" width="760" height="372"></a></p>

<p><strong><em>Creating a Cluster</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--wPu23T8D--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635322799518-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--wPu23T8D--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635322799518-image-resized.png" alt="Creating a Cluster" loading="lazy" width="760" height="381"></a></p>

<p><strong><em>Selecting a cloud service Provider</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--6AV3XX6G--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635322998309-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--6AV3XX6G--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635322998309-image-resized.png" alt="Choosing a service provider" loading="lazy" width="760" height="380"></a></p>

<p><strong><em>Configuring Security</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Z0FBpUL---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906267111-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Z0FBpUL---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906267111-image-resized.png" alt="Security Configurations" loading="lazy" width="760" height="372"></a></p>

<p><strong><em>Database Deployment to the Cloud</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--yajsRi9i--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906356590-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--yajsRi9i--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906356590-image-resized.png" alt="Database Deployment to the cloud" loading="lazy" width="760" height="371"></a></p>

<p><strong><em>Navigate to the network access tab and select "Add IP address."</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--GHji7Nx9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906632034-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--GHji7Nx9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906632034-image.png" alt="Add IP address" loading="lazy" width="511" height="311"></a></p>

<p><strong><em>Now, select the Choose a connection method.</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--t7l4mYdR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635323638076-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--t7l4mYdR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635323638076-image-resized.png" alt="Connection Method" loading="lazy" width="760" height="562"></a></p>

<p><strong><em>Connecting to cluster</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xWMYRZGK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906571369-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xWMYRZGK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906571369-image.png" alt="Connecting to the cluster" loading="lazy" width="579" height="494"></a></p>

<p>Create a new variable called DATABASE_CONNECTION inside index.js . Create a string and paste the copied mongo DB connection URL into it. Now, inside it, type your username and password, removing any brackets and entering your own credentials. We'll create environmental variables to safeguard the credential later, but for now, let's add it this way. The second thing we'll need is a PORT, so just type in 4000 for now. Finally, we'll use mongoose to connect to our database, so type in mongoose. connect(), which is a function with two parameters. The DATABASE_CONNECTION will be the first, and the object with two choices will be the second. The first is useNewUrlParser, which we'll enable, and the second is useUnifiedTopology, which we'll enable as well. These objects are optional, but we will see some errors or warnings on our console. Let's chain it with .then() and .catch() inside,then() function. This will simply call the app and invoke listen, leading to two parameters: PORT and the callback function that will be executed if our application is successfully connected to the database. Finally, if the connection to the database is unsuccessful, we will simply console log our error message. Your index.js file should now look something like this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">//src/index.js</span>
<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// NOTE morgan is a logger</span>
<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">morgan</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">helmet</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">cors</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">dotenv</span><span class="dl">'</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">DATABASE_CONNECTION</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE_URL</span><span class="p">;</span>

<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">DATABASE_CONNECTION</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">newUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">morgan</span><span class="p">(</span><span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">({</span>
  <span class="na">origin</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CORS_ORIGIN</span><span class="p">,</span>
<span class="p">}));</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello There</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">4000</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Currently Listening at http://localhost:</span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong><em>Insert mongodb+srv into the .env file.</em></strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>PORT=4000
DATABASE_URL=mongodb+srv://pramit:&lt;password>@cluster0.8tw83.mongodb.net/myFirstDatabase?retryWrites=true&w=majority
CORS_ORIGIN=http://localhost:3000
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>We now have successfully connected our server to the database, let's create middleware first before we get started on building our backend application's routes and database schema. To do so, we'll need to create a new file called middlewares.js and within that file, we will create a two function called notFound and errorHandler</p>

<p>and export those functions. So let create notFound middleware so typically this middleware should be the last middleware that is registered so this middleware takes in req, res, and next. Basically, if a request ever made it here, it means we didn't locate the route users were searching for, so we'll create a variable and send them a message, and then we'll pass that to our next middleware, which is errorHander Middleware but before that don't  forget to pass the response status of 404 as well. Now let's make our errorHandler middleware, which has four parameters instead of three, so we'll have (error,req, res, next). The first thing we'll do is set a status code and check whether it's 200 or use the status code that's already been specified, and then we'll simply set the status code, and then we'll respond with some JSON that will display the error message.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">//middlewares.js</span>
<span class="kd">const</span> <span class="nx">notFound</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`Not Found - </span><span class="p">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">originalUrl</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">errorHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">statusCode</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">200</span> <span class="p">?</span> <span class="mi">500</span> <span class="p">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">statusCode</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
    <span class="na">stack</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">nope</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">stack</span><span class="p">,</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">notFound</span><span class="p">,</span>
  <span class="nx">errorHandler</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>So, after modifying the middlewares.js file, import and use the middleware as needed in the index.js file.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">//src/index.js</span>
<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// NOTE morgan is a logger</span>
<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">morgan</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">helmet</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">cors</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dotenv</span><span class="dl">"</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">middlewares</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./middlewares</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">DATABASE_CONNECTION</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE_URL</span><span class="p">;</span>

<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">DATABASE_CONNECTION</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">newUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">morgan</span><span class="p">(</span><span class="dl">"</span><span class="s2">common</span><span class="dl">"</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
  <span class="nx">cors</span><span class="p">({</span>
    <span class="na">origin</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CORS_ORIGIN</span><span class="p">,</span>
  <span class="p">})</span>
<span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Hello There</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">middlewares</span><span class="p">.</span><span class="nx">notFound</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">middlewares</span><span class="p">.</span><span class="nx">errorHandler</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">4000</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Currently Listening at http://localhost:</span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>let's create a LogEntry model. Create a folder called models and inside it, create one file called LogEntry.model.js  and within that following file structure your DB schema by defining title, description, comments, image, ratings, latitude and longitude as shown below.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">//models/LogEntry.model.js</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">Schema</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">requiredNumber</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="nb">Number</span><span class="p">,</span>
  <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">logEntrySchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
      <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">description</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="na">comments</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="na">image</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="na">rating</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="nb">Number</span><span class="p">,</span>
      <span class="na">min</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">max</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="na">default</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">latitude</span><span class="p">:</span> <span class="p">{</span>
      <span class="p">...</span><span class="nx">requiredNumber</span><span class="p">,</span>
      <span class="na">min</span><span class="p">:</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span>
      <span class="na">max</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">longitude</span><span class="p">:</span> <span class="p">{</span>
      <span class="p">...</span><span class="nx">requiredNumber</span><span class="p">,</span>
      <span class="na">min</span><span class="p">:</span> <span class="o">-</span><span class="mi">180</span><span class="p">,</span>
      <span class="na">max</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">visitDate</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">type</span><span class="p">:</span> <span class="nb">Date</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">timestamps</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">LogEntry</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="dl">"</span><span class="s2">collections</span><span class="dl">"</span><span class="p">,</span> <span class="nx">logEntrySchema</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">LogEntry</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The structure of your files and folders should now look like this.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--r4WNo2SF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638013845226-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--r4WNo2SF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638013845226-image.png" alt="Folder Structure" loading="lazy" width="345" height="316"></a></p>

<p>Now that we've successfully created our DB Schema, let's get started on creating our routes for our backend application. To do so, we'll need to create a new folder inside the src directory and name it as routes Within the routes folder, we will create a js file called logs.routes.js.so first we must import express from "express" and also configure our router and import our recently created DB schema. Now we can begin adding our routes to it.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--hi82ItcD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638017296911-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--hi82ItcD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638017296911-image.png" alt="Folder Structure" loading="lazy" width="343" height="351"></a><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">LogEntry</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">../models/LogEntry.model.js</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">API_KEY</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">Router</span><span class="p">();</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong><em>fetches all the pinned location information.</em></strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">LogEntry</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">entries</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong><em>Insert/add a pinned location with authorized access</em></strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">X-API-KEY</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">API_KEY</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">401</span><span class="p">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Unauthorized Access</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">const</span> <span class="nx">logEntry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LogEntry</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">createdEntry</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">logEntry</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">createdEntry</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">ValidationError</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">422</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong><em>exporting the router</em></strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Your logs.routes.js should resemble something like this<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">//src/routes/logs.routes.js</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">LogEntry</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">../models/LogEntry.model.js</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">API_KEY</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">Router</span><span class="p">();</span>

<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">LogEntry</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">entries</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">X-API-KEY</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">API_KEY</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">401</span><span class="p">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Unauthorized Access</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">const</span> <span class="nx">logEntry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LogEntry</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">createdEntry</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">logEntry</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">createdEntry</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">ValidationError</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">422</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong><em>Now, update your .env file</em></strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>NODE_ENV=production
PORT=4000
DATABASE_URL=mongodb+srv://pramit:&lt;password>@cluster0.8tw83.mongodb.net/myFirstDatabase?retryWrites=true&w=majority
CORS_ORIGIN=http://localhost:3000
API_KEY=roadtripmapper
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Let's get started by importing the logs routes into your index.js file. We can now connect map pinned log info to our application using express middleware. Finally, your root index.js file should be like the following.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">//src/index.js</span>
<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// NOTE morgan is a logger</span>
<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">morgan</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">helmet</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">cors</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dotenv</span><span class="dl">"</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">middlewares</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./middlewares</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">logs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./routes/logs.routes.js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">DATABASE_CONNECTION</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE_URL</span><span class="p">;</span>

<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">DATABASE_CONNECTION</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">newUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">morgan</span><span class="p">(</span><span class="dl">"</span><span class="s2">common</span><span class="dl">"</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
  <span class="nx">cors</span><span class="p">({</span>
    <span class="na">origin</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CORS_ORIGIN</span><span class="p">,</span>
  <span class="p">})</span>
<span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Hello There</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/logs</span><span class="dl">"</span><span class="p">,</span> <span class="nx">logs</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">middlewares</span><span class="p">.</span><span class="nx">notFound</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">middlewares</span><span class="p">.</span><span class="nx">errorHandler</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">4000</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Currently Listening at http://localhost:</span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>After restarting the server, you should see something like this:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Fq5ljdmU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036953812-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Fq5ljdmU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036953812-image.png" alt="Server Running" loading="lazy" width="556" height="143"></a></p>


<hr>

<h3>
  <a name="setting-up-the-frontend-with-react" href="#setting-up-the-frontend-with-react">
  </a>
  Setting up the frontend with react
</h3>

<p>In the next step let's start with the frontend and build it with react. The first thing you need to do is install Node.js if it isn't already installed on your machine. So, go to the Node.js official website and download the most recent version. You'll require Node js to utilize the node package manager, generally known as NPM. Now navigate to the client folder in your favorite code editor. Visual Studio Code will be my tool of choice. Then, in the integrated terminal, type npx create-react-app. This command will create a client application in the current directory with the name client.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--_adxZapT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638019632382-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--_adxZapT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638019632382-image.png" alt="create-react-app" loading="lazy" width="682" height="345"></a></p>

<p>There is a separate article where you may learn everything there is to know about</p>

<p>cleaning up boilerplate react project.</p>

<p><a href="https://aviyel.com/post/1190/building-a-react-application-from-absolute-scratch">https://aviyel.com/post/1190</a></p>

<p>It's time to install some packages within react-boilerplate now that you've installed and cleaned it. so copy and paste the following command into your terminal.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>npm i react-hook-form react-map-gl react-rating-stars-component react-responsive-animate-navbar
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--WGevhfqS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638024929694-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--WGevhfqS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638024929694-image-resized.png" alt="Dependencies" loading="lazy" width="760" height="200"></a></p>

<ul>
<li><p>react-hook-form:  Performant, flexible, and extensible forms library for React Hooks.</p></li>
<li><p>react-map-gl: react-map-gl is a suite of React components designed to provide a React API for Mapbox GL JS-compatible libraries</p></li>
<li><p>react-rating-stars-component: Simple star rating component for your React projects.</p></li>
<li><p>react-responsive-animate-navbar : simple, flexible & completely customizable responsive navigation bar component.</p></li>
</ul>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--rLys1zl6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638025122874-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--rLys1zl6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638025122874-image-resized.png" alt="Dependencies Installation" loading="lazy" width="760" height="191"></a></p>

<p>After installing all these packages your packge.json file of the client should look like this:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zQb91OUz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638025324267-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zQb91OUz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638025324267-image-resized.png" alt="Package json" loading="lazy" width="760" height="1130"></a></p>

<p>Let's construct two separate folders /components inside the components folder after we've installed all of our project's dependencies and name it as RoadTripNav and TripEntryForm .</p>

<p>Your file and folder structure should look something like this once you've added all of your components.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0ljpsYTM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638026533825-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0ljpsYTM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638026533825-image.png" alt="Folder Structure" loading="lazy" width="333" height="354"></a></p>

<p>Now that you have all of the project's components set up, it's time to start coding. First, import the ReactNavbar from "react-responsive-animate-navbar" and customize the color of your navbar, add the logo to the public folder and import it directly, and don’t forget to add some social links as well. The following is an example of how the code should appear.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--rMvXbb7p--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036022672-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--rMvXbb7p--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036022672-image.png" alt="RoadTripNavComponent" loading="lazy" width="544" height="128"></a><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">// components/RoadTripNav</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">ReactNavbar</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-responsive-animate-navbar</span><span class="dl">"</span><span class="p">;</span>
<span class="c1">// import roadTripSvg from "../../assets/roadtrip.svg";</span>

<span class="kd">const</span> <span class="nx">RoadTripNav</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ReactNavbar</span><span class="p">.</span><span class="nx">ReactNavbar</span>
      <span class="nx">color</span><span class="o">=</span><span class="dl">"</span><span class="s2">rgb(25, 25, 25)</span><span class="dl">"</span>
      <span class="nx">logo</span><span class="o">=</span><span class="dl">"</span><span class="s2">./logo.svg</span><span class="dl">"</span>
      <span class="nx">menu</span><span class="o">=</span><span class="p">{[]}</span>
      <span class="nx">social</span><span class="o">=</span><span class="p">{[</span>
        <span class="p">{</span>
          <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Twitter</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://twitter.com/pramit_armpit</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">icon</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">fab</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">twitter</span><span class="dl">"</span><span class="p">],</span>
        <span class="p">},</span>
      <span class="p">]}</span>
    <span class="sr">/</span><span class="err">>
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">RoadTripNav</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Before we go any further, let's set up our Mapbox. First, go to the Mapbox site and log in or sign up if you don't already have an account. Next, create your own custom map style in the Mapbox Studio and publish it. Finally, go back to the dashboard and copy the default public API key provided by MapBox.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0U24qm4o--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637907686658-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0U24qm4o--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637907686658-image-resized.png" alt="Mapbox" loading="lazy" width="760" height="378"></a></p>

<p><strong><em>Login or create your MapBox account</em></strong></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XoYP0YOF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637907709168-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XoYP0YOF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637907709168-image-resized.png" alt="Mapbox login" loading="lazy" width="760" height="511"></a></p>

<p><strong><em>Click on design a custom map style</em></strong></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FiYiw1jh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923672745-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FiYiw1jh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923672745-image.png" alt="Mapbox studio" loading="lazy" width="411" height="295"></a></p>

<p><strong><em>Customize your own style of the map inside the Mapbox studio</em></strong></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--fzikZIJL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923619968-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fzikZIJL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923619968-image-resized.png" alt="MapBox studio Editor" loading="lazy" width="760" height="373"></a></p>

<p><strong><em>Copy the default public token</em></strong><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oMO0ArWf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923829522-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oMO0ArWf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923829522-image-resized.png" alt="Access Token" loading="lazy" width="760" height="436"></a></p>

<p>After you've successfully obtained your public token, go to the env file or create one if you don’t have and after that create a variable named as REACT_APP_MAPBOX_TOKEN, then paste that token into that variable. This is what your env file should look like.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>REACT_APP_MAPBOX_TOKEN= ************************************ // add token
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Before we go any further, let's make an api and styles folder in our root source directory. Inside the api folder, make a API.js file, and inside the styles folder, make a index.css file where all our styles of the application will be added. This is how your folder structure should appear.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--cgwIX-k9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638028733936-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--cgwIX-k9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638028733936-image.png" alt="Folder Structure" loading="lazy" width="352" height="466"></a></p>

<p>Now go to the newly created API file and construct two functions called "listLogEntries" to collect all the log entries from the backend and "createLogEntries" to create or send the post request / post the entries to the backend, as well as export these functions. Also, don't forget to include the URL where your server is running.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--rS-lFTd_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036093022-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--rS-lFTd_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036093022-image.png" alt="API" loading="lazy" width="298" height="259"></a><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">//api/API.js</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">http://localhost:4000</span><span class="dl">"</span><span class="p">;</span>
<span class="c1">// const API_URL = window.location.hostname === "localhost" ? "http://localhost:4000" : "https://road-trip-map-mern.herokuapp.com" ;</span>

<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">listLogEntries</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">API_URL</span><span class="p">}</span><span class="s2">/api/logs`</span><span class="p">);</span>
  <span class="c1">// const json = await response.json();</span>
  <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">createLogEntries</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">api_key</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">api_key</span><span class="p">;</span>
  <span class="k">delete</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">api_key</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">API_URL</span><span class="p">}</span><span class="s2">/api/logs`</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">X-API-KEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">api_key</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">entry</span><span class="p">),</span>
  <span class="p">});</span>
  <span class="c1">// const json = await response.json();</span>
  <span class="c1">// return response.json();</span>
  <span class="kd">let</span> <span class="nx">json</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">).</span><span class="nx">includes</span><span class="p">(</span><span class="dl">"</span><span class="s2">text/html</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>
    <span class="nx">json</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">message</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">json</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">json</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="o">=</span> <span class="nx">json</span><span class="p">;</span>
  <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Let's make a submission form for the pinned map location. To do so, open the TripEntryForm component from the component folder we previously made, import the useForm hook from react-hook-form, import createLogentries from api, and then import the useState hook from the React library because this hook will enable us to integrate the state into our functional component. useState(), unlike state in class components, does not work with object values. If necessary, we can use primitives directly and create multiple react hooks for multiple variables. Now, create two states: loading and error, and then destructure register and handleSubmit from the useForm() hook from "react-hook-form" library.After you've completed that, it's time to craft our form, but first let's create a function to handle our submit request. To do so, create an asynchronous onSubmit function and inside it, simply create a try-catch block. Inside the try block set the loading to true, configure the latitude and longitude, console log the data, and invoke the onClose function, and finally inside the catch block, pass the error message to the error state, set the loading to false and simply console log the error message and then simply create a form inside the return statement exactly shown in the code below.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--EF-iElcY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036159120-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--EF-iElcY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036159120-image.png" alt="TripEntry Form" loading="lazy" width="549" height="128"></a><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">// components/TripEntryForm.js</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useForm</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-hook-form</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">createLogEntries</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../../api/API</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">./TripEntryForm.css</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">TripEntryForm</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">onClose</span> <span class="p">})</span> <span class="o">=></span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">loading</span><span class="p">,</span> <span class="nx">setLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">error</span><span class="p">,</span> <span class="nx">setError</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">""</span><span class="p">);</span>

  <span class="kd">const</span> <span class="p">{</span> <span class="nx">register</span><span class="p">,</span> <span class="nx">handleSubmit</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useForm</span><span class="p">();</span>

  <span class="kd">const</span> <span class="nx">onSubmit</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="nx">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">latitude</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">longitude</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">created</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">createLogEntries</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">created</span><span class="p">);</span>
      <span class="nx">onClose</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setError</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
      <span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">onSubmit</span><span class="p">)}</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">trip-form</span><span class="dl">"</span><span class="o">></span>
      <span class="p">{</span><span class="nx">error</span> <span class="p">?</span> <span class="o">&lt;</span><span class="nx">h3</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">error-message</span><span class="dl">"</span><span class="o">></span><span class="p">{</span><span class="nx">error</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h3> : null</span><span class="err">}
</span>      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">api_key</span><span class="dl">"</span><span class="o">></span><span class="nx">Enter</span> <span class="nx">Password</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">>
</span>      <span class="o">&lt;</span><span class="nx">input</span>
        <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">password</span><span class="dl">"</span>
        <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">api_key</span><span class="dl">"</span>
        <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">For demo, password => {roadtripmap} </span><span class="dl">"</span>
        <span class="nx">required</span>
        <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span>
      <span class="sr">/</span><span class="err">>
</span>
      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="o">></span><span class="nx">Title</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">>
</span>      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Title</span><span class="dl">"</span> <span class="nx">required</span> <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span> <span class="sr">/</span><span class="err">>
</span>
      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">comments</span><span class="dl">"</span><span class="o">></span><span class="nx">Comments</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">>
</span>      <span class="o">&lt;</span><span class="nx">textarea</span>
        <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">comments</span><span class="dl">"</span>
        <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Comments</span><span class="dl">"</span>
        <span class="nx">rows</span><span class="o">=</span><span class="p">{</span><span class="mi">3</span><span class="p">}</span>
        <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span>
      <span class="o">>&lt;</span><span class="sr">/textarea</span><span class="err">>
</span>
      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="o">></span><span class="nx">Description</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">>
</span>      <span class="o">&lt;</span><span class="nx">textarea</span>
        <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">description</span><span class="dl">"</span>
        <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Describe your journey</span><span class="dl">"</span>
        <span class="nx">rows</span><span class="o">=</span><span class="p">{</span><span class="mi">4</span><span class="p">}</span>
        <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span>
      <span class="o">>&lt;</span><span class="sr">/textarea</span><span class="err">>
</span>
      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">image</span><span class="dl">"</span><span class="o">></span><span class="nx">Image</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">>
</span>      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">image</span><span class="dl">"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Image URL</span><span class="dl">"</span> <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span> <span class="sr">/</span><span class="err">>
</span>
      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">rating</span><span class="dl">"</span><span class="o">></span><span class="nx">Rating</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">>
</span>      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">rating</span><span class="dl">"</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">number</span><span class="dl">"</span> <span class="nx">min</span><span class="o">=</span><span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="nx">max</span><span class="o">=</span><span class="dl">"</span><span class="s2">10</span><span class="dl">"</span> <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span> <span class="sr">/</span><span class="err">>
</span>
      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">visitDate</span><span class="dl">"</span><span class="o">></span><span class="nx">Visit</span> <span class="nb">Date</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">>
</span>      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">visitDate</span><span class="dl">"</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">date</span><span class="dl">"</span> <span class="nx">required</span> <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span> <span class="sr">/</span><span class="err">>
</span>
      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">loading</span><span class="p">}</span><span class="o">></span>
        <span class="o">&lt;</span><span class="nx">span</span><span class="o">></span><span class="p">{</span><span class="nx">loading</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Submitting...</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Submit your Trip</span><span class="dl">"</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/span</span><span class="err">>
</span>      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">>
</span>    <span class="o">&lt;</span><span class="sr">/form</span><span class="err">>
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">TripEntryForm</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Also, don't forget to add the TripEntryForm styles inside that very own component folder and name it as TripEntryForm.css and paste the exact CSS code as mentioned below</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--auefFJZG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036209467-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--auefFJZG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036209467-image.png" alt="TripEntry Form style" loading="lazy" width="147" height="114"></a><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="o">//</span><span class="nt">TripEntryForm</span><span class="nc">.css</span>
<span class="k">@import</span> <span class="sx">url("https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:ital,wght@0,200;0,400;1,200;1,300&family=Roboto:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap")</span><span class="p">;</span>

<span class="nc">.trip-form</span> <span class="nt">label</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0.5rem</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">);</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"Fredoka One"</span><span class="p">,</span> <span class="nb">cursive</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.trip-form</span> <span class="nt">input</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0.5rem</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#2c2e41</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">);</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">12px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">outline</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span> <span class="m">5px</span> <span class="m">10px</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"Fredoka One"</span><span class="p">,</span> <span class="nb">cursive</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.trip-form</span> <span class="nt">textarea</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0.5rem</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#2c2e41</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">);</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">12px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">outline</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span> <span class="m">5px</span> <span class="m">10px</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"Fredoka One"</span><span class="p">,</span> <span class="nb">cursive</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.error-message</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.trip-form</span> <span class="nt">button</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#fb5666</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">12px</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#eee</span><span class="p">;</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">18px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">50px</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">38px</span><span class="p">;</span>
  <span class="nl">outline</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span> <span class="nt">span</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
  <span class="nl">z-index</span><span class="p">:</span> <span class="m">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span><span class="nd">:after</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">transition</span><span class="p">:</span> <span class="n">all</span> <span class="m">2.35s</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span><span class="nd">:hover:after</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.small_description</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">60px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now go to this repo and download all of the SVG files that are available there.</p>

<p><a href="https://github.com/pramit-marattha/road-trip-mapper-mern-app/tree/main/client/src/assets">https://github.com/pramit-marattha/road-trip-mapper-mern-app/tree/main/client/src/assets</a></p>

<p>After you've downloaded all of the svg files, go to the main app component, and begin importing all of the key requirements from the libraries we previously installed, such as ReactMapGl, marker, and popup from the "react-map-gl" library, import all of the components as well as svgs from the assets folder, and finally create four state logEntries whose initial value is empty array, showPopup whose initial value is an empty object, addEntryLocation has a default value of null, and for viewport specify the initial value exactly like the code mentioned below or you can add whatever you want. Create an asynchronous function called getEntries that asynchronously calls the listLogEntries function that was previously established within the api file and whose main task is to retrieve all of the entries made by the users and feed them to the logEntries state and then call that function inside the useEffect() hook by using this Hook, you tell React that your component needs to do something after render.</p>

<p>React will remember the function you passed (we’ll refer to it as our “effect”), and call it later after performing the DOM updates. To this effect, we set the document title, but we could also perform data fetching or call some other imperative API. Placing  useEffect() inside the component lets us access the count state variable (or any props) right from the effect. We don’t need a special API to read it — it’s already in the function scope. Hooks embrace JavaScript closures and avoid introducing React-specific APIs where JavaScript already provides a solution.useEffect() the hook is somewhat similar to the life-cycle methods that we are aware of for class components. It runs after every render of the component including the initial render. Hence it can be thought of as a combination of componentDidMount, componentDidUpdate, and componentWillUnmount.If we want to control the behavior of when the effect should run (only on initial render, or only when a particular state variable changes), we can pass in dependencies to the effect to do so. This hook also provides a clean-up option to allow cleaning up of resources before the component is destroyed. basic syntax of the effect: useEffect(didUpdate) .</p>

<p>Create a function named showMarkerPopup and provide the event parameters to it. Inside that function, destruct the latitude and longitude from "event.lngltd" and pass it to addEntryLocation state. Finally, employ all of the imported components within our return statement by simply following the code shown below.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--P_Eel5Gd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036249267-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--P_Eel5Gd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036249267-image.png" alt="App component" loading="lazy" width="375" height="172"></a><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">//src/app.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ReactMapGL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Marker</span><span class="p">,</span> <span class="nx">Popup</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-map-gl</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">listLogEntries</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./api/API</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">MapPinLogo</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./assets/mapperPin.svg</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">MarkerPopup</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./assets/MarkerPopup.svg</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TripEntryForm</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/TripEntryForm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ReactStars</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-rating-stars-component</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">RoadTripNav</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/RoadTripNav/RoadTripNav</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">logEntries</span><span class="p">,</span> <span class="nx">setLogEntries</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">showPopup</span><span class="p">,</span> <span class="nx">setShowPopup</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">({});</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">addEntryLocation</span><span class="p">,</span> <span class="nx">setAddEntryLocation</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">viewport</span><span class="p">,</span> <span class="nx">setViewport</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">({</span>
    <span class="na">width</span><span class="p">:</span> <span class="dl">"</span><span class="s2">100vw</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">height</span><span class="p">:</span> <span class="dl">"</span><span class="s2">100vh</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">latitude</span><span class="p">:</span> <span class="mf">27.7577</span><span class="p">,</span>
    <span class="na">longitude</span><span class="p">:</span> <span class="mf">85.3231324</span><span class="p">,</span>
    <span class="na">zoom</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="nx">getEntries</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">logEntries</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">listLogEntries</span><span class="p">();</span>
    <span class="nx">setLogEntries</span><span class="p">(</span><span class="nx">logEntries</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logEntries</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=></span> <span class="p">{</span>
    <span class="nx">getEntries</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">showMarkerPopup</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">lngLat</span><span class="p">);</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">longitude</span><span class="p">,</span> <span class="nx">latitude</span><span class="p">]</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">lngLat</span><span class="p">;</span>
    <span class="nx">setAddEntryLocation</span><span class="p">({</span>
      <span class="nx">longitude</span><span class="p">,</span>
      <span class="nx">latitude</span><span class="p">,</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;></span>
      <span class="o">&lt;</span><span class="nx">RoadTripNav</span> <span class="o">/></span>
      <span class="o">&lt;</span><span class="nx">ReactMapGL</span>
        <span class="p">{...</span><span class="nx">viewport</span><span class="p">}</span>
        <span class="nx">mapStyle</span><span class="o">=</span><span class="dl">"</span><span class="s2">mapbox://styles/pramitmarattha/ckiovge5k3e7x17tcmydc42s3</span><span class="dl">"</span> 
        <span class="nx">mapboxApiAccessToken</span><span class="o">=</span><span class="p">{</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REACT_APP_MAPBOX_TOKEN</span><span class="p">}</span>
        <span class="nx">onViewportChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">nextViewport</span><span class="p">)</span> <span class="o">=></span> <span class="nx">setViewport</span><span class="p">(</span><span class="nx">nextViewport</span><span class="p">)}</span>
        <span class="nx">onDblClick</span><span class="o">=</span><span class="p">{</span><span class="nx">showMarkerPopup</span><span class="p">}</span>
      <span class="o">></span>
        <span class="p">{</span><span class="nx">logEntries</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="o">=></span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">React</span><span class="p">.</span><span class="nx">Fragment</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">_id</span><span class="p">}</span><span class="o">></span>
            <span class="o">&lt;</span><span class="nx">Marker</span> <span class="nx">latitude</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">latitude</span><span class="p">}</span> <span class="nx">longitude</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">longitude</span><span class="p">}</span><span class="o">></span>
              <span class="o">&lt;</span><span class="nx">div</span>
                <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=></span>
                  <span class="nx">setShowPopup</span><span class="p">({</span>
                    <span class="c1">// ...showPopup,</span>
                    <span class="p">[</span><span class="nx">entry</span><span class="p">.</span><span class="nx">_id</span><span class="p">]:</span> <span class="kc">true</span><span class="p">,</span>
                  <span class="p">})</span>
                <span class="p">}</span>
              <span class="o">></span>
                <span class="o">&lt;</span><span class="nx">img</span>
                  <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">map-pin</span><span class="dl">"</span>
                  <span class="nx">style</span><span class="o">=</span><span class="p">{{</span>
                    <span class="na">width</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="mi">5</span> <span class="o">*</span> <span class="nx">viewport</span><span class="p">.</span><span class="nx">zoom</span><span class="p">}</span><span class="s2">px`</span><span class="p">,</span>
                    <span class="na">height</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="mi">5</span> <span class="o">*</span> <span class="nx">viewport</span><span class="p">.</span><span class="nx">zoom</span><span class="p">}</span><span class="s2">px`</span><span class="p">,</span>
                  <span class="p">}}</span>
                  <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">MapPinLogo</span><span class="p">}</span>
                  <span class="nx">alt</span><span class="o">=</span><span class="dl">"</span><span class="s2">Map Pin Logo</span><span class="dl">"</span>
                <span class="o">/></span>
              <span class="o">&lt;</span><span class="sr">/div</span><span class="err">>
</span>            <span class="o">&lt;</span><span class="sr">/Marker</span><span class="err">>
</span>            <span class="p">{</span><span class="nx">showPopup</span><span class="p">[</span><span class="nx">entry</span><span class="p">.</span><span class="nx">_id</span><span class="p">]</span> <span class="p">?</span> <span class="p">(</span>
              <span class="o">&lt;</span><span class="nx">Popup</span>
                <span class="nx">latitude</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">latitude</span><span class="p">}</span>
                <span class="nx">longitude</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">longitude</span><span class="p">}</span>
                <span class="nx">closeButton</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
                <span class="nx">closeOnClick</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>
                <span class="nx">dynamicPosition</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
                <span class="nx">onClose</span><span class="o">=</span><span class="p">{()</span> <span class="o">=></span> <span class="nx">setShowPopup</span><span class="p">({})}</span>
                <span class="nx">anchor</span><span class="o">=</span><span class="dl">"</span><span class="s2">top</span><span class="dl">"</span>
              <span class="o">></span>
                <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">popup</span><span class="dl">"</span><span class="o">></span>
                  <span class="o">&lt;</span><span class="nx">ReactStars</span>
                    <span class="nx">count</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
                    <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">rating</span><span class="p">}</span>
                    <span class="nx">size</span><span class="o">=</span><span class="p">{</span><span class="mi">29</span><span class="p">}</span>
                    <span class="nx">activeColor</span><span class="o">=</span><span class="dl">"</span><span class="s2">#ffd700</span><span class="dl">"</span>
                  <span class="o">/></span>
                  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">popup_image</span><span class="dl">"</span><span class="o">></span>
                    <span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">image</span> <span class="o">&&</span> <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span> <span class="nx">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span> <span class="sr">/></span><span class="err">}
</span>                  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">>
</span>                  <span class="o">&lt;</span><span class="nx">h3</span><span class="o">></span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h3</span><span class="err">>
</span>                  <span class="o">&lt;</span><span class="nx">p</span><span class="o">></span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">comments</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">>
</span>                  <span class="o">&lt;</span><span class="nx">small</span><span class="o">></span>
                    <span class="na">Visited</span> <span class="p">:{</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">}</span>
                    <span class="p">{</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">visitDate</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">(</span><span class="dl">"</span><span class="s2">en-US</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                      <span class="na">weekday</span><span class="p">:</span> <span class="dl">"</span><span class="s2">long</span><span class="dl">"</span><span class="p">,</span>
                      <span class="na">year</span><span class="p">:</span> <span class="dl">"</span><span class="s2">numeric</span><span class="dl">"</span><span class="p">,</span>
                      <span class="na">month</span><span class="p">:</span> <span class="dl">"</span><span class="s2">long</span><span class="dl">"</span><span class="p">,</span>
                      <span class="na">day</span><span class="p">:</span> <span class="dl">"</span><span class="s2">numeric</span><span class="dl">"</span><span class="p">,</span>
                    <span class="p">})}</span>
                  <span class="o">&lt;</span><span class="sr">/small</span><span class="err">>
</span>                  <span class="o">&lt;</span><span class="nx">p</span><span class="o">></span><span class="na">Ratings</span><span class="p">:</span> <span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">rating</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">>
</span>                  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">small_description</span><span class="dl">"</span><span class="o">></span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">description</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">>
</span>                <span class="o">&lt;</span><span class="sr">/div</span><span class="err">>
</span>              <span class="o">&lt;</span><span class="sr">/Popup</span><span class="err">>
</span>            <span class="p">)</span> <span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/React.Fragment</span><span class="err">>
</span>        <span class="p">))}</span>
        <span class="p">{</span><span class="nx">addEntryLocation</span> <span class="p">?</span> <span class="p">(</span>
          <span class="o">&lt;></span>
            <span class="o">&lt;</span><span class="nx">Marker</span>
              <span class="nx">latitude</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">.</span><span class="nx">latitude</span><span class="p">}</span>
              <span class="nx">longitude</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">.</span><span class="nx">longitude</span><span class="p">}</span>
            <span class="o">></span>
              <span class="o">&lt;</span><span class="nx">div</span><span class="o">></span>
                <span class="o">&lt;</span><span class="nx">img</span>
                  <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">map-pin</span><span class="dl">"</span>
                  <span class="nx">style</span><span class="o">=</span><span class="p">{{</span>
                    <span class="na">width</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="mi">8</span> <span class="o">*</span> <span class="nx">viewport</span><span class="p">.</span><span class="nx">zoom</span><span class="p">}</span><span class="s2">px`</span><span class="p">,</span>
                    <span class="na">height</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="mi">8</span> <span class="o">*</span> <span class="nx">viewport</span><span class="p">.</span><span class="nx">zoom</span><span class="p">}</span><span class="s2">px`</span><span class="p">,</span>
                  <span class="p">}}</span>
                  <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">MarkerPopup</span><span class="p">}</span>
                  <span class="nx">alt</span><span class="o">=</span><span class="dl">"</span><span class="s2">Map Pin Logo</span><span class="dl">"</span>
                <span class="o">/></span>
              <span class="o">&lt;</span><span class="sr">/div</span><span class="err">>
</span>              <span class="p">{</span><span class="cm">/* &lt;div style={{color:"white"}}>{entry.title}&lt;/div> */</span><span class="p">}</span>
            <span class="o">&lt;</span><span class="sr">/Marker</span><span class="err">>
</span>
            <span class="o">&lt;</span><span class="nx">Popup</span>
              <span class="nx">latitude</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">.</span><span class="nx">latitude</span><span class="p">}</span>
              <span class="nx">longitude</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">.</span><span class="nx">longitude</span><span class="p">}</span>
              <span class="nx">closeButton</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
              <span class="nx">closeOnClick</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>
              <span class="nx">dynamicPosition</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
              <span class="nx">onClose</span><span class="o">=</span><span class="p">{()</span> <span class="o">=></span> <span class="nx">setAddEntryLocation</span><span class="p">(</span><span class="kc">null</span><span class="p">)}</span>
              <span class="nx">anchor</span><span class="o">=</span><span class="dl">"</span><span class="s2">top</span><span class="dl">"</span>
            <span class="o">></span>
              <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">popup</span><span class="dl">"</span><span class="o">></span>
                <span class="o">&lt;</span><span class="nx">TripEntryForm</span>
                  <span class="nx">onClose</span><span class="o">=</span><span class="p">{()</span> <span class="o">=></span> <span class="p">{</span>
                    <span class="nx">setAddEntryLocation</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
                    <span class="nx">getEntries</span><span class="p">();</span>
                  <span class="p">}}</span>
                  <span class="nx">location</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">}</span>
                <span class="sr">/</span><span class="err">>
</span>              <span class="o">&lt;</span><span class="sr">/div</span><span class="err">>
</span>            <span class="o">&lt;</span><span class="sr">/Popup</span><span class="err">>
</span>          <span class="o">&lt;</span><span class="sr">/</span><span class="err">>
</span>        <span class="p">)</span> <span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/ReactMapGL</span><span class="err">>
</span>    <span class="o">&lt;</span><span class="sr">/</span><span class="err">>
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The very final step is to add all of the styles to our project, which can be done by going to our previously established styles folder and copying and pasting the following mentioned code into the index.css file.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kJntPAM2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036274330-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kJntPAM2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036274330-image.png" alt="index css" loading="lazy" width="127" height="129"></a><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight css"><code><span class="c">/* styles/index.css */</span>
<span class="k">@import</span> <span class="sx">url("https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:ital,wght@0,200;0,400;1,200;1,300&family=Roboto:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap")</span><span class="p">;</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"Fredoka One"</span><span class="p">,</span> <span class="nb">cursive</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100vh</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100vw</span><span class="p">;</span>
  <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">code</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="n">source-code-pro</span><span class="p">,</span> <span class="n">Menlo</span><span class="p">,</span> <span class="n">Monaco</span><span class="p">,</span> <span class="n">Consolas</span><span class="p">,</span> <span class="s1">"Courier New"</span><span class="p">,</span>
    <span class="nb">monospace</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.map-pin</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">transform</span><span class="p">:</span> <span class="n">translate</span><span class="p">(</span><span class="m">-50%</span><span class="p">,</span> <span class="m">-100%</span><span class="p">);</span>
  <span class="nl">z-index</span><span class="p">:</span> <span class="m">-1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.popup</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">20vw</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#8661d1</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">z-index</span><span class="p">:</span> <span class="m">999</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.popup</span> <span class="nt">img</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">40%</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5%</span><span class="p">;</span>
  <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">padding-top</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.popup_image</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
  <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.small_description</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.5rem</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">z-index</span><span class="p">:</span> <span class="m">999</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span> <span class="p">{</span>
  <span class="nl">border</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#fa5252</span><span class="p">;</span>
  <span class="nl">padding-right</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">4rem</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">0.2rem</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Finally, start both the client and the server.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--CcZmVDcq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036698778-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--CcZmVDcq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036698778-image.png" alt="React Running" loading="lazy" width="413" height="166"></a></p>

<h2>
  <a name="application-up-and-running" href="#application-up-and-running">
  </a>
  Application up and running
</h2>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8zGgghdw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8zGgghdw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png" alt="Demo" loading="lazy" width="760" height="376"></a></p>

<p>This application's entire source code is available here.</p>

<p><a href="https://github.com/aviyeldevrel/devrel-tutorial-projects/tree/main/MERN-roadtrip-mapper">https://github.com/aviyeldevrel/devrel-tutorial-projects/tree/main/MERN-roadtrip-mapper</a></p>

<p>Main article available here => <a href="https://aviyel.com/post/1430/fullstack-road-trip-mapper-app-built-using-mern-stack?utm_source=dev_to&utm_medium=articles_project_tutorials&utm_campaign=post_1430">https://aviyel.com/post/1430</a></p>

<p>Happy Coding!! </p>

<p>Follow <a href="https://twitter.com/AviyelHq">@aviyelHQ</a> or <a href="https://aviyel.com/discussions">sign-up</a> on Aviyel for early access if you are a project maintainer, contributor, or just an Open Source enthusiast.</p>

<p>Join Aviyel's Discord => <a href="https://discord.gg/TbfZmbvnN5">Aviyel's world</a></p>

<p>Twitter =>[<a href="https://twitter.com/AviyelHq">https://twitter.com/AviyelHq</a>]</p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/pramit_marattha/building-a-fullstack-road-trip-mapper-app-using-the-absolute-power-of-mern-stack-117g" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(s,a,n,p){return a.type_of="article",a.id=916243,a.title="Building a Fullstack Road trip mapper app using the absolute power of MERN stack 🔥",a.description="This article concentrates on the most critical tasks and concepts for better understanding and...",a.readable_publish_date="Dec 10 '21",a.slug="building-a-fullstack-road-trip-mapper-app-using-the-absolute-power-of-mern-stack-117g",a.path="/aviyel/building-a-fullstack-road-trip-mapper-app-using-the-absolute-power-of-mern-stack-117g",a.url="https://dev.to/aviyel/building-a-fullstack-road-trip-mapper-app-using-the-absolute-power-of-mern-stack-117g",a.comments_count=1,a.public_reactions_count=291,a.collection_id=s,a.published_timestamp=n,a.positive_reactions_count=291,a.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--3FWVzRrf--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6vecq8wfew3rdfrhd7y2.png",a.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--rL8sVF8A--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6vecq8wfew3rdfrhd7y2.png",a.canonical_url="https://aviyel.com/post/1430/fullstack-road-trip-mapper-app-built-using-mern-stack?utm_source=dev_to&utm_medium=articles_project_tutorials&utm_campaign=post_1430",a.created_at="2021-12-03T08:48:29Z",a.edited_at="2022-01-24T10:49:34Z",a.crossposted_at=s,a.published_at=n,a.last_comment_at="2021-12-14T20:22:38Z",a.reading_time_minutes=20,a.tag_list="react, javascript, mern, webdev",a.tags=["react","javascript","mern","webdev"],a.body_html='<p>This article concentrates on the most critical tasks and concepts for better understanding and building MERN stack applications from the ground up. It\'s for folks who are serious about learning about the MERN stack and want to concentrate on the essentials. We\'ll build a full-stack road trip mapper application where users can  pin and map locations and view the sites pinned by other users, all using the MERN stack and leveraging the power of the Mapbox API. This blog session will teach you the fundamentals of MERN stack technology as well as advanced concepts and operations.</p>\n\n<p><strong><em>Here\'s a quick preview of our application\'s final version:</em></strong></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8zGgghdw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8zGgghdw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png" alt="Demo" loading="lazy" width="760" height="376"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1DLhm83v--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933711894-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1DLhm83v--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933711894-image-resized.png" alt="Demo" loading="lazy" width="760" height="378"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--YKzZLub1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933834026-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--YKzZLub1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933834026-image-resized.png" alt="Demo" loading="lazy" width="760" height="377"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--U2bRJcFe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637934178664-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--U2bRJcFe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637934178664-image-resized.png" alt="Demo" loading="lazy" width="760" height="375"></a></p>\n\n<p>There is a separate article where you may learn about the MERN stack in very great detail.</p>\n\n<p><a href="https://aviyel.com/post/1278/crafting-a-stunning-crud-application-with-mern-stack">https://aviyel.com/post/1278</a></p>\n\n<p><strong><em>Setting up the folder structure</em></strong></p>\n\n<p>Create two folders inside your project directory called client and server, then open them in Visual Studio Code or any other code editor of your choice.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--qVVuvow1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637928697125-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--qVVuvow1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637928697125-image-resized.png" alt="Making Directory" loading="lazy" width="760" height="431"></a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--3BupR6RD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637740494285-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--3BupR6RD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637740494285-image.png" alt="Folder structure" loading="lazy" width="174" height="76"></a></p>\n\n<p>Now, we\'ll create a MongoDB database, a Node and Express server, a database schema to represent our project case study application, and API routes to create, read, update, and delete data and information from the database using npm and the appropriate packages. So, open a command prompt, navigate to your server\'s directory, and then run the code below.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>npm init <span class="nt">-yes</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><strong><em>Configuring package.json file</em></strong></p>\n\n<p>Execute the following commands in the terminal to install the dependencies.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>npm <span class="nb">install </span>cors dotenv express express-rate-limit mongoose nodemon body-parser helmet morgan rate-limit-mongo\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OjOXTvcW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637929452248-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OjOXTvcW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637929452248-image-resized.png" alt="Dependencies" loading="lazy" width="760" height="152"></a></p>\n\n<ul>\n<li><p>Dotenv: Dotenv is a zero-dependency module that loads environment variables from a .env file into process.env</p></li>\n<li><p>cors: This module allows to relax the security applied to an API</p></li>\n<li><p>express: Fast, unopinionated, minimalist web framework for node.</p></li>\n<li><p>express-rate-limit: Basic IP rate-limiting middleware for Express. It is used to limit repeated requests to public APIs and/or endpoints such as password reset.</p></li>\n<li><p>mongoose: It is an Object Data Modeling library for MongoDB and Node. js</p></li>\n<li><p>nodemon: This module helps to develop node.js based applications by automatically restarting the application when file changes in the directory are detected.</p></li>\n<li><p>body-parser: Node.js body parsing middleware.</p></li>\n<li><p>helmet: Helmet.js fills in the gap between Node.js and Express.js by securing HTTP headers that are returned by Express applications.</p></li>\n<li><p>morgan : HTTP request logger middleware for node.js</p></li>\n<li><p>rate-limit-mongo : MongoDB store for the express-rate-limit middleware.</p></li>\n</ul>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ONfBH_d7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637935056359-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ONfBH_d7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637935056359-image-resized.png" alt="Dependencies Installation" loading="lazy" width="760" height="133"></a></p>\n\n<p>The "package.json" file should look like this after the dependencies have been installed.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--_p2ZJEM1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637930533828-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--_p2ZJEM1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637930533828-image-resized.png" alt="Package JSON" loading="lazy" width="760" height="1136"></a></p>\n\n<p>And also, remember to update the scripts as well.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--parquAzH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637930580698-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--parquAzH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637930580698-image-resized.png" alt="Scripts" loading="lazy" width="760" height="349"></a></p>\n\n<p>Now go to your server directory, create a src folder, and an index.js file there.</p>\n\n<p>Setting up index.js</p>\n\n<ul>\n<li><p>Import express module.</p></li>\n<li><p>Import and configure dotenv module</p></li>\n<li><p>Import helmet module.</p></li>\n<li><p>Import morgan module.</p></li>\n<li><p>Import CORS module</p></li>\n<li><p>Use express() to initialize our app.<br>\n</p></li>\n</ul>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">//src/index.js</span>\n<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">express</span><span class="dl">\'</span><span class="p">);</span>\n<span class="c1">// NOTE morgan is a logger</span>\n<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">morgan</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">helmet</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">cors</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">mongoose</span><span class="dl">\'</span><span class="p">);</span>\n\n<span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">dotenv</span><span class="dl">\'</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>\n\n<span class="c1">// app config</span>\n<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>We may now utilize all of the other methods on that app instance. Let\'s start with the fundamentals and very basic setups. Don\'t forget to set up the port and cors, too.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">express</span><span class="dl">\'</span><span class="p">);</span>\n<span class="c1">// NOTE morgan is a logger</span>\n<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">morgan</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">helmet</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">cors</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">mongoose</span><span class="dl">\'</span><span class="p">);</span>\n\n<span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">dotenv</span><span class="dl">\'</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>\n\n<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>\n\n<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">4000</span><span class="p">;</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">morgan</span><span class="p">(</span><span class="dl">\'</span><span class="s1">common</span><span class="dl">\'</span><span class="p">));</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">({</span>\n  <span class="na">origin</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CORS_ORIGIN</span><span class="p">,</span>\n<span class="p">}));</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">\'</span><span class="s1">/</span><span class="dl">\'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>\n    <span class="na">message</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">Hello There</span><span class="dl">\'</span><span class="p">,</span>\n  <span class="p">});</span>\n<span class="p">});</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now it\'s time to connect our server application to a real database. Here we\'ll use the MongoDB database, specifically the MongoDB cloud Atlas version, which means our database will be hosted on their cloud.</p>\n\n<h3>\n  <a name="setting-up-mongodb-atlas-cloud-cluster" href="#setting-up-mongodb-atlas-cloud-cluster">\n  </a>\n  Setting up MongoDB Atlas cloud cluster\n</h3>\n\n<p>MongoDB is a document-oriented database that is open-source and cross-platform. MongoDB is a NoSQL database that stores data in JSON-like documents and has optional schemas. All versions were given under the AGPL license prior to October 16, 2018. All versions released after October 16, 2018, including bug fixes for prior versions, are covered by the SSPL license v1. You can also learn more about MongoDB setup and configuration from the following article.</p>\n\n<p><a href="https://aviyel.com/post/1323/building-a-calorie-journal-saas-based-project-using-mern-stack">https://aviyel.com/post/1323</a></p>\n\n<p>To set up and start your MongoDB cluster, follow the exact same steps mentioned below.</p>\n\n<p><strong><em>Official MongoDB website</em></strong>*<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--z-tapM6I--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905447164-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--z-tapM6I--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905447164-image-resized.png" alt="MongoDB atlas started" loading="lazy" width="760" height="374"></a></p>\n\n<p><strong><em>Sign-up MongoDB</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--NawkpF6e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905489282-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--NawkpF6e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905489282-image-resized.png" alt="MongoDB atlas Sign-up" loading="lazy" width="760" height="697"></a></p>\n\n<p><strong><em>Sign-in to MongoDB</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oqWmY4uC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905522148-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oqWmY4uC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905522148-image-resized.png" alt="MongoDb Atlas Login" loading="lazy" width="760" height="368"></a></p>\n\n<p><strong><em>Create a Project</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XlxmyjGi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905836002-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XlxmyjGi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905836002-image-resized.png" alt="Creating a Project" loading="lazy" width="760" height="370"></a></p>\n\n<p><strong><em>Adding members</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--H-N8kq7A--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905874939-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--H-N8kq7A--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637905874939-image-resized.png" alt="Adding a Members" loading="lazy" width="760" height="370"></a></p>\n\n<p><strong><em>Building Database</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--e-Pavx1J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906045235-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--e-Pavx1J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906045235-image-resized.png" alt="Building a Database" loading="lazy" width="760" height="372"></a></p>\n\n<p><strong><em>Creating a Cluster</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--wPu23T8D--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635322799518-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--wPu23T8D--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635322799518-image-resized.png" alt="Creating a Cluster" loading="lazy" width="760" height="381"></a></p>\n\n<p><strong><em>Selecting a cloud service Provider</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--6AV3XX6G--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635322998309-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--6AV3XX6G--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635322998309-image-resized.png" alt="Choosing a service provider" loading="lazy" width="760" height="380"></a></p>\n\n<p><strong><em>Configuring Security</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Z0FBpUL---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906267111-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Z0FBpUL---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906267111-image-resized.png" alt="Security Configurations" loading="lazy" width="760" height="372"></a></p>\n\n<p><strong><em>Database Deployment to the Cloud</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--yajsRi9i--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906356590-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--yajsRi9i--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906356590-image-resized.png" alt="Database Deployment to the cloud" loading="lazy" width="760" height="371"></a></p>\n\n<p><strong><em>Navigate to the network access tab and select "Add IP address."</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--GHji7Nx9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906632034-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--GHji7Nx9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906632034-image.png" alt="Add IP address" loading="lazy" width="511" height="311"></a></p>\n\n<p><strong><em>Now, select the Choose a connection method.</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--t7l4mYdR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635323638076-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--t7l4mYdR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1635323638076-image-resized.png" alt="Connection Method" loading="lazy" width="760" height="562"></a></p>\n\n<p><strong><em>Connecting to cluster</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xWMYRZGK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906571369-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xWMYRZGK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637906571369-image.png" alt="Connecting to the cluster" loading="lazy" width="579" height="494"></a></p>\n\n<p>Create a new variable called DATABASE_CONNECTION inside index.js . Create a string and paste the copied mongo DB connection URL into it. Now, inside it, type your username and password, removing any brackets and entering your own credentials. We\'ll create environmental variables to safeguard the credential later, but for now, let\'s add it this way. The second thing we\'ll need is a PORT, so just type in 4000 for now. Finally, we\'ll use mongoose to connect to our database, so type in mongoose. connect(), which is a function with two parameters. The DATABASE_CONNECTION will be the first, and the object with two choices will be the second. The first is useNewUrlParser, which we\'ll enable, and the second is useUnifiedTopology, which we\'ll enable as well. These objects are optional, but we will see some errors or warnings on our console. Let\'s chain it with .then() and .catch() inside,then() function. This will simply call the app and invoke listen, leading to two parameters: PORT and the callback function that will be executed if our application is successfully connected to the database. Finally, if the connection to the database is unsuccessful, we will simply console log our error message. Your index.js file should now look something like this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">//src/index.js</span>\n<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">express</span><span class="dl">\'</span><span class="p">);</span>\n<span class="c1">// NOTE morgan is a logger</span>\n<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">morgan</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">helmet</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">cors</span><span class="dl">\'</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">mongoose</span><span class="dl">\'</span><span class="p">);</span>\n\n<span class="nx">require</span><span class="p">(</span><span class="dl">\'</span><span class="s1">dotenv</span><span class="dl">\'</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>\n\n<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>\n\n<span class="kd">const</span> <span class="nx">DATABASE_CONNECTION</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE_URL</span><span class="p">;</span>\n\n<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">DATABASE_CONNECTION</span><span class="p">,</span> <span class="p">{</span>\n  <span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n  <span class="na">newUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n<span class="p">});</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">morgan</span><span class="p">(</span><span class="dl">\'</span><span class="s1">common</span><span class="dl">\'</span><span class="p">));</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">({</span>\n  <span class="na">origin</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CORS_ORIGIN</span><span class="p">,</span>\n<span class="p">}));</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">\'</span><span class="s1">/</span><span class="dl">\'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>\n    <span class="na">message</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">Hello There</span><span class="dl">\'</span><span class="p">,</span>\n  <span class="p">});</span>\n<span class="p">});</span>\n\n<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">4000</span><span class="p">;</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Currently Listening at http://localhost:</span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>\n<span class="p">});</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><strong><em>Insert mongodb+srv into the .env file.</em></strong><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>PORT=4000\nDATABASE_URL=mongodb+srv://pramit:&lt;password&gt;@cluster0.8tw83.mongodb.net/myFirstDatabase?retryWrites=true&amp;w=majority\nCORS_ORIGIN=http://localhost:3000\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>We now have successfully connected our server to the database, let\'s create middleware first before we get started on building our backend application\'s routes and database schema. To do so, we\'ll need to create a new file called middlewares.js and within that file, we will create a two function called notFound and errorHandler</p>\n\n<p>and export those functions. So let create notFound middleware so typically this middleware should be the last middleware that is registered so this middleware takes in req, res, and next. Basically, if a request ever made it here, it means we didn\'t locate the route users were searching for, so we\'ll create a variable and send them a message, and then we\'ll pass that to our next middleware, which is errorHander Middleware but before that don\'t  forget to pass the response status of 404 as well. Now let\'s make our errorHandler middleware, which has four parameters instead of three, so we\'ll have (error,req, res, next). The first thing we\'ll do is set a status code and check whether it\'s 200 or use the status code that\'s already been specified, and then we\'ll simply set the status code, and then we\'ll respond with some JSON that will display the error message.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">//middlewares.js</span>\n<span class="kd">const</span> <span class="nx">notFound</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`Not Found - </span><span class="p">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">originalUrl</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>\n  <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">);</span>\n  <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>\n<span class="p">};</span>\n\n<span class="kd">const</span> <span class="nx">errorHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="nx">statusCode</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">200</span> <span class="p">?</span> <span class="mi">500</span> <span class="p">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">;</span>\n  <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">statusCode</span><span class="p">);</span>\n  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>\n    <span class="na">message</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>\n    <span class="na">stack</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">nope</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">stack</span><span class="p">,</span>\n  <span class="p">});</span>\n<span class="p">};</span>\n\n<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>\n  <span class="nx">notFound</span><span class="p">,</span>\n  <span class="nx">errorHandler</span><span class="p">,</span>\n<span class="p">};</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>So, after modifying the middlewares.js file, import and use the middleware as needed in the index.js file.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">//src/index.js</span>\n<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>\n<span class="c1">// NOTE morgan is a logger</span>\n<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">morgan</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">helmet</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">cors</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">);</span>\n\n<span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dotenv</span><span class="dl">"</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>\n\n<span class="kd">const</span> <span class="nx">middlewares</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./middlewares</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>\n\n<span class="kd">const</span> <span class="nx">DATABASE_CONNECTION</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE_URL</span><span class="p">;</span>\n\n<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">DATABASE_CONNECTION</span><span class="p">,</span> <span class="p">{</span>\n  <span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n  <span class="na">newUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n<span class="p">});</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">morgan</span><span class="p">(</span><span class="dl">"</span><span class="s2">common</span><span class="dl">"</span><span class="p">));</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>\n  <span class="nx">cors</span><span class="p">({</span>\n    <span class="na">origin</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CORS_ORIGIN</span><span class="p">,</span>\n  <span class="p">})</span>\n<span class="p">);</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>\n    <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Hello There</span><span class="dl">"</span><span class="p">,</span>\n  <span class="p">});</span>\n<span class="p">});</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">middlewares</span><span class="p">.</span><span class="nx">notFound</span><span class="p">);</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">middlewares</span><span class="p">.</span><span class="nx">errorHandler</span><span class="p">);</span>\n\n<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">4000</span><span class="p">;</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Currently Listening at http://localhost:</span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>\n<span class="p">});</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>let\'s create a LogEntry model. Create a folder called models and inside it, create one file called LogEntry.model.js  and within that following file structure your DB schema by defining title, description, comments, image, ratings, latitude and longitude as shown below.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">//models/LogEntry.model.js</span>\n<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="p">{</span> <span class="nx">Schema</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">;</span>\n\n<span class="kd">const</span> <span class="nx">requiredNumber</span> <span class="o">=</span> <span class="p">{</span>\n  <span class="na">type</span><span class="p">:</span> <span class="nb">Number</span><span class="p">,</span>\n  <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n<span class="p">};</span>\n\n<span class="kd">const</span> <span class="nx">logEntrySchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">(</span>\n  <span class="p">{</span>\n    <span class="na">title</span><span class="p">:</span> <span class="p">{</span>\n      <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>\n      <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n    <span class="p">},</span>\n    <span class="na">description</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>\n    <span class="na">comments</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>\n    <span class="na">image</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>\n    <span class="na">rating</span><span class="p">:</span> <span class="p">{</span>\n      <span class="na">type</span><span class="p">:</span> <span class="nb">Number</span><span class="p">,</span>\n      <span class="na">min</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>\n      <span class="na">max</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>\n      <span class="na">default</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>\n    <span class="p">},</span>\n    <span class="na">latitude</span><span class="p">:</span> <span class="p">{</span>\n      <span class="p">...</span><span class="nx">requiredNumber</span><span class="p">,</span>\n      <span class="na">min</span><span class="p">:</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span>\n      <span class="na">max</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>\n    <span class="p">},</span>\n    <span class="na">longitude</span><span class="p">:</span> <span class="p">{</span>\n      <span class="p">...</span><span class="nx">requiredNumber</span><span class="p">,</span>\n      <span class="na">min</span><span class="p">:</span> <span class="o">-</span><span class="mi">180</span><span class="p">,</span>\n      <span class="na">max</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>\n    <span class="p">},</span>\n    <span class="na">visitDate</span><span class="p">:</span> <span class="p">{</span>\n      <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n      <span class="na">type</span><span class="p">:</span> <span class="nb">Date</span><span class="p">,</span>\n    <span class="p">},</span>\n  <span class="p">},</span>\n  <span class="p">{</span>\n    <span class="na">timestamps</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n  <span class="p">}</span>\n<span class="p">);</span>\n\n<span class="kd">const</span> <span class="nx">LogEntry</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="dl">"</span><span class="s2">collections</span><span class="dl">"</span><span class="p">,</span> <span class="nx">logEntrySchema</span><span class="p">);</span>\n\n<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">LogEntry</span><span class="p">;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The structure of your files and folders should now look like this.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--r4WNo2SF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638013845226-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--r4WNo2SF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638013845226-image.png" alt="Folder Structure" loading="lazy" width="345" height="316"></a></p>\n\n<p>Now that we\'ve successfully created our DB Schema, let\'s get started on creating our routes for our backend application. To do so, we\'ll need to create a new folder inside the src directory and name it as routes Within the routes folder, we will create a js file called logs.routes.js.so first we must import express from "express" and also configure our router and import our recently created DB schema. Now we can begin adding our routes to it.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--hi82ItcD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638017296911-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--hi82ItcD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638017296911-image.png" alt="Folder Structure" loading="lazy" width="343" height="351"></a><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>\n\n<span class="kd">const</span> <span class="nx">LogEntry</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">../models/LogEntry.model.js</span><span class="dl">"</span><span class="p">);</span>\n\n<span class="kd">const</span> <span class="p">{</span> <span class="nx">API_KEY</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">;</span>\n\n<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">Router</span><span class="p">();</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><strong><em>fetches all the pinned location information.</em></strong><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">try</span> <span class="p">{</span>\n    <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">LogEntry</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>\n    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">entries</span><span class="p">);</span>\n  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>\n    <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>\n  <span class="p">}</span>\n<span class="p">});</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><strong><em>Insert/add a pinned location with authorized access</em></strong><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">try</span> <span class="p">{</span>\n    <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">X-API-KEY</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">API_KEY</span><span class="p">)</span> <span class="p">{</span>\n      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">401</span><span class="p">);</span>\n      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Unauthorized Access</span><span class="dl">"</span><span class="p">);</span>\n    <span class="p">}</span>\n    <span class="kd">const</span> <span class="nx">logEntry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LogEntry</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>\n    <span class="kd">const</span> <span class="nx">createdEntry</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">logEntry</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>\n    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">createdEntry</span><span class="p">);</span>\n  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>\n    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">ValidationError</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>\n      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">422</span><span class="p">);</span>\n    <span class="p">}</span>\n    <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>\n  <span class="p">}</span>\n<span class="p">});</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><strong><em>exporting the router</em></strong><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Your logs.routes.js should resemble something like this<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">//src/routes/logs.routes.js</span>\n<span class="kd">const</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>\n\n<span class="kd">const</span> <span class="nx">LogEntry</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">../models/LogEntry.model.js</span><span class="dl">"</span><span class="p">);</span>\n\n<span class="kd">const</span> <span class="p">{</span> <span class="nx">API_KEY</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">;</span>\n\n<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">Router</span><span class="p">();</span>\n\n<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">try</span> <span class="p">{</span>\n    <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">LogEntry</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>\n    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">entries</span><span class="p">);</span>\n  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>\n    <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>\n  <span class="p">}</span>\n<span class="p">});</span>\n\n<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">try</span> <span class="p">{</span>\n    <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">X-API-KEY</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">API_KEY</span><span class="p">)</span> <span class="p">{</span>\n      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">401</span><span class="p">);</span>\n      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Unauthorized Access</span><span class="dl">"</span><span class="p">);</span>\n    <span class="p">}</span>\n    <span class="kd">const</span> <span class="nx">logEntry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LogEntry</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>\n    <span class="kd">const</span> <span class="nx">createdEntry</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">logEntry</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>\n    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">createdEntry</span><span class="p">);</span>\n  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>\n    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">ValidationError</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>\n      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">422</span><span class="p">);</span>\n    <span class="p">}</span>\n    <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>\n  <span class="p">}</span>\n<span class="p">});</span>\n\n<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><strong><em>Now, update your .env file</em></strong><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>NODE_ENV=production\nPORT=4000\nDATABASE_URL=mongodb+srv://pramit:&lt;password&gt;@cluster0.8tw83.mongodb.net/myFirstDatabase?retryWrites=true&amp;w=majority\nCORS_ORIGIN=http://localhost:3000\nAPI_KEY=roadtripmapper\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Let\'s get started by importing the logs routes into your index.js file. We can now connect map pinned log info to our application using express middleware. Finally, your root index.js file should be like the following.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">//src/index.js</span>\n<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>\n<span class="c1">// NOTE morgan is a logger</span>\n<span class="kd">const</span> <span class="nx">morgan</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">morgan</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">helmet</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">cors</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">mongoose</span><span class="dl">"</span><span class="p">);</span>\n\n<span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dotenv</span><span class="dl">"</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>\n\n<span class="kd">const</span> <span class="nx">middlewares</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./middlewares</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">logs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./routes/logs.routes.js</span><span class="dl">"</span><span class="p">);</span>\n<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>\n\n<span class="kd">const</span> <span class="nx">DATABASE_CONNECTION</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE_URL</span><span class="p">;</span>\n\n<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">DATABASE_CONNECTION</span><span class="p">,</span> <span class="p">{</span>\n  <span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n  <span class="na">newUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>\n<span class="p">});</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">morgan</span><span class="p">(</span><span class="dl">"</span><span class="s2">common</span><span class="dl">"</span><span class="p">));</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>\n  <span class="nx">cors</span><span class="p">({</span>\n    <span class="na">origin</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CORS_ORIGIN</span><span class="p">,</span>\n  <span class="p">})</span>\n<span class="p">);</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>\n    <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Hello There</span><span class="dl">"</span><span class="p">,</span>\n  <span class="p">});</span>\n<span class="p">});</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/logs</span><span class="dl">"</span><span class="p">,</span> <span class="nx">logs</span><span class="p">);</span>\n\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">middlewares</span><span class="p">.</span><span class="nx">notFound</span><span class="p">);</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">middlewares</span><span class="p">.</span><span class="nx">errorHandler</span><span class="p">);</span>\n\n<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">4000</span><span class="p">;</span>\n<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Currently Listening at http://localhost:</span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>\n<span class="p">});</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>After restarting the server, you should see something like this:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Fq5ljdmU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036953812-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Fq5ljdmU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036953812-image.png" alt="Server Running" loading="lazy" width="556" height="143"></a></p>\n\n\n<hr>\n\n<h3>\n  <a name="setting-up-the-frontend-with-react" href="#setting-up-the-frontend-with-react">\n  </a>\n  Setting up the frontend with react\n</h3>\n\n<p>In the next step let\'s start with the frontend and build it with react. The first thing you need to do is install Node.js if it isn\'t already installed on your machine. So, go to the Node.js official website and download the most recent version. You\'ll require Node js to utilize the node package manager, generally known as NPM. Now navigate to the client folder in your favorite code editor. Visual Studio Code will be my tool of choice. Then, in the integrated terminal, type npx create-react-app. This command will create a client application in the current directory with the name client.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--_adxZapT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638019632382-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--_adxZapT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638019632382-image.png" alt="create-react-app" loading="lazy" width="682" height="345"></a></p>\n\n<p>There is a separate article where you may learn everything there is to know about</p>\n\n<p>cleaning up boilerplate react project.</p>\n\n<p><a href="https://aviyel.com/post/1190/building-a-react-application-from-absolute-scratch">https://aviyel.com/post/1190</a></p>\n\n<p>It\'s time to install some packages within react-boilerplate now that you\'ve installed and cleaned it. so copy and paste the following command into your terminal.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>npm i react-hook-form react-map-gl react-rating-stars-component react-responsive-animate-navbar\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--WGevhfqS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638024929694-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--WGevhfqS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638024929694-image-resized.png" alt="Dependencies" loading="lazy" width="760" height="200"></a></p>\n\n<ul>\n<li><p>react-hook-form:  Performant, flexible, and extensible forms library for React Hooks.</p></li>\n<li><p>react-map-gl: react-map-gl is a suite of React components designed to provide a React API for Mapbox GL JS-compatible libraries</p></li>\n<li><p>react-rating-stars-component: Simple star rating component for your React projects.</p></li>\n<li><p>react-responsive-animate-navbar : simple, flexible &amp; completely customizable responsive navigation bar component.</p></li>\n</ul>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--rLys1zl6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638025122874-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--rLys1zl6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638025122874-image-resized.png" alt="Dependencies Installation" loading="lazy" width="760" height="191"></a></p>\n\n<p>After installing all these packages your packge.json file of the client should look like this:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zQb91OUz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638025324267-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zQb91OUz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638025324267-image-resized.png" alt="Package json" loading="lazy" width="760" height="1130"></a></p>\n\n<p>Let\'s construct two separate folders /components inside the components folder after we\'ve installed all of our project\'s dependencies and name it as RoadTripNav and TripEntryForm .</p>\n\n<p>Your file and folder structure should look something like this once you\'ve added all of your components.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0ljpsYTM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638026533825-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0ljpsYTM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638026533825-image.png" alt="Folder Structure" loading="lazy" width="333" height="354"></a></p>\n\n<p>Now that you have all of the project\'s components set up, it\'s time to start coding. First, import the ReactNavbar from "react-responsive-animate-navbar" and customize the color of your navbar, add the logo to the public folder and import it directly, and don’t forget to add some social links as well. The following is an example of how the code should appear.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--rMvXbb7p--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036022672-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--rMvXbb7p--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036022672-image.png" alt="RoadTripNavComponent" loading="lazy" width="544" height="128"></a><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">// components/RoadTripNav</span>\n<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">ReactNavbar</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-responsive-animate-navbar</span><span class="dl">"</span><span class="p">;</span>\n<span class="c1">// import roadTripSvg from "../../assets/roadtrip.svg";</span>\n\n<span class="kd">const</span> <span class="nx">RoadTripNav</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="o">&lt;</span><span class="nx">ReactNavbar</span><span class="p">.</span><span class="nx">ReactNavbar</span>\n      <span class="nx">color</span><span class="o">=</span><span class="dl">"</span><span class="s2">rgb(25, 25, 25)</span><span class="dl">"</span>\n      <span class="nx">logo</span><span class="o">=</span><span class="dl">"</span><span class="s2">./logo.svg</span><span class="dl">"</span>\n      <span class="nx">menu</span><span class="o">=</span><span class="p">{[]}</span>\n      <span class="nx">social</span><span class="o">=</span><span class="p">{[</span>\n        <span class="p">{</span>\n          <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Twitter</span><span class="dl">"</span><span class="p">,</span>\n          <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://twitter.com/pramit_armpit</span><span class="dl">"</span><span class="p">,</span>\n          <span class="na">icon</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">fab</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">twitter</span><span class="dl">"</span><span class="p">],</span>\n        <span class="p">},</span>\n      <span class="p">]}</span>\n    <span class="sr">/</span><span class="err">&gt;\n</span>  <span class="p">);</span>\n<span class="p">};</span>\n\n<span class="k">export</span> <span class="k">default</span> <span class="nx">RoadTripNav</span><span class="p">;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Before we go any further, let\'s set up our Mapbox. First, go to the Mapbox site and log in or sign up if you don\'t already have an account. Next, create your own custom map style in the Mapbox Studio and publish it. Finally, go back to the dashboard and copy the default public API key provided by MapBox.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0U24qm4o--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637907686658-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0U24qm4o--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637907686658-image-resized.png" alt="Mapbox" loading="lazy" width="760" height="378"></a></p>\n\n<p><strong><em>Login or create your MapBox account</em></strong></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XoYP0YOF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637907709168-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XoYP0YOF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637907709168-image-resized.png" alt="Mapbox login" loading="lazy" width="760" height="511"></a></p>\n\n<p><strong><em>Click on design a custom map style</em></strong></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FiYiw1jh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923672745-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FiYiw1jh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923672745-image.png" alt="Mapbox studio" loading="lazy" width="411" height="295"></a></p>\n\n<p><strong><em>Customize your own style of the map inside the Mapbox studio</em></strong></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--fzikZIJL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923619968-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fzikZIJL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923619968-image-resized.png" alt="MapBox studio Editor" loading="lazy" width="760" height="373"></a></p>\n\n<p><strong><em>Copy the default public token</em></strong><br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oMO0ArWf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923829522-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oMO0ArWf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637923829522-image-resized.png" alt="Access Token" loading="lazy" width="760" height="436"></a></p>\n\n<p>After you\'ve successfully obtained your public token, go to the env file or create one if you don’t have and after that create a variable named as REACT_APP_MAPBOX_TOKEN, then paste that token into that variable. This is what your env file should look like.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>REACT_APP_MAPBOX_TOKEN= ************************************ // add token\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Before we go any further, let\'s make an api and styles folder in our root source directory. Inside the api folder, make a API.js file, and inside the styles folder, make a index.css file where all our styles of the application will be added. This is how your folder structure should appear.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--cgwIX-k9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638028733936-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--cgwIX-k9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638028733936-image.png" alt="Folder Structure" loading="lazy" width="352" height="466"></a></p>\n\n<p>Now go to the newly created API file and construct two functions called "listLogEntries" to collect all the log entries from the backend and "createLogEntries" to create or send the post request / post the entries to the backend, as well as export these functions. Also, don\'t forget to include the URL where your server is running.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--rS-lFTd_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036093022-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--rS-lFTd_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036093022-image.png" alt="API" loading="lazy" width="298" height="259"></a><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">//api/API.js</span>\n<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">http://localhost:4000</span><span class="dl">"</span><span class="p">;</span>\n<span class="c1">// const API_URL = window.location.hostname === "localhost" ? "http://localhost:4000" : "https://road-trip-map-mern.herokuapp.com" ;</span>\n\n<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">listLogEntries</span><span class="p">()</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">API_URL</span><span class="p">}</span><span class="s2">/api/logs`</span><span class="p">);</span>\n  <span class="c1">// const json = await response.json();</span>\n  <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>\n<span class="p">}</span>\n\n<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">createLogEntries</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="nx">api_key</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">api_key</span><span class="p">;</span>\n  <span class="k">delete</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">api_key</span><span class="p">;</span>\n  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">API_URL</span><span class="p">}</span><span class="s2">/api/logs`</span><span class="p">,</span> <span class="p">{</span>\n    <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>\n      <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>\n      <span class="dl">"</span><span class="s2">X-API-KEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">api_key</span><span class="p">,</span>\n    <span class="p">},</span>\n    <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">entry</span><span class="p">),</span>\n  <span class="p">});</span>\n  <span class="c1">// const json = await response.json();</span>\n  <span class="c1">// return response.json();</span>\n  <span class="kd">let</span> <span class="nx">json</span><span class="p">;</span>\n  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">).</span><span class="nx">includes</span><span class="p">(</span><span class="dl">"</span><span class="s2">text/html</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>\n    <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>\n    <span class="nx">json</span> <span class="o">=</span> <span class="p">{</span>\n      <span class="nx">message</span><span class="p">,</span>\n    <span class="p">};</span>\n  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>\n    <span class="nx">json</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>\n  <span class="p">}</span>\n  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>\n    <span class="k">return</span> <span class="nx">json</span><span class="p">;</span>\n  <span class="p">}</span>\n  <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>\n  <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="o">=</span> <span class="nx">json</span><span class="p">;</span>\n  <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Let\'s make a submission form for the pinned map location. To do so, open the TripEntryForm component from the component folder we previously made, import the useForm hook from react-hook-form, import createLogentries from api, and then import the useState hook from the React library because this hook will enable us to integrate the state into our functional component. useState(), unlike state in class components, does not work with object values. If necessary, we can use primitives directly and create multiple react hooks for multiple variables. Now, create two states: loading and error, and then destructure register and handleSubmit from the useForm() hook from "react-hook-form" library.After you\'ve completed that, it\'s time to craft our form, but first let\'s create a function to handle our submit request. To do so, create an asynchronous onSubmit function and inside it, simply create a try-catch block. Inside the try block set the loading to true, configure the latitude and longitude, console log the data, and invoke the onClose function, and finally inside the catch block, pass the error message to the error state, set the loading to false and simply console log the error message and then simply create a form inside the return statement exactly shown in the code below.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--EF-iElcY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036159120-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--EF-iElcY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036159120-image.png" alt="TripEntry Form" loading="lazy" width="549" height="128"></a><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">// components/TripEntryForm.js</span>\n<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="p">{</span> <span class="nx">useForm</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-hook-form</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="p">{</span> <span class="nx">createLogEntries</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../../api/API</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="dl">"</span><span class="s2">./TripEntryForm.css</span><span class="dl">"</span><span class="p">;</span>\n\n<span class="kd">const</span> <span class="nx">TripEntryForm</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">onClose</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">loading</span><span class="p">,</span> <span class="nx">setLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">error</span><span class="p">,</span> <span class="nx">setError</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">""</span><span class="p">);</span>\n\n  <span class="kd">const</span> <span class="p">{</span> <span class="nx">register</span><span class="p">,</span> <span class="nx">handleSubmit</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useForm</span><span class="p">();</span>\n\n  <span class="kd">const</span> <span class="nx">onSubmit</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="k">try</span> <span class="p">{</span>\n      <span class="nx">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>\n      <span class="nx">data</span><span class="p">.</span><span class="nx">latitude</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>\n      <span class="nx">data</span><span class="p">.</span><span class="nx">longitude</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>\n      <span class="kd">const</span> <span class="nx">created</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">createLogEntries</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>\n      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">created</span><span class="p">);</span>\n      <span class="nx">onClose</span><span class="p">();</span>\n    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>\n      <span class="nx">setError</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>\n      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>\n      <span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>\n    <span class="p">}</span>\n  <span class="p">};</span>\n\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">onSubmit</span><span class="p">)}</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">trip-form</span><span class="dl">"</span><span class="o">&gt;</span>\n      <span class="p">{</span><span class="nx">error</span> <span class="p">?</span> <span class="o">&lt;</span><span class="nx">h3</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">error-message</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">error</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h3&gt; : null</span><span class="err">}\n</span>      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">api_key</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Enter</span> <span class="nx">Password</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;\n</span>      <span class="o">&lt;</span><span class="nx">input</span>\n        <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">password</span><span class="dl">"</span>\n        <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">api_key</span><span class="dl">"</span>\n        <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">For demo, password =&gt; {roadtripmap} </span><span class="dl">"</span>\n        <span class="nx">required</span>\n        <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span>\n      <span class="sr">/</span><span class="err">&gt;\n</span>\n      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Title</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;\n</span>      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Title</span><span class="dl">"</span> <span class="nx">required</span> <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;\n</span>\n      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">comments</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;\n</span>      <span class="o">&lt;</span><span class="nx">textarea</span>\n        <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">comments</span><span class="dl">"</span>\n        <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Comments</span><span class="dl">"</span>\n        <span class="nx">rows</span><span class="o">=</span><span class="p">{</span><span class="mi">3</span><span class="p">}</span>\n        <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span>\n      <span class="o">&gt;&lt;</span><span class="sr">/textarea</span><span class="err">&gt;\n</span>\n      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Description</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;\n</span>      <span class="o">&lt;</span><span class="nx">textarea</span>\n        <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">description</span><span class="dl">"</span>\n        <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Describe your journey</span><span class="dl">"</span>\n        <span class="nx">rows</span><span class="o">=</span><span class="p">{</span><span class="mi">4</span><span class="p">}</span>\n        <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span>\n      <span class="o">&gt;&lt;</span><span class="sr">/textarea</span><span class="err">&gt;\n</span>\n      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">image</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Image</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;\n</span>      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">image</span><span class="dl">"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Image URL</span><span class="dl">"</span> <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;\n</span>\n      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">rating</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Rating</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;\n</span>      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">rating</span><span class="dl">"</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">number</span><span class="dl">"</span> <span class="nx">min</span><span class="o">=</span><span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="nx">max</span><span class="o">=</span><span class="dl">"</span><span class="s2">10</span><span class="dl">"</span> <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;\n</span>\n      <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">visitDate</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Visit</span> <span class="nb">Date</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;\n</span>      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">visitDate</span><span class="dl">"</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">date</span><span class="dl">"</span> <span class="nx">required</span> <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">register</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;\n</span>\n      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">loading</span><span class="p">}</span><span class="o">&gt;</span>\n        <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">loading</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Submitting...</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Submit your Trip</span><span class="dl">"</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/span</span><span class="err">&gt;\n</span>      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;\n</span>    <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;\n</span>  <span class="p">);</span>\n<span class="p">};</span>\n\n<span class="k">export</span> <span class="k">default</span> <span class="nx">TripEntryForm</span><span class="p">;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Also, don\'t forget to add the TripEntryForm styles inside that very own component folder and name it as TripEntryForm.css and paste the exact CSS code as mentioned below</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--auefFJZG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036209467-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--auefFJZG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036209467-image.png" alt="TripEntry Form style" loading="lazy" width="147" height="114"></a><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="o">//</span><span class="nt">TripEntryForm</span><span class="nc">.css</span>\n<span class="k">@import</span> <span class="sx">url("https://fonts.googleapis.com/css2?family=Fredoka+One&amp;family=Poppins:ital,wght@0,200;0,400;1,200;1,300&amp;family=Roboto:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&amp;display=swap")</span><span class="p">;</span>\n\n<span class="nc">.trip-form</span> <span class="nt">label</span> <span class="p">{</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="m">0.5rem</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>\n  <span class="nl">color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">);</span>\n  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"Fredoka One"</span><span class="p">,</span> <span class="nb">cursive</span><span class="p">;</span>\n<span class="p">}</span>\n<span class="nc">.trip-form</span> <span class="nt">input</span> <span class="p">{</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="m">0.5rem</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#2c2e41</span><span class="p">;</span>\n  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>\n  <span class="nl">border</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>\n  <span class="nl">color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">);</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="m">12px</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>\n  <span class="nl">outline</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span> <span class="m">5px</span> <span class="m">10px</span> <span class="m">5px</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>\n  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"Fredoka One"</span><span class="p">,</span> <span class="nb">cursive</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.trip-form</span> <span class="nt">textarea</span> <span class="p">{</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="m">0.5rem</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#2c2e41</span><span class="p">;</span>\n  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>\n  <span class="nl">border</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>\n  <span class="nl">color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">);</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="m">12px</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>\n  <span class="nl">outline</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span> <span class="m">5px</span> <span class="m">10px</span> <span class="m">5px</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>\n  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"Fredoka One"</span><span class="p">,</span> <span class="nb">cursive</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.error-message</span> <span class="p">{</span>\n  <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.trip-form</span> <span class="nt">button</span> <span class="p">{</span>\n  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#fb5666</span><span class="p">;</span>\n  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">12px</span><span class="p">;</span>\n  <span class="nl">border</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>\n  <span class="nl">color</span><span class="p">:</span> <span class="m">#eee</span><span class="p">;</span>\n  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="m">18px</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">50px</span><span class="p">;</span>\n  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">38px</span><span class="p">;</span>\n  <span class="nl">outline</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nt">button</span> <span class="nt">span</span> <span class="p">{</span>\n  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>\n  <span class="nl">z-index</span><span class="p">:</span> <span class="m">2</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nt">button</span><span class="nd">:after</span> <span class="p">{</span>\n  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>\n  <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>\n  <span class="nl">top</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>\n  <span class="nl">transition</span><span class="p">:</span> <span class="n">all</span> <span class="m">2.35s</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nt">button</span><span class="nd">:hover</span> <span class="p">{</span>\n  <span class="nl">color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nt">button</span><span class="nd">:hover:after</span> <span class="p">{</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.small_description</span> <span class="p">{</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="m">60px</span><span class="p">;</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now go to this repo and download all of the SVG files that are available there.</p>\n\n<p><a href="https://github.com/pramit-marattha/road-trip-mapper-mern-app/tree/main/client/src/assets">https://github.com/pramit-marattha/road-trip-mapper-mern-app/tree/main/client/src/assets</a></p>\n\n<p>After you\'ve downloaded all of the svg files, go to the main app component, and begin importing all of the key requirements from the libraries we previously installed, such as ReactMapGl, marker, and popup from the "react-map-gl" library, import all of the components as well as svgs from the assets folder, and finally create four state logEntries whose initial value is empty array, showPopup whose initial value is an empty object, addEntryLocation has a default value of null, and for viewport specify the initial value exactly like the code mentioned below or you can add whatever you want. Create an asynchronous function called getEntries that asynchronously calls the listLogEntries function that was previously established within the api file and whose main task is to retrieve all of the entries made by the users and feed them to the logEntries state and then call that function inside the useEffect() hook by using this Hook, you tell React that your component needs to do something after render.</p>\n\n<p>React will remember the function you passed (we’ll refer to it as our “effect”), and call it later after performing the DOM updates. To this effect, we set the document title, but we could also perform data fetching or call some other imperative API. Placing  useEffect() inside the component lets us access the count state variable (or any props) right from the effect. We don’t need a special API to read it — it’s already in the function scope. Hooks embrace JavaScript closures and avoid introducing React-specific APIs where JavaScript already provides a solution.useEffect() the hook is somewhat similar to the life-cycle methods that we are aware of for class components. It runs after every render of the component including the initial render. Hence it can be thought of as a combination of componentDidMount, componentDidUpdate, and componentWillUnmount.If we want to control the behavior of when the effect should run (only on initial render, or only when a particular state variable changes), we can pass in dependencies to the effect to do so. This hook also provides a clean-up option to allow cleaning up of resources before the component is destroyed. basic syntax of the effect: useEffect(didUpdate) .</p>\n\n<p>Create a function named showMarkerPopup and provide the event parameters to it. Inside that function, destruct the latitude and longitude from "event.lngltd" and pass it to addEntryLocation state. Finally, employ all of the imported components within our return statement by simply following the code shown below.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--P_Eel5Gd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036249267-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--P_Eel5Gd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036249267-image.png" alt="App component" loading="lazy" width="375" height="172"></a><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight javascript"><code><span class="c1">//src/app.js</span>\n<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="nx">ReactMapGL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Marker</span><span class="p">,</span> <span class="nx">Popup</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-map-gl</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="p">{</span> <span class="nx">listLogEntries</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./api/API</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="nx">MapPinLogo</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./assets/mapperPin.svg</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="nx">MarkerPopup</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./assets/MarkerPopup.svg</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="nx">TripEntryForm</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/TripEntryForm</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="nx">ReactStars</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-rating-stars-component</span><span class="dl">"</span><span class="p">;</span>\n<span class="k">import</span> <span class="nx">RoadTripNav</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/RoadTripNav/RoadTripNav</span><span class="dl">"</span><span class="p">;</span>\n\n<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">logEntries</span><span class="p">,</span> <span class="nx">setLogEntries</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">showPopup</span><span class="p">,</span> <span class="nx">setShowPopup</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">({});</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">addEntryLocation</span><span class="p">,</span> <span class="nx">setAddEntryLocation</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>\n  <span class="kd">const</span> <span class="p">[</span><span class="nx">viewport</span><span class="p">,</span> <span class="nx">setViewport</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">({</span>\n    <span class="na">width</span><span class="p">:</span> <span class="dl">"</span><span class="s2">100vw</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">height</span><span class="p">:</span> <span class="dl">"</span><span class="s2">100vh</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">latitude</span><span class="p">:</span> <span class="mf">27.7577</span><span class="p">,</span>\n    <span class="na">longitude</span><span class="p">:</span> <span class="mf">85.3231324</span><span class="p">,</span>\n    <span class="na">zoom</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>\n  <span class="p">});</span>\n\n  <span class="kd">const</span> <span class="nx">getEntries</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="kd">const</span> <span class="nx">logEntries</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">listLogEntries</span><span class="p">();</span>\n    <span class="nx">setLogEntries</span><span class="p">(</span><span class="nx">logEntries</span><span class="p">);</span>\n    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logEntries</span><span class="p">);</span>\n  <span class="p">};</span>\n\n  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="nx">getEntries</span><span class="p">();</span>\n  <span class="p">},</span> <span class="p">[]);</span>\n\n  <span class="kd">const</span> <span class="nx">showMarkerPopup</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">lngLat</span><span class="p">);</span>\n    <span class="kd">const</span> <span class="p">[</span><span class="nx">longitude</span><span class="p">,</span> <span class="nx">latitude</span><span class="p">]</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">lngLat</span><span class="p">;</span>\n    <span class="nx">setAddEntryLocation</span><span class="p">({</span>\n      <span class="nx">longitude</span><span class="p">,</span>\n      <span class="nx">latitude</span><span class="p">,</span>\n    <span class="p">});</span>\n  <span class="p">};</span>\n\n  <span class="k">return</span> <span class="p">(</span>\n    <span class="o">&lt;&gt;</span>\n      <span class="o">&lt;</span><span class="nx">RoadTripNav</span> <span class="o">/&gt;</span>\n      <span class="o">&lt;</span><span class="nx">ReactMapGL</span>\n        <span class="p">{...</span><span class="nx">viewport</span><span class="p">}</span>\n        <span class="nx">mapStyle</span><span class="o">=</span><span class="dl">"</span><span class="s2">mapbox://styles/pramitmarattha/ckiovge5k3e7x17tcmydc42s3</span><span class="dl">"</span> \n        <span class="nx">mapboxApiAccessToken</span><span class="o">=</span><span class="p">{</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REACT_APP_MAPBOX_TOKEN</span><span class="p">}</span>\n        <span class="nx">onViewportChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">nextViewport</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setViewport</span><span class="p">(</span><span class="nx">nextViewport</span><span class="p">)}</span>\n        <span class="nx">onDblClick</span><span class="o">=</span><span class="p">{</span><span class="nx">showMarkerPopup</span><span class="p">}</span>\n      <span class="o">&gt;</span>\n        <span class="p">{</span><span class="nx">logEntries</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>\n          <span class="o">&lt;</span><span class="nx">React</span><span class="p">.</span><span class="nx">Fragment</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">_id</span><span class="p">}</span><span class="o">&gt;</span>\n            <span class="o">&lt;</span><span class="nx">Marker</span> <span class="nx">latitude</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">latitude</span><span class="p">}</span> <span class="nx">longitude</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">longitude</span><span class="p">}</span><span class="o">&gt;</span>\n              <span class="o">&lt;</span><span class="nx">div</span>\n                <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span>\n                  <span class="nx">setShowPopup</span><span class="p">({</span>\n                    <span class="c1">// ...showPopup,</span>\n                    <span class="p">[</span><span class="nx">entry</span><span class="p">.</span><span class="nx">_id</span><span class="p">]:</span> <span class="kc">true</span><span class="p">,</span>\n                  <span class="p">})</span>\n                <span class="p">}</span>\n              <span class="o">&gt;</span>\n                <span class="o">&lt;</span><span class="nx">img</span>\n                  <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">map-pin</span><span class="dl">"</span>\n                  <span class="nx">style</span><span class="o">=</span><span class="p">{{</span>\n                    <span class="na">width</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="mi">5</span> <span class="o">*</span> <span class="nx">viewport</span><span class="p">.</span><span class="nx">zoom</span><span class="p">}</span><span class="s2">px`</span><span class="p">,</span>\n                    <span class="na">height</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="mi">5</span> <span class="o">*</span> <span class="nx">viewport</span><span class="p">.</span><span class="nx">zoom</span><span class="p">}</span><span class="s2">px`</span><span class="p">,</span>\n                  <span class="p">}}</span>\n                  <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">MapPinLogo</span><span class="p">}</span>\n                  <span class="nx">alt</span><span class="o">=</span><span class="dl">"</span><span class="s2">Map Pin Logo</span><span class="dl">"</span>\n                <span class="o">/&gt;</span>\n              <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;\n</span>            <span class="o">&lt;</span><span class="sr">/Marker</span><span class="err">&gt;\n</span>            <span class="p">{</span><span class="nx">showPopup</span><span class="p">[</span><span class="nx">entry</span><span class="p">.</span><span class="nx">_id</span><span class="p">]</span> <span class="p">?</span> <span class="p">(</span>\n              <span class="o">&lt;</span><span class="nx">Popup</span>\n                <span class="nx">latitude</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">latitude</span><span class="p">}</span>\n                <span class="nx">longitude</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">longitude</span><span class="p">}</span>\n                <span class="nx">closeButton</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>\n                <span class="nx">closeOnClick</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>\n                <span class="nx">dynamicPosition</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>\n                <span class="nx">onClose</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setShowPopup</span><span class="p">({})}</span>\n                <span class="nx">anchor</span><span class="o">=</span><span class="dl">"</span><span class="s2">top</span><span class="dl">"</span>\n              <span class="o">&gt;</span>\n                <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">popup</span><span class="dl">"</span><span class="o">&gt;</span>\n                  <span class="o">&lt;</span><span class="nx">ReactStars</span>\n                    <span class="nx">count</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>\n                    <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">rating</span><span class="p">}</span>\n                    <span class="nx">size</span><span class="o">=</span><span class="p">{</span><span class="mi">29</span><span class="p">}</span>\n                    <span class="nx">activeColor</span><span class="o">=</span><span class="dl">"</span><span class="s2">#ffd700</span><span class="dl">"</span>\n                  <span class="o">/&gt;</span>\n                  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">popup_image</span><span class="dl">"</span><span class="o">&gt;</span>\n                    <span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">image</span> <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span> <span class="nx">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">}\n</span>                  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;\n</span>                  <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h3</span><span class="err">&gt;\n</span>                  <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">comments</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;\n</span>                  <span class="o">&lt;</span><span class="nx">small</span><span class="o">&gt;</span>\n                    <span class="na">Visited</span> <span class="p">:{</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">}</span>\n                    <span class="p">{</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">visitDate</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">(</span><span class="dl">"</span><span class="s2">en-US</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>\n                      <span class="na">weekday</span><span class="p">:</span> <span class="dl">"</span><span class="s2">long</span><span class="dl">"</span><span class="p">,</span>\n                      <span class="na">year</span><span class="p">:</span> <span class="dl">"</span><span class="s2">numeric</span><span class="dl">"</span><span class="p">,</span>\n                      <span class="na">month</span><span class="p">:</span> <span class="dl">"</span><span class="s2">long</span><span class="dl">"</span><span class="p">,</span>\n                      <span class="na">day</span><span class="p">:</span> <span class="dl">"</span><span class="s2">numeric</span><span class="dl">"</span><span class="p">,</span>\n                    <span class="p">})}</span>\n                  <span class="o">&lt;</span><span class="sr">/small</span><span class="err">&gt;\n</span>                  <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="na">Ratings</span><span class="p">:</span> <span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">rating</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;\n</span>                  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">small_description</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">description</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;\n</span>                <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;\n</span>              <span class="o">&lt;</span><span class="sr">/Popup</span><span class="err">&gt;\n</span>            <span class="p">)</span> <span class="p">:</span> <span class="kc">null</span><span class="p">}</span>\n          <span class="o">&lt;</span><span class="sr">/React.Fragment</span><span class="err">&gt;\n</span>        <span class="p">))}</span>\n        <span class="p">{</span><span class="nx">addEntryLocation</span> <span class="p">?</span> <span class="p">(</span>\n          <span class="o">&lt;&gt;</span>\n            <span class="o">&lt;</span><span class="nx">Marker</span>\n              <span class="nx">latitude</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">.</span><span class="nx">latitude</span><span class="p">}</span>\n              <span class="nx">longitude</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">.</span><span class="nx">longitude</span><span class="p">}</span>\n            <span class="o">&gt;</span>\n              <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>\n                <span class="o">&lt;</span><span class="nx">img</span>\n                  <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">map-pin</span><span class="dl">"</span>\n                  <span class="nx">style</span><span class="o">=</span><span class="p">{{</span>\n                    <span class="na">width</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="mi">8</span> <span class="o">*</span> <span class="nx">viewport</span><span class="p">.</span><span class="nx">zoom</span><span class="p">}</span><span class="s2">px`</span><span class="p">,</span>\n                    <span class="na">height</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="mi">8</span> <span class="o">*</span> <span class="nx">viewport</span><span class="p">.</span><span class="nx">zoom</span><span class="p">}</span><span class="s2">px`</span><span class="p">,</span>\n                  <span class="p">}}</span>\n                  <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">MarkerPopup</span><span class="p">}</span>\n                  <span class="nx">alt</span><span class="o">=</span><span class="dl">"</span><span class="s2">Map Pin Logo</span><span class="dl">"</span>\n                <span class="o">/&gt;</span>\n              <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;\n</span>              <span class="p">{</span><span class="cm">/* &lt;div style={{color:"white"}}&gt;{entry.title}&lt;/div&gt; */</span><span class="p">}</span>\n            <span class="o">&lt;</span><span class="sr">/Marker</span><span class="err">&gt;\n</span>\n            <span class="o">&lt;</span><span class="nx">Popup</span>\n              <span class="nx">latitude</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">.</span><span class="nx">latitude</span><span class="p">}</span>\n              <span class="nx">longitude</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">.</span><span class="nx">longitude</span><span class="p">}</span>\n              <span class="nx">closeButton</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>\n              <span class="nx">closeOnClick</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>\n              <span class="nx">dynamicPosition</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>\n              <span class="nx">onClose</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setAddEntryLocation</span><span class="p">(</span><span class="kc">null</span><span class="p">)}</span>\n              <span class="nx">anchor</span><span class="o">=</span><span class="dl">"</span><span class="s2">top</span><span class="dl">"</span>\n            <span class="o">&gt;</span>\n              <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">popup</span><span class="dl">"</span><span class="o">&gt;</span>\n                <span class="o">&lt;</span><span class="nx">TripEntryForm</span>\n                  <span class="nx">onClose</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="p">{</span>\n                    <span class="nx">setAddEntryLocation</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>\n                    <span class="nx">getEntries</span><span class="p">();</span>\n                  <span class="p">}}</span>\n                  <span class="nx">location</span><span class="o">=</span><span class="p">{</span><span class="nx">addEntryLocation</span><span class="p">}</span>\n                <span class="sr">/</span><span class="err">&gt;\n</span>              <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;\n</span>            <span class="o">&lt;</span><span class="sr">/Popup</span><span class="err">&gt;\n</span>          <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;\n</span>        <span class="p">)</span> <span class="p">:</span> <span class="kc">null</span><span class="p">}</span>\n      <span class="o">&lt;</span><span class="sr">/ReactMapGL</span><span class="err">&gt;\n</span>    <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;\n</span>  <span class="p">);</span>\n<span class="p">};</span>\n\n<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The very final step is to add all of the styles to our project, which can be done by going to our previously established styles folder and copying and pasting the following mentioned code into the index.css file.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kJntPAM2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036274330-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kJntPAM2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036274330-image.png" alt="index css" loading="lazy" width="127" height="129"></a><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight css"><code><span class="c">/* styles/index.css */</span>\n<span class="k">@import</span> <span class="sx">url("https://fonts.googleapis.com/css2?family=Fredoka+One&amp;family=Poppins:ital,wght@0,200;0,400;1,200;1,300&amp;family=Roboto:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&amp;display=swap")</span><span class="p">;</span>\n\n<span class="nt">body</span> <span class="p">{</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>\n  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"Fredoka One"</span><span class="p">,</span> <span class="nb">cursive</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="m">100vh</span><span class="p">;</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">100vw</span><span class="p">;</span>\n  <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nt">code</span> <span class="p">{</span>\n  <span class="nl">font-family</span><span class="p">:</span> <span class="n">source-code-pro</span><span class="p">,</span> <span class="n">Menlo</span><span class="p">,</span> <span class="n">Monaco</span><span class="p">,</span> <span class="n">Consolas</span><span class="p">,</span> <span class="s1">"Courier New"</span><span class="p">,</span>\n    <span class="nb">monospace</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.map-pin</span> <span class="p">{</span>\n  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>\n  <span class="nl">transform</span><span class="p">:</span> <span class="n">translate</span><span class="p">(</span><span class="m">-50%</span><span class="p">,</span> <span class="m">-100%</span><span class="p">);</span>\n  <span class="nl">z-index</span><span class="p">:</span> <span class="m">-1</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.popup</span> <span class="p">{</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">20vw</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>\n  <span class="nl">padding</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>\n  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#8661d1</span><span class="p">;</span>\n  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>\n  <span class="nl">z-index</span><span class="p">:</span> <span class="m">999</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.popup</span> <span class="nt">img</span> <span class="p">{</span>\n  <span class="nl">width</span><span class="p">:</span> <span class="m">40%</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>\n  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5%</span><span class="p">;</span>\n  <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>\n  <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>\n  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>\n  <span class="nl">padding-top</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.popup_image</span> <span class="p">{</span>\n  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>\n  <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>\n  <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nc">.small_description</span> <span class="p">{</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.5rem</span><span class="p">;</span>\n  <span class="nl">color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>\n  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>\n  <span class="nl">z-index</span><span class="p">:</span> <span class="m">999</span><span class="p">;</span>\n<span class="p">}</span>\n\n<span class="nt">button</span> <span class="p">{</span>\n  <span class="nl">border</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>\n  <span class="nl">color</span><span class="p">:</span> <span class="m">#fa5252</span><span class="p">;</span>\n  <span class="nl">padding-right</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>\n  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>\n  <span class="nl">font-size</span><span class="p">:</span> <span class="m">4rem</span><span class="p">;</span>\n  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">0.2rem</span><span class="p">;</span>\n  <span class="nl">height</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>\n  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Finally, start both the client and the server.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--CcZmVDcq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036698778-image.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--CcZmVDcq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1638036698778-image.png" alt="React Running" loading="lazy" width="413" height="166"></a></p>\n\n<h2>\n  <a name="application-up-and-running" href="#application-up-and-running">\n  </a>\n  Application up and running\n</h2>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8zGgghdw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8zGgghdw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png" alt="Demo" loading="lazy" width="760" height="376"></a></p>\n\n<p>This application\'s entire source code is available here.</p>\n\n<p><a href="https://github.com/aviyeldevrel/devrel-tutorial-projects/tree/main/MERN-roadtrip-mapper">https://github.com/aviyeldevrel/devrel-tutorial-projects/tree/main/MERN-roadtrip-mapper</a></p>\n\n<p>Main article available here =&gt; <a href="https://aviyel.com/post/1430/fullstack-road-trip-mapper-app-built-using-mern-stack?utm_source=dev_to&amp;utm_medium=articles_project_tutorials&amp;utm_campaign=post_1430">https://aviyel.com/post/1430</a></p>\n\n<p>Happy Coding!! </p>\n\n<p>Follow <a href="https://twitter.com/AviyelHq">@aviyelHQ</a> or <a href="https://aviyel.com/discussions">sign-up</a> on Aviyel for early access if you are a project maintainer, contributor, or just an Open Source enthusiast.</p>\n\n<p>Join Aviyel\'s Discord =&gt; <a href="https://discord.gg/TbfZmbvnN5">Aviyel\'s world</a></p>\n\n<p>Twitter =&gt;[<a href="https://twitter.com/AviyelHq">https://twitter.com/AviyelHq</a>]</p>\n\n',a.body_markdown='This article concentrates on the most critical tasks and concepts for better understanding and building MERN stack applications from the ground up. It\'s for folks who are serious about learning about the MERN stack and want to concentrate on the essentials. We\'ll build a full-stack road trip mapper application where users can  pin and map locations and view the sites pinned by other users, all using the MERN stack and leveraging the power of the Mapbox API. This blog session will teach you the fundamentals of MERN stack technology as well as advanced concepts and operations.\n\n***Here\'s a quick preview of our application\'s final version:***\n\n![Demo](https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png)\n\n![Demo](https://aviyel.com/assets/uploads/files/1637933711894-image-resized.png)\n\n![Demo](https://aviyel.com/assets/uploads/files/1637933834026-image-resized.png)\n\n![Demo](https://aviyel.com/assets/uploads/files/1637934178664-image-resized.png)\n\nThere is a separate article where you may learn about the MERN stack in very great detail.\n\n[https://aviyel.com/post/1278](https://aviyel.com/post/1278/crafting-a-stunning-crud-application-with-mern-stack)\n\n***Setting up the folder structure***\n\nCreate two folders inside your project directory called client and server, then open them in Visual Studio Code or any other code editor of your choice.\n\n![Making Directory](https://aviyel.com/assets/uploads/files/1637928697125-image-resized.png)\n\n![Folder structure](https://aviyel.com/assets/uploads/files/1637740494285-image.png)\n\nNow, we\'ll create a MongoDB database, a Node and Express server, a database schema to represent our project case study application, and API routes to create, read, update, and delete data and information from the database using npm and the appropriate packages. So, open a command prompt, navigate to your server\'s directory, and then run the code below.\n\n```bash\nnpm init -yes\n```\n\n***Configuring package.json file***\n\nExecute the following commands in the terminal to install the dependencies.\n\n```bash\nnpm install cors dotenv express express-rate-limit mongoose nodemon body-parser helmet morgan rate-limit-mongo\n```\n\n![Dependencies](https://aviyel.com/assets/uploads/files/1637929452248-image-resized.png)\n\n- Dotenv: Dotenv is a zero-dependency module that loads environment variables from a .env file into process.env\n\n- cors: This module allows to relax the security applied to an API\n\n- express: Fast, unopinionated, minimalist web framework for node.\n\n- express-rate-limit: Basic IP rate-limiting middleware for Express. It is used to limit repeated requests to public APIs and/or endpoints such as password reset.\n\n- mongoose: It is an Object Data Modeling library for MongoDB and Node. js\n\n- nodemon: This module helps to develop node.js based applications by automatically restarting the application when file changes in the directory are detected.\n\n- body-parser: Node.js body parsing middleware.\n\n- helmet: Helmet.js fills in the gap between Node.js and Express.js by securing HTTP headers that are returned by Express applications.\n\n- morgan : HTTP request logger middleware for node.js\n\n- rate-limit-mongo : MongoDB store for the express-rate-limit middleware.\n\n![Dependencies Installation](https://aviyel.com/assets/uploads/files/1637935056359-image-resized.png)\n\nThe "package.json" file should look like this after the dependencies have been installed.\n\n![Package JSON](https://aviyel.com/assets/uploads/files/1637930533828-image-resized.png)\n\nAnd also, remember to update the scripts as well.\n\n![Scripts](https://aviyel.com/assets/uploads/files/1637930580698-image-resized.png)\n\nNow go to your server directory, create a src folder, and an index.js file there.\n\nSetting up index.js\n\n- Import express module.\n\n- Import and configure dotenv module\n\n- Import helmet module.\n\n- Import morgan module.\n\n- Import CORS module\n\n- Use express() to initialize our app.\n\n```javascript\n//src/index.js\nconst express = require(\'express\');\n// NOTE morgan is a logger\nconst morgan = require(\'morgan\');\nconst helmet = require(\'helmet\');\nconst cors = require(\'cors\');\nconst mongoose = require(\'mongoose\');\n\nrequire(\'dotenv\').config();\n\n// app config\nconst app = express();\n```\n\nWe may now utilize all of the other methods on that app instance. Let\'s start with the fundamentals and very basic setups. Don\'t forget to set up the port and cors, too.\n\n```javascript\nconst express = require(\'express\');\n// NOTE morgan is a logger\nconst morgan = require(\'morgan\');\nconst helmet = require(\'helmet\');\nconst cors = require(\'cors\');\nconst mongoose = require(\'mongoose\');\n\nrequire(\'dotenv\').config();\n\nconst app = express();\n\nconst port = process.env.PORT || 4000;\n\napp.use(morgan(\'common\'));\napp.use(helmet());\napp.use(cors({\n  origin: process.env.CORS_ORIGIN,\n}));\n\napp.use(express.json());\n\napp.get(\'/\', (req, res) => {\n  res.json({\n    message: \'Hello There\',\n  });\n});\n```\n\nNow it\'s time to connect our server application to a real database. Here we\'ll use the MongoDB database, specifically the MongoDB cloud Atlas version, which means our database will be hosted on their cloud.\n\n### Setting up MongoDB Atlas cloud cluster\n\nMongoDB is a document-oriented database that is open-source and cross-platform. MongoDB is a NoSQL database that stores data in JSON-like documents and has optional schemas. All versions were given under the AGPL license prior to October 16, 2018. All versions released after October 16, 2018, including bug fixes for prior versions, are covered by the SSPL license v1. You can also learn more about MongoDB setup and configuration from the following article.\n\n[https://aviyel.com/post/1323](https://aviyel.com/post/1323/building-a-calorie-journal-saas-based-project-using-mern-stack)\n\nTo set up and start your MongoDB cluster, follow the exact same steps mentioned below.\n\n***Official MongoDB website****\n![MongoDB atlas started](https://aviyel.com/assets/uploads/files/1637905447164-image-resized.png)\n\n***Sign-up MongoDB***\n![MongoDB atlas Sign-up](https://aviyel.com/assets/uploads/files/1637905489282-image-resized.png)\n\n***Sign-in to MongoDB***\n![MongoDb Atlas Login](https://aviyel.com/assets/uploads/files/1637905522148-image-resized.png)\n\n***Create a Project***\n![Creating a Project](https://aviyel.com/assets/uploads/files/1637905836002-image-resized.png)\n\n***Adding members***\n![Adding a Members](https://aviyel.com/assets/uploads/files/1637905874939-image-resized.png)\n\n***Building Database***\n![Building a Database](https://aviyel.com/assets/uploads/files/1637906045235-image-resized.png)\n\n***Creating a Cluster***\n![Creating a Cluster](https://aviyel.com/assets/uploads/files/1635322799518-image-resized.png)\n\n***Selecting a cloud service Provider***\n![Choosing a service provider](https://aviyel.com/assets/uploads/files/1635322998309-image-resized.png)\n\n***Configuring Security***\n![Security Configurations](https://aviyel.com/assets/uploads/files/1637906267111-image-resized.png)\n\n***Database Deployment to the Cloud***\n![Database Deployment to the cloud](https://aviyel.com/assets/uploads/files/1637906356590-image-resized.png)\n\n***Navigate to the network access tab and select "Add IP address."***\n![Add IP address](https://aviyel.com/assets/uploads/files/1637906632034-image.png)\n\n***Now, select the Choose a connection method.***\n![Connection Method](https://aviyel.com/assets/uploads/files/1635323638076-image-resized.png)\n\n***Connecting to cluster***\n![Connecting to the cluster](https://aviyel.com/assets/uploads/files/1637906571369-image.png)\n\nCreate a new variable called DATABASE_CONNECTION inside index.js . Create a string and paste the copied mongo DB connection URL into it. Now, inside it, type your username and password, removing any brackets and entering your own credentials. We\'ll create environmental variables to safeguard the credential later, but for now, let\'s add it this way. The second thing we\'ll need is a PORT, so just type in 4000 for now. Finally, we\'ll use mongoose to connect to our database, so type in mongoose. connect(), which is a function with two parameters. The DATABASE_CONNECTION will be the first, and the object with two choices will be the second. The first is useNewUrlParser, which we\'ll enable, and the second is useUnifiedTopology, which we\'ll enable as well. These objects are optional, but we will see some errors or warnings on our console. Let\'s chain it with .then() and .catch() inside,then() function. This will simply call the app and invoke listen, leading to two parameters: PORT and the callback function that will be executed if our application is successfully connected to the database. Finally, if the connection to the database is unsuccessful, we will simply console log our error message. Your index.js file should now look something like this.\n\n```javascript\n//src/index.js\nconst express = require(\'express\');\n// NOTE morgan is a logger\nconst morgan = require(\'morgan\');\nconst helmet = require(\'helmet\');\nconst cors = require(\'cors\');\nconst mongoose = require(\'mongoose\');\n\nrequire(\'dotenv\').config();\n\nconst app = express();\n\nconst DATABASE_CONNECTION = process.env.DATABASE_URL;\n\nmongoose.connect(DATABASE_CONNECTION, {\n  useNewUrlParser: true,\n  newUnifiedTopology: true,\n});\n\napp.use(morgan(\'common\'));\napp.use(helmet());\napp.use(cors({\n  origin: process.env.CORS_ORIGIN,\n}));\n\napp.use(express.json());\n\napp.get(\'/\', (req, res) => {\n  res.json({\n    message: \'Hello There\',\n  });\n});\n\nconst port = process.env.PORT || 4000;\napp.listen(port, () => {\n  console.log(`Currently Listening at http://localhost:${port}`);\n});\n```\n\n***Insert mongodb+srv into the .env file.***\n\n```\nPORT=4000\nDATABASE_URL=mongodb+srv://pramit:<password>@cluster0.8tw83.mongodb.net/myFirstDatabase?retryWrites=true&w=majority\nCORS_ORIGIN=http://localhost:3000\n```\n\nWe now have successfully connected our server to the database, let\'s create middleware first before we get started on building our backend application\'s routes and database schema. To do so, we\'ll need to create a new file called middlewares.js and within that file, we will create a two function called notFound and errorHandler\n\nand export those functions. So let create notFound middleware so typically this middleware should be the last middleware that is registered so this middleware takes in req, res, and next. Basically, if a request ever made it here, it means we didn\'t locate the route users were searching for, so we\'ll create a variable and send them a message, and then we\'ll pass that to our next middleware, which is errorHander Middleware but before that don\'t  forget to pass the response status of 404 as well. Now let\'s make our errorHandler middleware, which has four parameters instead of three, so we\'ll have (error,req, res, next). The first thing we\'ll do is set a status code and check whether it\'s 200 or use the status code that\'s already been specified, and then we\'ll simply set the status code, and then we\'ll respond with some JSON that will display the error message.\n\n```javascript\n//middlewares.js\nconst notFound = (req, res, next) => {\n  const error = new Error(`Not Found - ${req.originalUrl}`);\n  res.status(404);\n  next(error);\n};\n\nconst errorHandler = (error, req, res, next) => {\n  const statusCode = res.statusCode === 200 ? 500 : res.statusCode;\n  res.status(statusCode);\n  res.json({\n    message: error.message,\n    stack: process.env.NODE_ENV === "production" ? "nope" : error.stack,\n  });\n};\n\nmodule.exports = {\n  notFound,\n  errorHandler,\n};\n```\n\nSo, after modifying the middlewares.js file, import and use the middleware as needed in the index.js file.\n\n```javascript\n//src/index.js\nconst express = require("express");\n// NOTE morgan is a logger\nconst morgan = require("morgan");\nconst helmet = require("helmet");\nconst cors = require("cors");\nconst mongoose = require("mongoose");\n\nrequire("dotenv").config();\n\nconst middlewares = require("./middlewares");\nconst app = express();\n\nconst DATABASE_CONNECTION = process.env.DATABASE_URL;\n\nmongoose.connect(DATABASE_CONNECTION, {\n  useNewUrlParser: true,\n  newUnifiedTopology: true,\n});\n\napp.use(morgan("common"));\napp.use(helmet());\napp.use(\n  cors({\n    origin: process.env.CORS_ORIGIN,\n  })\n);\n\napp.use(express.json());\n\napp.get("/", (req, res) => {\n  res.json({\n    message: "Hello There",\n  });\n});\n\napp.use(middlewares.notFound);\napp.use(middlewares.errorHandler);\n\nconst port = process.env.PORT || 4000;\napp.listen(port, () => {\n  console.log(`Currently Listening at http://localhost:${port}`);\n});\n```\n\nlet\'s create a LogEntry model. Create a folder called models and inside it, create one file called LogEntry.model.js  and within that following file structure your DB schema by defining title, description, comments, image, ratings, latitude and longitude as shown below.\n\n```javascript\n//models/LogEntry.model.js\nconst mongoose = require("mongoose");\nconst { Schema } = mongoose;\n\nconst requiredNumber = {\n  type: Number,\n  required: true,\n};\n\nconst logEntrySchema = new Schema(\n  {\n    title: {\n      type: String,\n      required: true,\n    },\n    description: String,\n    comments: String,\n    image: String,\n    rating: {\n      type: Number,\n      min: 0,\n      max: 10,\n      default: 0,\n    },\n    latitude: {\n      ...requiredNumber,\n      min: -90,\n      max: 90,\n    },\n    longitude: {\n      ...requiredNumber,\n      min: -180,\n      max: 180,\n    },\n    visitDate: {\n      required: true,\n      type: Date,\n    },\n  },\n  {\n    timestamps: true,\n  }\n);\n\nconst LogEntry = mongoose.model("collections", logEntrySchema);\n\nmodule.exports = LogEntry;\n```\n\nThe structure of your files and folders should now look like this.\n\n![Folder Structure](https://aviyel.com/assets/uploads/files/1638013845226-image.png)\n\nNow that we\'ve successfully created our DB Schema, let\'s get started on creating our routes for our backend application. To do so, we\'ll need to create a new folder inside the src directory and name it as routes Within the routes folder, we will create a js file called logs.routes.js.so first we must import express from "express" and also configure our router and import our recently created DB schema. Now we can begin adding our routes to it.\n\n![Folder Structure](https://aviyel.com/assets/uploads/files/1638017296911-image.png)\n\n```javascript\nconst { Router } = require("express");\n\nconst LogEntry = require("../models/LogEntry.model.js");\n\nconst { API_KEY } = process.env;\n\nconst router = Router();\n```\n\n***fetches all the pinned location information.***\n\n```javascript\nrouter.get("/", async (req, res, next) => {\n  try {\n    const entries = await LogEntry.find();\n    res.json(entries);\n  } catch (error) {\n    next(error);\n  }\n});\n```\n\n***Insert/add a pinned location with authorized access***\n\n```javascript\nrouter.post("/", async (req, res, next) => {\n  try {\n    if (req.get("X-API-KEY") !== API_KEY) {\n      res.status(401);\n      throw new Error("Unauthorized Access");\n    }\n    const logEntry = new LogEntry(req.body);\n    const createdEntry = await logEntry.save();\n    res.json(createdEntry);\n  } catch (error) {\n    if (error.name === "ValidationError") {\n      res.status(422);\n    }\n    next(error);\n  }\n});\n```\n\n***exporting the router***\n\n```javascript\nmodule.exports = router;\n```\n\nYour logs.routes.js should resemble something like this\n\n```javascript\n//src/routes/logs.routes.js\nconst { Router } = require("express");\n\nconst LogEntry = require("../models/LogEntry.model.js");\n\nconst { API_KEY } = process.env;\n\nconst router = Router();\n\nrouter.get("/", async (req, res, next) => {\n  try {\n    const entries = await LogEntry.find();\n    res.json(entries);\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.post("/", async (req, res, next) => {\n  try {\n    if (req.get("X-API-KEY") !== API_KEY) {\n      res.status(401);\n      throw new Error("Unauthorized Access");\n    }\n    const logEntry = new LogEntry(req.body);\n    const createdEntry = await logEntry.save();\n    res.json(createdEntry);\n  } catch (error) {\n    if (error.name === "ValidationError") {\n      res.status(422);\n    }\n    next(error);\n  }\n});\n\nmodule.exports = router;\n```\n\n***Now, update your .env file***\n```\nNODE_ENV=production\nPORT=4000\nDATABASE_URL=mongodb+srv://pramit:<password>@cluster0.8tw83.mongodb.net/myFirstDatabase?retryWrites=true&w=majority\nCORS_ORIGIN=http://localhost:3000\nAPI_KEY=roadtripmapper\n```\n\nLet\'s get started by importing the logs routes into your index.js file. We can now connect map pinned log info to our application using express middleware. Finally, your root index.js file should be like the following.\n\n```javascript\n//src/index.js\nconst express = require("express");\n// NOTE morgan is a logger\nconst morgan = require("morgan");\nconst helmet = require("helmet");\nconst cors = require("cors");\nconst mongoose = require("mongoose");\n\nrequire("dotenv").config();\n\nconst middlewares = require("./middlewares");\nconst logs = require("./routes/logs.routes.js");\nconst app = express();\n\nconst DATABASE_CONNECTION = process.env.DATABASE_URL;\n\nmongoose.connect(DATABASE_CONNECTION, {\n  useNewUrlParser: true,\n  newUnifiedTopology: true,\n});\n\napp.use(morgan("common"));\napp.use(helmet());\napp.use(\n  cors({\n    origin: process.env.CORS_ORIGIN,\n  })\n);\n\napp.use(express.json());\n\napp.get("/", (req, res) => {\n  res.json({\n    message: "Hello There",\n  });\n});\n\napp.use("/api/logs", logs);\n\napp.use(middlewares.notFound);\napp.use(middlewares.errorHandler);\n\nconst port = process.env.PORT || 4000;\napp.listen(port, () => {\n  console.log(`Currently Listening at http://localhost:${port}`);\n});\n```\n\nAfter restarting the server, you should see something like this:\n\n![Server Running](https://aviyel.com/assets/uploads/files/1638036953812-image.png)\n\n---\n\n### Setting up the frontend with react\n\nIn the next step let\'s start with the frontend and build it with react. The first thing you need to do is install Node.js if it isn\'t already installed on your machine. So, go to the Node.js official website and download the most recent version. You\'ll require Node js to utilize the node package manager, generally known as NPM. Now navigate to the client folder in your favorite code editor. Visual Studio Code will be my tool of choice. Then, in the integrated terminal, type npx create-react-app. This command will create a client application in the current directory with the name client.\n\n![create-react-app](https://aviyel.com/assets/uploads/files/1638019632382-image.png)\n\nThere is a separate article where you may learn everything there is to know about\n\ncleaning up boilerplate react project.\n\n[https://aviyel.com/post/1190](https://aviyel.com/post/1190/building-a-react-application-from-absolute-scratch)\n\nIt\'s time to install some packages within react-boilerplate now that you\'ve installed and cleaned it. so copy and paste the following command into your terminal.\n\n```bash\nnpm i react-hook-form react-map-gl react-rating-stars-component react-responsive-animate-navbar\n```\n\n![Dependencies](https://aviyel.com/assets/uploads/files/1638024929694-image-resized.png)\n\n- react-hook-form:  Performant, flexible, and extensible forms library for React Hooks.\n\n- react-map-gl: react-map-gl is a suite of React components designed to provide a React API for Mapbox GL JS-compatible libraries\n\n- react-rating-stars-component: Simple star rating component for your React projects.\n\n- react-responsive-animate-navbar : simple, flexible & completely customizable responsive navigation bar component.\n\n![Dependencies Installation](https://aviyel.com/assets/uploads/files/1638025122874-image-resized.png)\n\nAfter installing all these packages your packge.json file of the client should look like this:\n\n![Package json](https://aviyel.com/assets/uploads/files/1638025324267-image-resized.png)\n\nLet\'s construct two separate folders /components inside the components folder after we\'ve installed all of our project\'s dependencies and name it as RoadTripNav and TripEntryForm .\n\nYour file and folder structure should look something like this once you\'ve added all of your components.\n\n![Folder Structure](https://aviyel.com/assets/uploads/files/1638026533825-image.png)\n\nNow that you have all of the project\'s components set up, it\'s time to start coding. First, import the ReactNavbar from "react-responsive-animate-navbar" and customize the color of your navbar, add the logo to the public folder and import it directly, and don’t forget to add some social links as well. The following is an example of how the code should appear.\n\n![RoadTripNavComponent](https://aviyel.com/assets/uploads/files/1638036022672-image.png)\n\n```javascript\n// components/RoadTripNav\nimport React from "react";\nimport * as ReactNavbar from "react-responsive-animate-navbar";\n// import roadTripSvg from "../../assets/roadtrip.svg";\n\nconst RoadTripNav = () => {\n  return (\n    <ReactNavbar.ReactNavbar\n      color="rgb(25, 25, 25)"\n      logo="./logo.svg"\n      menu={[]}\n      social={[\n        {\n          name: "Twitter",\n          url: "https://twitter.com/pramit_armpit",\n          icon: ["fab", "twitter"],\n        },\n      ]}\n    />\n  );\n};\n\nexport default RoadTripNav;\n```\nBefore we go any further, let\'s set up our Mapbox. First, go to the Mapbox site and log in or sign up if you don\'t already have an account. Next, create your own custom map style in the Mapbox Studio and publish it. Finally, go back to the dashboard and copy the default public API key provided by MapBox.\n\n![Mapbox](https://aviyel.com/assets/uploads/files/1637907686658-image-resized.png)\n\n***Login or create your MapBox account***\n\n![Mapbox login](https://aviyel.com/assets/uploads/files/1637907709168-image-resized.png)\n\n***Click on design a custom map style***\n\n![Mapbox studio](https://aviyel.com/assets/uploads/files/1637923672745-image.png)\n\n***Customize your own style of the map inside the Mapbox studio***\n\n![MapBox studio Editor](https://aviyel.com/assets/uploads/files/1637923619968-image-resized.png)\n\n***Copy the default public token***\n![Access Token](https://aviyel.com/assets/uploads/files/1637923829522-image-resized.png)\n\nAfter you\'ve successfully obtained your public token, go to the env file or create one if you don’t have and after that create a variable named as REACT_APP_MAPBOX_TOKEN, then paste that token into that variable. This is what your env file should look like.\n\n```\nREACT_APP_MAPBOX_TOKEN= ************************************ // add token\n```\n\nBefore we go any further, let\'s make an api and styles folder in our root source directory. Inside the api folder, make a API.js file, and inside the styles folder, make a index.css file where all our styles of the application will be added. This is how your folder structure should appear.\n\n![Folder Structure](https://aviyel.com/assets/uploads/files/1638028733936-image.png)\n\nNow go to the newly created API file and construct two functions called "listLogEntries" to collect all the log entries from the backend and "createLogEntries" to create or send the post request / post the entries to the backend, as well as export these functions. Also, don\'t forget to include the URL where your server is running.\n\n![API](https://aviyel.com/assets/uploads/files/1638036093022-image.png)\n\n```javascript\n//api/API.js\nconst API_URL = "http://localhost:4000";\n// const API_URL = window.location.hostname === "localhost" ? "http://localhost:4000" : "https://road-trip-map-mern.herokuapp.com" ;\n\nexport async function listLogEntries() {\n  const response = await fetch(`${API_URL}/api/logs`);\n  // const json = await response.json();\n  return response.json();\n}\n\nexport async function createLogEntries(entry) {\n  const api_key = entry.api_key;\n  delete entry.api_key;\n  const response = await fetch(`${API_URL}/api/logs`, {\n    method: "POST",\n    headers: {\n      "content-type": "application/json",\n      "X-API-KEY": api_key,\n    },\n    body: JSON.stringify(entry),\n  });\n  // const json = await response.json();\n  // return response.json();\n  let json;\n  if (response.headers.get("content-type").includes("text/html")) {\n    const message = await response.text();\n    json = {\n      message,\n    };\n  } else {\n    json = await response.json();\n  }\n  if (response.ok) {\n    return json;\n  }\n  const error = new Error(json.message);\n  error.response = json;\n  throw error;\n}\n```\n\nLet\'s make a submission form for the pinned map location. To do so, open the TripEntryForm component from the component folder we previously made, import the useForm hook from react-hook-form, import createLogentries from api, and then import the useState hook from the React library because this hook will enable us to integrate the state into our functional component. useState(), unlike state in class components, does not work with object values. If necessary, we can use primitives directly and create multiple react hooks for multiple variables. Now, create two states: loading and error, and then destructure register and handleSubmit from the useForm() hook from "react-hook-form" library.After you\'ve completed that, it\'s time to craft our form, but first let\'s create a function to handle our submit request. To do so, create an asynchronous onSubmit function and inside it, simply create a try-catch block. Inside the try block set the loading to true, configure the latitude and longitude, console log the data, and invoke the onClose function, and finally inside the catch block, pass the error message to the error state, set the loading to false and simply console log the error message and then simply create a form inside the return statement exactly shown in the code below.\n\n![TripEntry Form](https://aviyel.com/assets/uploads/files/1638036159120-image.png)\n\n```javascript\n// components/TripEntryForm.js\nimport React, { useState } from "react";\nimport { useForm } from "react-hook-form";\nimport { createLogEntries } from "../../api/API";\nimport "./TripEntryForm.css";\n\nconst TripEntryForm = ({ location, onClose }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState("");\n\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = async (data) => {\n    try {\n      setLoading(true);\n      data.latitude = location.latitude;\n      data.longitude = location.longitude;\n      const created = await createLogEntries(data);\n      console.log(created);\n      onClose();\n    } catch (error) {\n      setError(error.message);\n      console.error(error);\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className="trip-form">\n      {error ? <h3 className="error-message">{error}</h3> : null}\n      <label htmlFor="api_key">Enter Password</label>\n      <input\n        type="password"\n        name="api_key"\n        placeholder="For demo, password => {roadtripmap} "\n        required\n        ref={register}\n      />\n\n      <label htmlFor="title">Title</label>\n      <input name="title" placeholder="Title" required ref={register} />\n\n      <label htmlFor="comments">Comments</label>\n      <textarea\n        name="comments"\n        placeholder="Comments"\n        rows={3}\n        ref={register}\n      ></textarea>\n\n      <label htmlFor="description">Description</label>\n      <textarea\n        name="description"\n        placeholder="Describe your journey"\n        rows={4}\n        ref={register}\n      ></textarea>\n\n      <label htmlFor="image">Image</label>\n      <input name="image" placeholder="Image URL" ref={register} />\n\n      <label htmlFor="rating">Rating (1 - 10)</label>\n      <input name="rating" type="number" min="0" max="10" ref={register} />\n\n      <label htmlFor="visitDate">Visit Date</label>\n      <input name="visitDate" type="date" required ref={register} />\n\n      <button disabled={loading}>\n        <span>{loading ? "Submitting..." : "Submit your Trip"}</span>\n      </button>\n    </form>\n  );\n};\n\nexport default TripEntryForm;\n```\n\nAlso, don\'t forget to add the TripEntryForm styles inside that very own component folder and name it as TripEntryForm.css and paste the exact CSS code as mentioned below\n\n![TripEntry Form style](https://aviyel.com/assets/uploads/files/1638036209467-image.png)\n\n```css\n//TripEntryForm.css\n@import url("https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:ital,wght@0,200;0,400;1,200;1,300&family=Roboto:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap");\n\n.trip-form label {\n  margin: 0.5rem 0;\n  display: block;\n  width: 100%;\n  color: rgb(255, 255, 255);\n  font-family: "Fredoka One", cursive;\n}\n.trip-form input {\n  margin: 0.5rem 0;\n  background-color: #2c2e41;\n  border-radius: 5px;\n  border: 0;\n  box-sizing: border-box;\n  color: rgb(255, 255, 255);\n  font-size: 12px;\n  height: 100%;\n  outline: 0;\n  padding: 10px 5px 10px 5px;\n  width: 100%;\n  font-family: "Fredoka One", cursive;\n}\n\n.trip-form textarea {\n  margin: 0.5rem 0;\n  background-color: #2c2e41;\n  border-radius: 5px;\n  border: 0;\n  box-sizing: border-box;\n  color: rgb(255, 255, 255);\n  font-size: 12px;\n  height: 100%;\n  outline: 0;\n  padding: 10px 5px 10px 5px;\n  width: 100%;\n  font-family: "Fredoka One", cursive;\n}\n\n.error-message {\n  color: red;\n}\n\n.trip-form button {\n  background-color: #fb5666;\n  border-radius: 12px;\n  border: 0;\n  box-sizing: border-box;\n  color: #eee;\n  cursor: pointer;\n  font-size: 18px;\n  height: 50px;\n  margin-top: 38px;\n  outline: 0;\n  text-align: center;\n  width: 100%;\n}\n\nbutton span {\n  position: relative;\n  z-index: 2;\n}\n\nbutton:after {\n  position: absolute;\n  content: "";\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 100%;\n  transition: all 2.35s;\n}\n\nbutton:hover {\n  color: #fff;\n}\n\nbutton:hover:after {\n  width: 100%;\n}\n\n.small_description {\n  font-size: 60px;\n}\n```\nNow go to this repo and download all of the SVG files that are available there.\n\n[https://github.com/pramit-marattha/road-trip-mapper-mern-app/tree/main/client/src/assets](https://github.com/pramit-marattha/road-trip-mapper-mern-app/tree/main/client/src/assets)\n\nAfter you\'ve downloaded all of the svg files, go to the main app component, and begin importing all of the key requirements from the libraries we previously installed, such as ReactMapGl, marker, and popup from the "react-map-gl" library, import all of the components as well as svgs from the assets folder, and finally create four state logEntries whose initial value is empty array, showPopup whose initial value is an empty object, addEntryLocation has a default value of null, and for viewport specify the initial value exactly like the code mentioned below or you can add whatever you want. Create an asynchronous function called getEntries that asynchronously calls the listLogEntries function that was previously established within the api file and whose main task is to retrieve all of the entries made by the users and feed them to the logEntries state and then call that function inside the useEffect() hook by using this Hook, you tell React that your component needs to do something after render.\n\nReact will remember the function you passed (we’ll refer to it as our “effect”), and call it later after performing the DOM updates. To this effect, we set the document title, but we could also perform data fetching or call some other imperative API. Placing  useEffect() inside the component lets us access the count state variable (or any props) right from the effect. We don’t need a special API to read it — it’s already in the function scope. Hooks embrace JavaScript closures and avoid introducing React-specific APIs where JavaScript already provides a solution.useEffect() the hook is somewhat similar to the life-cycle methods that we are aware of for class components. It runs after every render of the component including the initial render. Hence it can be thought of as a combination of componentDidMount, componentDidUpdate, and componentWillUnmount.If we want to control the behavior of when the effect should run (only on initial render, or only when a particular state variable changes), we can pass in dependencies to the effect to do so. This hook also provides a clean-up option to allow cleaning up of resources before the component is destroyed. basic syntax of the effect: useEffect(didUpdate) .\n\nCreate a function named showMarkerPopup and provide the event parameters to it. Inside that function, destruct the latitude and longitude from "event.lngltd" and pass it to addEntryLocation state. Finally, employ all of the imported components within our return statement by simply following the code shown below.\n\n![App component](https://aviyel.com/assets/uploads/files/1638036249267-image.png)\n\n```javascript\n//src/app.js\nimport * as React from "react";\nimport { useState, useEffect } from "react";\nimport ReactMapGL, { Marker, Popup } from "react-map-gl";\nimport { listLogEntries } from "./api/API";\nimport MapPinLogo from "./assets/mapperPin.svg";\nimport MarkerPopup from "./assets/MarkerPopup.svg";\nimport TripEntryForm from "./components/TripEntryForm";\nimport ReactStars from "react-rating-stars-component";\nimport RoadTripNav from "./components/RoadTripNav/RoadTripNav";\n\nconst App = () => {\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [addEntryLocation, setAddEntryLocation] = useState(null);\n  const [viewport, setViewport] = useState({\n    width: "100vw",\n    height: "100vh",\n    latitude: 27.7577,\n    longitude: 85.3231324,\n    zoom: 7,\n  });\n\n  const getEntries = async () => {\n    const logEntries = await listLogEntries();\n    setLogEntries(logEntries);\n    console.log(logEntries);\n  };\n\n  useEffect(() => {\n    getEntries();\n  }, []);\n\n  const showMarkerPopup = (event) => {\n    console.log(event.lngLat);\n    const [longitude, latitude] = event.lngLat;\n    setAddEntryLocation({\n      longitude,\n      latitude,\n    });\n  };\n\n  return (\n    <>\n      <RoadTripNav />\n      <ReactMapGL\n        {...viewport}\n        mapStyle="mapbox://styles/pramitmarattha/ckiovge5k3e7x17tcmydc42s3" \n        mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN}\n        onViewportChange={(nextViewport) => setViewport(nextViewport)}\n        onDblClick={showMarkerPopup}\n      >\n        {logEntries.map((entry) => (\n          <React.Fragment key={entry._id}>\n            <Marker latitude={entry.latitude} longitude={entry.longitude}>\n              <div\n                onClick={() =>\n                  setShowPopup({\n                    // ...showPopup,\n                    [entry._id]: true,\n                  })\n                }\n              >\n                <img\n                  className="map-pin"\n                  style={{\n                    width: `${5 * viewport.zoom}px`,\n                    height: `${5 * viewport.zoom}px`,\n                  }}\n                  src={MapPinLogo}\n                  alt="Map Pin Logo"\n                />\n              </div>\n            </Marker>\n            {showPopup[entry._id] ? (\n              <Popup\n                latitude={entry.latitude}\n                longitude={entry.longitude}\n                closeButton={true}\n                closeOnClick={false}\n                dynamicPosition={true}\n                onClose={() => setShowPopup({})}\n                anchor="top"\n              >\n                <div className="popup">\n                  <ReactStars\n                    count={10}\n                    value={entry.rating}\n                    size={29}\n                    activeColor="#ffd700"\n                  />\n                  <div className="popup_image">\n                    {entry.image && <img src={entry.image} alt={entry.title} />}\n                  </div>\n                  <h3>{entry.title}</h3>\n                  <p>{entry.comments}</p>\n                  <small>\n                    Visited :{" "}\n                    {new Date(entry.visitDate).toLocaleDateString("en-US", {\n                      weekday: "long",\n                      year: "numeric",\n                      month: "long",\n                      day: "numeric",\n                    })}\n                  </small>\n                  <p>Ratings: {entry.rating}</p>\n                  <div className="small_description">{entry.description}</div>\n                </div>\n              </Popup>\n            ) : null}\n          </React.Fragment>\n        ))}\n        {addEntryLocation ? (\n          <>\n            <Marker\n              latitude={addEntryLocation.latitude}\n              longitude={addEntryLocation.longitude}\n            >\n              <div>\n                <img\n                  className="map-pin"\n                  style={{\n                    width: `${8 * viewport.zoom}px`,\n                    height: `${8 * viewport.zoom}px`,\n                  }}\n                  src={MarkerPopup}\n                  alt="Map Pin Logo"\n                />\n              </div>\n              {/* <div style={{color:"white"}}>{entry.title}</div> */}\n            </Marker>\n\n            <Popup\n              latitude={addEntryLocation.latitude}\n              longitude={addEntryLocation.longitude}\n              closeButton={true}\n              closeOnClick={false}\n              dynamicPosition={true}\n              onClose={() => setAddEntryLocation(null)}\n              anchor="top"\n            >\n              <div className="popup">\n                <TripEntryForm\n                  onClose={() => {\n                    setAddEntryLocation(null);\n                    getEntries();\n                  }}\n                  location={addEntryLocation}\n                />\n              </div>\n            </Popup>\n          </>\n        ) : null}\n      </ReactMapGL>\n    </>\n  );\n};\n\nexport default App;\n```\n\nThe very final step is to add all of the styles to our project, which can be done by going to our previously established styles folder and copying and pasting the following mentioned code into the index.css file.\n\n![index css](https://aviyel.com/assets/uploads/files/1638036274330-image.png)\n\n```css\n/* styles/index.css */\n@import url("https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:ital,wght@0,200;0,400;1,200;1,300&family=Roboto:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap");\n\nbody {\n  margin: 0;\n  font-family: "Fredoka One", cursive;\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",\n    monospace;\n}\n\n.map-pin {\n  position: absolute;\n  transform: translate(-50%, -100%);\n  z-index: -1;\n}\n\n.popup {\n  width: 20vw;\n  height: auto;\n  padding: 1rem;\n  background-color: #8661d1;\n  border-radius: 5px;\n  z-index: 999;\n}\n\n.popup img {\n  width: 40%;\n  height: auto;\n  border-radius: 5%;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n  padding-top: 1rem;\n}\n\n.popup_image {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.small_description {\n  font-size: 1.5rem;\n  color: #fff;\n  border-radius: 5px;\n  z-index: 999;\n}\n\nbutton {\n  border: none;\n  color: #fa5252;\n  padding-right: 1rem;\n  border-radius: 50%;\n  font-size: 4rem;\n  margin-top: 0.2rem;\n  height: auto;\n  cursor: pointer;\n}\n```\n\nFinally, start both the client and the server.\n\n![React Running](https://aviyel.com/assets/uploads/files/1638036698778-image.png)\n\n## Application up and running\n\n![Demo](https://aviyel.com/assets/uploads/files/1637933630247-image-resized.png)\n\nThis application\'s entire source code is available here.\n\n[https://github.com/aviyeldevrel/devrel-tutorial-projects/tree/main/MERN-roadtrip-mapper](https://github.com/aviyeldevrel/devrel-tutorial-projects/tree/main/MERN-roadtrip-mapper)\n\nMain article available here => [https://aviyel.com/post/1430](https://aviyel.com/post/1430/fullstack-road-trip-mapper-app-built-using-mern-stack?utm_source=dev_to&utm_medium=articles_project_tutorials&utm_campaign=post_1430)\n\nHappy Coding!! \n\nFollow [@aviyelHQ](https://twitter.com/AviyelHq) or [sign-up](https://aviyel.com/discussions) on Aviyel for early access if you are a project maintainer, contributor, or just an Open Source enthusiast.\n\nJoin Aviyel\'s Discord => [Aviyel\'s world](https://discord.gg/TbfZmbvnN5)\n\nTwitter =>[https://twitter.com/AviyelHq]\n\n\n\n',a.user={name:"Pramit Marattha",username:"pramit_marattha",twitter_username:"pramit_armpit",github_username:"pramit-marattha",website_url:"https://github.com/pramit-marattha",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--Z18ZXnyB--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/413418/f04996e5-b2bc-48b2-b362-dbe716bb5b38.JPG",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--_BxXl66X--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/413418/f04996e5-b2bc-48b2-b362-dbe716bb5b38.JPG"},a.organization={name:"Aviyel Inc",username:p,slug:p,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--YhxHufxa--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/3818/2fd02162-3471-44cd-8f8f-5336ddc7abc1.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--wVhBMnHj--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/3818/2fd02162-3471-44cd-8f8f-5336ddc7abc1.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:a}},error:s,state:{currentArticle:a},serverRendered:!0,routePath:"/pramit_marattha/916243",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:s}}}}(null,{},"2021-12-10T16:30:27Z","aviyel")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
