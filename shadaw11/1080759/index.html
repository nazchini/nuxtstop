<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>How to Create a Blog with SvelteKit and Strapi</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>How to Create a Blog with SvelteKit and Strapi</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/svelte" class="tag" data-v-70afb46a>
          #svelte
        </a><a href="/nuxtstop/t/blog" class="tag" data-v-70afb46a>
          #blog
        </a><a href="/nuxtstop/t/strapi" class="tag" data-v-70afb46a>
          #strapi
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--LrnKSqFF--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/i2nzaaq4dinvpwf29kor.png" alt="How to Create a Blog with SvelteKit and Strapi" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            11
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            1
          </span></div> <time data-v-70afb46a>May 10</time></div></header> <div class="content" data-v-70afb46a><p><a href="https://kit.svelte.dev/">SvelteKit</a> is a relatively new SSR framework for SvelteJS. We can compare it to NextJS, but instead of using React, it uses Svelte. In this tutorial, you'll learn how you can create a blog website with SvelteKit and Strapi as a CMS.</p>

<h2>
  <a name="what-is-a-cms" href="#what-is-a-cms">
  </a>
  What is a CMS?
</h2>

<p>A Content Management System (CMS) is a popular tool for creating web pages, blogs, and online stores. They store your website's data, images, pictures, and other hosted content. They are popular among bloggers because anyone can spin up a blog pretty quickly.</p>

<p><a href="https://strapi.io/">Strapi is a headless CMS coded in Javascript.</a> A headless CMS has no frontend, only an admin panel, so it is ideal for developers. In other words, a Headless CMS is an API that serves up your content to be consumed by a frontend.</p>

<h2>
  <a name="goals" href="#goals">
  </a>
  Goals
</h2>

<p>In this tutorial, you'll code a blog website using <a href="https://kit.svelte.dev/">the SvelteKit framework</a>. You'll use <a href="https://strapi.io/">Strapi for content management</a>.</p>

<p>You'll learn how to use Strapi to manage your content and the basics of SvelteKit, including:</p>

<ul>
<li>Filesystem based routing</li>
<li>Preloading content</li>
<li>Dynamic routing</li>
<li>404 Error handling</li>
<li>SvelteKit Layouts</li>
<li>And much more</li>
</ul>

<h2>
  <a name="prerequisites" href="#prerequisites">
  </a>
  Prerequisites
</h2>

<ul>
<li>
<a href="https://nodejs.org/">NodeJS</a> and <a href="https://npmjs.com/">NPM</a> installed on your machine.</li>
<li>Javascript and <a href="https://svelte.dev/">Svelte</a> knowledge. (Svelte has <a href="https://svelte.dev/tutorial">a great tutorial</a>)</li>
<li>Some coffee and articles to write on your new blog!</li>
</ul>

<h2>
  <a name="creating-a-strapi-project" href="#creating-a-strapi-project">
  </a>
  Creating a Strapi Project
</h2>

<p>Now that you know what a CMS and Strapi are, you can get started by locally hosting Strapi, or in other words, <em>Creating a Strapi Project</em>.</p>

<p>Run this command in an empty folder to create a Strapi project.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>     npx create-strapi-app cms <span class="nt">--quickstart</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>You can replace the word <code>cms</code> with anything you like. This command will be the name of the folder your new Strapi project will sit in.</p>

<p>Now sit back, relax, and wait for the project to create itself. After that, you should automatically be taken to localhost:1377.</p>

<p>If that's not the case, <code>cd</code> into the newly created folder and run this command.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>     npm run strapi develop
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This command will start Strapi up on port <code>1337</code>. If a page is not automatically opened up for you, open <a href="http://localhost:1377/">localhost:1377</a> to launch the Strapi Admin Page.</p>

<p>It should present you with this page. You need to sign up for an account here. <strong>Remember that this account is locally-scoped to this project, meaning it won't work on other Strapi projects.</strong></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--y6c-sDDw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359293544_Screen%2BShot%2B2022-02-08%2Bat%2B11.28.01%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--y6c-sDDw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359293544_Screen%2BShot%2B2022-02-08%2Bat%2B11.28.01%2BPM.png" alt="" loading="lazy" width="880" height="512"></a></p>

<h3>
  <a name="creating-content-types" href="#creating-content-types">
  </a>
  Creating Content Types
</h3>

<p>In the sidebar of Strapi admin <code>http://localhost:1377</code>, click the <code>Content-Types Builder</code> button. This button should take you to the Content Types builder page.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--VQTLTkJM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359455862_Screen%2BShot%2B2022-02-08%2Bat%2B11.30.48%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--VQTLTkJM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359455862_Screen%2BShot%2B2022-02-08%2Bat%2B11.30.48%2BPM.png" alt="" loading="lazy" width="880" height="478"></a></p>

<h2>
  <a name="what-are-content-types" href="#what-are-content-types">
  </a>
  What are Content Types?
</h2>

<p>We can compare a content type to a table in SQL. Thus, content types help us structure and categorize our data.</p>

<h3>
  <a name="posts" href="#posts">
  </a>
  Posts
</h3>

<p>Let's create a content type for posts. Then, click the <code>Create new Collection Type</code> button to launch a dialogue.</p>

<p>Enter <code>Post</code> as the name. Go to <code>Advanced Settings</code> at the top and disable the Drafts system. Click Continue</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XHbzsi1l--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359547760_Screen%2BShot%2B2022-02-08%2Bat%2B11.32.24%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XHbzsi1l--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359547760_Screen%2BShot%2B2022-02-08%2Bat%2B11.32.24%2BPM.png" alt="A sample screenshot" loading="lazy" width="880" height="482"></a></p>

<p>Add these fields. Refer to the image if you get stuck.</p>

<ul>
<li>A <code>title</code> field with type <code>Text</code>.</li>
<li>A <code>description</code> field with type <code>Text</code>. Make sure the text is <code>Long text</code>.</li>
<li>A <code>content</code> field with the <code>Rich Text</code> type.</li>
</ul>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ZavBpj78--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359854543_Screen%2BShot%2B2022-02-08%2Bat%2B11.37.28%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ZavBpj78--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359854543_Screen%2BShot%2B2022-02-08%2Bat%2B11.37.28%2BPM.png" alt="" loading="lazy" width="880" height="497"></a></p>

<p>Let's also add a relation between <code>Post</code> and User from the <code>users-permissions</code> plugin. This relationship allows us to easily link a post to a user to display relevant information like the Author's name and profile picture, fetch the Author's posts, etc.</p>

<p>Add a new <code>Relation</code> field to the <code>Post</code> content type. The column on the left should be PostPost, and the column on the right should be User from <code>users-permissions</code>. Select the fourth relation; the <code>User</code> has many <code>Posts</code> and clicks <code>Finish</code>.</p>

<p>Refer to the below image if you get stuck:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--IEnh3ZoA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359871261_Screen%2BShot%2B2022-02-08%2Bat%2B11.36.49%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--IEnh3ZoA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359871261_Screen%2BShot%2B2022-02-08%2Bat%2B11.36.49%2BPM.png" alt="" loading="lazy" width="880" height="436"></a></p>

<p>Click <code>Save</code> to save your changes and restart the server.</p>

<h3>
  <a name="adding-slug-to-the-post-collection-type" href="#adding-slug-to-the-post-collection-type">
  </a>
  Adding Slug to the Post Collection Type
</h3>

<p>Next, we will be adding a dynamic autogenerated slug system to the <code>Post</code> collection type. Using a slug will make it easier to query for our posts in the frontend.</p>

<p>First, navigate to <strong>Content-Types Builder</strong> and click <strong>Post</strong>, then click <strong>Add another field</strong>. Select <strong>UID.</strong> Set the field <code>slug</code>, and set the attached field to <code>title</code>. Save your changes and click <strong>Configure the view</strong>, and select the <code>slug</code> field. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Ghe45Zep--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644385413170_Screen%2BShot%2B2022-02-09%2Bat%2B6.42.54%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Ghe45Zep--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644385413170_Screen%2BShot%2B2022-02-09%2Bat%2B6.42.54%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="354"></a></p>

<p>Then, set <strong>the Editable field</strong> off in the window that appears. Click <strong>Save</strong> to register your changes.</p>

<p>With the slug system fully set up, a new slug will be automatically generated in an uneditable slug field anytime you create a new product. The Slug will be created from the product name.</p>

<h3>
  <a name="setting-up-roles-and-permissions" href="#setting-up-roles-and-permissions">
  </a>
  Setting up Roles and Permissions
</h3>

<p>If you try querying the <a href="https://docs.strapi.io/developer-docs/latest/developer-resources/database-apis-reference/rest-api.html#api-endpoints">Content API</a> for the <code>posts</code> content type, i.e., at <code>http://localhost:1377/api/posts</code>,  you'll get a <code>403 FORBIDDEN</code> error.</p>

<p>This error is because, by default, Strapi doesn't allow any man down the street to access your content. You're supposed to set rules and permissions for specific roles. Let's allow the <code>Public</code> role, i.e., an unauthenticated user, to read our posts.</p>

<p>In the sidebar, click on the <code>Settings</code> button. There, click on <code>Roles</code> in the <code>Users & Permissions</code> section. But, first, let's edit the permissions for the Public role.<br>
We'll allow the <code>Public</code> role to <code>count</code>, <code>find</code> and <code>findOne</code> for Posts.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--2eyqrX_s--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360051801_Screen%2BShot%2B2022-02-08%2Bat%2B11.40.38%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--2eyqrX_s--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360051801_Screen%2BShot%2B2022-02-08%2Bat%2B11.40.38%2BPM.png" alt="" loading="lazy" width="880" height="467"></a></p>

<p>Next, let's do the same for the <code>Authenticated</code> role, but we'll also allow them to create, update and delete posts as well.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FVWqSgqS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360101747_Screen%2BShot%2B2022-02-08%2Bat%2B11.41.35%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FVWqSgqS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360101747_Screen%2BShot%2B2022-02-08%2Bat%2B11.41.35%2BPM.png" alt="" loading="lazy" width="880" height="455"></a></p>
<h2>
  <a name="creating-a-sveltekit-project" href="#creating-a-sveltekit-project">
  </a>
  Creating a SvelteKit Project
</h2>

<p>Now for the main <a href="https://kit.svelte.dev/">SvelteKit</a> code. Create a new folder named <code>frontend</code> in the same directory as the folder for the Strapi project and <code>cd</code> into it.</p>

<p>Now, let's create a SvelteKit project with this command:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>    npm init svelte@next
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Add your preferred project name, and be sure to choose the options as shown in the below image.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--CRuCSRR3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360555795_Screen%2BShot%2B2022-02-08%2Bat%2B11.48.39%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--CRuCSRR3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360555795_Screen%2BShot%2B2022-02-08%2Bat%2B11.48.39%2BPM.png" alt="" loading="lazy" width="880" height="462"></a></p>

<p>Launch the app inside your favourite editor, for example, <a href="https://code.visualstudio.com/">VSCode</a>. Now, we can start the app with the below two commands:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>     <span class="c"># To install packages</span>
     npm I 

     <span class="c"># To start the app</span>
     npm run dev
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Here's how your app should look, hosted on <a href="https://localhost:3000/">localhost:3000</a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--CMiAxqP4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644361739264_Screen%2BShot%2B2022-02-09%2Bat%2B12.08.15%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--CMiAxqP4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644361739264_Screen%2BShot%2B2022-02-09%2Bat%2B12.08.15%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="433"></a></p>

<h3>
  <a name="install-tailwindcss" href="#install-tailwindcss">
  </a>
  Install TailwindCSS
</h3>

<p><a href="https://tailwindcss.com/">TailwindCSS</a> is a straightforward way to style your apps, and it's clear to add them to SvelteKit.</p>

<p>We'll use <a href="https://github.com/svelte-add/svelte-add">SvelteAdd</a> to add TailwindCSS to our application quickly.<br>
Run the below command to add TailwindCSS to our project.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>     npx svelte-add tailwindcss
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Install the required dependencies.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>    npm i 
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Be sure to stop the running server with <code>Ctrl+C</code> first.<br>
Let's start our project from scratch.</p>

<p>Delete all the extra CSS, except the <code>@tailwind</code> parts in <code>src/app.css</code>. Delete all of the items in <code>src/routes</code> and <code>src/lib</code>, and now we should be left with an empty project.</p>

<p>Create a new file <code>src/routes/index.svelte</code>. All files in the <code>src/routes</code> folder will be mapped to actual routes. For example, <code>src/routes/example.svelte</code> will be accessible at <code>/example</code>, and <code>src/routes/blog/test.svelte</code> will be accessible at <code>/blog/test</code>. <code>index.svelte</code> is a special file. It maps to the base directory. <code>src/routes/index.svelte</code> maps to <code>/</code>, and <code>src/routes/blog/index.svelte</code> maps to <code>/blog</code>.</p>

<p>This is how filesystem based routing works in SvelteKit. Later, you'll learn to add routes with dynamic names.</p>

<p>For now, let's work on the basic UI. Add the following code to <code>index.svelte</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>        &lt;script lang="ts">
        &lt;/script>

        &lt;div class="my-4">
            &lt;h1 class="text-center text-3xl font-bold">My wonderful blog&lt;/h1>
        &lt;/div>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>I've elected to use Typescript, which is just like Javascript, but with types. You can follow along with javascript, but types and interfaces won't work for you.    Also, you shouldn't put lang="ts" in your script tag.`</p>

<p>Now you'll notice that TailwindCSS is no longer working. This is because we deleted <code>__layout.svelte</code>, the file importing <code>src/app.css</code>. Let's now learn what this <code>__layout.svelte</code> file is.</p>

<p><code>__layout.svelte</code> is a special file that adds a layout to every page. <code>__layout.svelte</code>s can not only exist at the top level <code>routes</code> folder, but can also exist in subdirectories, applying layouts for that subdirectory.</p>

<p><a href="https://kit.svelte.dev/docs#layouts">Read more about SvelteKit layouts here</a>.</p>

<p>For now, all we have to do, is create <code>src/routes/__layout.svelte</code> and import <code>src/app.css</code> in it. The  element will be the actual content displayed on the page.</p>

<p>Now here, in this <code>__layout.svelte</code> file, we can add whatever content we want, and it'll be displayed on all pages. So, add your Navbars, Headers, Footers, and everything else here.</p>

<p>Here is what your app should look like now at <a href="https://localhost:3000/">localhost:3000</a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--fn7HTX1K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644362652666_Screen%2BShot%2B2022-02-09%2Bat%2B12.23.33%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fn7HTX1K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644362652666_Screen%2BShot%2B2022-02-09%2Bat%2B12.23.33%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="393"></a></p>

<h2>
  <a name="fetch-blog-posts" href="#fetch-blog-posts">
  </a>
  <strong>Fetch Blog Posts</strong>
</h2>

<p>Now, we can fetch blog posts from Strapi and display them in <code>index.svelte</code>. We'll utilize <a href="https://kit.svelte.dev/docs#routing-endpoints">SvelteKit Endpoints</a> to make API fetching easier. Endpoints in SvelteKit are files ending with <code>.js</code> (or <code>.ts</code> for typescript) that export functions corresponding to HTTP methods. These endpoint files become API routes in our application.</p>

<p>Let's create an endpoint <code>src/routes/posts.ts</code> (use the <code>.js</code> extension if you're not using typescript)</p>

<p><code></code>`</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>// src/routes/posts.ts
import type { EndpointOutput } from '@sveltejs/kit';
export async function get(): Promise&lt;EndpointOutput> {
    const res = await fetch('http://localhost:1337/api/posts?populate=*');
    const data = await res.json();
    return { body: data };
}
#Ignore the typings if you're using javascript.
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>`<code></code></p>

<p>Now, when we visit <code>http://localhost:3000/posts</code>, we'll receive the posts from Strapi. Let's implement this route in our <code>index.svelte</code> file using <a href="https://kit.svelte.dev/docs#loading">SvelteKit's Loading functionality</a>.<br>
 Loading allows us to fetch APIs before the page is loaded using a particular <code>&lt;script context=" module"></code> tag.</p>

<p>Add this to the top of <code>src/routes/index.svelte</code>.</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;script lang="ts" context="module">
    import type { Load } from '@sveltejs/kit';
    import { goto } from '$app/navigation';
    export const load: Load = async ({ fetch }) => {
        const res = await fetch('/posts');
        const response = await res.json();
        return { props: { posts: response.data } };
    };
&lt;/script>
&lt;script lang="ts">
    export let posts: any;
&lt;/script>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>

<p>You can see that the <code>load</code> function takes in the <code>fetch</code> function provided to us by SvelteKit and returns an object containing <code>props</code>. These props are passed down to our components.</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;script lang="ts" context="module">
    import type { Load } from '@sveltejs/kit';
    import { goto } from '$app/navigation';
    export const load: Load = async ({ fetch }) => {
        const res = await fetch('/posts');
        const response = await res.json();
        return { props: { posts: response.data } };
    };
&lt;/script>
&lt;script lang="ts">
    export let posts: any;
&lt;/script>
&lt;div class="my-4">
    &lt;h1 class="text-center text-3xl font-bold">My wonderful blog&lt;/h1>
&lt;/div>
&lt;div class="container mx-auto mt-4">
    {#each posts as post}
        &lt;div
            class="hover:bg-gray-200 cursor-pointer px-6 py-2 border-b border-gray-500"
            on:click={() => goto('/blog/' + post.id)}
        >
            &lt;h4 class="font-bold">{post.attributes.title}&lt;/h4>
            &lt;p class="mt-2 text-gray-800">{post.attributes.description}&lt;/p>
            &lt;p class="text-gray-500">By: {post.attributes.author.data.attributes.username}&lt;/p>
        &lt;/div>
    {/each}
&lt;/div>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>

<p>I've added a few typings in <code>src/lib/types.ts</code>. You can check it out in the Source Code. SvelteKit allows us to access any file in src/lib using the <a href="https://kit.svelte.dev/docs#modules-%24lib">$lib</a> alias.</p>

<p>I added a test user and a test post in Strapi, and this is how my app looks.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--IcMGwAaZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381569923_Screen%2BShot%2B2022-02-09%2Bat%2B5.39.04%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--IcMGwAaZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381569923_Screen%2BShot%2B2022-02-09%2Bat%2B5.39.04%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="218"></a></p>
<h3>
  <a name="posts-page" href="#posts-page">
  </a>
  Posts Page
</h3>

<p>Now, let's add a route that'll allow us to view a post. Now, you'll learn about <a href="https://kit.svelte.dev/docs#routing-pages">Dynamic Routes in SvelteKit</a>.</p>

<p>If we enclose a string in brackets <code>([])</code> in a filename of a route, that becomes a parameter. So, for example, if I have a route called <code>src/routes/blog/[post].svelte</code>, the route maps to <code>/blog/ANY_STRING</code> where <code>ANY_STRING</code> will be the value of the <code>post</code> parameter. Let's use this to query posts with Strapi.</p>

<p>We can use the <code>load</code> function we talked about earlier to get the parameters. Create a file called <code>src/routes/blog/[id].svelte</code> and add the below code to it.</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;!-- src/routes/blog/[id].svelte -->
&lt;script lang="ts" context="module">
    import type { Load } from '@sveltejs/kit';
    export const load: Load = async ({ params, fetch }) => {

        // Now, we'll fetch the blog post from Strapi
        const res = await fetch(`http://localhost:1337/api/posts/${params.id}?populate=*`);
        // A 404 status means "NOT FOUND"
        if (res.status === 404) {
            // We can create a custom error and return it.
            // SvelteKit will automatically show us an error page that we'll learn to customise later on.
            const error = new Error(`The post with ID ${id} was not found`);
            return { status: 404, error };
        } else {
            const response = await res.json();
            return { props: { post: response.data.attributes } };
        }
    };
&lt;/script>
&lt;script lang="ts">
    import type { Post } from '$lib/types';
    import { onMount } from 'svelte';
    export let post: Post;
    let content = post.content;
    onMount(async () => {
        // Install the marked package first!
        // Run this command: npm i marked
        // We're using this style of importing because "marked" uses require, which won't work when we import it with SvelteKit.
        // Check the "How do I use a client-side only library" in the FAQ: https://kit.svelte.dev/faq
        const marked = (await import('marked')).default;
        content = marked(post.content);
    });
&lt;/script>
&lt;h1 class="text-center text-4xl mt-4">{post.title}&lt;/h1>
&lt;p class="text-center mt-2">By: {post.author.data.attributes.username}&lt;/p>
&lt;div class="border border-gray-500 my-4 mx-8 p-6 rounded">
    {@html content}
&lt;/div>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>

<p>We need to use the @html directive when we want the content to be actually rendered as HTML.</p>

<p>When you go to a blog page, you should see something like this:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1ov9-1yt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644386563998_Screen%2BShot%2B2022-02-09%2Bat%2B7.01.46%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1ov9-1yt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644386563998_Screen%2BShot%2B2022-02-09%2Bat%2B7.01.46%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="425"></a></p>
<h2>
  <a name="authentication-and-authorization" href="#authentication-and-authorization">
  </a>
  Authentication and Authorization
</h2>

<p>Let's get started with authenticating users to our blog. Strapi allows us to configure third-party providers like <a href="https://google.com/">Google</a>, but we'll stick to the good ol' email and password sign-in.</p>

<p>We don't want anybody to register to our blog, so we'll manually create a user with Strapi. Then, in the Strapi admin panel, click on the <code>Users</code> collection type in the sidebar.</p>

<p>There, click <code>Add new Users</code> and create your user. Here's mine, for example.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--9sM6qX2z--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381980997_Screen%2BShot%2B2022-02-09%2Bat%2B5.46.02%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--9sM6qX2z--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381980997_Screen%2BShot%2B2022-02-09%2Bat%2B5.46.02%2BAM.png" alt="Create an Entry  page" loading="lazy" width="880" height="495"></a></p>

<p>Click <code>Save</code> when done</p>

<p>We can test logging in to our user by sending a <code>POST</code> request to <a href="http://localhost:1337/api/auth/local">http://localhost:1337/auth/local</a>.  Follow the image below for the correct JSON body.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--6JcKEGsv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644382202960_Screen%2BShot%2B2022-02-09%2Bat%2B5.49.58%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--6JcKEGsv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644382202960_Screen%2BShot%2B2022-02-09%2Bat%2B5.49.58%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="706"></a></p>

<p>The REST client I'm using in the above image is Postman.</p>
<h4>
  <a name="the-login-route" href="#the-login-route">
  </a>
  The Login Route
</h4>

<p>Let's create a new route <code>src/routes/login.svelte</code>. This will of course map to <code>/login</code>.</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;script lang="ts">
    import type { User } from '$lib/types';
    import { goto } from '$app/navigation';
    import user from '$lib/user';
    let email = '';
    let password = '';
    async function login() {
        const res = await fetch('http://localhost:1337/api/auth/local', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', Accept: 'application/json' },
            body: JSON.stringify({ identifier: email, password })
        });
        if (res.ok) {
            const data: {user: User, jwt: string} = await res.json();
            localStorage.setItem("token", data.jwt)
            if (data) {
                $user = data.user;
                goto('/');
            }
        } else {
            const data: { message: { messages: { message: string }[] }[] } = await res.json();
            if (data?.message?.[0]?.messages?.[0]?.message) {
                alert(data.message[0].messages[0].message);
            }
        }
    }
&lt;/script>
&lt;form on:submit|preventDefault={login} class="container mx-auto my-4">
    &lt;h1 class="text-center text-2xl font-bold">Login&lt;/h1>
    &lt;div class="my-1">
        &lt;label for="email">Email&lt;/label>
        &lt;input type="email" placeholder="Enter your email" bind:value={email} />
    &lt;/div>
    &lt;div class="my-1">
        &lt;label for="password">Password&lt;/label>
        &lt;input type="password" placeholder="Enter your password" bind:value={password} />
    &lt;/div>
    &lt;div class="my-3">
        &lt;button class="submit" type="submit">Login&lt;/button>
    &lt;/div>
&lt;/form>
&lt;style lang="postcss">
    label {
        @apply font-bold block mb-1;
    }
    input {
        @apply bg-white w-full border border-gray-500 rounded outline-none py-2 px-4;
    }
    .submit {
        @apply bg-blue-500 text-white border-transparent rounded px-4 py-2;
    }
&lt;/style>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>

<p>I've created a store in <code>src/lib/user.ts</code> that will house the User to access the User in any component.</p>

<p>Here's the code:</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>import { writable } from 'svelte/store';
import type { User } from './types';
const user = writable&lt;User | null>(null);
export default user;
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>
<h4>
  <a name="persisting-auth-state" href="#persisting-auth-state">
  </a>
  Persisting Auth State
</h4>

<p>Great! Our <code>/login</code> page works flawlessly, but there's one problem - When we refresh the page, the user store gets reset to <code>null</code>. To fix this, we need to re-fetch the User every time the page reloads. That's right, we need a <code>load</code> function in <code>__layout.svelte</code> since it is present on every page.</p>

<p>Change <code>__layout.svelte</code> to this code:</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;!-- src/routes/__layout.svelte -->
&lt;script lang="ts">
    import '../app.css';
    import userStore from '$lib/user';
    import type { User } from '$lib/types';
    import { onMount } from 'svelte';
    let loading = true;
    onMount(async () => {
        // Check if 'token' exists in localStorage
        if (!localStorage.getItem('token')) {
            loading = false;
            return { props: { user: null } };
        }
        // Fetch the user from strapi
        const res = await fetch('http://localhost:1337/api/auth/me', {
            headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }
        });
        const user: User = await res.json();
        loading = false;
        if (res.ok) {
            $userStore = user;
        }
    });
&lt;/script>
{#if !loading}
    &lt;slot />
{/if}
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>

<p>Wait a minute! Why are we using <code>onMount</code> instead of <code>load</code>? Since <code>load</code> is executed on the server, we won't have access to <code>localStorage</code>, which is on the browser. Hence, we have to wait for the app to load before accessing <code>localStorage</code>.</p>

<p>If you visit your app, you'll get a <code>404</code> Error when trying to get the User from Strapi. This error is because <code>/auth/me</code> isn't a valid route. So let's create it ourselves.</p>

<p>Open the Strapi project in your favorite editor. Strapi allows us to add custom API routes to it. Let's use the <code>strapi</code> CLI to generate a route.</p>

<p>Run the following command to start the CLI.</p>

<p><code></code><code>bash<br>
     npx strapi generate <br>
</code><code></code><br>
Select <code>controller</code> and add controller name <code>Auth</code>. Also, click to add the new controller to a new API.</p>

<p>You'll find a new file called <code>/src/api/auth/controllers/Auth.js</code>. We need to add our simple controller here.</p>

<p>Update the <code>/src/api/auth/controllers/Auth.js</code> file code with the following code snippet.</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>    "use strict";

    /**
     * A set of functions called "actions" for `auth`
     */

    module.exports = {
      async me(ctx) {
        if (ctx.state.user) {
          return ctx.state.user;
        }

        ctx.unauthorized("You're not logged in");
      },
    };
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>

<p>This simple API route will return the User if it exists or give us a <code>401 UNAUTHORIZED</code> error.<br>
 Now, we need to tell Strapi to register this controller at <code>/auth/me</code>. </p>

<p>To do that, create file <code>/src/api/auth/config/routes.json</code>, and add the following code snippet to the file.</p>

<p><code></code>`json</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>{
    "routes": [
        {
            "method": "GET",
            "path": "/auth/me",
            "handler": "Auth.me",
            "config": {
                "policies": []
            }
        }
    ]
}
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>

<p>Now, if we access <code>/auth/me</code>, we get <code>404 NotFoundError</code>. </p>

<p>Like the <code>post</code> routes, Strapi doesn't, by default, allow anyone to access this route either. So, let's edit permissions like how we did earlier for the <code>Authenticated</code> role. </p>

<p>And now, everything should work flawlessly.</p>
<h4>
  <a name="navbar" href="#navbar">
  </a>
  Navbar
</h4>

<p>Let's add a quick navbar to our app. Create file <code>src/lib/Navbar.svelte</code> and put the below code in it.</p>

<p><code></code>`js</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;!-- src/lib/Navbar.svelte -->
&lt;script lang="ts">
    import user from './user';
&lt;/script>
&lt;nav class="bg-white border-b border-gray-500 py-2 px-4 w-full">
    &lt;div class="flex items-center justify-between container mx-auto">
        &lt;a href="/" class="font-bold no-underline">My blog&lt;/a>
        &lt;section>
            {#if !$user}
                &lt;a href="/login" class="font-mono no-underline">Login&lt;/a>
            {:else}
                &lt;a href="/new" class="font-mono no-underline mr-3">New&lt;/a>
                &lt;span class="font-mono text-gray-500">{$user.username}&lt;/span>
            {/if}
        &lt;/section>
    &lt;/div>
&lt;/nav>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code><br>
Add the Navbar to <code>__layout.svelte</code>.</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>    &lt;!-- src/routes/__layout.svelte -->
    &lt;script lang="ts">
      // ...
      import Navbar from "$lib/Navbar.svelte";
    &lt;/script>

    &lt;Navbar />
    &lt;slot />
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>
<h2>
  <a name="create-and-update-posts" href="#create-and-update-posts">
  </a>
  Create and Update Posts
</h2>

<p>Now, let's get to the juicy part. Add a file called <code>src/routes/new.svelte</code>. This file will contain the form used to create a new post on Strapi.</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;!-- src/routes/new.svelte -->
&lt;script lang="ts" context="module">
    import type { Load } from '@sveltejs/kit';
    import type { Post } from '$lib/types';
    export const load: Load = async ({ fetch, page: { query } }) => {
        // edit will be an optional query string parameter that'll contain the ID of the post that needs to be updated.
        // If this is set, the post will be updated instead of being created.
        const edit = query.get('edit');
        if (edit) {
            const res = await fetch('http://localhost:1337/api/posts/' + edit);
            if (res.status === 404) {
                const error = new Error(`The post with ID ${edit} was not found`);
                return { status: 404, error };
            } else {
                const data: Post = await res.json();
                return {
                    props: {
                        editId: edit,
                        title: data.attributes.title,
                        content: data.attributes.content,
                        description: data.attributes.description
                    }
                };
            }
        }
        return { props: {} };
    };
&lt;/script>
&lt;script lang="ts">
    import { onMount } from 'svelte';
    import user from '$lib/user';
    import { goto } from '$app/navigation';
    export let editId: string;
    export let title = '';
    export let description = '';
    export let content = '';
    onMount(() => {
        if (!$user) goto('/login');
    });
    // To edit the post
    async function editPost() {
        if (!localStorage.getItem('token')) {
            goto('/login');
            return;
        }
        const res = await fetch('http://localhost:1337/api/posts/' + editId, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                Accept: 'application/json',
                Authorization: 'Bearer ' + localStorage.getItem('token')
            },
            body: JSON.stringify({ title, description, content })
        });
        if (!res.ok) {
            const data: { message: { messages: { message: string }[] }[] } = await res.json();
            if (data?.message?.[0]?.messages?.[0]?.message) {
                alert(data.message[0].messages[0].message);
            }
        } else {
            const data: Post = await res.json();
            goto('/blog/' + data.id);
        }
    }
    async function createPost() {
        if (!localStorage.getItem('token')) {
            goto('/login');
            return;
        }
        if (editId) {
            // We're supposed to edit, not create
            editPost();
            return;
        }
        const res = await fetch('http://localhost:1337/api/posts', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                Accept: 'application/json',
                Authorization: 'Bearer ' + localStorage.getItem('token')
            },
            body: JSON.stringify({ title, description, content })
        });
        if (!res.ok) {
            const data: { message: { messages: { message: string }[] }[] } = await res.json();
            if (data?.message?.[0]?.messages?.[0]?.message) {
                alert(data.message[0].messages[0].message);
            }
        } else {
            const data: Post = await res.json();
            goto('/blog/' + data.id);
        }
    }
&lt;/script>
&lt;form on:submit|preventDefault={createPost} class="my-4 mx-auto container p-4">
    &lt;div class="my-1">
        &lt;label for="title">Title&lt;/label>
        &lt;input type="text" placeholder="Enter title" id="title" bind:value={title} />
    &lt;/div>
    &lt;div class="my-1">
        &lt;label for="description">Description&lt;/label>
        &lt;input type="text" placeholder="Enter description" id="description" bind:value={description} />
    &lt;/div>
    &lt;div class="my-1">
        &lt;label for="title">Content&lt;/label>
        &lt;textarea rows={5} placeholder="Enter content" id="content" bind:value={content} />
    &lt;/div>
    &lt;div class="my-2">
        &lt;button class="submit" type="submit">Submit&lt;/button>
    &lt;/div>
&lt;/form>
&lt;style lang="postcss">
    label {
        @apply font-bold block mb-1;
    }
    input {
        @apply bg-white w-full border border-gray-500 rounded outline-none py-2 px-4;
    }
    textarea {
        @apply bg-white w-full border border-gray-500 rounded outline-none py-2 px-4 resize-y;
    }
    .submit {
        @apply bg-blue-500 text-white border-transparent rounded px-4 py-2;
    }
&lt;/style>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>

<p>Don't try this out yet, since there's currently no way to determine the Author of the PostPost. We need to code that in Strapi explicitly.</p>

<p>Let's create custom controllers for the <code>Post</code> content type. Here, we'll make it so that the Author of a post will be the currently logged-in User.</p>

<p>Edit <code>api/post/controllers/post.js</code> in the Strapi project.</p>

<p><code></code>`</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>'use strict';
/**
 *  post controller
 */
const { createCoreController } = require('@strapi/strapi').factories;
const { parseMultipartData, sanitizeEntity } = require("strapi-utils");
/**
 * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)
 * to customize this controller
 */
module.exports = {
    async create(ctx) {
        let entity;
        if (ctx.is("multipart")) {
            const { data, files } = parseMultipartData(ctx);
            data.author = ctx.state.user.id;
            entity = await strapi.services.post.create(data, { files });
        } else {
            ctx.request.body.author = ctx.state.user.id;
            entity = await strapi.services.post.create(ctx.request.body);
        }
        return sanitizeEntity(entity, { model: strapi.models.post });
    },
    async update(ctx) {
        const { id } = ctx.params;
        let entity;
        const [article] = await strapi.services.post.find({
            id: ctx.params.id,
            "author.id": ctx.state.user.id,
        });
        if (!article) {
            return ctx.unauthorized(`You can't update this entry`);
        }
        if (ctx.is("multipart")) {
            const { data, files } = parseMultipartData(ctx);
            entity = await strapi.services.post.update({ id }, data, {
                files,
            });
        } else {
            entity = await strapi.services.post.update({ id }, ctx.request.body);
        }
        return sanitizeEntity(entity, { model: strapi.models.post });
    },
    async delete(ctx) {
        const { id } = ctx.params;
        let entity;
        const [article] = await strapi.services.post.find({
            id: ctx.params.id,
            "author.id": ctx.state.user.id,
        });
        if (!article) {
            return ctx.unauthorized(`You can't delete this entry`);
        }
        await strapi.services.post.delete({ id });
        return { ok: true };
    },
};
module.exports = createCoreController('api::post.post');
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p>`<code></code></p>

<blockquote>
<p>If you get confused, checkout the <a href="https://docs.strapi.io/developer-docs/latest/guides/is-owner.html#introduction">Strapi Documentation</a></p>
</blockquote>

<p>Install <code>strapi-utils</code> with the following command.<br>
<code></code><code>bash<br>
     npm install strapi-utils<br>
</code><code></code><br>
And now, you should be able to create and update posts all from one route. Let's make the update process easier. Change <code>src/routes/blog/[id].svelte</code> to the code below:</p>

<p><code></code>`js<br>
    &lt;!-- src/routes/blog/[id].svelte --><br>
    <br>
        import type { Load } from '@sveltejs/kit';<br>
        export const load: Load = async ({ params, fetch }) => {
</p><div class="highlight"><pre class="highlight plaintext"><code>        // Now, we'll fetch the blog post from Strapi
        const res = await fetch(`http://localhost:1337/api/posts/${params.id}?populate=*`);
        // A 404 status means "NOT FOUND"
        if (res.status === 404) {
            // We can create a custom error and return it.
            // SvelteKit will automatically show us an error page that we'll learn to customise later on.
            const error = new Error(`The post with ID ${params.id} was not found`);
            return { status: 404, error };
        } else {
            const response = await res.json();
            return { props: { post: response.data.attributes } };
        }
    };
&lt;/script>
&lt;script lang="ts">
        import type { Post } from '$lib/types';
        import { onMount } from 'svelte';
        import { goto } from '$app/navigation';
        import user from '$lib/user';
    export let post: Post;
    let content = post.content;
    onMount(async () => {
        // Install the marked package first!
        // Run this command: npm i marked
        // We're using this style of importing because "marked" uses require, which won't work when we import it with SvelteKit.
        // Check the "How do I use a client-side only library" in the FAQ: https://kit.svelte.dev/faq
        const marked = (await import('marked')).default;
        content = marked(post.content);
    });
    async function deletePost() {
            // TODO
        }
&lt;/script>
&lt;h1 class="text-center text-4xl mt-4">{post.title}&lt;/h1>
&lt;p class="text-center mt-2">By: {post.author.data.attributes.username}&lt;/p>
    {#if $user && post.author.id === $user.id}
        &lt;p class="my-2 flex justify-center items-center gap-3">
            &lt;button
                class="bg-blue-500 text-white font-bold py-2 px-4 rounded border-transparent"
                on:click={() => goto('/new?edit=' + post.id)}>Update post&lt;/button
            >
            &lt;button
                class="bg-red-500 text-white font-bold py-2 px-4 rounded border-transparent"
                on:click={deletePost}>Delete post&lt;/button
            >
        &lt;/p>
    {/if}

    &lt;div class="border border-gray-500 my-4 mx-8 p-6 rounded">
        {@html content}
    &lt;/div>
</code></pre></div>
<p>`<code></code></p>

<p>Now, when the Author visits their PostPost, they'll see two buttons to Update and Delete the PostPost, respectively.</p>

<p>Don't try this out yet, since there's currently no way to determine the Author of the PostPost. We need to code that in Strapi explicitly.<br>
Let's create custom controllers for the <code>Post</code> content type. Here, we'll make it so that the Author of a post will be the currently logged-in User.<br>
Edit <code>api/post/controllers/post.js</code> in the Strapi project.</p>

<p><code></code>`</p>
<div class="highlight"><pre class="highlight plaintext"><code>    "use strict";

    const { parseMultipartData, sanitizeEntity } = require("strapi-utils");

    /**
     * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)
     * to customize this controller
     */

    module.exports = {
      async create(ctx) {
        let entity;

        if (ctx.is("multipart")) {
          const { data, files } = parseMultipartData(ctx);
          data.author = ctx.state.user.id;
          entity = await strapi.services.post.create(data, { files });
        } else {
          ctx.request.body.author = ctx.state.user.id;
          entity = await strapi.services.post.create(ctx.request.body);
        }

        return sanitizeEntity(entity, { model: strapi.models.post });
      },

      async update(ctx) {
        const { id } = ctx.params;

        let entity;

        const [article] = await strapi.services.post.find({
          id: ctx.params.id,
          "author.id": ctx.state.user.id,
        });

        if (!article) {
          return ctx.unauthorized(`You can't update this entry`);
        }

        if (ctx.is("multipart")) {
          const { data, files } = parseMultipartData(ctx);
          entity = await strapi.services.post.update({ id }, data, {
            files,
          });
        } else {
          entity = await strapi.services.post.update({ id }, ctx.request.body);
        }

        return sanitizeEntity(entity, { model: strapi.models.post });
      },
    };
</code></pre></div>
<p>`<code></code></p>

<blockquote>
<p>If you get confused, checkout the <a href="https://docs.strapi.io/developer-docs/latest/guides/is-owner.html#introduction">Strapi Documentation</a></p>
</blockquote>

<p>And now, you should be able to create and update posts all from one route. Let's make the update process easier. Change <code>src/routes/blog/[slug].svelte</code> to the code below:</p>

<p><code></code>`</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;!-- src/routes/blog/[slug].svelte -->
    &lt;script lang="ts" context="module">
        import type { Load } from '@sveltejs/kit';

        export const load: Load = async ({ page: { params }, fetch }) => {
            // The params object will contain all of the parameters in the route.
            const { slug } = params;

            // Now, we'll fetch the blog post from Strapi
            const res = await fetch('http://localhost:1337/posts/' + slug);

            // A 404 status means "NOT FOUND"
            if (res.status === 404) {
                // We can create a custom error and return it.
                // SvelteKit will automatically show us an error page that we'll learn to customise later on.
                const error = new Error(`The post with ID ${slug} was not found`);
                return { status: 404, error };
            } else {
                const data = await res.json();
                return { props: { post: data } };
            }
        };
    &lt;/script>

    &lt;script lang="ts">
        import type { Post } from '$lib/types';
        import { onMount } from 'svelte';
        import { goto } from '$app/navigation';
        import user from '$lib/user';

        export let post: Post;
        let content = post.content;

        onMount(async () => {
            // Install the marked package first!
            // Run this command: npm i marked

            // We're using this style of importing because "marked" uses require, which won't work when we import it with SvelteKit.
            // Check the "How do I use a client-side only library" in the FAQ: https://kit.svelte.dev/faq
            const marked = (await import('marked')).default;
            content = marked(post.content);
        });

        async function deletePost() {
            // TODO
        }
    &lt;/script>

    &lt;h1 class="text-center text-4xl mt-4">{post.title}&lt;/h1>
    &lt;p class="text-center mt-2">By: {post.author.username}&lt;/p>

    {#if $user && post.author.id === $user.id}
        &lt;p class="my-2 flex justify-center items-center gap-3">
            &lt;button
                class="bg-blue-500 text-white font-bold py-2 px-4 rounded border-transparent"
                on:click={() => goto('/new?edit=' + post.id)}>Update post&lt;/button
            >
            &lt;button
                class="bg-red-500 text-white font-bold py-2 px-4 rounded border-transparent"
                on:click={deletePost}>Delete post&lt;/button
            >
        &lt;/p>
    {/if}

    &lt;div class="border border-gray-500 my-4 mx-8 p-6 rounded">
        {@html content}
    &lt;/div>
</code></pre></div>
<p>`<code></code></p>

<p>Now, when the Author visits their PostPost, they'll see two buttons to Update and Delete the PostPost, respectively.</p>
<h2>
  <a name="deleting-posts" href="#deleting-posts" class="anchor">
  </a>
  Deleting Posts
</h2>

<p>Let's add functionality to the <code>Delete Post</code> button. Edit the <code>deletePost()</code> function in the file we just modified (<code>src/routes/blog/[id].svelte</code>) and change it to this:</p>

<p><code></code>`</p>
<div class="highlight"><pre class="highlight plaintext"><code>    async function deletePost() {
        if (!localStorage.getItem('token')) {
            goto('/login');
            return;
        }
        const res = await fetch('http://localhost:1337/api/posts/' + post.id, {
            method: 'DELETE',
            headers: { Authorization: 'Bearer ' + localStorage.getItem('token') }
        });
        if (res.ok) {
            goto('/');
        } else {
            const data: { message: { messages: { message: string }[] }[] } = await res.json();
            if (data?.message?.[0]?.messages?.[0]?.message) {
                alert(data.message[0].messages[0].message);
            }
        }
    }
</code></pre></div>
<p>`<code></code><br>
Now, obviously, we don't want anybody to delete a post by someone else. Let's add another method in <code>api/post/controllers/post.js</code> in our Strapi App.</p>

<p>This is how your code should look now:</p>

<p><code></code>`</p>
<div class="highlight"><pre class="highlight plaintext"><code>'use strict';
/**
 *  post controller
 */
const { createCoreController } = require('@strapi/strapi').factories;
const { parseMultipartData, sanitizeEntity } = require("strapi-utils");
/**
 * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)
 * to customize this controller
 */
module.exports = {
    async create(ctx) {
        let entity;
        if (ctx.is("multipart")) {
            const { data, files } = parseMultipartData(ctx);
            data.author = ctx.state.user.id;
            entity = await strapi.services.post.create(data, { files });
        } else {
            ctx.request.body.author = ctx.state.user.id;
            entity = await strapi.services.post.create(ctx.request.body);
        }
        return sanitizeEntity(entity, { model: strapi.models.post });
    },
    async update(ctx) {
        const { id } = ctx.params;
        let entity;
        const [article] = await strapi.services.post.find({
            id: ctx.params.id,
            "author.id": ctx.state.user.id,
        });
        if (!article) {
            return ctx.unauthorized(`You can't update this entry`);
        }
        if (ctx.is("multipart")) {
            const { data, files } = parseMultipartData(ctx);
            entity = await strapi.services.post.update({ id }, data, {
                files,
            });
        } else {
            entity = await strapi.services.post.update({ id }, ctx.request.body);
        }
        return sanitizeEntity(entity, { model: strapi.models.post });
    },
    async delete(ctx) {
        const { id } = ctx.params;
        let entity;
        const [article] = await strapi.services.post.find({
            id: ctx.params.id,
            "author.id": ctx.state.user.id,
        });
        if (!article) {
            return ctx.unauthorized(`You can't delete this entry`);
        }
        await strapi.services.post.delete({ id });
        return { ok: true };
    },
};
module.exports = createCoreController('api::post.post');
</code></pre></div>
<p>`<code></code></p>

<p>And now, the author should be able to delete posts.</p>
<h2>
  <a name="custom-error-page" href="#custom-error-page" class="anchor">
  </a>
  Custom Error Page
</h2>

<p>You may have noticed that the 404 page looks terrible. It has almost no styling. With SvelteKit, we're allowed to create a <a href="https://kit.svelte.dev/docs#layouts-error-pages">custom error page</a>. So we need to name this file <code>__error.svelte</code> and place it in <code>src/routes</code>.</p>

<p><code></code>`</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;!-- src/routes/__error.svelte -->
&lt;script lang="ts" context="module">
    import type { ErrorLoad } from '@sveltejs/kit';
    export type { ErrorLoad } from '@sveltejs/kit';
    export const load: ErrorLoad = ({ error, status }) => {
        return { props: { error, status } };
    };
&lt;/script>
&lt;script lang="ts">
    export let error: Error;
    export let status: number;
&lt;/script>
&lt;div class="fixed w-full h-full grid place-items-center">
    &lt;section class="p-8 border-gray-500 rounded">
        &lt;h1 class="text-center text-4xl font-mono-mt-4">{status}&lt;/h1>
        &lt;p class="text-center">{error.message}&lt;/p>
    &lt;/section>
&lt;/div>
</code></pre></div>
<p>`<code></code></p>

<p>Here's how our error page will look like when you search for a blog post with wrong id.</p>

<p><img src="https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1645742392877_Screen+Shot+2022-02-24+at+11.39.48+PM.png" alt="The Error Page" width="2818" height="1278"></p>

<p>Much better right?</p>

<p>Now, obviously, we don't want anybody to delete a post by someone else. Let's add another method in <br>
<code>api/post/controllers/post.js</code> in our Strapi App.<br>
This is how your code should look now:</p>

<p><code></code>`<br>
        // api/post/controllers/post.js<br>
        "use strict";</p>
<div class="highlight"><pre class="highlight plaintext"><code>    const { parseMultipartData, sanitizeEntity } = require("strapi-utils");

    /**
     * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)
     * to customize this controller
     */

    module.exports = {
      async create(ctx) {
        let entity;

        if (ctx.is("multipart")) {
          const { data, files } = parseMultipartData(ctx);
          data.author = ctx.state.user.id;
          entity = await strapi.services.post.create(data, { files });
        } else {
          ctx.request.body.author = ctx.state.user.id;
          entity = await strapi.services.post.create(ctx.request.body);
        }

        return sanitizeEntity(entity, { model: strapi.models.post });
      },

      async update(ctx) {
        const { id } = ctx.params;

        let entity;

        const [article] = await strapi.services.post.find({
          id: ctx.params.id,
          "author.id": ctx.state.user.id,
        });

        if (!article) {
          return ctx.unauthorized(`You can't update this entry`);
        }

        if (ctx.is("multipart")) {
          const { data, files } = parseMultipartData(ctx);
          entity = await strapi.services.post.update({ id }, data, {
            files,
          });
        } else {
          entity = await strapi.services.post.update({ id }, ctx.request.body);
        }

        return sanitizeEntity(entity, { model: strapi.models.post });
      },

      async delete(ctx) {
        const { id } = ctx.params;

        let entity;

        const [article] = await strapi.services.post.find({
          id: ctx.params.id,
          "author.id": ctx.state.user.id,
        });

        if (!article) {
          return ctx.unauthorized(`You can't delete this entry`);
        }

        await strapi.services.post.delete({ id });

        return { ok: true };
      },
    };
</code></pre></div>
<p>`<code></code></p>

<p>And now, the author should be able to delete posts.</p>
<h2>
  <a name="conclusion-amp-resources" href="#conclusion-amp-resources" class="anchor">
  </a>
  Conclusion & Resources
</h2>

<p>And there you have it! Your blog website is made with SvelteKit and Strapi. If you got stuck anywhere, be sure to check the <a href="https://kit.svelte.dev/docs">SvelteKit Docs</a>, the <a href="https://docs.strapi.io/">Strapi Docs</a>, and the <a href="https://github.com/Quadrisheriff/Svelte-strapi-tutorial">source code on Github</a>.</p>


</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/shadaw11/how-to-create-a-blog-with-sveltekit-and-strapi-2ea" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(t,e,n,o){return o.type_of="article",o.id=1080759,o.title="How to Create a Blog with SvelteKit and Strapi",o.description="SvelteKit is a relatively new SSR framework for SvelteJS. We can compare it to NextJS, but instead of...",o.readable_publish_date="May 10",o.slug="how-to-create-a-blog-with-sveltekit-and-strapi-2ea",o.path="/strapi/how-to-create-a-blog-with-sveltekit-and-strapi-2ea",o.url="https://dev.to/strapi/how-to-create-a-blog-with-sveltekit-and-strapi-2ea",o.comments_count=1,o.public_reactions_count=11,o.collection_id=t,o.published_timestamp=e,o.positive_reactions_count=11,o.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--LrnKSqFF--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/i2nzaaq4dinvpwf29kor.png",o.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--1z4eVrxz--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/i2nzaaq4dinvpwf29kor.png",o.canonical_url="https://strapi.io/blog/how-to-create-a-blog-with-svelte-kit-strapi?utm_source=dev.to&utm_medium=post&utm_campaign=blog&utm_id=blog",o.created_at=e,o.edited_at="2022-05-10T08:41:41Z",o.crossposted_at=t,o.published_at=e,o.last_comment_at="2022-05-13T18:41:43Z",o.reading_time_minutes=23,o.tag_list="svelte, blog, strapi",o.tags=["svelte","blog",n],o.body_html='<p><a href="https://kit.svelte.dev/">SvelteKit</a> is a relatively new SSR framework for SvelteJS. We can compare it to NextJS, but instead of using React, it uses Svelte. In this tutorial, you\'ll learn how you can create a blog website with SvelteKit and Strapi as a CMS.</p>\n\n<h2>\n  <a name="what-is-a-cms" href="#what-is-a-cms">\n  </a>\n  What is a CMS?\n</h2>\n\n<p>A Content Management System (CMS) is a popular tool for creating web pages, blogs, and online stores. They store your website\'s data, images, pictures, and other hosted content. They are popular among bloggers because anyone can spin up a blog pretty quickly.</p>\n\n<p><a href="https://strapi.io/">Strapi is a headless CMS coded in Javascript.</a> A headless CMS has no frontend, only an admin panel, so it is ideal for developers. In other words, a Headless CMS is an API that serves up your content to be consumed by a frontend.</p>\n\n<h2>\n  <a name="goals" href="#goals">\n  </a>\n  Goals\n</h2>\n\n<p>In this tutorial, you\'ll code a blog website using <a href="https://kit.svelte.dev/">the SvelteKit framework</a>. You\'ll use <a href="https://strapi.io/">Strapi for content management</a>.</p>\n\n<p>You\'ll learn how to use Strapi to manage your content and the basics of SvelteKit, including:</p>\n\n<ul>\n<li>Filesystem based routing</li>\n<li>Preloading content</li>\n<li>Dynamic routing</li>\n<li>404 Error handling</li>\n<li>SvelteKit Layouts</li>\n<li>And much more</li>\n</ul>\n\n<h2>\n  <a name="prerequisites" href="#prerequisites">\n  </a>\n  Prerequisites\n</h2>\n\n<ul>\n<li>\n<a href="https://nodejs.org/">NodeJS</a> and <a href="https://npmjs.com/">NPM</a> installed on your machine.</li>\n<li>Javascript and <a href="https://svelte.dev/">Svelte</a> knowledge. (Svelte has <a href="https://svelte.dev/tutorial">a great tutorial</a>)</li>\n<li>Some coffee and articles to write on your new blog!</li>\n</ul>\n\n<h2>\n  <a name="creating-a-strapi-project" href="#creating-a-strapi-project">\n  </a>\n  Creating a Strapi Project\n</h2>\n\n<p>Now that you know what a CMS and Strapi are, you can get started by locally hosting Strapi, or in other words, <em>Creating a Strapi Project</em>.</p>\n\n<p>Run this command in an empty folder to create a Strapi project.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>     npx create-strapi-app cms <span class="nt">--quickstart</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>You can replace the word <code>cms</code> with anything you like. This command will be the name of the folder your new Strapi project will sit in.</p>\n\n<p>Now sit back, relax, and wait for the project to create itself. After that, you should automatically be taken to localhost:1377.</p>\n\n<p>If that\'s not the case, <code>cd</code> into the newly created folder and run this command.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>     npm run strapi develop\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This command will start Strapi up on port <code>1337</code>. If a page is not automatically opened up for you, open <a href="http://localhost:1377/">localhost:1377</a> to launch the Strapi Admin Page.</p>\n\n<p>It should present you with this page. You need to sign up for an account here. <strong>Remember that this account is locally-scoped to this project, meaning it won\'t work on other Strapi projects.</strong></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--y6c-sDDw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359293544_Screen%2BShot%2B2022-02-08%2Bat%2B11.28.01%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--y6c-sDDw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359293544_Screen%2BShot%2B2022-02-08%2Bat%2B11.28.01%2BPM.png" alt="" loading="lazy" width="880" height="512"></a></p>\n\n<h3>\n  <a name="creating-content-types" href="#creating-content-types">\n  </a>\n  Creating Content Types\n</h3>\n\n<p>In the sidebar of Strapi admin <code>http://localhost:1377</code>, click the <code>Content-Types Builder</code> button. This button should take you to the Content Types builder page.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--VQTLTkJM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359455862_Screen%2BShot%2B2022-02-08%2Bat%2B11.30.48%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--VQTLTkJM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359455862_Screen%2BShot%2B2022-02-08%2Bat%2B11.30.48%2BPM.png" alt="" loading="lazy" width="880" height="478"></a></p>\n\n<h2>\n  <a name="what-are-content-types" href="#what-are-content-types">\n  </a>\n  What are Content Types?\n</h2>\n\n<p>We can compare a content type to a table in SQL. Thus, content types help us structure and categorize our data.</p>\n\n<h3>\n  <a name="posts" href="#posts">\n  </a>\n  Posts\n</h3>\n\n<p>Let\'s create a content type for posts. Then, click the <code>Create new Collection Type</code> button to launch a dialogue.</p>\n\n<p>Enter <code>Post</code> as the name. Go to <code>Advanced Settings</code> at the top and disable the Drafts system. Click Continue</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XHbzsi1l--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359547760_Screen%2BShot%2B2022-02-08%2Bat%2B11.32.24%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XHbzsi1l--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359547760_Screen%2BShot%2B2022-02-08%2Bat%2B11.32.24%2BPM.png" alt="A sample screenshot" loading="lazy" width="880" height="482"></a></p>\n\n<p>Add these fields. Refer to the image if you get stuck.</p>\n\n<ul>\n<li>A <code>title</code> field with type <code>Text</code>.</li>\n<li>A <code>description</code> field with type <code>Text</code>. Make sure the text is <code>Long text</code>.</li>\n<li>A <code>content</code> field with the <code>Rich Text</code> type.</li>\n</ul>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ZavBpj78--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359854543_Screen%2BShot%2B2022-02-08%2Bat%2B11.37.28%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ZavBpj78--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359854543_Screen%2BShot%2B2022-02-08%2Bat%2B11.37.28%2BPM.png" alt="" loading="lazy" width="880" height="497"></a></p>\n\n<p>Let\'s also add a relation between <code>Post</code> and User from the <code>users-permissions</code> plugin. This relationship allows us to easily link a post to a user to display relevant information like the Author\'s name and profile picture, fetch the Author\'s posts, etc.</p>\n\n<p>Add a new <code>Relation</code> field to the <code>Post</code> content type. The column on the left should be PostPost, and the column on the right should be User from <code>users-permissions</code>. Select the fourth relation; the <code>User</code> has many <code>Posts</code> and clicks <code>Finish</code>.</p>\n\n<p>Refer to the below image if you get stuck:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--IEnh3ZoA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359871261_Screen%2BShot%2B2022-02-08%2Bat%2B11.36.49%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--IEnh3ZoA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359871261_Screen%2BShot%2B2022-02-08%2Bat%2B11.36.49%2BPM.png" alt="" loading="lazy" width="880" height="436"></a></p>\n\n<p>Click <code>Save</code> to save your changes and restart the server.</p>\n\n<h3>\n  <a name="adding-slug-to-the-post-collection-type" href="#adding-slug-to-the-post-collection-type">\n  </a>\n  Adding Slug to the Post Collection Type\n</h3>\n\n<p>Next, we will be adding a dynamic autogenerated slug system to the <code>Post</code> collection type. Using a slug will make it easier to query for our posts in the frontend.</p>\n\n<p>First, navigate to <strong>Content-Types Builder</strong> and click <strong>Post</strong>, then click <strong>Add another field</strong>. Select <strong>UID.</strong> Set the field <code>slug</code>, and set the attached field to <code>title</code>. Save your changes and click <strong>Configure the view</strong>, and select the <code>slug</code> field. </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Ghe45Zep--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644385413170_Screen%2BShot%2B2022-02-09%2Bat%2B6.42.54%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Ghe45Zep--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644385413170_Screen%2BShot%2B2022-02-09%2Bat%2B6.42.54%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="354"></a></p>\n\n<p>Then, set <strong>the Editable field</strong> off in the window that appears. Click <strong>Save</strong> to register your changes.</p>\n\n<p>With the slug system fully set up, a new slug will be automatically generated in an uneditable slug field anytime you create a new product. The Slug will be created from the product name.</p>\n\n<h3>\n  <a name="setting-up-roles-and-permissions" href="#setting-up-roles-and-permissions">\n  </a>\n  Setting up Roles and Permissions\n</h3>\n\n<p>If you try querying the <a href="https://docs.strapi.io/developer-docs/latest/developer-resources/database-apis-reference/rest-api.html#api-endpoints">Content API</a> for the <code>posts</code> content type, i.e., at <code>http://localhost:1377/api/posts</code>,  you\'ll get a <code>403 FORBIDDEN</code> error.</p>\n\n<p>This error is because, by default, Strapi doesn\'t allow any man down the street to access your content. You\'re supposed to set rules and permissions for specific roles. Let\'s allow the <code>Public</code> role, i.e., an unauthenticated user, to read our posts.</p>\n\n<p>In the sidebar, click on the <code>Settings</code> button. There, click on <code>Roles</code> in the <code>Users &amp; Permissions</code> section. But, first, let\'s edit the permissions for the Public role.<br>\nWe\'ll allow the <code>Public</code> role to <code>count</code>, <code>find</code> and <code>findOne</code> for Posts.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--2eyqrX_s--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360051801_Screen%2BShot%2B2022-02-08%2Bat%2B11.40.38%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--2eyqrX_s--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360051801_Screen%2BShot%2B2022-02-08%2Bat%2B11.40.38%2BPM.png" alt="" loading="lazy" width="880" height="467"></a></p>\n\n<p>Next, let\'s do the same for the <code>Authenticated</code> role, but we\'ll also allow them to create, update and delete posts as well.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FVWqSgqS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360101747_Screen%2BShot%2B2022-02-08%2Bat%2B11.41.35%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FVWqSgqS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360101747_Screen%2BShot%2B2022-02-08%2Bat%2B11.41.35%2BPM.png" alt="" loading="lazy" width="880" height="455"></a></p>\n<h2>\n  <a name="creating-a-sveltekit-project" href="#creating-a-sveltekit-project">\n  </a>\n  Creating a SvelteKit Project\n</h2>\n\n<p>Now for the main <a href="https://kit.svelte.dev/">SvelteKit</a> code. Create a new folder named <code>frontend</code> in the same directory as the folder for the Strapi project and <code>cd</code> into it.</p>\n\n<p>Now, let\'s create a SvelteKit project with this command:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>    npm init svelte@next\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Add your preferred project name, and be sure to choose the options as shown in the below image.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--CRuCSRR3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360555795_Screen%2BShot%2B2022-02-08%2Bat%2B11.48.39%2BPM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--CRuCSRR3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360555795_Screen%2BShot%2B2022-02-08%2Bat%2B11.48.39%2BPM.png" alt="" loading="lazy" width="880" height="462"></a></p>\n\n<p>Launch the app inside your favourite editor, for example, <a href="https://code.visualstudio.com/">VSCode</a>. Now, we can start the app with the below two commands:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>     <span class="c"># To install packages</span>\n     npm I \n\n     <span class="c"># To start the app</span>\n     npm run dev\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Here\'s how your app should look, hosted on <a href="https://localhost:3000/">localhost:3000</a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--CMiAxqP4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644361739264_Screen%2BShot%2B2022-02-09%2Bat%2B12.08.15%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--CMiAxqP4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644361739264_Screen%2BShot%2B2022-02-09%2Bat%2B12.08.15%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="433"></a></p>\n\n<h3>\n  <a name="install-tailwindcss" href="#install-tailwindcss">\n  </a>\n  Install TailwindCSS\n</h3>\n\n<p><a href="https://tailwindcss.com/">TailwindCSS</a> is a straightforward way to style your apps, and it\'s clear to add them to SvelteKit.</p>\n\n<p>We\'ll use <a href="https://github.com/svelte-add/svelte-add">SvelteAdd</a> to add TailwindCSS to our application quickly.<br>\nRun the below command to add TailwindCSS to our project.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>     npx svelte-add tailwindcss\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Install the required dependencies.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight shell"><code>    npm i \n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Be sure to stop the running server with <code>Ctrl+C</code> first.<br>\nLet\'s start our project from scratch.</p>\n\n<p>Delete all the extra CSS, except the <code>@tailwind</code> parts in <code>src/app.css</code>. Delete all of the items in <code>src/routes</code> and <code>src/lib</code>, and now we should be left with an empty project.</p>\n\n<p>Create a new file <code>src/routes/index.svelte</code>. All files in the <code>src/routes</code> folder will be mapped to actual routes. For example, <code>src/routes/example.svelte</code> will be accessible at <code>/example</code>, and <code>src/routes/blog/test.svelte</code> will be accessible at <code>/blog/test</code>. <code>index.svelte</code> is a special file. It maps to the base directory. <code>src/routes/index.svelte</code> maps to <code>/</code>, and <code>src/routes/blog/index.svelte</code> maps to <code>/blog</code>.</p>\n\n<p>This is how filesystem based routing works in SvelteKit. Later, you\'ll learn to add routes with dynamic names.</p>\n\n<p>For now, let\'s work on the basic UI. Add the following code to <code>index.svelte</code><br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>        &lt;script lang="ts"&gt;\n        &lt;/script&gt;\n\n        &lt;div class="my-4"&gt;\n            &lt;h1 class="text-center text-3xl font-bold"&gt;My wonderful blog&lt;/h1&gt;\n        &lt;/div&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>I\'ve elected to use Typescript, which is just like Javascript, but with types. You can follow along with javascript, but types and interfaces won\'t work for you.    Also, you shouldn\'t put lang="ts" in your script tag.`</p>\n\n<p>Now you\'ll notice that TailwindCSS is no longer working. This is because we deleted <code>__layout.svelte</code>, the file importing <code>src/app.css</code>. Let\'s now learn what this <code>__layout.svelte</code> file is.</p>\n\n<p><code>__layout.svelte</code> is a special file that adds a layout to every page. <code>__layout.svelte</code>s can not only exist at the top level <code>routes</code> folder, but can also exist in subdirectories, applying layouts for that subdirectory.</p>\n\n<p><a href="https://kit.svelte.dev/docs#layouts">Read more about SvelteKit layouts here</a>.</p>\n\n<p>For now, all we have to do, is create <code>src/routes/__layout.svelte</code> and import <code>src/app.css</code> in it. The  element will be the actual content displayed on the page.</p>\n\n<p>Now here, in this <code>__layout.svelte</code> file, we can add whatever content we want, and it\'ll be displayed on all pages. So, add your Navbars, Headers, Footers, and everything else here.</p>\n\n<p>Here is what your app should look like now at <a href="https://localhost:3000/">localhost:3000</a></p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--fn7HTX1K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644362652666_Screen%2BShot%2B2022-02-09%2Bat%2B12.23.33%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fn7HTX1K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644362652666_Screen%2BShot%2B2022-02-09%2Bat%2B12.23.33%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="393"></a></p>\n\n<h2>\n  <a name="fetch-blog-posts" href="#fetch-blog-posts">\n  </a>\n  <strong>Fetch Blog Posts</strong>\n</h2>\n\n<p>Now, we can fetch blog posts from Strapi and display them in <code>index.svelte</code>. We\'ll utilize <a href="https://kit.svelte.dev/docs#routing-endpoints">SvelteKit Endpoints</a> to make API fetching easier. Endpoints in SvelteKit are files ending with <code>.js</code> (or <code>.ts</code> for typescript) that export functions corresponding to HTTP methods. These endpoint files become API routes in our application.</p>\n\n<p>Let\'s create an endpoint <code>src/routes/posts.ts</code> (use the <code>.js</code> extension if you\'re not using typescript)</p>\n\n<p><code></code>`</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>// src/routes/posts.ts\nimport type { EndpointOutput } from \'@sveltejs/kit\';\nexport async function get(): Promise&lt;EndpointOutput&gt; {\n    const res = await fetch(\'http://localhost:1337/api/posts?populate=*\');\n    const data = await res.json();\n    return { body: data };\n}\n#Ignore the typings if you\'re using javascript.\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n<p>`<code></code></p>\n\n<p>Now, when we visit <code>http://localhost:3000/posts</code>, we\'ll receive the posts from Strapi. Let\'s implement this route in our <code>index.svelte</code> file using <a href="https://kit.svelte.dev/docs#loading">SvelteKit\'s Loading functionality</a>.<br>\n Loading allows us to fetch APIs before the page is loaded using a particular <code>&lt;script context=" module"&gt;</code> tag.</p>\n\n<p>Add this to the top of <code>src/routes/index.svelte</code>.</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>&lt;script lang="ts" context="module"&gt;\n    import type { Load } from \'@sveltejs/kit\';\n    import { goto } from \'$app/navigation\';\n    export const load: Load = async ({ fetch }) =&gt; {\n        const res = await fetch(\'/posts\');\n        const response = await res.json();\n        return { props: { posts: response.data } };\n    };\n&lt;/script&gt;\n&lt;script lang="ts"&gt;\n    export let posts: any;\n&lt;/script&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n\n<p>You can see that the <code>load</code> function takes in the <code>fetch</code> function provided to us by SvelteKit and returns an object containing <code>props</code>. These props are passed down to our components.</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>&lt;script lang="ts" context="module"&gt;\n    import type { Load } from \'@sveltejs/kit\';\n    import { goto } from \'$app/navigation\';\n    export const load: Load = async ({ fetch }) =&gt; {\n        const res = await fetch(\'/posts\');\n        const response = await res.json();\n        return { props: { posts: response.data } };\n    };\n&lt;/script&gt;\n&lt;script lang="ts"&gt;\n    export let posts: any;\n&lt;/script&gt;\n&lt;div class="my-4"&gt;\n    &lt;h1 class="text-center text-3xl font-bold"&gt;My wonderful blog&lt;/h1&gt;\n&lt;/div&gt;\n&lt;div class="container mx-auto mt-4"&gt;\n    {#each posts as post}\n        &lt;div\n            class="hover:bg-gray-200 cursor-pointer px-6 py-2 border-b border-gray-500"\n            on:click={() =&gt; goto(\'/blog/\' + post.id)}\n        &gt;\n            &lt;h4 class="font-bold"&gt;{post.attributes.title}&lt;/h4&gt;\n            &lt;p class="mt-2 text-gray-800"&gt;{post.attributes.description}&lt;/p&gt;\n            &lt;p class="text-gray-500"&gt;By: {post.attributes.author.data.attributes.username}&lt;/p&gt;\n        &lt;/div&gt;\n    {/each}\n&lt;/div&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n\n<p>I\'ve added a few typings in <code>src/lib/types.ts</code>. You can check it out in the Source Code. SvelteKit allows us to access any file in src/lib using the <a href="https://kit.svelte.dev/docs#modules-%24lib">$lib</a> alias.</p>\n\n<p>I added a test user and a test post in Strapi, and this is how my app looks.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--IcMGwAaZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381569923_Screen%2BShot%2B2022-02-09%2Bat%2B5.39.04%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--IcMGwAaZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381569923_Screen%2BShot%2B2022-02-09%2Bat%2B5.39.04%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="218"></a></p>\n<h3>\n  <a name="posts-page" href="#posts-page">\n  </a>\n  Posts Page\n</h3>\n\n<p>Now, let\'s add a route that\'ll allow us to view a post. Now, you\'ll learn about <a href="https://kit.svelte.dev/docs#routing-pages">Dynamic Routes in SvelteKit</a>.</p>\n\n<p>If we enclose a string in brackets <code>([])</code> in a filename of a route, that becomes a parameter. So, for example, if I have a route called <code>src/routes/blog/[post].svelte</code>, the route maps to <code>/blog/ANY_STRING</code> where <code>ANY_STRING</code> will be the value of the <code>post</code> parameter. Let\'s use this to query posts with Strapi.</p>\n\n<p>We can use the <code>load</code> function we talked about earlier to get the parameters. Create a file called <code>src/routes/blog/[id].svelte</code> and add the below code to it.</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>&lt;!-- src/routes/blog/[id].svelte --&gt;\n&lt;script lang="ts" context="module"&gt;\n    import type { Load } from \'@sveltejs/kit\';\n    export const load: Load = async ({ params, fetch }) =&gt; {\n\n        // Now, we\'ll fetch the blog post from Strapi\n        const res = await fetch(`http://localhost:1337/api/posts/${params.id}?populate=*`);\n        // A 404 status means "NOT FOUND"\n        if (res.status === 404) {\n            // We can create a custom error and return it.\n            // SvelteKit will automatically show us an error page that we\'ll learn to customise later on.\n            const error = new Error(`The post with ID ${id} was not found`);\n            return { status: 404, error };\n        } else {\n            const response = await res.json();\n            return { props: { post: response.data.attributes } };\n        }\n    };\n&lt;/script&gt;\n&lt;script lang="ts"&gt;\n    import type { Post } from \'$lib/types\';\n    import { onMount } from \'svelte\';\n    export let post: Post;\n    let content = post.content;\n    onMount(async () =&gt; {\n        // Install the marked package first!\n        // Run this command: npm i marked\n        // We\'re using this style of importing because "marked" uses require, which won\'t work when we import it with SvelteKit.\n        // Check the "How do I use a client-side only library" in the FAQ: https://kit.svelte.dev/faq\n        const marked = (await import(\'marked\')).default;\n        content = marked(post.content);\n    });\n&lt;/script&gt;\n&lt;h1 class="text-center text-4xl mt-4"&gt;{post.title}&lt;/h1&gt;\n&lt;p class="text-center mt-2"&gt;By: {post.author.data.attributes.username}&lt;/p&gt;\n&lt;div class="border border-gray-500 my-4 mx-8 p-6 rounded"&gt;\n    {@html content}\n&lt;/div&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n\n<p>We need to use the @html directive when we want the content to be actually rendered as HTML.</p>\n\n<p>When you go to a blog page, you should see something like this:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1ov9-1yt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644386563998_Screen%2BShot%2B2022-02-09%2Bat%2B7.01.46%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1ov9-1yt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644386563998_Screen%2BShot%2B2022-02-09%2Bat%2B7.01.46%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="425"></a></p>\n<h2>\n  <a name="authentication-and-authorization" href="#authentication-and-authorization">\n  </a>\n  Authentication and Authorization\n</h2>\n\n<p>Let\'s get started with authenticating users to our blog. Strapi allows us to configure third-party providers like <a href="https://google.com/">Google</a>, but we\'ll stick to the good ol\' email and password sign-in.</p>\n\n<p>We don\'t want anybody to register to our blog, so we\'ll manually create a user with Strapi. Then, in the Strapi admin panel, click on the <code>Users</code> collection type in the sidebar.</p>\n\n<p>There, click <code>Add new Users</code> and create your user. Here\'s mine, for example.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--9sM6qX2z--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381980997_Screen%2BShot%2B2022-02-09%2Bat%2B5.46.02%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--9sM6qX2z--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381980997_Screen%2BShot%2B2022-02-09%2Bat%2B5.46.02%2BAM.png" alt="Create an Entry  page" loading="lazy" width="880" height="495"></a></p>\n\n<p>Click <code>Save</code> when done</p>\n\n<p>We can test logging in to our user by sending a <code>POST</code> request to <a href="http://localhost:1337/api/auth/local">http://localhost:1337/auth/local</a>.  Follow the image below for the correct JSON body.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--6JcKEGsv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644382202960_Screen%2BShot%2B2022-02-09%2Bat%2B5.49.58%2BAM.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--6JcKEGsv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644382202960_Screen%2BShot%2B2022-02-09%2Bat%2B5.49.58%2BAM.png" alt="A sample screenshot" loading="lazy" width="880" height="706"></a></p>\n\n<p>The REST client I\'m using in the above image is Postman.</p>\n<h4>\n  <a name="the-login-route" href="#the-login-route">\n  </a>\n  The Login Route\n</h4>\n\n<p>Let\'s create a new route <code>src/routes/login.svelte</code>. This will of course map to <code>/login</code>.</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>&lt;script lang="ts"&gt;\n    import type { User } from \'$lib/types\';\n    import { goto } from \'$app/navigation\';\n    import user from \'$lib/user\';\n    let email = \'\';\n    let password = \'\';\n    async function login() {\n        const res = await fetch(\'http://localhost:1337/api/auth/local\', {\n            method: \'POST\',\n            headers: { \'Content-Type\': \'application/json\', Accept: \'application/json\' },\n            body: JSON.stringify({ identifier: email, password })\n        });\n        if (res.ok) {\n            const data: {user: User, jwt: string} = await res.json();\n            localStorage.setItem("token", data.jwt)\n            if (data) {\n                $user = data.user;\n                goto(\'/\');\n            }\n        } else {\n            const data: { message: { messages: { message: string }[] }[] } = await res.json();\n            if (data?.message?.[0]?.messages?.[0]?.message) {\n                alert(data.message[0].messages[0].message);\n            }\n        }\n    }\n&lt;/script&gt;\n&lt;form on:submit|preventDefault={login} class="container mx-auto my-4"&gt;\n    &lt;h1 class="text-center text-2xl font-bold"&gt;Login&lt;/h1&gt;\n    &lt;div class="my-1"&gt;\n        &lt;label for="email"&gt;Email&lt;/label&gt;\n        &lt;input type="email" placeholder="Enter your email" bind:value={email} /&gt;\n    &lt;/div&gt;\n    &lt;div class="my-1"&gt;\n        &lt;label for="password"&gt;Password&lt;/label&gt;\n        &lt;input type="password" placeholder="Enter your password" bind:value={password} /&gt;\n    &lt;/div&gt;\n    &lt;div class="my-3"&gt;\n        &lt;button class="submit" type="submit"&gt;Login&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n&lt;style lang="postcss"&gt;\n    label {\n        @apply font-bold block mb-1;\n    }\n    input {\n        @apply bg-white w-full border border-gray-500 rounded outline-none py-2 px-4;\n    }\n    .submit {\n        @apply bg-blue-500 text-white border-transparent rounded px-4 py-2;\n    }\n&lt;/style&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n\n<p>I\'ve created a store in <code>src/lib/user.ts</code> that will house the User to access the User in any component.</p>\n\n<p>Here\'s the code:</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>import { writable } from \'svelte/store\';\nimport type { User } from \'./types\';\nconst user = writable&lt;User | null&gt;(null);\nexport default user;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n<h4>\n  <a name="persisting-auth-state" href="#persisting-auth-state">\n  </a>\n  Persisting Auth State\n</h4>\n\n<p>Great! Our <code>/login</code> page works flawlessly, but there\'s one problem - When we refresh the page, the user store gets reset to <code>null</code>. To fix this, we need to re-fetch the User every time the page reloads. That\'s right, we need a <code>load</code> function in <code>__layout.svelte</code> since it is present on every page.</p>\n\n<p>Change <code>__layout.svelte</code> to this code:</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>&lt;!-- src/routes/__layout.svelte --&gt;\n&lt;script lang="ts"&gt;\n    import \'../app.css\';\n    import userStore from \'$lib/user\';\n    import type { User } from \'$lib/types\';\n    import { onMount } from \'svelte\';\n    let loading = true;\n    onMount(async () =&gt; {\n        // Check if \'token\' exists in localStorage\n        if (!localStorage.getItem(\'token\')) {\n            loading = false;\n            return { props: { user: null } };\n        }\n        // Fetch the user from strapi\n        const res = await fetch(\'http://localhost:1337/api/auth/me\', {\n            headers: { Authorization: `Bearer ${localStorage.getItem(\'token\')}` }\n        });\n        const user: User = await res.json();\n        loading = false;\n        if (res.ok) {\n            $userStore = user;\n        }\n    });\n&lt;/script&gt;\n{#if !loading}\n    &lt;slot /&gt;\n{/if}\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n\n<p>Wait a minute! Why are we using <code>onMount</code> instead of <code>load</code>? Since <code>load</code> is executed on the server, we won\'t have access to <code>localStorage</code>, which is on the browser. Hence, we have to wait for the app to load before accessing <code>localStorage</code>.</p>\n\n<p>If you visit your app, you\'ll get a <code>404</code> Error when trying to get the User from Strapi. This error is because <code>/auth/me</code> isn\'t a valid route. So let\'s create it ourselves.</p>\n\n<p>Open the Strapi project in your favorite editor. Strapi allows us to add custom API routes to it. Let\'s use the <code>strapi</code> CLI to generate a route.</p>\n\n<p>Run the following command to start the CLI.</p>\n\n<p><code></code><code>bash<br>\n     npx strapi generate <br>\n</code><code></code><br>\nSelect <code>controller</code> and add controller name <code>Auth</code>. Also, click to add the new controller to a new API.</p>\n\n<p>You\'ll find a new file called <code>/src/api/auth/controllers/Auth.js</code>. We need to add our simple controller here.</p>\n\n<p>Update the <code>/src/api/auth/controllers/Auth.js</code> file code with the following code snippet.</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>    "use strict";\n\n    /**\n     * A set of functions called "actions" for `auth`\n     */\n\n    module.exports = {\n      async me(ctx) {\n        if (ctx.state.user) {\n          return ctx.state.user;\n        }\n\n        ctx.unauthorized("You\'re not logged in");\n      },\n    };\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n\n<p>This simple API route will return the User if it exists or give us a <code>401 UNAUTHORIZED</code> error.<br>\n Now, we need to tell Strapi to register this controller at <code>/auth/me</code>. </p>\n\n<p>To do that, create file <code>/src/api/auth/config/routes.json</code>, and add the following code snippet to the file.</p>\n\n<p><code></code>`json</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>{\n    "routes": [\n        {\n            "method": "GET",\n            "path": "/auth/me",\n            "handler": "Auth.me",\n            "config": {\n                "policies": []\n            }\n        }\n    ]\n}\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n\n<p>Now, if we access <code>/auth/me</code>, we get <code>404 NotFoundError</code>. </p>\n\n<p>Like the <code>post</code> routes, Strapi doesn\'t, by default, allow anyone to access this route either. So, let\'s edit permissions like how we did earlier for the <code>Authenticated</code> role. </p>\n\n<p>And now, everything should work flawlessly.</p>\n<h4>\n  <a name="navbar" href="#navbar">\n  </a>\n  Navbar\n</h4>\n\n<p>Let\'s add a quick navbar to our app. Create file <code>src/lib/Navbar.svelte</code> and put the below code in it.</p>\n\n<p><code></code>`js</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>&lt;!-- src/lib/Navbar.svelte --&gt;\n&lt;script lang="ts"&gt;\n    import user from \'./user\';\n&lt;/script&gt;\n&lt;nav class="bg-white border-b border-gray-500 py-2 px-4 w-full"&gt;\n    &lt;div class="flex items-center justify-between container mx-auto"&gt;\n        &lt;a href="/" class="font-bold no-underline"&gt;My blog&lt;/a&gt;\n        &lt;section&gt;\n            {#if !$user}\n                &lt;a href="/login" class="font-mono no-underline"&gt;Login&lt;/a&gt;\n            {:else}\n                &lt;a href="/new" class="font-mono no-underline mr-3"&gt;New&lt;/a&gt;\n                &lt;span class="font-mono text-gray-500"&gt;{$user.username}&lt;/span&gt;\n            {/if}\n        &lt;/section&gt;\n    &lt;/div&gt;\n&lt;/nav&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code><br>\nAdd the Navbar to <code>__layout.svelte</code>.</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>    &lt;!-- src/routes/__layout.svelte --&gt;\n    &lt;script lang="ts"&gt;\n      // ...\n      import Navbar from "$lib/Navbar.svelte";\n    &lt;/script&gt;\n\n    &lt;Navbar /&gt;\n    &lt;slot /&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n<h2>\n  <a name="create-and-update-posts" href="#create-and-update-posts">\n  </a>\n  Create and Update Posts\n</h2>\n\n<p>Now, let\'s get to the juicy part. Add a file called <code>src/routes/new.svelte</code>. This file will contain the form used to create a new post on Strapi.</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>&lt;!-- src/routes/new.svelte --&gt;\n&lt;script lang="ts" context="module"&gt;\n    import type { Load } from \'@sveltejs/kit\';\n    import type { Post } from \'$lib/types\';\n    export const load: Load = async ({ fetch, page: { query } }) =&gt; {\n        // edit will be an optional query string parameter that\'ll contain the ID of the post that needs to be updated.\n        // If this is set, the post will be updated instead of being created.\n        const edit = query.get(\'edit\');\n        if (edit) {\n            const res = await fetch(\'http://localhost:1337/api/posts/\' + edit);\n            if (res.status === 404) {\n                const error = new Error(`The post with ID ${edit} was not found`);\n                return { status: 404, error };\n            } else {\n                const data: Post = await res.json();\n                return {\n                    props: {\n                        editId: edit,\n                        title: data.attributes.title,\n                        content: data.attributes.content,\n                        description: data.attributes.description\n                    }\n                };\n            }\n        }\n        return { props: {} };\n    };\n&lt;/script&gt;\n&lt;script lang="ts"&gt;\n    import { onMount } from \'svelte\';\n    import user from \'$lib/user\';\n    import { goto } from \'$app/navigation\';\n    export let editId: string;\n    export let title = \'\';\n    export let description = \'\';\n    export let content = \'\';\n    onMount(() =&gt; {\n        if (!$user) goto(\'/login\');\n    });\n    // To edit the post\n    async function editPost() {\n        if (!localStorage.getItem(\'token\')) {\n            goto(\'/login\');\n            return;\n        }\n        const res = await fetch(\'http://localhost:1337/api/posts/\' + editId, {\n            method: \'PUT\',\n            headers: {\n                \'Content-Type\': \'application/json\',\n                Accept: \'application/json\',\n                Authorization: \'Bearer \' + localStorage.getItem(\'token\')\n            },\n            body: JSON.stringify({ title, description, content })\n        });\n        if (!res.ok) {\n            const data: { message: { messages: { message: string }[] }[] } = await res.json();\n            if (data?.message?.[0]?.messages?.[0]?.message) {\n                alert(data.message[0].messages[0].message);\n            }\n        } else {\n            const data: Post = await res.json();\n            goto(\'/blog/\' + data.id);\n        }\n    }\n    async function createPost() {\n        if (!localStorage.getItem(\'token\')) {\n            goto(\'/login\');\n            return;\n        }\n        if (editId) {\n            // We\'re supposed to edit, not create\n            editPost();\n            return;\n        }\n        const res = await fetch(\'http://localhost:1337/api/posts\', {\n            method: \'POST\',\n            headers: {\n                \'Content-Type\': \'application/json\',\n                Accept: \'application/json\',\n                Authorization: \'Bearer \' + localStorage.getItem(\'token\')\n            },\n            body: JSON.stringify({ title, description, content })\n        });\n        if (!res.ok) {\n            const data: { message: { messages: { message: string }[] }[] } = await res.json();\n            if (data?.message?.[0]?.messages?.[0]?.message) {\n                alert(data.message[0].messages[0].message);\n            }\n        } else {\n            const data: Post = await res.json();\n            goto(\'/blog/\' + data.id);\n        }\n    }\n&lt;/script&gt;\n&lt;form on:submit|preventDefault={createPost} class="my-4 mx-auto container p-4"&gt;\n    &lt;div class="my-1"&gt;\n        &lt;label for="title"&gt;Title&lt;/label&gt;\n        &lt;input type="text" placeholder="Enter title" id="title" bind:value={title} /&gt;\n    &lt;/div&gt;\n    &lt;div class="my-1"&gt;\n        &lt;label for="description"&gt;Description&lt;/label&gt;\n        &lt;input type="text" placeholder="Enter description" id="description" bind:value={description} /&gt;\n    &lt;/div&gt;\n    &lt;div class="my-1"&gt;\n        &lt;label for="title"&gt;Content&lt;/label&gt;\n        &lt;textarea rows={5} placeholder="Enter content" id="content" bind:value={content} /&gt;\n    &lt;/div&gt;\n    &lt;div class="my-2"&gt;\n        &lt;button class="submit" type="submit"&gt;Submit&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n&lt;style lang="postcss"&gt;\n    label {\n        @apply font-bold block mb-1;\n    }\n    input {\n        @apply bg-white w-full border border-gray-500 rounded outline-none py-2 px-4;\n    }\n    textarea {\n        @apply bg-white w-full border border-gray-500 rounded outline-none py-2 px-4 resize-y;\n    }\n    .submit {\n        @apply bg-blue-500 text-white border-transparent rounded px-4 py-2;\n    }\n&lt;/style&gt;\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n\n<p>Don\'t try this out yet, since there\'s currently no way to determine the Author of the PostPost. We need to code that in Strapi explicitly.</p>\n\n<p>Let\'s create custom controllers for the <code>Post</code> content type. Here, we\'ll make it so that the Author of a post will be the currently logged-in User.</p>\n\n<p>Edit <code>api/post/controllers/post.js</code> in the Strapi project.</p>\n\n<p><code></code>`</p>\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>\'use strict\';\n/**\n *  post controller\n */\nconst { createCoreController } = require(\'@strapi/strapi\').factories;\nconst { parseMultipartData, sanitizeEntity } = require("strapi-utils");\n/**\n * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)\n * to customize this controller\n */\nmodule.exports = {\n    async create(ctx) {\n        let entity;\n        if (ctx.is("multipart")) {\n            const { data, files } = parseMultipartData(ctx);\n            data.author = ctx.state.user.id;\n            entity = await strapi.services.post.create(data, { files });\n        } else {\n            ctx.request.body.author = ctx.state.user.id;\n            entity = await strapi.services.post.create(ctx.request.body);\n        }\n        return sanitizeEntity(entity, { model: strapi.models.post });\n    },\n    async update(ctx) {\n        const { id } = ctx.params;\n        let entity;\n        const [article] = await strapi.services.post.find({\n            id: ctx.params.id,\n            "author.id": ctx.state.user.id,\n        });\n        if (!article) {\n            return ctx.unauthorized(`You can\'t update this entry`);\n        }\n        if (ctx.is("multipart")) {\n            const { data, files } = parseMultipartData(ctx);\n            entity = await strapi.services.post.update({ id }, data, {\n                files,\n            });\n        } else {\n            entity = await strapi.services.post.update({ id }, ctx.request.body);\n        }\n        return sanitizeEntity(entity, { model: strapi.models.post });\n    },\n    async delete(ctx) {\n        const { id } = ctx.params;\n        let entity;\n        const [article] = await strapi.services.post.find({\n            id: ctx.params.id,\n            "author.id": ctx.state.user.id,\n        });\n        if (!article) {\n            return ctx.unauthorized(`You can\'t delete this entry`);\n        }\n        await strapi.services.post.delete({ id });\n        return { ok: true };\n    },\n};\nmodule.exports = createCoreController(\'api::post.post\');\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n<p>`<code></code></p>\n\n<blockquote>\n<p>If you get confused, checkout the <a href="https://docs.strapi.io/developer-docs/latest/guides/is-owner.html#introduction">Strapi Documentation</a></p>\n</blockquote>\n\n<p>Install <code>strapi-utils</code> with the following command.<br>\n<code></code><code>bash<br>\n     npm install strapi-utils<br>\n</code><code></code><br>\nAnd now, you should be able to create and update posts all from one route. Let\'s make the update process easier. Change <code>src/routes/blog/[id].svelte</code> to the code below:</p>\n\n<p><code></code>`js<br>\n    &lt;!-- src/routes/blog/[id].svelte --&gt;<br>\n    <br>\n        import type { Load } from \'@sveltejs/kit\';<br>\n        export const load: Load = async ({ params, fetch }) =&gt; {\n</p><div class="highlight"><pre class="highlight plaintext"><code>        // Now, we\'ll fetch the blog post from Strapi\n        const res = await fetch(`http://localhost:1337/api/posts/${params.id}?populate=*`);\n        // A 404 status means "NOT FOUND"\n        if (res.status === 404) {\n            // We can create a custom error and return it.\n            // SvelteKit will automatically show us an error page that we\'ll learn to customise later on.\n            const error = new Error(`The post with ID ${params.id} was not found`);\n            return { status: 404, error };\n        } else {\n            const response = await res.json();\n            return { props: { post: response.data.attributes } };\n        }\n    };\n&lt;/script&gt;\n&lt;script lang="ts"&gt;\n        import type { Post } from \'$lib/types\';\n        import { onMount } from \'svelte\';\n        import { goto } from \'$app/navigation\';\n        import user from \'$lib/user\';\n    export let post: Post;\n    let content = post.content;\n    onMount(async () =&gt; {\n        // Install the marked package first!\n        // Run this command: npm i marked\n        // We\'re using this style of importing because "marked" uses require, which won\'t work when we import it with SvelteKit.\n        // Check the "How do I use a client-side only library" in the FAQ: https://kit.svelte.dev/faq\n        const marked = (await import(\'marked\')).default;\n        content = marked(post.content);\n    });\n    async function deletePost() {\n            // TODO\n        }\n&lt;/script&gt;\n&lt;h1 class="text-center text-4xl mt-4"&gt;{post.title}&lt;/h1&gt;\n&lt;p class="text-center mt-2"&gt;By: {post.author.data.attributes.username}&lt;/p&gt;\n    {#if $user &amp;&amp; post.author.id === $user.id}\n        &lt;p class="my-2 flex justify-center items-center gap-3"&gt;\n            &lt;button\n                class="bg-blue-500 text-white font-bold py-2 px-4 rounded border-transparent"\n                on:click={() =&gt; goto(\'/new?edit=\' + post.id)}&gt;Update post&lt;/button\n            &gt;\n            &lt;button\n                class="bg-red-500 text-white font-bold py-2 px-4 rounded border-transparent"\n                on:click={deletePost}&gt;Delete post&lt;/button\n            &gt;\n        &lt;/p&gt;\n    {/if}\n\n    &lt;div class="border border-gray-500 my-4 mx-8 p-6 rounded"&gt;\n        {@html content}\n    &lt;/div&gt;\n</code></pre></div>\n<p>`<code></code></p>\n\n<p>Now, when the Author visits their PostPost, they\'ll see two buttons to Update and Delete the PostPost, respectively.</p>\n\n<p>Don\'t try this out yet, since there\'s currently no way to determine the Author of the PostPost. We need to code that in Strapi explicitly.<br>\nLet\'s create custom controllers for the <code>Post</code> content type. Here, we\'ll make it so that the Author of a post will be the currently logged-in User.<br>\nEdit <code>api/post/controllers/post.js</code> in the Strapi project.</p>\n\n<p><code></code>`</p>\n<div class="highlight"><pre class="highlight plaintext"><code>    "use strict";\n\n    const { parseMultipartData, sanitizeEntity } = require("strapi-utils");\n\n    /**\n     * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)\n     * to customize this controller\n     */\n\n    module.exports = {\n      async create(ctx) {\n        let entity;\n\n        if (ctx.is("multipart")) {\n          const { data, files } = parseMultipartData(ctx);\n          data.author = ctx.state.user.id;\n          entity = await strapi.services.post.create(data, { files });\n        } else {\n          ctx.request.body.author = ctx.state.user.id;\n          entity = await strapi.services.post.create(ctx.request.body);\n        }\n\n        return sanitizeEntity(entity, { model: strapi.models.post });\n      },\n\n      async update(ctx) {\n        const { id } = ctx.params;\n\n        let entity;\n\n        const [article] = await strapi.services.post.find({\n          id: ctx.params.id,\n          "author.id": ctx.state.user.id,\n        });\n\n        if (!article) {\n          return ctx.unauthorized(`You can\'t update this entry`);\n        }\n\n        if (ctx.is("multipart")) {\n          const { data, files } = parseMultipartData(ctx);\n          entity = await strapi.services.post.update({ id }, data, {\n            files,\n          });\n        } else {\n          entity = await strapi.services.post.update({ id }, ctx.request.body);\n        }\n\n        return sanitizeEntity(entity, { model: strapi.models.post });\n      },\n    };\n</code></pre></div>\n<p>`<code></code></p>\n\n<blockquote>\n<p>If you get confused, checkout the <a href="https://docs.strapi.io/developer-docs/latest/guides/is-owner.html#introduction">Strapi Documentation</a></p>\n</blockquote>\n\n<p>And now, you should be able to create and update posts all from one route. Let\'s make the update process easier. Change <code>src/routes/blog/[slug].svelte</code> to the code below:</p>\n\n<p><code></code>`</p>\n<div class="highlight"><pre class="highlight plaintext"><code>&lt;!-- src/routes/blog/[slug].svelte --&gt;\n    &lt;script lang="ts" context="module"&gt;\n        import type { Load } from \'@sveltejs/kit\';\n\n        export const load: Load = async ({ page: { params }, fetch }) =&gt; {\n            // The params object will contain all of the parameters in the route.\n            const { slug } = params;\n\n            // Now, we\'ll fetch the blog post from Strapi\n            const res = await fetch(\'http://localhost:1337/posts/\' + slug);\n\n            // A 404 status means "NOT FOUND"\n            if (res.status === 404) {\n                // We can create a custom error and return it.\n                // SvelteKit will automatically show us an error page that we\'ll learn to customise later on.\n                const error = new Error(`The post with ID ${slug} was not found`);\n                return { status: 404, error };\n            } else {\n                const data = await res.json();\n                return { props: { post: data } };\n            }\n        };\n    &lt;/script&gt;\n\n    &lt;script lang="ts"&gt;\n        import type { Post } from \'$lib/types\';\n        import { onMount } from \'svelte\';\n        import { goto } from \'$app/navigation\';\n        import user from \'$lib/user\';\n\n        export let post: Post;\n        let content = post.content;\n\n        onMount(async () =&gt; {\n            // Install the marked package first!\n            // Run this command: npm i marked\n\n            // We\'re using this style of importing because "marked" uses require, which won\'t work when we import it with SvelteKit.\n            // Check the "How do I use a client-side only library" in the FAQ: https://kit.svelte.dev/faq\n            const marked = (await import(\'marked\')).default;\n            content = marked(post.content);\n        });\n\n        async function deletePost() {\n            // TODO\n        }\n    &lt;/script&gt;\n\n    &lt;h1 class="text-center text-4xl mt-4"&gt;{post.title}&lt;/h1&gt;\n    &lt;p class="text-center mt-2"&gt;By: {post.author.username}&lt;/p&gt;\n\n    {#if $user &amp;&amp; post.author.id === $user.id}\n        &lt;p class="my-2 flex justify-center items-center gap-3"&gt;\n            &lt;button\n                class="bg-blue-500 text-white font-bold py-2 px-4 rounded border-transparent"\n                on:click={() =&gt; goto(\'/new?edit=\' + post.id)}&gt;Update post&lt;/button\n            &gt;\n            &lt;button\n                class="bg-red-500 text-white font-bold py-2 px-4 rounded border-transparent"\n                on:click={deletePost}&gt;Delete post&lt;/button\n            &gt;\n        &lt;/p&gt;\n    {/if}\n\n    &lt;div class="border border-gray-500 my-4 mx-8 p-6 rounded"&gt;\n        {@html content}\n    &lt;/div&gt;\n</code></pre></div>\n<p>`<code></code></p>\n\n<p>Now, when the Author visits their PostPost, they\'ll see two buttons to Update and Delete the PostPost, respectively.</p>\n<h2>\n  <a name="deleting-posts" href="#deleting-posts" class="anchor">\n  </a>\n  Deleting Posts\n</h2>\n\n<p>Let\'s add functionality to the <code>Delete Post</code> button. Edit the <code>deletePost()</code> function in the file we just modified (<code>src/routes/blog/[id].svelte</code>) and change it to this:</p>\n\n<p><code></code>`</p>\n<div class="highlight"><pre class="highlight plaintext"><code>    async function deletePost() {\n        if (!localStorage.getItem(\'token\')) {\n            goto(\'/login\');\n            return;\n        }\n        const res = await fetch(\'http://localhost:1337/api/posts/\' + post.id, {\n            method: \'DELETE\',\n            headers: { Authorization: \'Bearer \' + localStorage.getItem(\'token\') }\n        });\n        if (res.ok) {\n            goto(\'/\');\n        } else {\n            const data: { message: { messages: { message: string }[] }[] } = await res.json();\n            if (data?.message?.[0]?.messages?.[0]?.message) {\n                alert(data.message[0].messages[0].message);\n            }\n        }\n    }\n</code></pre></div>\n<p>`<code></code><br>\nNow, obviously, we don\'t want anybody to delete a post by someone else. Let\'s add another method in <code>api/post/controllers/post.js</code> in our Strapi App.</p>\n\n<p>This is how your code should look now:</p>\n\n<p><code></code>`</p>\n<div class="highlight"><pre class="highlight plaintext"><code>\'use strict\';\n/**\n *  post controller\n */\nconst { createCoreController } = require(\'@strapi/strapi\').factories;\nconst { parseMultipartData, sanitizeEntity } = require("strapi-utils");\n/**\n * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)\n * to customize this controller\n */\nmodule.exports = {\n    async create(ctx) {\n        let entity;\n        if (ctx.is("multipart")) {\n            const { data, files } = parseMultipartData(ctx);\n            data.author = ctx.state.user.id;\n            entity = await strapi.services.post.create(data, { files });\n        } else {\n            ctx.request.body.author = ctx.state.user.id;\n            entity = await strapi.services.post.create(ctx.request.body);\n        }\n        return sanitizeEntity(entity, { model: strapi.models.post });\n    },\n    async update(ctx) {\n        const { id } = ctx.params;\n        let entity;\n        const [article] = await strapi.services.post.find({\n            id: ctx.params.id,\n            "author.id": ctx.state.user.id,\n        });\n        if (!article) {\n            return ctx.unauthorized(`You can\'t update this entry`);\n        }\n        if (ctx.is("multipart")) {\n            const { data, files } = parseMultipartData(ctx);\n            entity = await strapi.services.post.update({ id }, data, {\n                files,\n            });\n        } else {\n            entity = await strapi.services.post.update({ id }, ctx.request.body);\n        }\n        return sanitizeEntity(entity, { model: strapi.models.post });\n    },\n    async delete(ctx) {\n        const { id } = ctx.params;\n        let entity;\n        const [article] = await strapi.services.post.find({\n            id: ctx.params.id,\n            "author.id": ctx.state.user.id,\n        });\n        if (!article) {\n            return ctx.unauthorized(`You can\'t delete this entry`);\n        }\n        await strapi.services.post.delete({ id });\n        return { ok: true };\n    },\n};\nmodule.exports = createCoreController(\'api::post.post\');\n</code></pre></div>\n<p>`<code></code></p>\n\n<p>And now, the author should be able to delete posts.</p>\n<h2>\n  <a name="custom-error-page" href="#custom-error-page" class="anchor">\n  </a>\n  Custom Error Page\n</h2>\n\n<p>You may have noticed that the 404 page looks terrible. It has almost no styling. With SvelteKit, we\'re allowed to create a <a href="https://kit.svelte.dev/docs#layouts-error-pages">custom error page</a>. So we need to name this file <code>__error.svelte</code> and place it in <code>src/routes</code>.</p>\n\n<p><code></code>`</p>\n<div class="highlight"><pre class="highlight plaintext"><code>&lt;!-- src/routes/__error.svelte --&gt;\n&lt;script lang="ts" context="module"&gt;\n    import type { ErrorLoad } from \'@sveltejs/kit\';\n    export type { ErrorLoad } from \'@sveltejs/kit\';\n    export const load: ErrorLoad = ({ error, status }) =&gt; {\n        return { props: { error, status } };\n    };\n&lt;/script&gt;\n&lt;script lang="ts"&gt;\n    export let error: Error;\n    export let status: number;\n&lt;/script&gt;\n&lt;div class="fixed w-full h-full grid place-items-center"&gt;\n    &lt;section class="p-8 border-gray-500 rounded"&gt;\n        &lt;h1 class="text-center text-4xl font-mono-mt-4"&gt;{status}&lt;/h1&gt;\n        &lt;p class="text-center"&gt;{error.message}&lt;/p&gt;\n    &lt;/section&gt;\n&lt;/div&gt;\n</code></pre></div>\n<p>`<code></code></p>\n\n<p>Here\'s how our error page will look like when you search for a blog post with wrong id.</p>\n\n<p><img src="https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1645742392877_Screen+Shot+2022-02-24+at+11.39.48+PM.png" alt="The Error Page" width="2818" height="1278"></p>\n\n<p>Much better right?</p>\n\n<p>Now, obviously, we don\'t want anybody to delete a post by someone else. Let\'s add another method in <br>\n<code>api/post/controllers/post.js</code> in our Strapi App.<br>\nThis is how your code should look now:</p>\n\n<p><code></code>`<br>\n        // api/post/controllers/post.js<br>\n        "use strict";</p>\n<div class="highlight"><pre class="highlight plaintext"><code>    const { parseMultipartData, sanitizeEntity } = require("strapi-utils");\n\n    /**\n     * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)\n     * to customize this controller\n     */\n\n    module.exports = {\n      async create(ctx) {\n        let entity;\n\n        if (ctx.is("multipart")) {\n          const { data, files } = parseMultipartData(ctx);\n          data.author = ctx.state.user.id;\n          entity = await strapi.services.post.create(data, { files });\n        } else {\n          ctx.request.body.author = ctx.state.user.id;\n          entity = await strapi.services.post.create(ctx.request.body);\n        }\n\n        return sanitizeEntity(entity, { model: strapi.models.post });\n      },\n\n      async update(ctx) {\n        const { id } = ctx.params;\n\n        let entity;\n\n        const [article] = await strapi.services.post.find({\n          id: ctx.params.id,\n          "author.id": ctx.state.user.id,\n        });\n\n        if (!article) {\n          return ctx.unauthorized(`You can\'t update this entry`);\n        }\n\n        if (ctx.is("multipart")) {\n          const { data, files } = parseMultipartData(ctx);\n          entity = await strapi.services.post.update({ id }, data, {\n            files,\n          });\n        } else {\n          entity = await strapi.services.post.update({ id }, ctx.request.body);\n        }\n\n        return sanitizeEntity(entity, { model: strapi.models.post });\n      },\n\n      async delete(ctx) {\n        const { id } = ctx.params;\n\n        let entity;\n\n        const [article] = await strapi.services.post.find({\n          id: ctx.params.id,\n          "author.id": ctx.state.user.id,\n        });\n\n        if (!article) {\n          return ctx.unauthorized(`You can\'t delete this entry`);\n        }\n\n        await strapi.services.post.delete({ id });\n\n        return { ok: true };\n      },\n    };\n</code></pre></div>\n<p>`<code></code></p>\n\n<p>And now, the author should be able to delete posts.</p>\n<h2>\n  <a name="conclusion-amp-resources" href="#conclusion-amp-resources" class="anchor">\n  </a>\n  Conclusion &amp; Resources\n</h2>\n\n<p>And there you have it! Your blog website is made with SvelteKit and Strapi. If you got stuck anywhere, be sure to check the <a href="https://kit.svelte.dev/docs">SvelteKit Docs</a>, the <a href="https://docs.strapi.io/">Strapi Docs</a>, and the <a href="https://github.com/Quadrisheriff/Svelte-strapi-tutorial">source code on Github</a>.</p>\n\n\n',o.body_markdown="\n\n[SvelteKit](https://kit.svelte.dev/) is a relatively new SSR framework for SvelteJS. We can compare it to NextJS, but instead of using React, it uses Svelte. In this tutorial, you'll learn how you can create a blog website with SvelteKit and Strapi as a CMS.\n\n\n## What is a CMS?\n\nA Content Management System (CMS) is a popular tool for creating web pages, blogs, and online stores. They store your website's data, images, pictures, and other hosted content. They are popular among bloggers because anyone can spin up a blog pretty quickly.\n\n[Strapi is a headless CMS coded in Javascript.](https://strapi.io/) A headless CMS has no frontend, only an admin panel, so it is ideal for developers. In other words, a Headless CMS is an API that serves up your content to be consumed by a frontend.\n\n## Goals \n\nIn this tutorial, you'll code a blog website using [the SvelteKit framework](https://kit.svelte.dev/). You'll use [Strapi for content management](https://strapi.io/).\n\nYou'll learn how to use Strapi to manage your content and the basics of SvelteKit, including:\n\n\n- Filesystem based routing\n- Preloading content\n- Dynamic routing\n- 404 Error handling\n- SvelteKit Layouts\n- And much more\n\n\n\n\n## Prerequisites\n- [NodeJS](https://nodejs.org/) and [NPM](https://npmjs.com/) installed on your machine.\n- Javascript and [Svelte](https://svelte.dev/) knowledge. (Svelte has [a great tutorial](https://svelte.dev/tutorial))\n- Some coffee and articles to write on your new blog!\n\n\n\n## Creating a Strapi Project\n\nNow that you know what a CMS and Strapi are, you can get started by locally hosting Strapi, or in other words, *Creating a Strapi Project*.\n\nRun this command in an empty folder to create a Strapi project.\n\n```bash\n     npx create-strapi-app cms --quickstart\n```\nYou can replace the word `cms` with anything you like. This command will be the name of the folder your new Strapi project will sit in.\n\nNow sit back, relax, and wait for the project to create itself. After that, you should automatically be taken to localhost:1377.\n\nIf that's not the case, `cd` into the newly created folder and run this command.\n```bash\n     npm run strapi develop\n```\nThis command will start Strapi up on port `1337`. If a page is not automatically opened up for you, open [localhost:1377](http://localhost:1377/) to launch the Strapi Admin Page.\n\nIt should present you with this page. You need to sign up for an account here. **Remember that this account is locally-scoped to this project, meaning it won't work on other Strapi projects.**\n\n![](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359293544_Screen+Shot+2022-02-08+at+11.28.01+PM.png)\n\n\n### Creating Content Types\n\nIn the sidebar of Strapi admin `http://localhost:1377`, click the `Content-Types Builder` button. This button should take you to the Content Types builder page.\n\n![](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359455862_Screen+Shot+2022-02-08+at+11.30.48+PM.png)\n\n\n\n## What are Content Types?\n\nWe can compare a content type to a table in SQL. Thus, content types help us structure and categorize our data.\n\n### Posts\n\nLet's create a content type for posts. Then, click the `Create new Collection Type` button to launch a dialogue.\n\nEnter `Post` as the name. Go to `Advanced Settings` at the top and disable the Drafts system. Click Continue\n\n![A sample screenshot](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359547760_Screen+Shot+2022-02-08+at+11.32.24+PM.png)\n\n\nAdd these fields. Refer to the image if you get stuck.\n\n\n- A `title` field with type `Text`.\n- A `description` field with type `Text`. Make sure the text is `Long text`.\n- A `content` field with the `Rich Text` type.\n\n\n![](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359854543_Screen+Shot+2022-02-08+at+11.37.28+PM.png)\n\n\nLet's also add a relation between `Post` and User from the `users-permissions` plugin. This relationship allows us to easily link a post to a user to display relevant information like the Author's name and profile picture, fetch the Author's posts, etc.\n\nAdd a new `Relation` field to the `Post` content type. The column on the left should be PostPost, and the column on the right should be User from `users-permissions`. Select the fourth relation; the `User` has many `Posts` and clicks `Finish`.\n\nRefer to the below image if you get stuck:\n\n![](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644359871261_Screen+Shot+2022-02-08+at+11.36.49+PM.png)\n\n\nClick `Save` to save your changes and restart the server.\n\n### Adding Slug to the Post Collection Type\n\nNext, we will be adding a dynamic autogenerated slug system to the `Post` collection type. Using a slug will make it easier to query for our posts in the frontend.\n\nFirst, navigate to **Content-Types Builder** and click **Post**, then click **Add another field**. Select **UID.** Set the field `slug`, and set the attached field to `title`. Save your changes and click **Configure the view**, and select the `slug` field. \n\n![A sample screenshot](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644385413170_Screen+Shot+2022-02-09+at+6.42.54+AM.png)\n\n\nThen, set **the Editable field** off in the window that appears. Click **Save** to register your changes.\n\nWith the slug system fully set up, a new slug will be automatically generated in an uneditable slug field anytime you create a new product. The Slug will be created from the product name.\n\n### Setting up Roles and Permissions\n\nIf you try querying the [Content API](https://docs.strapi.io/developer-docs/latest/developer-resources/database-apis-reference/rest-api.html#api-endpoints) for the `posts` content type, i.e., at `http://localhost:1377/api/posts`,  you'll get a `403 FORBIDDEN` error.\n\nThis error is because, by default, Strapi doesn't allow any man down the street to access your content. You're supposed to set rules and permissions for specific roles. Let's allow the `Public` role, i.e., an unauthenticated user, to read our posts.\n\nIn the sidebar, click on the `Settings` button. There, click on `Roles` in the `Users & Permissions` section. But, first, let's edit the permissions for the Public role.\nWe'll allow the `Public` role to `count`, `find` and `findOne` for Posts.\n\n![](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360051801_Screen+Shot+2022-02-08+at+11.40.38+PM.png)\n\n\nNext, let's do the same for the `Authenticated` role, but we'll also allow them to create, update and delete posts as well.\n\n![](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360101747_Screen+Shot+2022-02-08+at+11.41.35+PM.png)\n\n\n\n## Creating a SvelteKit Project\n\nNow for the main [SvelteKit](https://kit.svelte.dev/) code. Create a new folder named `frontend` in the same directory as the folder for the Strapi project and `cd` into it.\n\nNow, let's create a SvelteKit project with this command:\n```bash\n    npm init svelte@next\n```\nAdd your preferred project name, and be sure to choose the options as shown in the below image.\n\n![](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644360555795_Screen+Shot+2022-02-08+at+11.48.39+PM.png)\n\n\nLaunch the app inside your favourite editor, for example, [VSCode](https://code.visualstudio.com/). Now, we can start the app with the below two commands:\n\n```bash\n     # To install packages\n     npm I \n   \n     # To start the app\n     npm run dev\n```\nHere's how your app should look, hosted on [localhost:3000](https://localhost:3000/)\n\n\n![A sample screenshot](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644361739264_Screen+Shot+2022-02-09+at+12.08.15+AM.png)\n\n\n### Install TailwindCSS\n\n[TailwindCSS](https://tailwindcss.com/) is a straightforward way to style your apps, and it's clear to add them to SvelteKit.\n\nWe'll use [SvelteAdd](https://github.com/svelte-add/svelte-add) to add TailwindCSS to our application quickly.\nRun the below command to add TailwindCSS to our project.\n\n```bash\n     npx svelte-add tailwindcss\n```\n\nInstall the required dependencies.\n```bash\n    npm i \n```\n\nBe sure to stop the running server with `Ctrl+C` first.\nLet's start our project from scratch.\n\nDelete all the extra CSS, except the `@tailwind` parts in `src/app.css`. Delete all of the items in `src/routes` and `src/lib`, and now we should be left with an empty project.\n\nCreate a new file `src/routes/index.svelte`. All files in the `src/routes` folder will be mapped to actual routes. For example, `src/routes/example.svelte` will be accessible at `/example`, and `src/routes/blog/test.svelte` will be accessible at `/blog/test`. `index.svelte` is a special file. It maps to the base directory. `src/routes/index.svelte` maps to `/`, and `src/routes/blog/index.svelte` maps to `/blog`.\n\nThis is how filesystem based routing works in SvelteKit. Later, you'll learn to add routes with dynamic names.\n\nFor now, let's work on the basic UI. Add the following code to `index.svelte`\n\n  ```\n        <script lang=\"ts\">\n        <\/script>\n        \n        <div class=\"my-4\">\n            <h1 class=\"text-center text-3xl font-bold\">My wonderful blog</h1>\n        </div>\n ```\n\n I've elected to use Typescript, which is just like Javascript, but with types. You can follow along with javascript, but types and interfaces won't work for you.    Also, you shouldn't put lang=\"ts\" in your script tag.`\n\nNow you'll notice that TailwindCSS is no longer working. This is because we deleted `__layout.svelte`, the file importing `src/app.css`. Let's now learn what this `__layout.svelte` file is.\n\n`__layout.svelte` is a special file that adds a layout to every page. `__layout.svelte`s can not only exist at the top level `routes` folder, but can also exist in subdirectories, applying layouts for that subdirectory.\n\n[Read more about SvelteKit layouts here](https://kit.svelte.dev/docs#layouts).\n\nFor now, all we have to do, is create `src/routes/__layout.svelte` and import `src/app.css` in it. The <slot /> element will be the actual content displayed on the page.\n\nNow here, in this `__layout.svelte` file, we can add whatever content we want, and it'll be displayed on all pages. So, add your Navbars, Headers, Footers, and everything else here.\n\nHere is what your app should look like now at [localhost:3000](https://localhost:3000/)\n\n\n![A sample screenshot](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644362652666_Screen+Shot+2022-02-09+at+12.23.33+AM.png)\n\n\n\n## **Fetch Blog Posts**\n\nNow, we can fetch blog posts from Strapi and display them in `index.svelte`. We'll utilize [SvelteKit Endpoints](https://kit.svelte.dev/docs#routing-endpoints) to make API fetching easier. Endpoints in SvelteKit are files ending with `.js` (or `.ts` for typescript) that export functions corresponding to HTTP methods. These endpoint files become API routes in our application.\n\nLet's create an endpoint `src/routes/posts.ts` (use the `.js` extension if you're not using typescript)\n\n```\n\n    // src/routes/posts.ts\n    import type { EndpointOutput } from '@sveltejs/kit';\n    export async function get(): Promise<EndpointOutput> {\n        const res = await fetch('http://localhost:1337/api/posts?populate=*');\n        const data = await res.json();\n        return { body: data };\n    }\n    #Ignore the typings if you're using javascript.\n\n```\n\nNow, when we visit `http://localhost:3000/posts`, we'll receive the posts from Strapi. Let's implement this route in our `index.svelte` file using [SvelteKit's Loading functionality](https://kit.svelte.dev/docs#loading).\n Loading allows us to fetch APIs before the page is loaded using a particular `<script context=\" module\">` tag.\n \nAdd this to the top of `src/routes/index.svelte`.\n\n  ```\n\n    <script lang=\"ts\" context=\"module\">\n        import type { Load } from '@sveltejs/kit';\n        import { goto } from '$app/navigation';\n        export const load: Load = async ({ fetch }) => {\n            const res = await fetch('/posts');\n            const response = await res.json();\n            return { props: { posts: response.data } };\n        };\n    <\/script>\n    <script lang=\"ts\">\n        export let posts: any;\n    <\/script>\n\n  ```\n\nYou can see that the `load` function takes in the `fetch` function provided to us by SvelteKit and returns an object containing `props`. These props are passed down to our components.\n\n  ```\n\n    <script lang=\"ts\" context=\"module\">\n        import type { Load } from '@sveltejs/kit';\n        import { goto } from '$app/navigation';\n        export const load: Load = async ({ fetch }) => {\n            const res = await fetch('/posts');\n            const response = await res.json();\n            return { props: { posts: response.data } };\n        };\n    <\/script>\n    <script lang=\"ts\">\n        export let posts: any;\n    <\/script>\n    <div class=\"my-4\">\n        <h1 class=\"text-center text-3xl font-bold\">My wonderful blog</h1>\n    </div>\n    <div class=\"container mx-auto mt-4\">\n        {#each posts as post}\n            <div\n                class=\"hover:bg-gray-200 cursor-pointer px-6 py-2 border-b border-gray-500\"\n                on:click={() => goto('/blog/' + post.id)}\n            >\n                <h4 class=\"font-bold\">{post.attributes.title}</h4>\n                <p class=\"mt-2 text-gray-800\">{post.attributes.description}</p>\n                <p class=\"text-gray-500\">By: {post.attributes.author.data.attributes.username}</p>\n            </div>\n        {/each}\n    </div>\n\n  ```\n\n I've added a few typings in `src/lib/types.ts`. You can check it out in the Source Code. SvelteKit allows us to access any file in src/lib using the [$lib](https://kit.svelte.dev/docs#modules-$lib) alias.\n    \n\nI added a test user and a test post in Strapi, and this is how my app looks.\n\n![A sample screenshot](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381569923_Screen+Shot+2022-02-09+at+5.39.04+AM.png)\n\n\n### Posts Page\nNow, let's add a route that'll allow us to view a post. Now, you'll learn about [Dynamic Routes in SvelteKit](https://kit.svelte.dev/docs#routing-pages).\n\nIf we enclose a string in brackets `([])` in a filename of a route, that becomes a parameter. So, for example, if I have a route called `src/routes/blog/[post].svelte`, the route maps to `/blog/ANY_STRING` where `ANY_STRING` will be the value of the `post` parameter. Let's use this to query posts with Strapi.\n\nWe can use the `load` function we talked about earlier to get the parameters. Create a file called `src/routes/blog/[id].svelte` and add the below code to it.\n\n  ```\n\n    \x3c!-- src/routes/blog/[id].svelte --\x3e\n    <script lang=\"ts\" context=\"module\">\n        import type { Load } from '@sveltejs/kit';\n        export const load: Load = async ({ params, fetch }) => {\n        \n            // Now, we'll fetch the blog post from Strapi\n            const res = await fetch(`http://localhost:1337/api/posts/${params.id}?populate=*`);\n            // A 404 status means \"NOT FOUND\"\n            if (res.status === 404) {\n                // We can create a custom error and return it.\n                // SvelteKit will automatically show us an error page that we'll learn to customise later on.\n                const error = new Error(`The post with ID ${id} was not found`);\n                return { status: 404, error };\n            } else {\n                const response = await res.json();\n                return { props: { post: response.data.attributes } };\n            }\n        };\n    <\/script>\n    <script lang=\"ts\">\n        import type { Post } from '$lib/types';\n        import { onMount } from 'svelte';\n        export let post: Post;\n        let content = post.content;\n        onMount(async () => {\n            // Install the marked package first!\n            // Run this command: npm i marked\n            // We're using this style of importing because \"marked\" uses require, which won't work when we import it with SvelteKit.\n            // Check the \"How do I use a client-side only library\" in the FAQ: https://kit.svelte.dev/faq\n            const marked = (await import('marked')).default;\n            content = marked(post.content);\n        });\n    <\/script>\n    <h1 class=\"text-center text-4xl mt-4\">{post.title}</h1>\n    <p class=\"text-center mt-2\">By: {post.author.data.attributes.username}</p>\n    <div class=\"border border-gray-500 my-4 mx-8 p-6 rounded\">\n        {@html content}\n    </div>\n\n  ```\n\nWe need to use the @html directive when we want the content to be actually rendered as HTML.\n\nWhen you go to a blog page, you should see something like this:\n\n![A sample screenshot](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644386563998_Screen+Shot+2022-02-09+at+7.01.46+AM.png)\n\n## Authentication and Authorization\n\nLet's get started with authenticating users to our blog. Strapi allows us to configure third-party providers like [Google](https://google.com/), but we'll stick to the good ol' email and password sign-in.\n\nWe don't want anybody to register to our blog, so we'll manually create a user with Strapi. Then, in the Strapi admin panel, click on the `Users` collection type in the sidebar.\n\nThere, click `Add new Users` and create your user. Here's mine, for example.\n\n![Create an Entry  page](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644381980997_Screen+Shot+2022-02-09+at+5.46.02+AM.png)\n\n\nClick `Save` when done\n\nWe can test logging in to our user by sending a `POST` request to [http://localhost:1337/auth/local](http://localhost:1337/api/auth/local).  Follow the image below for the correct JSON body.\n\n\n![A sample screenshot](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1644382202960_Screen+Shot+2022-02-09+at+5.49.58+AM.png)\n\nThe REST client I'm using in the above image is Postman.\n\n#### The Login Route\nLet's create a new route `src/routes/login.svelte`. This will of course map to `/login`.\n\n  ```\n\n    <script lang=\"ts\">\n        import type { User } from '$lib/types';\n        import { goto } from '$app/navigation';\n        import user from '$lib/user';\n        let email = '';\n        let password = '';\n        async function login() {\n            const res = await fetch('http://localhost:1337/api/auth/local', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', Accept: 'application/json' },\n                body: JSON.stringify({ identifier: email, password })\n            });\n            if (res.ok) {\n                const data: {user: User, jwt: string} = await res.json();\n                localStorage.setItem(\"token\", data.jwt)\n                if (data) {\n                    $user = data.user;\n                    goto('/');\n                }\n            } else {\n                const data: { message: { messages: { message: string }[] }[] } = await res.json();\n                if (data?.message?.[0]?.messages?.[0]?.message) {\n                    alert(data.message[0].messages[0].message);\n                }\n            }\n        }\n    <\/script>\n    <form on:submit|preventDefault={login} class=\"container mx-auto my-4\">\n        <h1 class=\"text-center text-2xl font-bold\">Login</h1>\n        <div class=\"my-1\">\n            <label for=\"email\">Email</label>\n            <input type=\"email\" placeholder=\"Enter your email\" bind:value={email} />\n        </div>\n        <div class=\"my-1\">\n            <label for=\"password\">Password</label>\n            <input type=\"password\" placeholder=\"Enter your password\" bind:value={password} />\n        </div>\n        <div class=\"my-3\">\n            <button class=\"submit\" type=\"submit\">Login</button>\n        </div>\n    </form>\n    <style lang=\"postcss\">\n        label {\n            @apply font-bold block mb-1;\n        }\n        input {\n            @apply bg-white w-full border border-gray-500 rounded outline-none py-2 px-4;\n        }\n        .submit {\n            @apply bg-blue-500 text-white border-transparent rounded px-4 py-2;\n        }\n    </style>\n\n  ```\n\nI've created a store in `src/lib/user.ts` that will house the User to access the User in any component.\n\nHere's the code:\n\n  ```\n\n    import { writable } from 'svelte/store';\n    import type { User } from './types';\n    const user = writable<User | null>(null);\n    export default user;\n\n  ```\n\n#### Persisting Auth State\n\nGreat! Our `/login` page works flawlessly, but there's one problem - When we refresh the page, the user store gets reset to `null`. To fix this, we need to re-fetch the User every time the page reloads. That's right, we need a `load` function in `__layout.svelte` since it is present on every page.\n\nChange `__layout.svelte` to this code:\n\n  ```\n\n    \x3c!-- src/routes/__layout.svelte --\x3e\n    <script lang=\"ts\">\n        import '../app.css';\n        import userStore from '$lib/user';\n        import type { User } from '$lib/types';\n        import { onMount } from 'svelte';\n        let loading = true;\n        onMount(async () => {\n            // Check if 'token' exists in localStorage\n            if (!localStorage.getItem('token')) {\n                loading = false;\n                return { props: { user: null } };\n            }\n            // Fetch the user from strapi\n            const res = await fetch('http://localhost:1337/api/auth/me', {\n                headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n            });\n            const user: User = await res.json();\n            loading = false;\n            if (res.ok) {\n                $userStore = user;\n            }\n        });\n    <\/script>\n    {#if !loading}\n        <slot />\n    {/if}\n\n  ```\n\nWait a minute! Why are we using `onMount` instead of `load`? Since `load` is executed on the server, we won't have access to `localStorage`, which is on the browser. Hence, we have to wait for the app to load before accessing `localStorage`.\n\nIf you visit your app, you'll get a `404` Error when trying to get the User from Strapi. This error is because `/auth/me` isn't a valid route. So let's create it ourselves.\n\nOpen the Strapi project in your favorite editor. Strapi allows us to add custom API routes to it. Let's use the `strapi` CLI to generate a route.\n\nRun the following command to start the CLI.\n\n```bash\n     npx strapi generate \n```\nSelect `controller` and add controller name `Auth`. Also, click to add the new controller to a new API.\n\nYou'll find a new file called `/src/api/auth/controllers/Auth.js`. We need to add our simple controller here.\n\nUpdate the `/src/api/auth/controllers/Auth.js` file code with the following code snippet.\n\n  ```\n\n        \"use strict\";\n        \n        /**\n         * A set of functions called \"actions\" for `auth`\n         */\n        \n        module.exports = {\n          async me(ctx) {\n            if (ctx.state.user) {\n              return ctx.state.user;\n            }\n        \n            ctx.unauthorized(\"You're not logged in\");\n          },\n        };\n\n  ```\n\nThis simple API route will return the User if it exists or give us a `401 UNAUTHORIZED` error.\n Now, we need to tell Strapi to register this controller at `/auth/me`. \n \n To do that, create file `/src/api/auth/config/routes.json`, and add the following code snippet to the file.\n \n```json\n\n    {\n        \"routes\": [\n            {\n                \"method\": \"GET\",\n                \"path\": \"/auth/me\",\n                \"handler\": \"Auth.me\",\n                \"config\": {\n                    \"policies\": []\n                }\n            }\n        ]\n    }\n\n```\n \n Now, if we access `/auth/me`, we get `404 NotFoundError`. \n \n Like the `post` routes, Strapi doesn't, by default, allow anyone to access this route either. So, let's edit permissions like how we did earlier for the `Authenticated` role. \n \n And now, everything should work flawlessly.\n\n#### Navbar\nLet's add a quick navbar to our app. Create file `src/lib/Navbar.svelte` and put the below code in it.\n\n```js\n\n    \x3c!-- src/lib/Navbar.svelte --\x3e\n    <script lang=\"ts\">\n        import user from './user';\n    <\/script>\n    <nav class=\"bg-white border-b border-gray-500 py-2 px-4 w-full\">\n        <div class=\"flex items-center justify-between container mx-auto\">\n            <a href=\"/\" class=\"font-bold no-underline\">My blog</a>\n            <section>\n                {#if !$user}\n                    <a href=\"/login\" class=\"font-mono no-underline\">Login</a>\n                {:else}\n                    <a href=\"/new\" class=\"font-mono no-underline mr-3\">New</a>\n                    <span class=\"font-mono text-gray-500\">{$user.username}</span>\n                {/if}\n            </section>\n        </div>\n    </nav>\n\n```\nAdd the Navbar to `__layout.svelte`.\n\n```\n\n        \x3c!-- src/routes/__layout.svelte --\x3e\n        <script lang=\"ts\">\n          // ...\n          import Navbar from \"$lib/Navbar.svelte\";\n        <\/script>\n        \n        <Navbar />\n        <slot />\n\n```\n\n## Create and Update Posts\n\nNow, let's get to the juicy part. Add a file called `src/routes/new.svelte`. This file will contain the form used to create a new post on Strapi.\n\n```\n\n    \x3c!-- src/routes/new.svelte --\x3e\n    <script lang=\"ts\" context=\"module\">\n        import type { Load } from '@sveltejs/kit';\n        import type { Post } from '$lib/types';\n        export const load: Load = async ({ fetch, page: { query } }) => {\n            // edit will be an optional query string parameter that'll contain the ID of the post that needs to be updated.\n            // If this is set, the post will be updated instead of being created.\n            const edit = query.get('edit');\n            if (edit) {\n                const res = await fetch('http://localhost:1337/api/posts/' + edit);\n                if (res.status === 404) {\n                    const error = new Error(`The post with ID ${edit} was not found`);\n                    return { status: 404, error };\n                } else {\n                    const data: Post = await res.json();\n                    return {\n                        props: {\n                            editId: edit,\n                            title: data.attributes.title,\n                            content: data.attributes.content,\n                            description: data.attributes.description\n                        }\n                    };\n                }\n            }\n            return { props: {} };\n        };\n    <\/script>\n    <script lang=\"ts\">\n        import { onMount } from 'svelte';\n        import user from '$lib/user';\n        import { goto } from '$app/navigation';\n        export let editId: string;\n        export let title = '';\n        export let description = '';\n        export let content = '';\n        onMount(() => {\n            if (!$user) goto('/login');\n        });\n        // To edit the post\n        async function editPost() {\n            if (!localStorage.getItem('token')) {\n                goto('/login');\n                return;\n            }\n            const res = await fetch('http://localhost:1337/api/posts/' + editId, {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Accept: 'application/json',\n                    Authorization: 'Bearer ' + localStorage.getItem('token')\n                },\n                body: JSON.stringify({ title, description, content })\n            });\n            if (!res.ok) {\n                const data: { message: { messages: { message: string }[] }[] } = await res.json();\n                if (data?.message?.[0]?.messages?.[0]?.message) {\n                    alert(data.message[0].messages[0].message);\n                }\n            } else {\n                const data: Post = await res.json();\n                goto('/blog/' + data.id);\n            }\n        }\n        async function createPost() {\n            if (!localStorage.getItem('token')) {\n                goto('/login');\n                return;\n            }\n            if (editId) {\n                // We're supposed to edit, not create\n                editPost();\n                return;\n            }\n            const res = await fetch('http://localhost:1337/api/posts', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Accept: 'application/json',\n                    Authorization: 'Bearer ' + localStorage.getItem('token')\n                },\n                body: JSON.stringify({ title, description, content })\n            });\n            if (!res.ok) {\n                const data: { message: { messages: { message: string }[] }[] } = await res.json();\n                if (data?.message?.[0]?.messages?.[0]?.message) {\n                    alert(data.message[0].messages[0].message);\n                }\n            } else {\n                const data: Post = await res.json();\n                goto('/blog/' + data.id);\n            }\n        }\n    <\/script>\n    <form on:submit|preventDefault={createPost} class=\"my-4 mx-auto container p-4\">\n        <div class=\"my-1\">\n            <label for=\"title\">Title</label>\n            <input type=\"text\" placeholder=\"Enter title\" id=\"title\" bind:value={title} />\n        </div>\n        <div class=\"my-1\">\n            <label for=\"description\">Description</label>\n            <input type=\"text\" placeholder=\"Enter description\" id=\"description\" bind:value={description} />\n        </div>\n        <div class=\"my-1\">\n            <label for=\"title\">Content</label>\n            <textarea rows={5} placeholder=\"Enter content\" id=\"content\" bind:value={content} />\n        </div>\n        <div class=\"my-2\">\n            <button class=\"submit\" type=\"submit\">Submit</button>\n        </div>\n    </form>\n    <style lang=\"postcss\">\n        label {\n            @apply font-bold block mb-1;\n        }\n        input {\n            @apply bg-white w-full border border-gray-500 rounded outline-none py-2 px-4;\n        }\n        textarea {\n            @apply bg-white w-full border border-gray-500 rounded outline-none py-2 px-4 resize-y;\n        }\n        .submit {\n            @apply bg-blue-500 text-white border-transparent rounded px-4 py-2;\n        }\n    </style>\n\n  ```\n\nDon't try this out yet, since there's currently no way to determine the Author of the PostPost. We need to code that in Strapi explicitly.\n\nLet's create custom controllers for the `Post` content type. Here, we'll make it so that the Author of a post will be the currently logged-in User.\n\nEdit `api/post/controllers/post.js` in the Strapi project.\n\n```\n\n    'use strict';\n    /**\n     *  post controller\n     */\n    const { createCoreController } = require('@strapi/strapi').factories;\n    const { parseMultipartData, sanitizeEntity } = require(\"strapi-utils\");\n    /**\n     * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)\n     * to customize this controller\n     */\n    module.exports = {\n        async create(ctx) {\n            let entity;\n            if (ctx.is(\"multipart\")) {\n                const { data, files } = parseMultipartData(ctx);\n                data.author = ctx.state.user.id;\n                entity = await strapi.services.post.create(data, { files });\n            } else {\n                ctx.request.body.author = ctx.state.user.id;\n                entity = await strapi.services.post.create(ctx.request.body);\n            }\n            return sanitizeEntity(entity, { model: strapi.models.post });\n        },\n        async update(ctx) {\n            const { id } = ctx.params;\n            let entity;\n            const [article] = await strapi.services.post.find({\n                id: ctx.params.id,\n                \"author.id\": ctx.state.user.id,\n            });\n            if (!article) {\n                return ctx.unauthorized(`You can't update this entry`);\n            }\n            if (ctx.is(\"multipart\")) {\n                const { data, files } = parseMultipartData(ctx);\n                entity = await strapi.services.post.update({ id }, data, {\n                    files,\n                });\n            } else {\n                entity = await strapi.services.post.update({ id }, ctx.request.body);\n            }\n            return sanitizeEntity(entity, { model: strapi.models.post });\n        },\n        async delete(ctx) {\n            const { id } = ctx.params;\n            let entity;\n            const [article] = await strapi.services.post.find({\n                id: ctx.params.id,\n                \"author.id\": ctx.state.user.id,\n            });\n            if (!article) {\n                return ctx.unauthorized(`You can't delete this entry`);\n            }\n            await strapi.services.post.delete({ id });\n            return { ok: true };\n        },\n    };\n    module.exports = createCoreController('api::post.post');\n```\n\n> If you get confused, checkout the [Strapi Documentation](https://docs.strapi.io/developer-docs/latest/guides/is-owner.html#introduction)\n\nInstall `strapi-utils` with the following command.\n```bash\n     npm install strapi-utils\n```\nAnd now, you should be able to create and update posts all from one route. Let's make the update process easier. Change `src/routes/blog/[id].svelte` to the code below:\n\n```js\n    \x3c!-- src/routes/blog/[id].svelte --\x3e\n    <script lang=\"ts\" context=\"module\">\n        import type { Load } from '@sveltejs/kit';\n        export const load: Load = async ({ params, fetch }) => {\n        \n            // Now, we'll fetch the blog post from Strapi\n            const res = await fetch(`http://localhost:1337/api/posts/${params.id}?populate=*`);\n            // A 404 status means \"NOT FOUND\"\n            if (res.status === 404) {\n                // We can create a custom error and return it.\n                // SvelteKit will automatically show us an error page that we'll learn to customise later on.\n                const error = new Error(`The post with ID ${params.id} was not found`);\n                return { status: 404, error };\n            } else {\n                const response = await res.json();\n                return { props: { post: response.data.attributes } };\n            }\n        };\n    <\/script>\n    <script lang=\"ts\">\n            import type { Post } from '$lib/types';\n            import { onMount } from 'svelte';\n            import { goto } from '$app/navigation';\n            import user from '$lib/user';\n        export let post: Post;\n        let content = post.content;\n        onMount(async () => {\n            // Install the marked package first!\n            // Run this command: npm i marked\n            // We're using this style of importing because \"marked\" uses require, which won't work when we import it with SvelteKit.\n            // Check the \"How do I use a client-side only library\" in the FAQ: https://kit.svelte.dev/faq\n            const marked = (await import('marked')).default;\n            content = marked(post.content);\n        });\n        async function deletePost() {\n                // TODO\n            }\n    <\/script>\n    <h1 class=\"text-center text-4xl mt-4\">{post.title}</h1>\n    <p class=\"text-center mt-2\">By: {post.author.data.attributes.username}</p>\n        {#if $user && post.author.id === $user.id}\n            <p class=\"my-2 flex justify-center items-center gap-3\">\n                <button\n                    class=\"bg-blue-500 text-white font-bold py-2 px-4 rounded border-transparent\"\n                    on:click={() => goto('/new?edit=' + post.id)}>Update post</button\n                >\n                <button\n                    class=\"bg-red-500 text-white font-bold py-2 px-4 rounded border-transparent\"\n                    on:click={deletePost}>Delete post</button\n                >\n            </p>\n        {/if}\n        \n        <div class=\"border border-gray-500 my-4 mx-8 p-6 rounded\">\n            {@html content}\n        </div>\n\n```\n\nNow, when the Author visits their PostPost, they'll see two buttons to Update and Delete the PostPost, respectively.\n\n\nDon't try this out yet, since there's currently no way to determine the Author of the PostPost. We need to code that in Strapi explicitly.\nLet's create custom controllers for the `Post` content type. Here, we'll make it so that the Author of a post will be the currently logged-in User.\nEdit `api/post/controllers/post.js` in the Strapi project.\n\n```\n  \n        \"use strict\";\n        \n        const { parseMultipartData, sanitizeEntity } = require(\"strapi-utils\");\n        \n        /**\n         * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)\n         * to customize this controller\n         */\n        \n        module.exports = {\n          async create(ctx) {\n            let entity;\n        \n            if (ctx.is(\"multipart\")) {\n              const { data, files } = parseMultipartData(ctx);\n              data.author = ctx.state.user.id;\n              entity = await strapi.services.post.create(data, { files });\n            } else {\n              ctx.request.body.author = ctx.state.user.id;\n              entity = await strapi.services.post.create(ctx.request.body);\n            }\n        \n            return sanitizeEntity(entity, { model: strapi.models.post });\n          },\n        \n          async update(ctx) {\n            const { id } = ctx.params;\n        \n            let entity;\n        \n            const [article] = await strapi.services.post.find({\n              id: ctx.params.id,\n              \"author.id\": ctx.state.user.id,\n            });\n        \n            if (!article) {\n              return ctx.unauthorized(`You can't update this entry`);\n            }\n        \n            if (ctx.is(\"multipart\")) {\n              const { data, files } = parseMultipartData(ctx);\n              entity = await strapi.services.post.update({ id }, data, {\n                files,\n              });\n            } else {\n              entity = await strapi.services.post.update({ id }, ctx.request.body);\n            }\n        \n            return sanitizeEntity(entity, { model: strapi.models.post });\n          },\n        };\n\n```\n\n> If you get confused, checkout the [Strapi Documentation](https://docs.strapi.io/developer-docs/latest/guides/is-owner.html#introduction)\n\n\nAnd now, you should be able to create and update posts all from one route. Let's make the update process easier. Change `src/routes/blog/[slug].svelte` to the code below:\n\n```\n\n    \x3c!-- src/routes/blog/[slug].svelte --\x3e\n        <script lang=\"ts\" context=\"module\">\n            import type { Load } from '@sveltejs/kit';\n        \n            export const load: Load = async ({ page: { params }, fetch }) => {\n                // The params object will contain all of the parameters in the route.\n                const { slug } = params;\n        \n                // Now, we'll fetch the blog post from Strapi\n                const res = await fetch('http://localhost:1337/posts/' + slug);\n        \n                // A 404 status means \"NOT FOUND\"\n                if (res.status === 404) {\n                    // We can create a custom error and return it.\n                    // SvelteKit will automatically show us an error page that we'll learn to customise later on.\n                    const error = new Error(`The post with ID ${slug} was not found`);\n                    return { status: 404, error };\n                } else {\n                    const data = await res.json();\n                    return { props: { post: data } };\n                }\n            };\n        <\/script>\n        \n        <script lang=\"ts\">\n            import type { Post } from '$lib/types';\n            import { onMount } from 'svelte';\n            import { goto } from '$app/navigation';\n            import user from '$lib/user';\n        \n            export let post: Post;\n            let content = post.content;\n        \n            onMount(async () => {\n                // Install the marked package first!\n                // Run this command: npm i marked\n        \n                // We're using this style of importing because \"marked\" uses require, which won't work when we import it with SvelteKit.\n                // Check the \"How do I use a client-side only library\" in the FAQ: https://kit.svelte.dev/faq\n                const marked = (await import('marked')).default;\n                content = marked(post.content);\n            });\n        \n            async function deletePost() {\n                // TODO\n            }\n        <\/script>\n        \n        <h1 class=\"text-center text-4xl mt-4\">{post.title}</h1>\n        <p class=\"text-center mt-2\">By: {post.author.username}</p>\n        \n        {#if $user && post.author.id === $user.id}\n            <p class=\"my-2 flex justify-center items-center gap-3\">\n                <button\n                    class=\"bg-blue-500 text-white font-bold py-2 px-4 rounded border-transparent\"\n                    on:click={() => goto('/new?edit=' + post.id)}>Update post</button\n                >\n                <button\n                    class=\"bg-red-500 text-white font-bold py-2 px-4 rounded border-transparent\"\n                    on:click={deletePost}>Delete post</button\n                >\n            </p>\n        {/if}\n        \n        <div class=\"border border-gray-500 my-4 mx-8 p-6 rounded\">\n            {@html content}\n        </div>\n\n```\n\nNow, when the Author visits their PostPost, they'll see two buttons to Update and Delete the PostPost, respectively.\n\n## Deleting Posts\n\nLet's add functionality to the `Delete Post` button. Edit the `deletePost()` function in the file we just modified (`src/routes/blog/[id].svelte`) and change it to this:\n\n```\n\n        async function deletePost() {\n            if (!localStorage.getItem('token')) {\n                goto('/login');\n                return;\n            }\n            const res = await fetch('http://localhost:1337/api/posts/' + post.id, {\n                method: 'DELETE',\n                headers: { Authorization: 'Bearer ' + localStorage.getItem('token') }\n            });\n            if (res.ok) {\n                goto('/');\n            } else {\n                const data: { message: { messages: { message: string }[] }[] } = await res.json();\n                if (data?.message?.[0]?.messages?.[0]?.message) {\n                    alert(data.message[0].messages[0].message);\n                }\n            }\n        }\n\n```\nNow, obviously, we don't want anybody to delete a post by someone else. Let's add another method in `api/post/controllers/post.js` in our Strapi App.\n\nThis is how your code should look now:\n\n```\n\n    'use strict';\n    /**\n     *  post controller\n     */\n    const { createCoreController } = require('@strapi/strapi').factories;\n    const { parseMultipartData, sanitizeEntity } = require(\"strapi-utils\");\n    /**\n     * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)\n     * to customize this controller\n     */\n    module.exports = {\n        async create(ctx) {\n            let entity;\n            if (ctx.is(\"multipart\")) {\n                const { data, files } = parseMultipartData(ctx);\n                data.author = ctx.state.user.id;\n                entity = await strapi.services.post.create(data, { files });\n            } else {\n                ctx.request.body.author = ctx.state.user.id;\n                entity = await strapi.services.post.create(ctx.request.body);\n            }\n            return sanitizeEntity(entity, { model: strapi.models.post });\n        },\n        async update(ctx) {\n            const { id } = ctx.params;\n            let entity;\n            const [article] = await strapi.services.post.find({\n                id: ctx.params.id,\n                \"author.id\": ctx.state.user.id,\n            });\n            if (!article) {\n                return ctx.unauthorized(`You can't update this entry`);\n            }\n            if (ctx.is(\"multipart\")) {\n                const { data, files } = parseMultipartData(ctx);\n                entity = await strapi.services.post.update({ id }, data, {\n                    files,\n                });\n            } else {\n                entity = await strapi.services.post.update({ id }, ctx.request.body);\n            }\n            return sanitizeEntity(entity, { model: strapi.models.post });\n        },\n        async delete(ctx) {\n            const { id } = ctx.params;\n            let entity;\n            const [article] = await strapi.services.post.find({\n                id: ctx.params.id,\n                \"author.id\": ctx.state.user.id,\n            });\n            if (!article) {\n                return ctx.unauthorized(`You can't delete this entry`);\n            }\n            await strapi.services.post.delete({ id });\n            return { ok: true };\n        },\n    };\n    module.exports = createCoreController('api::post.post');\n\n```\n\nAnd now, the author should be able to delete posts.\n\n\n## Custom Error Page\n\nYou may have noticed that the 404 page looks terrible. It has almost no styling. With SvelteKit, we're allowed to create a [custom error page](https://kit.svelte.dev/docs#layouts-error-pages). So we need to name this file `__error.svelte` and place it in `src/routes`.\n\n```\n\n    \x3c!-- src/routes/__error.svelte --\x3e\n    <script lang=\"ts\" context=\"module\">\n        import type { ErrorLoad } from '@sveltejs/kit';\n        export type { ErrorLoad } from '@sveltejs/kit';\n        export const load: ErrorLoad = ({ error, status }) => {\n            return { props: { error, status } };\n        };\n    <\/script>\n    <script lang=\"ts\">\n        export let error: Error;\n        export let status: number;\n    <\/script>\n    <div class=\"fixed w-full h-full grid place-items-center\">\n        <section class=\"p-8 border-gray-500 rounded\">\n            <h1 class=\"text-center text-4xl font-mono-mt-4\">{status}</h1>\n            <p class=\"text-center\">{error.message}</p>\n        </section>\n    </div>\n\n ```\n\nHere's how our error page will look like when you search for a blog post with wrong id.\n\n\n![The Error Page](https://paper-attachments.dropbox.com/s_4057050B8A7592A58E25D8AF215C61A9A9589163DB136EFCE8661C471A2F341E_1645742392877_Screen+Shot+2022-02-24+at+11.39.48+PM.png)\n\n\nMuch better right?\n\nNow, obviously, we don't want anybody to delete a post by someone else. Let's add another method in \n`api/post/controllers/post.js` in our Strapi App.\nThis is how your code should look now:\n\n```\n        // api/post/controllers/post.js\n        \"use strict\";\n        \n        const { parseMultipartData, sanitizeEntity } = require(\"strapi-utils\");\n        \n        /**\n         * Read the documentation (https://docs.strapi.io/developer-docs/latest/development/backend-customization.html#core-controllers)\n         * to customize this controller\n         */\n        \n        module.exports = {\n          async create(ctx) {\n            let entity;\n        \n            if (ctx.is(\"multipart\")) {\n              const { data, files } = parseMultipartData(ctx);\n              data.author = ctx.state.user.id;\n              entity = await strapi.services.post.create(data, { files });\n            } else {\n              ctx.request.body.author = ctx.state.user.id;\n              entity = await strapi.services.post.create(ctx.request.body);\n            }\n        \n            return sanitizeEntity(entity, { model: strapi.models.post });\n          },\n        \n          async update(ctx) {\n            const { id } = ctx.params;\n        \n            let entity;\n        \n            const [article] = await strapi.services.post.find({\n              id: ctx.params.id,\n              \"author.id\": ctx.state.user.id,\n            });\n        \n            if (!article) {\n              return ctx.unauthorized(`You can't update this entry`);\n            }\n        \n            if (ctx.is(\"multipart\")) {\n              const { data, files } = parseMultipartData(ctx);\n              entity = await strapi.services.post.update({ id }, data, {\n                files,\n              });\n            } else {\n              entity = await strapi.services.post.update({ id }, ctx.request.body);\n            }\n        \n            return sanitizeEntity(entity, { model: strapi.models.post });\n          },\n        \n          async delete(ctx) {\n            const { id } = ctx.params;\n        \n            let entity;\n        \n            const [article] = await strapi.services.post.find({\n              id: ctx.params.id,\n              \"author.id\": ctx.state.user.id,\n            });\n        \n            if (!article) {\n              return ctx.unauthorized(`You can't delete this entry`);\n            }\n        \n            await strapi.services.post.delete({ id });\n        \n            return { ok: true };\n          },\n        };\n\n```\n\nAnd now, the author should be able to delete posts.\n\n\n## Conclusion & Resources\n\nAnd there you have it! Your blog website is made with SvelteKit and Strapi. If you got stuck anywhere, be sure to check the [SvelteKit Docs](https://kit.svelte.dev/docs), the [Strapi Docs](https://docs.strapi.io/), and the [source code on Github](https://github.com/Quadrisheriff/Svelte-strapi-tutorial).\n",o.user={name:"Shada ",username:"shadaw11",twitter_username:"ShadaWehbe",github_username:"ShadaW11",website_url:t,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--5iB_awIe--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/650629/3afeff75-552d-4dae-a239-732ae8558f0c.jpeg",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--GbKWt7ow--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/650629/3afeff75-552d-4dae-a239-732ae8558f0c.jpeg"},o.organization={name:"Strapi",username:n,slug:n,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--W257cHqH--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/763/988af53b-5d7e-435a-98eb-dd4aff5299d2.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--Kk8EQZ5l--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/763/988af53b-5d7e-435a-98eb-dd4aff5299d2.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:o}},error:t,state:{currentArticle:o},serverRendered:!0,routePath:"/shadaw11/1080759",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:t}}}}(null,"2022-05-10T08:39:59Z","strapi",{})</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
