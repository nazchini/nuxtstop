<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Firm but flexible: a pattern for creating resilient design system components</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Firm but flexible: a pattern for creating resilient design system components</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/component" class="tag" data-v-70afb46a>
          #component
        </a><a href="/nuxtstop/t/design" class="tag" data-v-70afb46a>
          #design
        </a><a href="/nuxtstop/t/library" class="tag" data-v-70afb46a>
          #library
        </a><a href="/nuxtstop/t/react" class="tag" data-v-70afb46a>
          #react
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--QVfjbNC7--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/q41129cqdhnh52go9ipz.jpeg" alt="Firm but flexible: a pattern for creating resilient design system components" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            5
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            0
          </span></div> <time data-v-70afb46a>Dec 8 '21</time></div></header> <div class="content" data-v-70afb46a><p>Co-authored by <a class="mentioned-user" href="https://dev.to/hosseintalebi">@hosseintalebi</a>
 | <a href="https://dev.to/jobber/firm-but-flexible-a-pattern-for-creating-resilient-design-system-components-2fjm">Main post</a></p>

<p>Building reusable design system components is a great way for an engineering team to accelerate delivery, improve communication between designers and engineers, and provide a consistent experience for end-users. When your components act in service of a design system, which in turn acts in service of your product’s UX patterns, a cohesive product can be built even as the number of contributors to the product grows.</p>

<p>As the product evolves and grows, new use cases will emerge that simply don’t exist right now. Your design team will inevitably identify opportunities to extend, enhance, and otherwise evolve the user experience, and so too must the component library evolve.</p>

<p>When it comes to a component library, this constant change becomes challenging. A single component can be used across multiple products thus any change to that component can potentially result in regression in the system.</p>

<p>So with all this in mind, how might we build components that are opinionated enough to drive cohesion in the product, yet flexible enough to adopt future changes without introducing breaking changes and regression?</p>

<p>In this article we look at the <a href="https://kentcdodds.com/blog/compound-components-with-react-hooks">Compound Components pattern</a> as one of the patterns for solving this problem. We will show how <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">Separation of Concerns</a> and the Compound Components pattern can help us build a firm, flexible, and resilient component library.</p>

<h2>
  <a name="the-saga-of-developing-a-list-component" href="#the-saga-of-developing-a-list-component">
  </a>
  The Saga of Developing a List Component
</h2>

<p>We are going to demonstrate the Compound Component pattern and the problem that it solves using a contrived example of building a <code>List</code> component. We will use React and TypeScript for building this example. Let's get started!</p>

<h3>
  <a name="initial-attempt-to-build-a-list-component" href="#initial-attempt-to-build-a-list-component">
  </a>
  Initial Attempt to Build a List Component
</h3>

<p>Our designer, Destin, and our Engineer, Enna are working together to build a component library. They have realized that there is a need for a <code>List</code> component that can be used in different parts of the product.</p>

<p><strong><em>Destin (the designer)</em></strong>: Hey, we need to add a <code>List</code> component to our component library. It's nothing fancy! We just need a list of items like this:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ya233ku2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llq732myojqd610mgrii.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ya233ku2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llq732myojqd610mgrii.jpg" alt="Initial List Component" loading="lazy" width="880" height="556"></a></p><figure><br><figcaption>Initial List Component</figcaption></figure>
  <p></p>

<p><strong><em>Enna (the engineer)</em></strong>: It looks simple. I'm on it!</p>

<p>Enna considers that the <code>List</code> component should be opinionated about how the items are rendered to ensure consistency across the product. She decides to make the <code>List</code> component responsible for rendering the items. In her vision, the items are sent to the <code>List</code> as a prop and the <code>List</code> takes care of rendering them. She starts building the <code>List</code> component with an interface like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="kr">interface</span> <span class="nx">ListItem</span> <span class="p">{</span>
  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="kr">interface</span> <span class="nx">ListProps</span> <span class="p">{</span>
  <span class="nl">items</span><span class="p">:</span> <span class="nx">ListItem</span><span class="p">[];</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>After a bit of coding, she builds the <code>List</code> component that can be used like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 1</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 1</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 2</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 2</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 3</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 3</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">];</span>
<span class="p">...</span>
<span class="o">&lt;</span><span class="nx">List</span>
  <span class="nx">items</span><span class="o">=</span><span class="p">{</span><span class="nx">items</span><span class="p">}</span>
<span class="sr">/</span><span class="err">>
</span></code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>It looks elegant, easy to use, and ensures that wherever it's used, the items get rendered exactly the same.</p>

<p>A couple of weeks pass and Destin comes back with a new request.</p>

<p><strong><em>Destin:</em></strong> Our research has shown that having an icon beside the list items will help people to distinguish between the items more easily. Can we make this happen?</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Blddm5L5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h0uyitw9lfktug1c0exu.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Blddm5L5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h0uyitw9lfktug1c0exu.jpg" alt="List Component with Icons" loading="lazy" width="880" height="556"></a></p><figure><br><figcaption>List Component with Icons</figcaption></figure>
  <p></p>

<p><strong><em>Enna:</em></strong> It should be straightforward. I can 💯% make that happen!</p>

<p>She looks at the <code>List</code> component and decides to add an icon property to each item:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="kr">interface</span> <span class="nx">ListItem</span> <span class="p">{</span>
  <span class="nl">icon</span><span class="p">:</span> <span class="nx">IconName</span><span class="p">;</span>
  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="kr">interface</span> <span class="nx">ListProps</span> <span class="p">{</span>
  <span class="nl">items</span><span class="p">:</span> <span class="nx">ListItem</span><span class="p">[];</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This new change now requires all the instances of the <code>List</code> to receive an icon for each item. But that's not a big deal.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="na">icon</span><span class="p">:</span> <span class="dl">"</span><span class="s2">icon1</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 1</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 1</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">icon</span><span class="p">:</span> <span class="dl">"</span><span class="s2">icon2</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 2</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 2</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">icon</span><span class="p">:</span> <span class="dl">"</span><span class="s2">icon3</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 3</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 3</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">];</span>
<span class="p">...</span>
<span class="o">&lt;</span><span class="nx">List</span>
  <span class="nx">items</span><span class="o">=</span><span class="p">{</span><span class="nx">items</span><span class="p">}</span>
<span class="sr">/</span><span class="err">>
</span></code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The <code>List</code> component is now in the wild and people are happily using it. But Destin is thinking of new use cases for the component.</p>

<p><strong><em>Destin</em></strong>: Hey, we have realized two new use cases for the <code>List</code> component. There are some lists that we would like to have an action button for each item. In some other lists, we would like to have some extra details text in place of the button:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--NfZCZl6y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cdbmawb2075mdnztcqem.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--NfZCZl6y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cdbmawb2075mdnztcqem.jpg" alt="List Component with Action Buttons" loading="lazy" width="880" height="556"></a></p><figure><br><figcaption>List Component with Action Buttons</figcaption></figure>
  <p></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--rnUVRVMC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z7dvbf38c5st417gvodg.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--rnUVRVMC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z7dvbf38c5st417gvodg.jpg" alt="List Component with Extra Details" loading="lazy" width="880" height="556"></a></p><figure><br><figcaption>List Component with Extra Details</figcaption></figure>
  <p></p>

<p><strong><em>Enna</em></strong>: Interesting... this is going to make the <code>List</code> component complex but let me see what I can do.</p>

<p>Enna realizes that now she has two different types of list items. Some of the properties are shared between the two types (like the <code>title</code>) and some are unique to each item type. She decides to extract the shared properties into a new interface named <code>ListItemBase</code> and define <code>ActionListItem</code> and <code>ExtraDetailListItem</code> that extend the <code>ListItemBase</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="kr">interface</span> <span class="nx">ListItemBase</span> <span class="p">{</span>
  <span class="nl">icon</span><span class="p">:</span> <span class="nx">IconName</span><span class="p">;</span>
  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="kr">interface</span> <span class="nx">ActionListItem</span> <span class="kd">extends</span> <span class="nx">BaseListItem</span> <span class="p">{</span>
  <span class="nl">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ListItemWithAction</span><span class="dl">"</span><span class="p">;</span>
  <span class="nl">action</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">label</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nx">onClick</span><span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">MouseEvent</span><span class="o">&lt;</span><span class="nx">HTMLButtonElement</span><span class="o">></span><span class="p">):</span> <span class="k">void</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="kr">interface</span> <span class="nx">ExtraDetailListItem</span> <span class="kd">extends</span> <span class="nx">BaseListItem</span> <span class="p">{</span>
  <span class="nl">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ListItemWithExtraDetail</span><span class="dl">"</span><span class="p">;</span>
  <span class="nl">extraDetail</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The <code>items</code> in the <code>ListProps</code> now have a new type:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="kr">interface</span> <span class="nx">ListProps</span> <span class="p">{</span>
  <span class="nl">items</span><span class="p">:</span> <span class="p">(</span><span class="nx">ActionListItem</span> <span class="o">|</span> <span class="nx">ExtraDetailListItem</span><span class="p">)[];</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The interface looks okay-ish but now there should be a decision statement inside the <code>List</code> component that decides whether to render an <code>ActionListItem</code> or <code>ExtraDetailListItem</code>.</p>

<p>She decides that a single decision statement is not a big deal and she goes on with changing the <code>List</code> component to support the two new types of list items.</p>

<p>One day when Destin is working on designing a feature for communications, he realizes that the <code>List</code> component can be used for rendering a list of messages. He presents the new use case to Enna.</p>

<p><strong><em>Destin</em></strong>: In this new use case we want to show an avatar instead of the icon. We also want to open the conversation when people click on the message item. I forgot to mention that we need to have a way to indicate if the message is unread. Can you make the <code>List</code> component handle this?</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--W5Dul4aW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0bk8oty99g5xz2b3t0fz.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--W5Dul4aW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0bk8oty99g5xz2b3t0fz.jpg" alt="List component for Conversation List" loading="lazy" width="880" height="556"></a></p><figure><br><figcaption>List component for Conversation List</figcaption></figure>
  <p></p>

<p><strong><em>Enna</em></strong>: Hmmm... we can change the <code>List</code> component to handle this use case but it will add a lot of complexity to the component.</p>

<p>There are going to be more and more use cases for new types of list items. Adding those use cases to the <code>List</code> ensures there's a unified way of rendering items which will provide the consistency we would like to have across our products. But with every single change to the <code>List</code>, we increase the chance of regression for all instances of the <code>List</code>. No need to mention that we are also adding more and more complexity to the <code>List</code> which makes its maintenance harder. So what can we do?</p>

<h3>
  <a name="how-did-we-end-up-here" href="#how-did-we-end-up-here">
  </a>
  How did we end up here?
</h3>

<p>It all started with the initial <code>List</code> component. In the initial version, the <code>List</code> component had two separate responsibilities:</p>

<ul>
<li>Rendering a list of items</li>
<li>Managing how each item should be rendered
Rendering a list of items is the actual responsibility of the <code>List</code> component, but how each item gets rendered could have been extracted into its own set of components.</li>
</ul>

<h3>
  <a name="separation-of-concerns-using-compound-components" href="#separation-of-concerns-using-compound-components">
  </a>
  Separation of Concerns Using Compound Components
</h3>

<p>Separation of concerns is here to help. By separating every concern of our component into its own component, we can reduce the complexity and make it easier to embrace future changes.</p>

<p>How do we figure out different concerns of the component? One easy way to think about concerns is to think about the reasons that each piece of software has for changing. Huh...? Let me explain more. Imagine the <code>List</code> component. The list items can change depending on the feature we are building and the customer's needs. The requirement for the list itself would not generally change from feature to feature. So the list and list items have different reasons for changing. This means they are different concerns.</p>

<p>Now that we figured out the two concerns of the <code>List</code> component, how can we separate them? <a href="https://kentcdodds.com/blog/compound-components-with-react-hooks">Compound Components</a> are the way to accomplish this. The <code>List</code> component can accept its items as children like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="p">&lt;</span><span class="nc">List</span><span class="p">></span>
  <span class="si">{</span><span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">(({</span> <span class="nx">icon</span><span class="p">,</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span> <span class="p">})</span> <span class="o">=></span> <span class="p">{</span>
    <span class="o">&lt;</span><span class="nx">ListItem</span> <span class="p">{...{</span> <span class="nx">icon</span><span class="p">,</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span> <span class="p">}}</span> <span class="sr">/></span><span class="err">;
</span>  <span class="p">})</span><span class="si">}</span>
<span class="p">&lt;/</span><span class="nc">List</span><span class="p">></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>There are some immediate advantages to this approach:</p>

<ul>
<li>The complexity is broken down into smaller components</li>
<li>Changes in the <code>ListItem</code> would not alter the code in the <code>List</code> component. This helps with less regression over time</li>
</ul>

<p>Let’s get back to the earlier request we had about rendering a list of Messages. Our first instinct might be to modify our <code>ListItem</code> to be able to handle messages. But wait! Do message items have different reasons for changing than the generic <code>ListItem</code>? Yes! They are representing two different types of information that can have different reasons for change. Hence our message item is a new concern. We can create a new component for the <code>MessageItem</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="p">&lt;</span><span class="nc">List</span><span class="p">></span>
  <span class="si">{</span><span class="nx">messages</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">message</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
    <span class="o">&lt;</span><span class="nx">MessageItem</span>
      <span class="nx">thumbnail</span><span class="o">=</span><span class="p">{</span><span class="nx">messages</span><span class="p">.</span><span class="nx">thumbnail</span><span class="p">}</span>
      <span class="nx">sender</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">.</span><span class="nx">sender</span><span class="p">}</span>
      <span class="nx">content</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span>
      <span class="nx">sentAt</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">.</span><span class="nx">sentAt</span><span class="p">}</span>
      <span class="nx">hasBeenRead</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">.</span><span class="nx">hasBeenRead</span><span class="p">}</span>
    <span class="sr">/></span><span class="err">;
</span>  <span class="p">})</span><span class="si">}</span>
<span class="p">&lt;/</span><span class="nc">List</span><span class="p">></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>We can extend the usage of the <code>List</code> component to a variety of use cases without touching anything in the <code>List</code> component!</p>

<p>Separating the <code>List</code> component concerns using the Compound Component pattern helps embracing future changes more easily without causing regression.</p>

<p>So far we separated the concerns of the <code>List</code> component into smaller components that can be passed as children for the <code>List</code>. This made the component less complex, easier to maintain, and flexible to future changes. But now we created a new problem! Any component can be passed as children to the <code>List</code> and we lost control over which types of items we render in the list.</p>

<p>Since any component can be passed as children to the new <code>List</code> component, this might feel like we can't enforce the design system's opinions on the <code>List</code> component. In order to enforce those opinions, we can check the type of each child and ensure they are aligned with the opinion of our design system. Depending on how strict you want to be, you can show a warning message or even not render the items that are not accepted by the design system:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">ACCEPTED_LIST_ITEMS</span> <span class="o">=</span> <span class="p">[</span><span class="nx">ListItem</span><span class="p">,</span> <span class="nx">MessageListItem</span><span class="p">];</span>
<span class="kd">function</span> <span class="nx">List</span><span class="p">({</span><span class="nx">children</span><span class="p">})</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Children</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">children</span><span class="p">,</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ACCEPTED_LIST_ITEMS</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">child</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">child</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="dl">"</span><span class="s2">The List can't render this type of item</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>🎉 with this final touch we ensured that the <code>List</code> component is firm in allowing only certain types of items.</p>

<h2>
  <a name="conclusion" href="#conclusion">
  </a>
  Conclusion
</h2>

<p>Change is an inevitable part of any software and UI components are no different. When building UI components, it’s helpful to ask yourself about the possible future changes that the component could expect. This will help you understand different reasons that your component could change and will provide a good way to separate those concerns. The goal is not to build a component that covers all the expected/unexpected future needs, but rather to separate the concerns in a way that future changes can be applied with minimal impact on the whole system.</p>

<p>The Compound Component pattern can be used to break down the concerns of a component into smaller components. This will help reduce the complexity and also decrease the chance of regression as we add new capabilities to the component. It also enables your design team to iterate and expand on the design system with confidence.</p>

<p>What are other techniques you use for building scalable design systems? If you are interested in solving similar problems, we're hiring for remote positions across Canada at all software engineering levels!</p>

<p>Our awesome Jobber technology teams span across Payments, Infrastructure, AI/ML, Business Workflows & Communications. We work on cutting edge & modern tech stacks using React, React Native, Ruby on Rails, & GraphQL.</p>

<p>If you want to be a part of a collaborative work culture, help small home service businesses scale and create a positive impact on our communities, then visit our <a href="https://getjobber.com/about/careers/?utm_source=devto&utm_medium=social&utm_campaign=eng_blog">career</a> site to learn more!</p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/thatchrismurray/firm-but-flexible-a-pattern-for-creating-resilient-design-system-components-48io" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(s,n,e,a,t){return e.type_of="article",e.id=921352,e.title="Firm but flexible: a pattern for creating resilient design system components",e.description="Co-authored by @hosseintalebi  | Main post  Building reusable design system components is a great way...",e.readable_publish_date="Dec 8 '21",e.slug="firm-but-flexible-a-pattern-for-creating-resilient-design-system-components-48io",e.path="/thatchrismurray/firm-but-flexible-a-pattern-for-creating-resilient-design-system-components-48io",e.url=a,e.comments_count=0,e.public_reactions_count=5,e.collection_id=s,e.published_timestamp=n,e.positive_reactions_count=5,e.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--QVfjbNC7--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/q41129cqdhnh52go9ipz.jpeg",e.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--l-7Cu5Du--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/q41129cqdhnh52go9ipz.jpeg",e.canonical_url=a,e.created_at="2021-12-08T22:57:35Z",e.edited_at="2021-12-08T23:24:25Z",e.crossposted_at=s,e.published_at=n,e.last_comment_at=n,e.reading_time_minutes=8,e.tag_list="component, design, library, react",e.tags=["component","design","library","react"],e.body_html='<p>Co-authored by <a class="mentioned-user" href="https://dev.to/hosseintalebi">@hosseintalebi</a>\n | <a href="https://dev.to/jobber/firm-but-flexible-a-pattern-for-creating-resilient-design-system-components-2fjm">Main post</a></p>\n\n<p>Building reusable design system components is a great way for an engineering team to accelerate delivery, improve communication between designers and engineers, and provide a consistent experience for end-users. When your components act in service of a design system, which in turn acts in service of your product’s UX patterns, a cohesive product can be built even as the number of contributors to the product grows.</p>\n\n<p>As the product evolves and grows, new use cases will emerge that simply don’t exist right now. Your design team will inevitably identify opportunities to extend, enhance, and otherwise evolve the user experience, and so too must the component library evolve.</p>\n\n<p>When it comes to a component library, this constant change becomes challenging. A single component can be used across multiple products thus any change to that component can potentially result in regression in the system.</p>\n\n<p>So with all this in mind, how might we build components that are opinionated enough to drive cohesion in the product, yet flexible enough to adopt future changes without introducing breaking changes and regression?</p>\n\n<p>In this article we look at the <a href="https://kentcdodds.com/blog/compound-components-with-react-hooks">Compound Components pattern</a> as one of the patterns for solving this problem. We will show how <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">Separation of Concerns</a> and the Compound Components pattern can help us build a firm, flexible, and resilient component library.</p>\n\n<h2>\n  <a name="the-saga-of-developing-a-list-component" href="#the-saga-of-developing-a-list-component">\n  </a>\n  The Saga of Developing a List Component\n</h2>\n\n<p>We are going to demonstrate the Compound Component pattern and the problem that it solves using a contrived example of building a <code>List</code> component. We will use React and TypeScript for building this example. Let\'s get started!</p>\n\n<h3>\n  <a name="initial-attempt-to-build-a-list-component" href="#initial-attempt-to-build-a-list-component">\n  </a>\n  Initial Attempt to Build a List Component\n</h3>\n\n<p>Our designer, Destin, and our Engineer, Enna are working together to build a component library. They have realized that there is a need for a <code>List</code> component that can be used in different parts of the product.</p>\n\n<p><strong><em>Destin (the designer)</em></strong>: Hey, we need to add a <code>List</code> component to our component library. It\'s nothing fancy! We just need a list of items like this:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ya233ku2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llq732myojqd610mgrii.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ya233ku2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llq732myojqd610mgrii.jpg" alt="Initial List Component" loading="lazy" width="880" height="556"></a><figure><br><figcaption>Initial List Component</figcaption></figure>\n  </p>\n\n<p><strong><em>Enna (the engineer)</em></strong>: It looks simple. I\'m on it!</p>\n\n<p>Enna considers that the <code>List</code> component should be opinionated about how the items are rendered to ensure consistency across the product. She decides to make the <code>List</code> component responsible for rendering the items. In her vision, the items are sent to the <code>List</code> as a prop and the <code>List</code> takes care of rendering them. She starts building the <code>List</code> component with an interface like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight typescript"><code><span class="kr">interface</span> <span class="nx">ListItem</span> <span class="p">{</span>\n  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>\n  <span class="nl">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>\n<span class="p">}</span>\n<span class="kr">interface</span> <span class="nx">ListProps</span> <span class="p">{</span>\n  <span class="nl">items</span><span class="p">:</span> <span class="nx">ListItem</span><span class="p">[];</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>After a bit of coding, she builds the <code>List</code> component that can be used like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span>\n  <span class="p">{</span>\n    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 1</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 1</span><span class="dl">"</span><span class="p">,</span>\n  <span class="p">},</span>\n  <span class="p">{</span>\n    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 2</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 2</span><span class="dl">"</span><span class="p">,</span>\n  <span class="p">},</span>\n  <span class="p">{</span>\n    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 3</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 3</span><span class="dl">"</span><span class="p">,</span>\n  <span class="p">},</span>\n<span class="p">];</span>\n<span class="p">...</span>\n<span class="o">&lt;</span><span class="nx">List</span>\n  <span class="nx">items</span><span class="o">=</span><span class="p">{</span><span class="nx">items</span><span class="p">}</span>\n<span class="sr">/</span><span class="err">&gt;\n</span></code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>It looks elegant, easy to use, and ensures that wherever it\'s used, the items get rendered exactly the same.</p>\n\n<p>A couple of weeks pass and Destin comes back with a new request.</p>\n\n<p><strong><em>Destin:</em></strong> Our research has shown that having an icon beside the list items will help people to distinguish between the items more easily. Can we make this happen?</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Blddm5L5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h0uyitw9lfktug1c0exu.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Blddm5L5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h0uyitw9lfktug1c0exu.jpg" alt="List Component with Icons" loading="lazy" width="880" height="556"></a><figure><br><figcaption>List Component with Icons</figcaption></figure>\n  </p>\n\n<p><strong><em>Enna:</em></strong> It should be straightforward. I can 💯% make that happen!</p>\n\n<p>She looks at the <code>List</code> component and decides to add an icon property to each item:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight typescript"><code><span class="kr">interface</span> <span class="nx">ListItem</span> <span class="p">{</span>\n  <span class="nl">icon</span><span class="p">:</span> <span class="nx">IconName</span><span class="p">;</span>\n  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>\n  <span class="nl">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>\n<span class="p">}</span>\n<span class="kr">interface</span> <span class="nx">ListProps</span> <span class="p">{</span>\n  <span class="nl">items</span><span class="p">:</span> <span class="nx">ListItem</span><span class="p">[];</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This new change now requires all the instances of the <code>List</code> to receive an icon for each item. But that\'s not a big deal.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span>\n  <span class="p">{</span>\n    <span class="na">icon</span><span class="p">:</span> <span class="dl">"</span><span class="s2">icon1</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 1</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 1</span><span class="dl">"</span><span class="p">,</span>\n  <span class="p">},</span>\n  <span class="p">{</span>\n    <span class="na">icon</span><span class="p">:</span> <span class="dl">"</span><span class="s2">icon2</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 2</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 2</span><span class="dl">"</span><span class="p">,</span>\n  <span class="p">},</span>\n  <span class="p">{</span>\n    <span class="na">icon</span><span class="p">:</span> <span class="dl">"</span><span class="s2">icon3</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">item 3</span><span class="dl">"</span><span class="p">,</span>\n    <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">description for item 3</span><span class="dl">"</span><span class="p">,</span>\n  <span class="p">},</span>\n<span class="p">];</span>\n<span class="p">...</span>\n<span class="o">&lt;</span><span class="nx">List</span>\n  <span class="nx">items</span><span class="o">=</span><span class="p">{</span><span class="nx">items</span><span class="p">}</span>\n<span class="sr">/</span><span class="err">&gt;\n</span></code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The <code>List</code> component is now in the wild and people are happily using it. But Destin is thinking of new use cases for the component.</p>\n\n<p><strong><em>Destin</em></strong>: Hey, we have realized two new use cases for the <code>List</code> component. There are some lists that we would like to have an action button for each item. In some other lists, we would like to have some extra details text in place of the button:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--NfZCZl6y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cdbmawb2075mdnztcqem.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--NfZCZl6y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cdbmawb2075mdnztcqem.jpg" alt="List Component with Action Buttons" loading="lazy" width="880" height="556"></a><figure><br><figcaption>List Component with Action Buttons</figcaption></figure>\n  </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--rnUVRVMC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z7dvbf38c5st417gvodg.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--rnUVRVMC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z7dvbf38c5st417gvodg.jpg" alt="List Component with Extra Details" loading="lazy" width="880" height="556"></a><figure><br><figcaption>List Component with Extra Details</figcaption></figure>\n  </p>\n\n<p><strong><em>Enna</em></strong>: Interesting... this is going to make the <code>List</code> component complex but let me see what I can do.</p>\n\n<p>Enna realizes that now she has two different types of list items. Some of the properties are shared between the two types (like the <code>title</code>) and some are unique to each item type. She decides to extract the shared properties into a new interface named <code>ListItemBase</code> and define <code>ActionListItem</code> and <code>ExtraDetailListItem</code> that extend the <code>ListItemBase</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight typescript"><code><span class="kr">interface</span> <span class="nx">ListItemBase</span> <span class="p">{</span>\n  <span class="nl">icon</span><span class="p">:</span> <span class="nx">IconName</span><span class="p">;</span>\n  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>\n  <span class="nl">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>\n<span class="p">}</span>\n<span class="kr">interface</span> <span class="nx">ActionListItem</span> <span class="kd">extends</span> <span class="nx">BaseListItem</span> <span class="p">{</span>\n  <span class="nl">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ListItemWithAction</span><span class="dl">"</span><span class="p">;</span>\n  <span class="nl">action</span><span class="p">:</span> <span class="p">{</span>\n    <span class="na">label</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>\n    <span class="nx">onClick</span><span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">MouseEvent</span><span class="o">&lt;</span><span class="nx">HTMLButtonElement</span><span class="o">&gt;</span><span class="p">):</span> <span class="k">void</span><span class="p">;</span>\n  <span class="p">};</span>\n<span class="p">}</span>\n<span class="kr">interface</span> <span class="nx">ExtraDetailListItem</span> <span class="kd">extends</span> <span class="nx">BaseListItem</span> <span class="p">{</span>\n  <span class="nl">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ListItemWithExtraDetail</span><span class="dl">"</span><span class="p">;</span>\n  <span class="nl">extraDetail</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The <code>items</code> in the <code>ListProps</code> now have a new type:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight typescript"><code><span class="kr">interface</span> <span class="nx">ListProps</span> <span class="p">{</span>\n  <span class="nl">items</span><span class="p">:</span> <span class="p">(</span><span class="nx">ActionListItem</span> <span class="o">|</span> <span class="nx">ExtraDetailListItem</span><span class="p">)[];</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The interface looks okay-ish but now there should be a decision statement inside the <code>List</code> component that decides whether to render an <code>ActionListItem</code> or <code>ExtraDetailListItem</code>.</p>\n\n<p>She decides that a single decision statement is not a big deal and she goes on with changing the <code>List</code> component to support the two new types of list items.</p>\n\n<p>One day when Destin is working on designing a feature for communications, he realizes that the <code>List</code> component can be used for rendering a list of messages. He presents the new use case to Enna.</p>\n\n<p><strong><em>Destin</em></strong>: In this new use case we want to show an avatar instead of the icon. We also want to open the conversation when people click on the message item. I forgot to mention that we need to have a way to indicate if the message is unread. Can you make the <code>List</code> component handle this?</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--W5Dul4aW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0bk8oty99g5xz2b3t0fz.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--W5Dul4aW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0bk8oty99g5xz2b3t0fz.jpg" alt="List component for Conversation List" loading="lazy" width="880" height="556"></a><figure><br><figcaption>List component for Conversation List</figcaption></figure>\n  </p>\n\n<p><strong><em>Enna</em></strong>: Hmmm... we can change the <code>List</code> component to handle this use case but it will add a lot of complexity to the component.</p>\n\n<p>There are going to be more and more use cases for new types of list items. Adding those use cases to the <code>List</code> ensures there\'s a unified way of rendering items which will provide the consistency we would like to have across our products. But with every single change to the <code>List</code>, we increase the chance of regression for all instances of the <code>List</code>. No need to mention that we are also adding more and more complexity to the <code>List</code> which makes its maintenance harder. So what can we do?</p>\n\n<h3>\n  <a name="how-did-we-end-up-here" href="#how-did-we-end-up-here">\n  </a>\n  How did we end up here?\n</h3>\n\n<p>It all started with the initial <code>List</code> component. In the initial version, the <code>List</code> component had two separate responsibilities:</p>\n\n<ul>\n<li>Rendering a list of items</li>\n<li>Managing how each item should be rendered\nRendering a list of items is the actual responsibility of the <code>List</code> component, but how each item gets rendered could have been extracted into its own set of components.</li>\n</ul>\n\n<h3>\n  <a name="separation-of-concerns-using-compound-components" href="#separation-of-concerns-using-compound-components">\n  </a>\n  Separation of Concerns Using Compound Components\n</h3>\n\n<p>Separation of concerns is here to help. By separating every concern of our component into its own component, we can reduce the complexity and make it easier to embrace future changes.</p>\n\n<p>How do we figure out different concerns of the component? One easy way to think about concerns is to think about the reasons that each piece of software has for changing. Huh...? Let me explain more. Imagine the <code>List</code> component. The list items can change depending on the feature we are building and the customer\'s needs. The requirement for the list itself would not generally change from feature to feature. So the list and list items have different reasons for changing. This means they are different concerns.</p>\n\n<p>Now that we figured out the two concerns of the <code>List</code> component, how can we separate them? <a href="https://kentcdodds.com/blog/compound-components-with-react-hooks">Compound Components</a> are the way to accomplish this. The <code>List</code> component can accept its items as children like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="p">&lt;</span><span class="nc">List</span><span class="p">&gt;</span>\n  <span class="si">{</span><span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">(({</span> <span class="nx">icon</span><span class="p">,</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="o">&lt;</span><span class="nx">ListItem</span> <span class="p">{...{</span> <span class="nx">icon</span><span class="p">,</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span> <span class="p">}}</span> <span class="sr">/&gt;</span><span class="err">;\n</span>  <span class="p">})</span><span class="si">}</span>\n<span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>There are some immediate advantages to this approach:</p>\n\n<ul>\n<li>The complexity is broken down into smaller components</li>\n<li>Changes in the <code>ListItem</code> would not alter the code in the <code>List</code> component. This helps with less regression over time</li>\n</ul>\n\n<p>Let’s get back to the earlier request we had about rendering a list of Messages. Our first instinct might be to modify our <code>ListItem</code> to be able to handle messages. But wait! Do message items have different reasons for changing than the generic <code>ListItem</code>? Yes! They are representing two different types of information that can have different reasons for change. Hence our message item is a new concern. We can create a new component for the <code>MessageItem</code>:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="p">&lt;</span><span class="nc">List</span><span class="p">&gt;</span>\n  <span class="si">{</span><span class="nx">messages</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="o">&lt;</span><span class="nx">MessageItem</span>\n      <span class="nx">thumbnail</span><span class="o">=</span><span class="p">{</span><span class="nx">messages</span><span class="p">.</span><span class="nx">thumbnail</span><span class="p">}</span>\n      <span class="nx">sender</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">.</span><span class="nx">sender</span><span class="p">}</span>\n      <span class="nx">content</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span>\n      <span class="nx">sentAt</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">.</span><span class="nx">sentAt</span><span class="p">}</span>\n      <span class="nx">hasBeenRead</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">.</span><span class="nx">hasBeenRead</span><span class="p">}</span>\n    <span class="sr">/&gt;</span><span class="err">;\n</span>  <span class="p">})</span><span class="si">}</span>\n<span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>We can extend the usage of the <code>List</code> component to a variety of use cases without touching anything in the <code>List</code> component!</p>\n\n<p>Separating the <code>List</code> component concerns using the Compound Component pattern helps embracing future changes more easily without causing regression.</p>\n\n<p>So far we separated the concerns of the <code>List</code> component into smaller components that can be passed as children for the <code>List</code>. This made the component less complex, easier to maintain, and flexible to future changes. But now we created a new problem! Any component can be passed as children to the <code>List</code> and we lost control over which types of items we render in the list.</p>\n\n<p>Since any component can be passed as children to the new <code>List</code> component, this might feel like we can\'t enforce the design system\'s opinions on the <code>List</code> component. In order to enforce those opinions, we can check the type of each child and ensure they are aligned with the opinion of our design system. Depending on how strict you want to be, you can show a warning message or even not render the items that are not accepted by the design system:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight tsx"><code><span class="kd">const</span> <span class="nx">ACCEPTED_LIST_ITEMS</span> <span class="o">=</span> <span class="p">[</span><span class="nx">ListItem</span><span class="p">,</span> <span class="nx">MessageListItem</span><span class="p">];</span>\n<span class="kd">function</span> <span class="nx">List</span><span class="p">({</span><span class="nx">children</span><span class="p">})</span> <span class="p">{</span>\n  <span class="p">...</span>\n  <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Children</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">children</span><span class="p">,</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>\n    <span class="k">if</span> <span class="p">(</span><span class="nx">ACCEPTED_LIST_ITEMS</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">child</span><span class="p">))</span> <span class="p">{</span>\n      <span class="k">return</span> <span class="nx">child</span>\n    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>\n      <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="dl">"</span><span class="s2">The List can\'t render this type of item</span><span class="dl">"</span><span class="p">)</span>\n    <span class="p">}</span>\n  <span class="p">})</span>\n<span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>🎉 with this final touch we ensured that the <code>List</code> component is firm in allowing only certain types of items.</p>\n\n<h2>\n  <a name="conclusion" href="#conclusion">\n  </a>\n  Conclusion\n</h2>\n\n<p>Change is an inevitable part of any software and UI components are no different. When building UI components, it’s helpful to ask yourself about the possible future changes that the component could expect. This will help you understand different reasons that your component could change and will provide a good way to separate those concerns. The goal is not to build a component that covers all the expected/unexpected future needs, but rather to separate the concerns in a way that future changes can be applied with minimal impact on the whole system.</p>\n\n<p>The Compound Component pattern can be used to break down the concerns of a component into smaller components. This will help reduce the complexity and also decrease the chance of regression as we add new capabilities to the component. It also enables your design team to iterate and expand on the design system with confidence.</p>\n\n<p>What are other techniques you use for building scalable design systems? If you are interested in solving similar problems, we\'re hiring for remote positions across Canada at all software engineering levels!</p>\n\n<p>Our awesome Jobber technology teams span across Payments, Infrastructure, AI/ML, Business Workflows &amp; Communications. We work on cutting edge &amp; modern tech stacks using React, React Native, Ruby on Rails, &amp; GraphQL.</p>\n\n<p>If you want to be a part of a collaborative work culture, help small home service businesses scale and create a positive impact on our communities, then visit our <a href="https://getjobber.com/about/careers/?utm_source=devto&amp;utm_medium=social&amp;utm_campaign=eng_blog">career</a> site to learn more!</p>\n\n',e.body_markdown='Co-authored by @hosseintalebi | [Main post](https://dev.to/jobber/firm-but-flexible-a-pattern-for-creating-resilient-design-system-components-2fjm)\n\nBuilding reusable design system components is a great way for an engineering team to accelerate delivery, improve communication between designers and engineers, and provide a consistent experience for end-users. When your components act in service of a design system, which in turn acts in service of your product’s UX patterns, a cohesive product can be built even as the number of contributors to the product grows.\n\nAs the product evolves and grows, new use cases will emerge that simply don’t exist right now. Your design team will inevitably identify opportunities to extend, enhance, and otherwise evolve the user experience, and so too must the component library evolve.\n\nWhen it comes to a component library, this constant change becomes challenging. A single component can be used across multiple products thus any change to that component can potentially result in regression in the system.\n\nSo with all this in mind, how might we build components that are opinionated enough to drive cohesion in the product, yet flexible enough to adopt future changes without introducing breaking changes and regression?\n\nIn this article we look at the [Compound Components pattern](https://kentcdodds.com/blog/compound-components-with-react-hooks) as one of the patterns for solving this problem. We will show how [Separation of Concerns](https://en.wikipedia.org/wiki/Separation_of_concerns) and the Compound Components pattern can help us build a firm, flexible, and resilient component library.\n\n## The Saga of Developing a List Component\n\nWe are going to demonstrate the Compound Component pattern and the problem that it solves using a contrived example of building a `List` component. We will use React and TypeScript for building this example. Let\'s get started!\n\n### Initial Attempt to Build a List Component\n\nOur designer, Destin, and our Engineer, Enna are working together to build a component library. They have realized that there is a need for a `List` component that can be used in different parts of the product.\n\n***Destin (the designer)***: Hey, we need to add a `List` component to our component library. It\'s nothing fancy! We just need a list of items like this:\n<figure>\n  <img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llq732myojqd610mgrii.jpg" alt="Initial List Component">\n  <figcaption>Initial List Component</figcaption>\n</figure>\n\n***Enna (the engineer)***: It looks simple. I\'m on it!\n\nEnna considers that the `List` component should be opinionated about how the items are rendered to ensure consistency across the product. She decides to make the `List` component responsible for rendering the items. In her vision, the items are sent to the `List` as a prop and the `List` takes care of rendering them. She starts building the `List` component with an interface like this:\n```ts\ninterface ListItem {\n  title: string;\n  description: string;\n}\ninterface ListProps {\n  items: ListItem[];\n}\n```\nAfter a bit of coding, she builds the `List` component that can be used like this:\n```tsx\nconst items = [\n  {\n    title: "item 1",\n    description: "description for item 1",\n  },\n  {\n    title: "item 2",\n    description: "description for item 2",\n  },\n  {\n    title: "item 3",\n    description: "description for item 3",\n  },\n];\n...\n<List\n  items={items}\n/>\n```\nIt looks elegant, easy to use, and ensures that wherever it\'s used, the items get rendered exactly the same.\n\nA couple of weeks pass and Destin comes back with a new request.\n\n***Destin:*** Our research has shown that having an icon beside the list items will help people to distinguish between the items more easily. Can we make this happen?\n<figure>\n  <img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h0uyitw9lfktug1c0exu.jpg" alt="List Component with Icons">\n  <figcaption>List Component with Icons</figcaption>\n</figure>\n***Enna:*** It should be straightforward. I can 💯% make that happen!\n\nShe looks at the `List` component and decides to add an icon property to each item:\n```ts\ninterface ListItem {\n  icon: IconName;\n  title: string;\n  description: string;\n}\ninterface ListProps {\n  items: ListItem[];\n}\n```\nThis new change now requires all the instances of the `List` to receive an icon for each item. But that\'s not a big deal.\n```tsx\nconst items = [\n  {\n    icon: "icon1",\n    title: "item 1",\n    description: "description for item 1",\n  },\n  {\n    icon: "icon2",\n    title: "item 2",\n    description: "description for item 2",\n  },\n  {\n    icon: "icon3",\n    title: "item 3",\n    description: "description for item 3",\n  },\n];\n...\n<List\n  items={items}\n/>\n```\nThe `List` component is now in the wild and people are happily using it. But Destin is thinking of new use cases for the component.\n\n***Destin***: Hey, we have realized two new use cases for the `List` component. There are some lists that we would like to have an action button for each item. In some other lists, we would like to have some extra details text in place of the button:\n<figure>\n  <img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cdbmawb2075mdnztcqem.jpg" alt="List Component with Action Buttons">\n  <figcaption>List Component with Action Buttons</figcaption>\n</figure>\n<figure>\n  <img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z7dvbf38c5st417gvodg.jpg" alt="List Component with Extra Details">\n  <figcaption>List Component with Extra Details</figcaption>\n</figure>\n***Enna***: Interesting... this is going to make the `List` component complex but let me see what I can do.\n\nEnna realizes that now she has two different types of list items. Some of the properties are shared between the two types (like the `title`) and some are unique to each item type. She decides to extract the shared properties into a new interface named `ListItemBase` and define `ActionListItem` and `ExtraDetailListItem` that extend the `ListItemBase`:\n```ts\ninterface ListItemBase {\n  icon: IconName;\n  title: string;\n  description: string;\n}\ninterface ActionListItem extends BaseListItem {\n  type: "ListItemWithAction";\n  action: {\n    label: string;\n    onClick(event: React.MouseEvent<HTMLButtonElement>): void;\n  };\n}\ninterface ExtraDetailListItem extends BaseListItem {\n  type: "ListItemWithExtraDetail";\n  extraDetail: string;\n}\n```\nThe `items` in the `ListProps` now have a new type:\n```ts\ninterface ListProps {\n  items: (ActionListItem | ExtraDetailListItem)[];\n}\n```\nThe interface looks okay-ish but now there should be a decision statement inside the `List` component that decides whether to render an `ActionListItem` or `ExtraDetailListItem`.\n\nShe decides that a single decision statement is not a big deal and she goes on with changing the `List` component to support the two new types of list items.\n\nOne day when Destin is working on designing a feature for communications, he realizes that the `List` component can be used for rendering a list of messages. He presents the new use case to Enna.\n\n***Destin***: In this new use case we want to show an avatar instead of the icon. We also want to open the conversation when people click on the message item. I forgot to mention that we need to have a way to indicate if the message is unread. Can you make the `List` component handle this?\n<figure>\n  <img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0bk8oty99g5xz2b3t0fz.jpg" alt="List component for Conversation List">\n  <figcaption>List component for Conversation List</figcaption>\n</figure>\n***Enna***: Hmmm... we can change the `List` component to handle this use case but it will add a lot of complexity to the component.\n\nThere are going to be more and more use cases for new types of list items. Adding those use cases to the `List` ensures there\'s a unified way of rendering items which will provide the consistency we would like to have across our products. But with every single change to the `List`, we increase the chance of regression for all instances of the `List`. No need to mention that we are also adding more and more complexity to the `List` which makes its maintenance harder. So what can we do?\n\n### How did we end up here?\n\nIt all started with the initial `List` component. In the initial version, the `List` component had two separate responsibilities:\n- Rendering a list of items\n- Managing how each item should be rendered\nRendering a list of items is the actual responsibility of the `List` component, but how each item gets rendered could have been extracted into its own set of components.\n\n### Separation of Concerns Using Compound Components\n\nSeparation of concerns is here to help. By separating every concern of our component into its own component, we can reduce the complexity and make it easier to embrace future changes.\n\nHow do we figure out different concerns of the component? One easy way to think about concerns is to think about the reasons that each piece of software has for changing. Huh...? Let me explain more. Imagine the `List` component. The list items can change depending on the feature we are building and the customer\'s needs. The requirement for the list itself would not generally change from feature to feature. So the list and list items have different reasons for changing. This means they are different concerns.\n\nNow that we figured out the two concerns of the `List` component, how can we separate them? [Compound Components](https://kentcdodds.com/blog/compound-components-with-react-hooks) are the way to accomplish this. The `List` component can accept its items as children like this:\n```tsx\n<List>\n  {items.map(({ icon, title, description }) => {\n    <ListItem {...{ icon, title, description }} />;\n  })}\n</List>\n```\n\nThere are some immediate advantages to this approach:\n- The complexity is broken down into smaller components\n- Changes in the `ListItem` would not alter the code in the `List` component. This helps with less regression over time\n\nLet’s get back to the earlier request we had about rendering a list of Messages. Our first instinct might be to modify our `ListItem` to be able to handle messages. But wait! Do message items have different reasons for changing than the generic `ListItem`? Yes! They are representing two different types of information that can have different reasons for change. Hence our message item is a new concern. We can create a new component for the `MessageItem`:\n```tsx\n<List>\n  {messages.map((message) => {\n    <MessageItem\n      thumbnail={messages.thumbnail}\n      sender={message.sender}\n      content={message.content}\n      sentAt={message.sentAt}\n      hasBeenRead={message.hasBeenRead}\n    />;\n  })}\n</List>\n```\nWe can extend the usage of the `List` component to a variety of use cases without touching anything in the `List` component!\n\nSeparating the `List` component concerns using the Compound Component pattern helps embracing future changes more easily without causing regression.\n\nSo far we separated the concerns of the `List` component into smaller components that can be passed as children for the `List`. This made the component less complex, easier to maintain, and flexible to future changes. But now we created a new problem! Any component can be passed as children to the `List` and we lost control over which types of items we render in the list.\n\nSince any component can be passed as children to the new `List` component, this might feel like we can\'t enforce the design system\'s opinions on the `List` component. In order to enforce those opinions, we can check the type of each child and ensure they are aligned with the opinion of our design system. Depending on how strict you want to be, you can show a warning message or even not render the items that are not accepted by the design system:\n```tsx\nconst ACCEPTED_LIST_ITEMS = [ListItem, MessageListItem];\nfunction List({children}) {\n  ...\n  return React.Children.map(children, (child) => {\n    if (ACCEPTED_LIST_ITEMS.includes(child)) {\n      return child\n    } else {\n      console.warn("The List can\'t render this type of item")\n    }\n  })\n}\n```\n\n🎉 with this final touch we ensured that the `List` component is firm in allowing only certain types of items.\n\n## Conclusion\n\nChange is an inevitable part of any software and UI components are no different. When building UI components, it’s helpful to ask yourself about the possible future changes that the component could expect. This will help you understand different reasons that your component could change and will provide a good way to separate those concerns. The goal is not to build a component that covers all the expected/unexpected future needs, but rather to separate the concerns in a way that future changes can be applied with minimal impact on the whole system.\n\nThe Compound Component pattern can be used to break down the concerns of a component into smaller components. This will help reduce the complexity and also decrease the chance of regression as we add new capabilities to the component. It also enables your design team to iterate and expand on the design system with confidence.\n\nWhat are other techniques you use for building scalable design systems? If you are interested in solving similar problems, we\'re hiring for remote positions across Canada at all software engineering levels!\n\nOur awesome Jobber technology teams span across Payments, Infrastructure, AI/ML, Business Workflows & Communications. We work on cutting edge & modern tech stacks using React, React Native, Ruby on Rails, & GraphQL.\n\nIf you want to be a part of a collaborative work culture, help small home service businesses scale and create a positive impact on our communities, then visit our <a href="https://getjobber.com/about/careers/?utm_source=devto&utm_medium=social&utm_campaign=eng_blog" target="_blank">career</a> site to learn more!\n',e.user={name:"Chris Murray",username:t,twitter_username:t,github_username:s,website_url:s,profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--A0z9WgsQ--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/750040/12d0e641-a59c-4075-972f-fe133262e924.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--ejY-66KY--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/750040/12d0e641-a59c-4075-972f-fe133262e924.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:e}},error:s,state:{currentArticle:e},serverRendered:!0,routePath:"/thatchrismurray/921352",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:s}}}}(null,"2021-12-08T22:57:34Z",{},"https://dev.to/thatchrismurray/firm-but-flexible-a-pattern-for-creating-resilient-design-system-components-48io","thatchrismurray")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
