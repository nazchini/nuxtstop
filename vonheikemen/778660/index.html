<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Everything you need to know to configure neovim using lua</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Everything you need to know to configure neovim using lua</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/vim" class="tag" data-v-70afb46a>
          #vim
        </a><a href="/nuxtstop/t/shell" class="tag" data-v-70afb46a>
          #shell
        </a><a href="/nuxtstop/t/neovim" class="tag" data-v-70afb46a>
          #neovim
        </a></div> <!----> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            59
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            0
          </span></div> <time data-v-70afb46a>Aug 2 '21</time></div></header> <div class="content" data-v-70afb46a><blockquote>
<p>Pueden leer la versión en español <a href="https://dev.to/vonheikemen/todo-lo-que-necesitan-saber-para-configurar-neovim-usando-lua-2fon">aquí</a>.</p>
</blockquote>

<p>After a long time in development neovim 0.5 was finally released as a stable version. Among the new exciting features we have better lua support and the promise of a stable api to create our configuration using this language. So today I'm going to share with you everything I learned while I was migrating my own configuration from vimscript to lua.</p>

<p>I'm going to talk about the things we can do with lua and its interaction with vimscript. I will be showing a lot of examples but I will not tell you what options you should set with what value. Also, this won't be a tutorial on "how to turn neovim into an IDE", I'll avoid anything that is language specific. What I want to do is teach you enough about lua and the neovim api so you can migrate your own configuration.</p>

<p>I will assume your operating system is linux (or something close to it) and that your configuration is located at <code>~/.config/nvim/init.vim</code>. Everything that I will show should work on every system in which neovim can be installed, just keep in mind that the path to the <code>init.vim</code> file might be different in your case.</p>

<p>Let us begin.</p>

<h2>
  <a name="first-steps" href="#first-steps">
  </a>
  First steps
</h2>

<p>The first thing you need to know is that we can embed lua code directly in <code>init.vim</code>. So we can migrate our config piece by piece and only change from <code>init.vim</code> to <code>init.lua</code> when we are ready.</p>

<p>Let's do the "hello world" to test that everything works as expected. Try this in your <code>init.vim</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="k">lua</span> <span class="p">&lt;&lt;</span>EOF
<span class="k">print</span><span class="p">(</span><span class="s1">'hello from lua'</span><span class="p">)</span>
EOF
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>After "sourcing" the file or restarting neovim the message <code>hello from lua</code> should appear right below your statusline. In here we are using something called <code>lua-heredoc</code>, so everything that's between <code>&lt;&lt;EOF ... EOF</code> will be considered a lua script and will be executed by the <code>lua</code> command. This is useful when we want to execute multiple lines of code but it's not necessary when we only need one. This is valid.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="k">lua</span> <span class="k">print</span><span class="p">(</span><span class="s1">'this also works'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>But if we are going to call lua code from vimscript I say we use a real script. In lua we can do this by using the <code>require</code> function. For this to work we need to create a <code>lua</code> folder somewhere in the <code>runtimepath</code> of neovim.</p>

<p>You'll probably want to use the same folder where <code>init.vim</code> is located, so we will create <code>~/.config/nvim/lua</code>, and inside that we'll create a script called <code>basic.lua</code>. For now we will only print a message.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="nb">print</span><span class="p">(</span><span class="s1">'hello from ~/config/nvim/lua/basic.lua'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now from our <code>init.vim</code> we can call it like this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="k">lua</span> require<span class="p">(</span><span class="s1">'basic'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>When we do this neovim will search in every directory in the <code>runtimepath</code> for a folder called <code>lua</code> and inside that it'll look for <code>basic.lua</code>. Neovim will run the last script that meets those conditions.</p>

<p>If you go around and check other people's code you'll notice that they use a <code>.</code> as a path separator. For example, let's say they have the file <code>~/.config/nvim/lua/usermod/settings.lua</code>. If they want to call <code>settings.lua</code> they do this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="nb">require</span><span class="p">(</span><span class="s1">'usermod.settings'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Is a very common convention. Just remember that the dot is a path separator.</p>

<p>With all this knowledge we are ready to begin our configuration using lua.</p>

<h2>
  <a name="editor-settings" href="#editor-settings">
  </a>
  Editor settings
</h2>

<p>Each option in neovim is available to us in the global variable called <code>vim</code>... well more than just a variable try think of this as a global module. With <code>vim</code> we have access to the editor's settings, we also have the neovim api and even a set of helper functions (a standard library if you will). For now, we only need to care about something they call "meta-accessors", is what we'll use to access all the options we need.</p>

<h3>
  <a name="scopes" href="#scopes">
  </a>
  Scopes
</h3>

<p>Just like in vimscript, in lua we have different scopes for each option. We have global settings, window settings, buffer settings and a few others. Each one has its own namespace inside the <code>vim</code> module.</p>

<ul>
<li>vim.o</li>
</ul>

<p>Gets or sets general settings.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">o</span><span class="p">.</span><span class="n">background</span> <span class="o">=</span> <span class="s1">'light'</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>vim.wo</li>
</ul>

<p>Gets or sets window-scoped options.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">wo</span><span class="p">.</span><span class="n">colorcolumn</span> <span class="o">=</span> <span class="s1">'80'</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>vim.bo</li>
</ul>

<p>Gets or sets buffer-scoped options.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">bo</span><span class="p">.</span><span class="n">filetype</span> <span class="o">=</span> <span class="s1">'lua'</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>vim.g</li>
</ul>

<p>Gets or sets global variables. This is usually the namespace where you'll find variables set by plugins. The only one I know isn't tied to a plugin is the leader key.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="c1">-- use space as a the leader key</span>
<span class="n">vim</span><span class="p">.</span><span class="n">g</span><span class="p">.</span><span class="n">mapleader</span> <span class="o">=</span> <span class="s1">' '</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>You should know that some variable names in vimscript are not valid in lua. We still have access to them but we can't use the dot notation. For example, <a href="https://github.com/dhruvasagar/vim-zoom">vim-zoom</a> has a variable called <code>zoom#statustext</code> and in vimscript we use it like this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="k">let</span> <span class="nv">g:zoom</span>#statustext <span class="p">=</span> <span class="s1">'Z'</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In lua we would have to do this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">g</span><span class="p">[</span><span class="s1">'zoom#statustext'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Z'</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>As you might have guessed this also gives us an oportunity to access properties which have the name of keywords. You may find yourselves in a situation where you need to access a property called <code>for</code>, <code>do</code> or <code>end</code> which are reserved keywords, in those cases remember this bracket syntax.</p>

<ul>
<li>vim.env</li>
</ul>

<p>Gets or sets environment variables.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">env</span><span class="p">.</span><span class="n">FZF_DEFAULT_OPTS</span> <span class="o">=</span> <span class="s1">'--layout=reverse'</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>As far as I know if you make a change in an environment variables the change will only apply in the active neovim session.</p>

<p>But now how do we know which "scope" we need to use when we're writting our config? Don't worry about that, think of <code>vim.o</code> and company just as a way to read values. When it's time set values we can use another method.</p>

<h3>
  <a name="vimopt" href="#vimopt">
  </a>
  vim.opt
</h3>

<p>With <code>vim.opt</code> we can set global, window and buffer settings.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="c1">-- buffer-scoped</span>
<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autoindent</span> <span class="o">=</span> <span class="kc">true</span>

<span class="c1">-- window-scoped</span>
<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">cursorline</span> <span class="o">=</span> <span class="kc">true</span>

<span class="c1">-- global scope</span>
<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autowrite</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>When we use it like this <code>vim.opt</code> acts like the <code>:set</code> command in vimscript, it give us a consistent way to modify neovim's options.</p>

<p>A funny thing you can do is assign <code>vim.opt</code> to a variable called <code>set</code>.</p>

<p>Say we have this piece of vimscript.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="c">" Set the behavior of tab</span>
<span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">2</span>
<span class="k">set</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">2</span>
<span class="k">set</span> <span class="nb">softtabstop</span><span class="p">=</span><span class="m">2</span>
<span class="k">set</span> <span class="nb">expandtab</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>We could translate this easily in lua like this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">set</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">opt</span>

<span class="c1">-- Set the behavior of tab</span>
<span class="n">set</span><span class="p">.</span><span class="n">tabstop</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">set</span><span class="p">.</span><span class="n">shiftwidth</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">set</span><span class="p">.</span><span class="n">softtabstop</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">set</span><span class="p">.</span><span class="n">expandtab</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<blockquote>
<p>When you declare a variable do not forget the <code>local</code> keyword. In lua variables are global by default (that includes functions).</p>
</blockquote>

<p>Anyway, what about global variables or the environment variables? For those you should keep using <code>vim.g</code> and <code>vim.env</code> respectively</p>

<p>What's interesting about <code>vim.opt</code> is that each property is a kind of special object, they are "meta-tables". It means that these objects implement their own behavior for certain common operations.</p>

<p>In the first example we had something like this: <code>vim.opt.autoindent = true</code>, and now you might think you can inspect the current value by doing this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="nb">print</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autoindent</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>You won't get the value you expect, <code>print</code> will tell you <code>vim.opt.autoindent</code> is a table. If you want to know the value of an option you'll need to use the <code>:get()</code> method.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="nb">print</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autoindent</span><span class="p">:</span><span class="n">get</span><span class="p">())</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>If you really, really want to know what's inside <code>vim.out.autoindent</code> you need to use <code>vim.inspect</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="nb">print</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autoindent</span><span class="p">))</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Or even better, if you have version v0.7 you can inspect the value using the command <code>lua =</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="p">:</span><span class="k">lua</span> <span class="p">=</span> <span class="k">vim</span><span class="p">.</span><span class="k">opt</span><span class="p">.</span><span class="nb">autoindent</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now that will show you the internal state of this property.</p>

<h3>
  <a name="types-of-data" href="#types-of-data">
  </a>
  Types of data
</h3>

<p>Even when we assign a value inside <code>vim.opt</code> there is a little bit of magic going on in the background. I think is important to know how <code>vim.opt</code> can handle different types of data and compare it with vimscript.</p>

<ul>
<li>Booleans</li>
</ul>

<p>These might not seem like a big deal but there is still a difference that is worth mention.</p>

<p>In vimscript we can enable or disable an option like this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">cursorline</span>
<span class="k">set</span> <span class="nb">nocursorline</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>This is the equivalent in lua.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">cursorline</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">cursorline</span> <span class="o">=</span> <span class="kc">false</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>Lists</li>
</ul>

<p>For some options neovim expects a comma separated list. In this case we could provide it as a string ourselves.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">wildignore</span> <span class="o">=</span> <span class="s1">'*/cache/*,*/tmp/*'</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Or we could use a table.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">wildignore</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'*/cache/*'</span><span class="p">,</span> <span class="s1">'*/tmp/*'</span><span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>If you check the content of <code>vim.o.wildignore</code> you'll notice is the thing we want <code>*/cache/*,*/tmp/*</code>. If you really want to be sure you can check with this command.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="p">:</span><span class="k">set</span> <span class="nb">wildignore</span>?
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>You'll get the same result.</p>

<p>But the magic does not end there. Sometimes we don't need to override the list, sometimes we need to add an item or maybe delete it. To makes things easier <code>vim.opt</code> offers support for the following operations:</p>

<p><strong>Add an item to the end of the list</strong></p>

<p>Let's take <code>errorformat</code> as an example. If we want to add to this list using vimscript we do this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">errorformat</span><span class="p">+=</span>%<span class="k">f</span>\<span class="p">|</span>%<span class="k">l</span>\ <span class="k">col</span>\ %<span class="k">c</span>\<span class="p">|</span>%<span class="k">m</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In lua we have a couple of ways to achieve the same goal:</p>

<p>Using the <code>+</code> operator.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">+</span> <span class="s1">'%f|%l col %c|%m'</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Or the <code>:append</code> method.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span><span class="p">:</span><span class="n">append</span><span class="p">(</span><span class="s1">'%f|%l col %c|%m'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong>Add to the beginning</strong></p>

<p>In vimscript:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">errorformat</span>^<span class="p">=</span>%<span class="k">f</span>\<span class="p">|</span>%<span class="k">l</span>\ <span class="k">col</span>\ %<span class="k">c</span>\<span class="p">|</span>%<span class="k">m</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Lua:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">^</span> <span class="s1">'%f|%l col %c|%m'</span>

<span class="c1">-- or try the equivalent</span>

<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span><span class="p">:</span><span class="n">prepend</span><span class="p">(</span><span class="s1">'%f|%l col %c|%m'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong>Delete an item</strong></p>

<p>Vimscript:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">errorformat</span><span class="p">-=</span>%<span class="k">f</span>\<span class="p">|</span>%<span class="k">l</span>\ <span class="k">col</span>\ %<span class="k">c</span>\<span class="p">|</span>%<span class="k">m</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Lua:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">-</span> <span class="s1">'%f|%l col %c|%m'</span>

<span class="c1">-- or the equivalent</span>

<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span><span class="p">:</span><span class="n">remove</span><span class="p">(</span><span class="s1">'%f|%l col %c|%m'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<ul>
<li>Pairs</li>
</ul>

<p>Some options expect a list of key-value pairs. To ilustrate this we'll use <code>listchars</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">listchars</span><span class="p">=</span><span class="k">tab</span><span class="p">:</span>▸\ <span class="p">,</span><span class="nb">eol</span><span class="p">:</span>↲<span class="p">,</span>trail<span class="p">:</span>·
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In lua we can use tables for this too.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">listchars</span> <span class="o">=</span> <span class="p">{</span><span class="n">eol</span> <span class="o">=</span> <span class="s1">'↲'</span><span class="p">,</span> <span class="n">tab</span> <span class="o">=</span> <span class="s1">'▸ '</span><span class="p">,</span> <span class="n">trail</span> <span class="o">=</span> <span class="s1">'·'</span><span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<blockquote>
<p>Note: to actually see this on your screen you need to enable the <code>list</code> option. See <a href="https://neovim.io/doc/user/options.html#'listchars'">:help listchars</a>.</p>
</blockquote>

<p>Since we are still using tables this option also supports the same operations mentioned in the previous section.</p>

<h2>
  <a name="calling-vim-functions" href="#calling-vim-functions">
  </a>
  Calling vim functions
</h2>

<p>Vimscript like any other programming language it has its own built-in functions (<a href="https://neovim.io/doc/user/usr_41.html#function-list">many functions</a>) and thanks to the <code>vim</code> module we can call them throught <code>vim.fn</code>. Just like <code>vim.opt</code>, <code>vim.fn</code> is a meta-table,  but this one is meant to provide a convenient syntax for us to call vim functions. We use it to call built-in functions, user defined functions and even functions of plugins that are not written in lua.</p>

<p>We could for example check the neovim version like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="k">if</span> <span class="n">vim</span><span class="p">.</span><span class="n">fn</span><span class="p">.</span><span class="n">has</span><span class="p">(</span><span class="s1">'nvim-0.7'</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">then</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">'we got neovim 0.7'</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Wait, hold up, why are we comparing the result of <code>has</code> with a <code>1</code>? Ah, well, it turns out vimscript only included booleans in the <code>7.4.1154</code> version. So functions like <code>has</code> return <code>0</code> or <code>1</code>, and in lua both are truthy.</p>

<p>I've already mentioned that vimscript can have variable names that are not valid in lua, in that case you know you can use square brackets like this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">fn</span><span class="p">[</span><span class="s1">'fzf#vim#files'</span><span class="p">](</span><span class="s1">'~/projects'</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Another way we can solve this is by using <code>vim.call</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'fzf#vim#files'</span><span class="p">,</span> <span class="s1">'~/projects'</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Those two do the exact same thing. In practice <code>vim.fn.somefunction()</code> and <code>vim.call('somefunction')</code> have the same effect.</p>

<p>Now let me show you something cool. In this particular case the lua-vimscript integration is so good we can use a plugin manager without any special adapters.</p>

<h3>
  <a name="vimplug-in-lua" href="#vimplug-in-lua">
  </a>
  vim-plug in lua
</h3>

<p>I know there is a lot of people out there who use <a href="https://github.com/junegunn/vim-plug/">vim-plug</a>, you might think you need to migrate to a plugin manager that is written in lua, but that's not the case. We can use <code>vim.fn</code> and <code>vim.call</code> to bring vim-plug to lua.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">Plug</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">fn</span><span class="p">[</span><span class="s1">'plug#'</span><span class="p">]</span>

<span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'plug#begin'</span><span class="p">,</span> <span class="s1">'~/.config/nvim/plugged'</span><span class="p">)</span>

<span class="c1">-- List of plugins goes here</span>
<span class="c1">-- ....</span>

<span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'plug#end'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Those 3 lines of code are the only thing you need. You can try it, this works.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">Plug</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">fn</span><span class="p">[</span><span class="s1">'plug#'</span><span class="p">]</span>

<span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'plug#begin'</span><span class="p">,</span> <span class="s1">'~/.config/nvim/plugged'</span><span class="p">)</span>

<span class="n">Plug</span> <span class="s1">'wellle/targets.vim'</span>
<span class="n">Plug</span> <span class="s1">'tpope/vim-surround'</span>
<span class="n">Plug</span> <span class="s1">'tpope/vim-repeat'</span>

<span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'plug#end'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Before you say anything, yes, all of that is valid lua. If a function only receives a single argument, and that argument is a string or a table, you can omit the parenthesis.</p>

<p>If you use the second argument of <code>Plug</code> you'll need the parenthesis and the second argument must be a table. Let me show you. If you have this in vimscript.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code>Plug <span class="s1">'scrooloose/nerdtree'</span><span class="p">,</span> <span class="p">{</span><span class="s1">'on'</span><span class="p">:</span> <span class="s1">'NERDTreeToggle'</span><span class="p">}</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In lua you'll need to do this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">Plug</span><span class="p">(</span><span class="s1">'scrooloose/nerdtree'</span><span class="p">,</span> <span class="p">{</span><span class="n">on</span> <span class="o">=</span> <span class="s1">'NERDTreeToggle'</span><span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Unfortunately <code>vim-plug</code> has a couple of options that will cause an error if we use this syntax, those are <code>for</code> and <code>do</code>. In this case we need to wrap the key in quotes and square brackets.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">Plug</span><span class="p">(</span><span class="s1">'junegunn/goyo.vim'</span><span class="p">,</span> <span class="p">{[</span><span class="s1">'for'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'markdown'</span><span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>You might know that the <code>do</code> option takes a string or a function which will be executed when the plugin is updated or installed. But what you might not know is that we are not forced to use a "vim function", we can use lua function and it'll work just fine.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">Plug</span><span class="p">(</span><span class="s1">'VonHeikemen/rubber-themes.vim'</span><span class="p">,</span> <span class="p">{</span>
  <span class="p">[</span><span class="s1">'do'</span><span class="p">]</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">termguicolors</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="n">vim</span><span class="p">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">'colorscheme rubber'</span><span class="p">)</span>
  <span class="k">end</span>
<span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>There you have it. You don't need to use a plugin manager written in lua if you don't want to.</p>

<h2>
  <a name="vimscript-is-still-our-friend" href="#vimscript-is-still-our-friend">
  </a>
  Vimscript is still our friend
</h2>

<p>You might have notice in that last example I used <code>vim.cmd</code> to set the color scheme, this is because there are still things we can't do with lua. And so what we do is use <code>vim.cmd</code> to call vimscript commands (or expressions) that don't have a lua equivalent.</p>

<p>One interestings thing you should know is <code>vim.cmd</code> can execute multiple lines of vimscript. It means that we can do lots of things in a single call.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">cmd</span> <span class="s">[[
  syntax enable
  colorscheme rubber
]]</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>So anything that you can't "translate" to lua you can put it in a string and pass that to <code>vim.cmd</code>.</p>

<p>I told you we can execute any vim command, right? I feel compelled to tell you this includes the <code>source</code> command. For those who don't know, <code>source</code> allows us to call other files written in vimscript. For example, if you have lots of keybindings writing in vimscript but don't wish to convert them to lua right now, you can create a script called <code>keymaps.vim</code> and call it.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">cmd</span> <span class="s1">'source ~/.config/nvim/keymaps.vim'</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h2>
  <a name="keybindings" href="#keybindings">
  </a>
  Keybindings
</h2>

<p>No, we don't need vimscript for this. We can do it in lua.</p>

<p>We can create our keybindings using <code>vim.keymap.set</code>. This functions takes 4 arguments.</p>

<ul>
<li>Mode. But not the name of the mode, we need the abbreviation. You can find a list of valid options <a href="https://github.com/nanotee/nvim-lua-guide#defining-mappings">here</a>.</li>
<li>Key we want to bind.</li>
<li>Action we want to execute.</li>
<li>Extra arguments. These are the same options we would use in vimscript, you can find the list <a href="https://neovim.io/doc/user/map.html#:map-arguments">here</a>. Also, check the documentation <a href="https://neovim.io/doc/user/lua.html#vim.keymap.set()">:help vim.keymap.set()</a>.</li>
</ul>

<p>So if we wanted to translate this to lua.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code>nnoremap <span class="p">&lt;</span>Leader<span class="p">></span><span class="k">w</span> <span class="p">:</span><span class="k">write</span><span class="p">&lt;</span>CR<span class="p">></span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>We would have to do this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'&lt;Leader>w'</span><span class="p">,</span> <span class="s1">':write&lt;CR>'</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>By default our keybindings will be "non recursive", it means that we don't have to worry about infinite loops. This opens the possibility to create alternatives of built-in keybindings. For example, we could center the screen after making a search with <code>*</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'*'</span><span class="p">,</span> <span class="s1">'*zz'</span><span class="p">,</span> <span class="p">{</span><span class="n">desc</span> <span class="o">=</span> <span class="s1">'Search and center screen'</span><span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>In here we are using <code>*</code> in the key and the action, and we won't have any conflict.</p>

<p>But sometimes we do need recursive bindings, most of the time when the action we want to execute was created by a plugin. In this case we can use <code>remap = true</code> in the last parameter.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'&lt;leader>e'</span><span class="p">,</span> <span class="s1">'%'</span><span class="p">,</span> <span class="p">{</span><span class="n">remap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="s1">'Go to matching pair'</span><span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Now the best part, <code>vim.keymap.set</code> can use a lua function as the action.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'Q'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">'Hello'</span><span class="p">)</span>
<span class="k">end</span><span class="p">,</span> <span class="p">{</span><span class="n">desc</span> <span class="o">=</span> <span class="s1">'Say hello'</span><span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Let's talk about the <code>desc</code> option. This allows us to add a description to our keybindings. We can read these description if we use the command <code>:map &lt;keybinding></code>.</p>

<p>So executing <code>:map *</code> will show us.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>n  *           * *zz
                 Search and center screen
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>It becomes specially useful when using binding lua functions. If we inspect our <code>Q</code> mapping with <code>:map Q</code> we will get.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>n  Q           * &lt;Lua function 50>
                 Say hello
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Notice we can't see the source for our function but at least we see the description and know what it can do. It is worth mention that plugins can read this property and show it with a nice presentation.</p>

<h2>
  <a name="user-commands" href="#user-commands">
  </a>
  User commands
</h2>

<p>Since version v0.7 we can create our own "ex-commands" using lua, with the function <code>vim.api.nvim_create_user_command</code>.</p>

<p><code>nvim_create_user_command</code> expects three arguments:</p>

<ul>
<li>Name of the command. It <strong>must</strong> begin with an uppercase letter.</li>
<li>Command. Can be a string or a lua function.</li>
<li>Attributes. A lua table with the options for our command. You can find details in the documentation <a href="https://neovim.io/doc/user/api.html#nvim_create_user_command()">:help nvim_create_user_command()</a> and also <a href="https://neovim.io/doc/user/map.html#command-attributes">:help command-attributes</a>.</li>
</ul>

<p>Say we have this command in vimscript.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code>command<span class="p">!</span> <span class="p">-</span>bang ProjectFiles <span class="k">call</span> fzf#<span class="k">vim</span>#<span class="k">files</span><span class="p">(</span><span class="s1">'~/projects'</span><span class="p">,</span> <span class="p">&lt;</span>bang<span class="p">></span><span class="m">0</span><span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Using lua we have the possibility of using the vimscript command in a string.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_user_command</span><span class="p">(</span>
  <span class="s1">'ProjectFiles'</span><span class="p">,</span>
  <span class="s2">"call fzf#vim#files('~/projects', &lt;bang>0)"</span><span class="p">,</span>
  <span class="p">{</span><span class="n">bang</span> <span class="o">=</span> <span class="kc">true</span><span class="p">}</span>
<span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Or, we could use a lua function.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_user_command</span><span class="p">(</span>
  <span class="s1">'ProjectFiles'</span><span class="p">,</span>
  <span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
    <span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'fzf#vim#files'</span><span class="p">,</span> <span class="s1">'~/projects'</span><span class="p">,</span> <span class="n">input</span><span class="p">.</span><span class="n">bang</span><span class="p">)</span>
  <span class="k">end</span><span class="p">,</span>
  <span class="p">{</span><span class="n">bang</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="s1">'Search projects folder'</span><span class="p">}</span>
<span class="p">)</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Yes, we can also add a description to user commands. We read these descriptions using the command <code>:command &lt;name></code>. But they will only appear if our command is bound to a lua function. So the command <code>:command ProjectFiles</code> will show this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>    Name              Args Address Complete    Definition
!   ProjectFiles      0                        Search projects folder
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>If the command had been vimscript expression the that expression will appear in the <code>Definition</code> column.</p>

<h2>
  <a name="autocommands" href="#autocommands">
  </a>
  Autocommands
</h2>

<p>With autocommands we execute functions and expressions on certain events. See <a href="https://neovim.io/doc/user/autocmd.html#events">:help events</a> for a list of built-in events.</p>

<p>If we wanted to modify the <code>rubber</code> colorscheme a little bit we would do something like this.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight viml"><code>augroup highlight_cmds
  autocmd<span class="p">!</span>
  autocmd <span class="nb">ColorScheme</span> rubber <span class="nb">highlight</span> String guifg<span class="p">=</span><span class="mh">#FFEB95</span>
augroup END
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<blockquote>
<p>This block should be executed before calling the <code>colorscheme</code> command.</p>
</blockquote>

<p>This would be the equivalent in lua.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">augroup</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_augroup</span><span class="p">(</span><span class="s1">'highlight_cmds'</span><span class="p">,</span> <span class="p">{</span><span class="n">clear</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>

<span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_autocmd</span><span class="p">(</span><span class="s1">'ColorScheme'</span><span class="p">,</span> <span class="p">{</span>
  <span class="n">pattern</span> <span class="o">=</span> <span class="s1">'rubber'</span><span class="p">,</span>
  <span class="n">group</span> <span class="o">=</span> <span class="n">augroup</span><span class="p">,</span>
  <span class="n">command</span> <span class="o">=</span> <span class="s1">'highlight String guifg=#FFEB95'</span>
<span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Notice here we are using an option called <code>command</code>, this can only execute vimscript. If we wanted to use a lua function we need to replace <code>command</code> with an option called <code>callback</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">augroup</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_augroup</span><span class="p">(</span><span class="s1">'highlight_cmds'</span><span class="p">,</span> <span class="p">{</span><span class="n">clear</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>

<span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_autocmd</span><span class="p">(</span><span class="s1">'ColorScheme'</span><span class="p">,</span> <span class="p">{</span>
  <span class="n">pattern</span> <span class="o">=</span> <span class="s1">'rubber'</span><span class="p">,</span>
  <span class="n">group</span> <span class="o">=</span> <span class="n">augroup</span><span class="p">,</span>
  <span class="n">desc</span> <span class="o">=</span> <span class="s1">'Change string highlight'</span><span class="p">,</span>
  <span class="n">callback</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_set_hl</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">'String'</span><span class="p">,</span> <span class="p">{</span><span class="n">fg</span> <span class="o">=</span> <span class="s1">'#FFEB95'</span><span class="p">})</span>
  <span class="k">end</span>
<span class="p">})</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Just like the previous apis we can add a description for autocommands. To inspect an autocommand use the command <code>:autocmd &lt;event> &lt;pattern></code>. But just like user commands they will only be available for inspection when using a lua function. If we check with <code>:autocmd ColorScheme rubber</code> will get.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>ColorScheme
    rubber    Change string highlight
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>To know more details about autocommands checkout the documentation, see <a href="https://neovim.io/doc/user/api.html#nvim_create_autocmd()">:help nvim_create_autocmd()</a> and <a href="https://neovim.io/doc/user/autocmd.html#autocommand">:help autocmd</a>.</p>

<h2>
  <a name="plugin-manager" href="#plugin-manager">
  </a>
  Plugin manager
</h2>

<p>You might want a plugin manager that is written in lua, just because. It appears that right now these are your options:</p>

<ul>
<li><a href="https://github.com/savq/paq-nvim/">paq</a></li>
</ul>

<p>A plugin manager that is simple and fast. I'm serious, this thing has less than 300 lines of code. It was created to download, update and remove plugins. That's it. If you don't need anything else, look no further, this is the plugin manager you want.</p>

<ul>
<li><a href="https://github.com/wbthomason/packer.nvim">packer</a></li>
</ul>

<p>If you want more features <code>packer</code> is the alternative. It has the basic features you would expect, it offers lazy-loading capabilities, has support for <code>luarocks</code> (which is like a package manager for lua), it can handle "local plugins". And does other things I don't understand, but the point is that is a feature complete plugin manager.</p>

<ul>
<li><a href="https://github.com/kristijanhusak/vim-packager">vim-packager</a></li>
</ul>

<p>This one is not written in lua but I want to add it because it does offer a lua api. It offers more features than <code>paq</code> but not as much a <code>packer</code>, so if you are looking for a middle ground between those two, this might be a good choice.</p>

<h2>
  <a name="conclusion" href="#conclusion">
  </a>
  Conclusion
</h2>

<p>Recap time. We learned how to use lua from vimscript. We now know how to use vimscript from lua. We have the tools to activate, deactivate and modify all sorts of options and variables in neovim. We got to know the methods we have available to create our keymaps. We learned about commands and autocommands. We figure out how to use plugin managers that aren't written in lua, and saw a few alternatives that are written in lua. I say we are ready to use lua in neovim.</p>

<p>For those who want to see a real world usage or whatever, I'll share a link to my current config in github:</p>

<ul>
<li><a href="https://github.com/VonHeikemen/dotfiles/tree/057f4d604e31ad121c4b4b36fd7e4148483d50c8/my-configs/neovim">neovim (v0.6)</a></li>
<li><a href="https://github.com/VonHeikemen/dotfiles/tree/master/my-configs/neovim">neovim (v0.7+)</a></li>
</ul>

<h2>
  <a name="sources" href="#sources">
  </a>
  Sources
</h2>

<ul>
<li><a href="https://learnxinyminutes.com/docs/lua/">learn x in y minutes: where X=lua</a></li>
<li><a href="https://github.com/nanotee/nvim-lua-guide">nvim-lua-guide</a></li>
<li><a href="https://neovim.io/doc/user/lua.html#:lua-heredoc">:help lua-heredoc</a></li>
<li><a href="https://neovim.io/doc/user/lua.html#lua-vim-variables">:help lua-vim-variables</a></li>
<li><a href="https://neovim.io/doc/user/lua.html#lua-stdlib">:help lua-stdlib</a></li>
<li><a href="https://neovim.io/doc/user/usr_41.html#function-list">:help function-list</a></li>
<li><a href="https://github.com/curist/dotvim/blob/98b161f0759d3316fcf6a776d03665d6ab4827ee/bundles.lua">curist's bundle.lua</a></li>
</ul>


<hr>

<p>Thank you for your time. If you find this article useful and want to support my efforts, consider leaving a tip in <a href="https://www.buymeacoffee.com/vonheikemen">buy me a coffee ☕</a>.</p>

<p><a href="https://www.buymeacoffee.com/vonheikemen"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--IF_mutQQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/vonheikemen/image/upload/v1618466522/buy-me-coffee_ah0uzh.png" alt="buy me a coffee" loading="lazy" width="262" height="60"></a></p>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/vonheikemen/everything-you-need-to-know-to-configure-neovim-using-lua-3h58" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(n,s,a){return a.type_of="article",a.id=778660,a.title="Everything you need to know to configure neovim using lua",a.description="Your first steps into a lua configuration",a.readable_publish_date="Aug 2 '21",a.slug="everything-you-need-to-know-to-configure-neovim-using-lua-3h58",a.path="/vonheikemen/everything-you-need-to-know-to-configure-neovim-using-lua-3h58",a.url="https://dev.to/vonheikemen/everything-you-need-to-know-to-configure-neovim-using-lua-3h58",a.comments_count=0,a.public_reactions_count=59,a.collection_id=n,a.published_timestamp=s,a.positive_reactions_count=59,a.cover_image=n,a.social_image="https://dev.to/social_previews/article/778660.png",a.canonical_url="https://vonheikemen.github.io/devlog/tools/configuring-neovim-using-lua/",a.created_at="2021-08-01T23:04:17Z",a.edited_at="2022-04-22T03:30:29Z",a.crossposted_at=n,a.published_at=s,a.last_comment_at=s,a.reading_time_minutes=15,a.tag_list="vim, shell, neovim",a.tags=["vim","shell","neovim"],a.body_html='<blockquote>\n<p>Pueden leer la versión en español <a href="https://dev.to/vonheikemen/todo-lo-que-necesitan-saber-para-configurar-neovim-usando-lua-2fon">aquí</a>.</p>\n</blockquote>\n\n<p>After a long time in development neovim 0.5 was finally released as a stable version. Among the new exciting features we have better lua support and the promise of a stable api to create our configuration using this language. So today I\'m going to share with you everything I learned while I was migrating my own configuration from vimscript to lua.</p>\n\n<p>I\'m going to talk about the things we can do with lua and its interaction with vimscript. I will be showing a lot of examples but I will not tell you what options you should set with what value. Also, this won\'t be a tutorial on "how to turn neovim into an IDE", I\'ll avoid anything that is language specific. What I want to do is teach you enough about lua and the neovim api so you can migrate your own configuration.</p>\n\n<p>I will assume your operating system is linux (or something close to it) and that your configuration is located at <code>~/.config/nvim/init.vim</code>. Everything that I will show should work on every system in which neovim can be installed, just keep in mind that the path to the <code>init.vim</code> file might be different in your case.</p>\n\n<p>Let us begin.</p>\n\n<h2>\n  <a name="first-steps" href="#first-steps">\n  </a>\n  First steps\n</h2>\n\n<p>The first thing you need to know is that we can embed lua code directly in <code>init.vim</code>. So we can migrate our config piece by piece and only change from <code>init.vim</code> to <code>init.lua</code> when we are ready.</p>\n\n<p>Let\'s do the "hello world" to test that everything works as expected. Try this in your <code>init.vim</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="k">lua</span> <span class="p">&lt;&lt;</span>EOF\n<span class="k">print</span><span class="p">(</span><span class="s1">\'hello from lua\'</span><span class="p">)</span>\nEOF\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>After "sourcing" the file or restarting neovim the message <code>hello from lua</code> should appear right below your statusline. In here we are using something called <code>lua-heredoc</code>, so everything that\'s between <code>&lt;&lt;EOF ... EOF</code> will be considered a lua script and will be executed by the <code>lua</code> command. This is useful when we want to execute multiple lines of code but it\'s not necessary when we only need one. This is valid.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="k">lua</span> <span class="k">print</span><span class="p">(</span><span class="s1">\'this also works\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>But if we are going to call lua code from vimscript I say we use a real script. In lua we can do this by using the <code>require</code> function. For this to work we need to create a <code>lua</code> folder somewhere in the <code>runtimepath</code> of neovim.</p>\n\n<p>You\'ll probably want to use the same folder where <code>init.vim</code> is located, so we will create <code>~/.config/nvim/lua</code>, and inside that we\'ll create a script called <code>basic.lua</code>. For now we will only print a message.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="nb">print</span><span class="p">(</span><span class="s1">\'hello from ~/config/nvim/lua/basic.lua\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now from our <code>init.vim</code> we can call it like this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="k">lua</span> require<span class="p">(</span><span class="s1">\'basic\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>When we do this neovim will search in every directory in the <code>runtimepath</code> for a folder called <code>lua</code> and inside that it\'ll look for <code>basic.lua</code>. Neovim will run the last script that meets those conditions.</p>\n\n<p>If you go around and check other people\'s code you\'ll notice that they use a <code>.</code> as a path separator. For example, let\'s say they have the file <code>~/.config/nvim/lua/usermod/settings.lua</code>. If they want to call <code>settings.lua</code> they do this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="nb">require</span><span class="p">(</span><span class="s1">\'usermod.settings\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Is a very common convention. Just remember that the dot is a path separator.</p>\n\n<p>With all this knowledge we are ready to begin our configuration using lua.</p>\n\n<h2>\n  <a name="editor-settings" href="#editor-settings">\n  </a>\n  Editor settings\n</h2>\n\n<p>Each option in neovim is available to us in the global variable called <code>vim</code>... well more than just a variable try think of this as a global module. With <code>vim</code> we have access to the editor\'s settings, we also have the neovim api and even a set of helper functions (a standard library if you will). For now, we only need to care about something they call "meta-accessors", is what we\'ll use to access all the options we need.</p>\n\n<h3>\n  <a name="scopes" href="#scopes">\n  </a>\n  Scopes\n</h3>\n\n<p>Just like in vimscript, in lua we have different scopes for each option. We have global settings, window settings, buffer settings and a few others. Each one has its own namespace inside the <code>vim</code> module.</p>\n\n<ul>\n<li>vim.o</li>\n</ul>\n\n<p>Gets or sets general settings.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">o</span><span class="p">.</span><span class="n">background</span> <span class="o">=</span> <span class="s1">\'light\'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>vim.wo</li>\n</ul>\n\n<p>Gets or sets window-scoped options.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">wo</span><span class="p">.</span><span class="n">colorcolumn</span> <span class="o">=</span> <span class="s1">\'80\'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>vim.bo</li>\n</ul>\n\n<p>Gets or sets buffer-scoped options.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">bo</span><span class="p">.</span><span class="n">filetype</span> <span class="o">=</span> <span class="s1">\'lua\'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>vim.g</li>\n</ul>\n\n<p>Gets or sets global variables. This is usually the namespace where you\'ll find variables set by plugins. The only one I know isn\'t tied to a plugin is the leader key.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="c1">-- use space as a the leader key</span>\n<span class="n">vim</span><span class="p">.</span><span class="n">g</span><span class="p">.</span><span class="n">mapleader</span> <span class="o">=</span> <span class="s1">\' \'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>You should know that some variable names in vimscript are not valid in lua. We still have access to them but we can\'t use the dot notation. For example, <a href="https://github.com/dhruvasagar/vim-zoom">vim-zoom</a> has a variable called <code>zoom#statustext</code> and in vimscript we use it like this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="k">let</span> <span class="nv">g:zoom</span>#statustext <span class="p">=</span> <span class="s1">\'Z\'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>In lua we would have to do this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">g</span><span class="p">[</span><span class="s1">\'zoom#statustext\'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">\'Z\'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>As you might have guessed this also gives us an oportunity to access properties which have the name of keywords. You may find yourselves in a situation where you need to access a property called <code>for</code>, <code>do</code> or <code>end</code> which are reserved keywords, in those cases remember this bracket syntax.</p>\n\n<ul>\n<li>vim.env</li>\n</ul>\n\n<p>Gets or sets environment variables.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">env</span><span class="p">.</span><span class="n">FZF_DEFAULT_OPTS</span> <span class="o">=</span> <span class="s1">\'--layout=reverse\'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>As far as I know if you make a change in an environment variables the change will only apply in the active neovim session.</p>\n\n<p>But now how do we know which "scope" we need to use when we\'re writting our config? Don\'t worry about that, think of <code>vim.o</code> and company just as a way to read values. When it\'s time set values we can use another method.</p>\n\n<h3>\n  <a name="vimopt" href="#vimopt">\n  </a>\n  vim.opt\n</h3>\n\n<p>With <code>vim.opt</code> we can set global, window and buffer settings.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="c1">-- buffer-scoped</span>\n<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autoindent</span> <span class="o">=</span> <span class="kc">true</span>\n\n<span class="c1">-- window-scoped</span>\n<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">cursorline</span> <span class="o">=</span> <span class="kc">true</span>\n\n<span class="c1">-- global scope</span>\n<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autowrite</span> <span class="o">=</span> <span class="kc">true</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>When we use it like this <code>vim.opt</code> acts like the <code>:set</code> command in vimscript, it give us a consistent way to modify neovim\'s options.</p>\n\n<p>A funny thing you can do is assign <code>vim.opt</code> to a variable called <code>set</code>.</p>\n\n<p>Say we have this piece of vimscript.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="c">" Set the behavior of tab</span>\n<span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">2</span>\n<span class="k">set</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">2</span>\n<span class="k">set</span> <span class="nb">softtabstop</span><span class="p">=</span><span class="m">2</span>\n<span class="k">set</span> <span class="nb">expandtab</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>We could translate this easily in lua like this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">set</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">opt</span>\n\n<span class="c1">-- Set the behavior of tab</span>\n<span class="n">set</span><span class="p">.</span><span class="n">tabstop</span> <span class="o">=</span> <span class="mi">2</span>\n<span class="n">set</span><span class="p">.</span><span class="n">shiftwidth</span> <span class="o">=</span> <span class="mi">2</span>\n<span class="n">set</span><span class="p">.</span><span class="n">softtabstop</span> <span class="o">=</span> <span class="mi">2</span>\n<span class="n">set</span><span class="p">.</span><span class="n">expandtab</span> <span class="o">=</span> <span class="kc">true</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<blockquote>\n<p>When you declare a variable do not forget the <code>local</code> keyword. In lua variables are global by default (that includes functions).</p>\n</blockquote>\n\n<p>Anyway, what about global variables or the environment variables? For those you should keep using <code>vim.g</code> and <code>vim.env</code> respectively</p>\n\n<p>What\'s interesting about <code>vim.opt</code> is that each property is a kind of special object, they are "meta-tables". It means that these objects implement their own behavior for certain common operations.</p>\n\n<p>In the first example we had something like this: <code>vim.opt.autoindent = true</code>, and now you might think you can inspect the current value by doing this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="nb">print</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autoindent</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>You won\'t get the value you expect, <code>print</code> will tell you <code>vim.opt.autoindent</code> is a table. If you want to know the value of an option you\'ll need to use the <code>:get()</code> method.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="nb">print</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autoindent</span><span class="p">:</span><span class="n">get</span><span class="p">())</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>If you really, really want to know what\'s inside <code>vim.out.autoindent</code> you need to use <code>vim.inspect</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="nb">print</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">autoindent</span><span class="p">))</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Or even better, if you have version v0.7 you can inspect the value using the command <code>lua =</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="p">:</span><span class="k">lua</span> <span class="p">=</span> <span class="k">vim</span><span class="p">.</span><span class="k">opt</span><span class="p">.</span><span class="nb">autoindent</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now that will show you the internal state of this property.</p>\n\n<h3>\n  <a name="types-of-data" href="#types-of-data">\n  </a>\n  Types of data\n</h3>\n\n<p>Even when we assign a value inside <code>vim.opt</code> there is a little bit of magic going on in the background. I think is important to know how <code>vim.opt</code> can handle different types of data and compare it with vimscript.</p>\n\n<ul>\n<li>Booleans</li>\n</ul>\n\n<p>These might not seem like a big deal but there is still a difference that is worth mention.</p>\n\n<p>In vimscript we can enable or disable an option like this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">cursorline</span>\n<span class="k">set</span> <span class="nb">nocursorline</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>This is the equivalent in lua.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">cursorline</span> <span class="o">=</span> <span class="kc">true</span>\n<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">cursorline</span> <span class="o">=</span> <span class="kc">false</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>Lists</li>\n</ul>\n\n<p>For some options neovim expects a comma separated list. In this case we could provide it as a string ourselves.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">wildignore</span> <span class="o">=</span> <span class="s1">\'*/cache/*,*/tmp/*\'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Or we could use a table.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">wildignore</span> <span class="o">=</span> <span class="p">{</span><span class="s1">\'*/cache/*\'</span><span class="p">,</span> <span class="s1">\'*/tmp/*\'</span><span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>If you check the content of <code>vim.o.wildignore</code> you\'ll notice is the thing we want <code>*/cache/*,*/tmp/*</code>. If you really want to be sure you can check with this command.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="p">:</span><span class="k">set</span> <span class="nb">wildignore</span>?\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>You\'ll get the same result.</p>\n\n<p>But the magic does not end there. Sometimes we don\'t need to override the list, sometimes we need to add an item or maybe delete it. To makes things easier <code>vim.opt</code> offers support for the following operations:</p>\n\n<p><strong>Add an item to the end of the list</strong></p>\n\n<p>Let\'s take <code>errorformat</code> as an example. If we want to add to this list using vimscript we do this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">errorformat</span><span class="p">+=</span>%<span class="k">f</span>\\<span class="p">|</span>%<span class="k">l</span>\\ <span class="k">col</span>\\ %<span class="k">c</span>\\<span class="p">|</span>%<span class="k">m</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>In lua we have a couple of ways to achieve the same goal:</p>\n\n<p>Using the <code>+</code> operator.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">+</span> <span class="s1">\'%f|%l col %c|%m\'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Or the <code>:append</code> method.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span><span class="p">:</span><span class="n">append</span><span class="p">(</span><span class="s1">\'%f|%l col %c|%m\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><strong>Add to the beginning</strong></p>\n\n<p>In vimscript:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">errorformat</span>^<span class="p">=</span>%<span class="k">f</span>\\<span class="p">|</span>%<span class="k">l</span>\\ <span class="k">col</span>\\ %<span class="k">c</span>\\<span class="p">|</span>%<span class="k">m</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Lua:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">^</span> <span class="s1">\'%f|%l col %c|%m\'</span>\n\n<span class="c1">-- or try the equivalent</span>\n\n<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span><span class="p">:</span><span class="n">prepend</span><span class="p">(</span><span class="s1">\'%f|%l col %c|%m\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><strong>Delete an item</strong></p>\n\n<p>Vimscript:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">errorformat</span><span class="p">-=</span>%<span class="k">f</span>\\<span class="p">|</span>%<span class="k">l</span>\\ <span class="k">col</span>\\ %<span class="k">c</span>\\<span class="p">|</span>%<span class="k">m</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Lua:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span> <span class="o">-</span> <span class="s1">\'%f|%l col %c|%m\'</span>\n\n<span class="c1">-- or the equivalent</span>\n\n<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">errorformat</span><span class="p">:</span><span class="n">remove</span><span class="p">(</span><span class="s1">\'%f|%l col %c|%m\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<ul>\n<li>Pairs</li>\n</ul>\n\n<p>Some options expect a list of key-value pairs. To ilustrate this we\'ll use <code>listchars</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code><span class="k">set</span> <span class="nb">listchars</span><span class="p">=</span><span class="k">tab</span><span class="p">:</span>▸\\ <span class="p">,</span><span class="nb">eol</span><span class="p">:</span>↲<span class="p">,</span>trail<span class="p">:</span>·\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>In lua we can use tables for this too.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">listchars</span> <span class="o">=</span> <span class="p">{</span><span class="n">eol</span> <span class="o">=</span> <span class="s1">\'↲\'</span><span class="p">,</span> <span class="n">tab</span> <span class="o">=</span> <span class="s1">\'▸ \'</span><span class="p">,</span> <span class="n">trail</span> <span class="o">=</span> <span class="s1">\'·\'</span><span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<blockquote>\n<p>Note: to actually see this on your screen you need to enable the <code>list</code> option. See <a href="https://neovim.io/doc/user/options.html#\'listchars\'">:help listchars</a>.</p>\n</blockquote>\n\n<p>Since we are still using tables this option also supports the same operations mentioned in the previous section.</p>\n\n<h2>\n  <a name="calling-vim-functions" href="#calling-vim-functions">\n  </a>\n  Calling vim functions\n</h2>\n\n<p>Vimscript like any other programming language it has its own built-in functions (<a href="https://neovim.io/doc/user/usr_41.html#function-list">many functions</a>) and thanks to the <code>vim</code> module we can call them throught <code>vim.fn</code>. Just like <code>vim.opt</code>, <code>vim.fn</code> is a meta-table,  but this one is meant to provide a convenient syntax for us to call vim functions. We use it to call built-in functions, user defined functions and even functions of plugins that are not written in lua.</p>\n\n<p>We could for example check the neovim version like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="k">if</span> <span class="n">vim</span><span class="p">.</span><span class="n">fn</span><span class="p">.</span><span class="n">has</span><span class="p">(</span><span class="s1">\'nvim-0.7\'</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">then</span>\n  <span class="nb">print</span><span class="p">(</span><span class="s1">\'we got neovim 0.7\'</span><span class="p">)</span>\n<span class="k">end</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Wait, hold up, why are we comparing the result of <code>has</code> with a <code>1</code>? Ah, well, it turns out vimscript only included booleans in the <code>7.4.1154</code> version. So functions like <code>has</code> return <code>0</code> or <code>1</code>, and in lua both are truthy.</p>\n\n<p>I\'ve already mentioned that vimscript can have variable names that are not valid in lua, in that case you know you can use square brackets like this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">fn</span><span class="p">[</span><span class="s1">\'fzf#vim#files\'</span><span class="p">](</span><span class="s1">\'~/projects\'</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Another way we can solve this is by using <code>vim.call</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">\'fzf#vim#files\'</span><span class="p">,</span> <span class="s1">\'~/projects\'</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Those two do the exact same thing. In practice <code>vim.fn.somefunction()</code> and <code>vim.call(\'somefunction\')</code> have the same effect.</p>\n\n<p>Now let me show you something cool. In this particular case the lua-vimscript integration is so good we can use a plugin manager without any special adapters.</p>\n\n<h3>\n  <a name="vimplug-in-lua" href="#vimplug-in-lua">\n  </a>\n  vim-plug in lua\n</h3>\n\n<p>I know there is a lot of people out there who use <a href="https://github.com/junegunn/vim-plug/">vim-plug</a>, you might think you need to migrate to a plugin manager that is written in lua, but that\'s not the case. We can use <code>vim.fn</code> and <code>vim.call</code> to bring vim-plug to lua.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">Plug</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">fn</span><span class="p">[</span><span class="s1">\'plug#\'</span><span class="p">]</span>\n\n<span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">\'plug#begin\'</span><span class="p">,</span> <span class="s1">\'~/.config/nvim/plugged\'</span><span class="p">)</span>\n\n<span class="c1">-- List of plugins goes here</span>\n<span class="c1">-- ....</span>\n\n<span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">\'plug#end\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Those 3 lines of code are the only thing you need. You can try it, this works.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">Plug</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">fn</span><span class="p">[</span><span class="s1">\'plug#\'</span><span class="p">]</span>\n\n<span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">\'plug#begin\'</span><span class="p">,</span> <span class="s1">\'~/.config/nvim/plugged\'</span><span class="p">)</span>\n\n<span class="n">Plug</span> <span class="s1">\'wellle/targets.vim\'</span>\n<span class="n">Plug</span> <span class="s1">\'tpope/vim-surround\'</span>\n<span class="n">Plug</span> <span class="s1">\'tpope/vim-repeat\'</span>\n\n<span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">\'plug#end\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Before you say anything, yes, all of that is valid lua. If a function only receives a single argument, and that argument is a string or a table, you can omit the parenthesis.</p>\n\n<p>If you use the second argument of <code>Plug</code> you\'ll need the parenthesis and the second argument must be a table. Let me show you. If you have this in vimscript.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code>Plug <span class="s1">\'scrooloose/nerdtree\'</span><span class="p">,</span> <span class="p">{</span><span class="s1">\'on\'</span><span class="p">:</span> <span class="s1">\'NERDTreeToggle\'</span><span class="p">}</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>In lua you\'ll need to do this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">Plug</span><span class="p">(</span><span class="s1">\'scrooloose/nerdtree\'</span><span class="p">,</span> <span class="p">{</span><span class="n">on</span> <span class="o">=</span> <span class="s1">\'NERDTreeToggle\'</span><span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Unfortunately <code>vim-plug</code> has a couple of options that will cause an error if we use this syntax, those are <code>for</code> and <code>do</code>. In this case we need to wrap the key in quotes and square brackets.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">Plug</span><span class="p">(</span><span class="s1">\'junegunn/goyo.vim\'</span><span class="p">,</span> <span class="p">{[</span><span class="s1">\'for\'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">\'markdown\'</span><span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>You might know that the <code>do</code> option takes a string or a function which will be executed when the plugin is updated or installed. But what you might not know is that we are not forced to use a "vim function", we can use lua function and it\'ll work just fine.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">Plug</span><span class="p">(</span><span class="s1">\'VonHeikemen/rubber-themes.vim\'</span><span class="p">,</span> <span class="p">{</span>\n  <span class="p">[</span><span class="s1">\'do\'</span><span class="p">]</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>\n    <span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">termguicolors</span> <span class="o">=</span> <span class="kc">true</span>\n    <span class="n">vim</span><span class="p">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">\'colorscheme rubber\'</span><span class="p">)</span>\n  <span class="k">end</span>\n<span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>There you have it. You don\'t need to use a plugin manager written in lua if you don\'t want to.</p>\n\n<h2>\n  <a name="vimscript-is-still-our-friend" href="#vimscript-is-still-our-friend">\n  </a>\n  Vimscript is still our friend\n</h2>\n\n<p>You might have notice in that last example I used <code>vim.cmd</code> to set the color scheme, this is because there are still things we can\'t do with lua. And so what we do is use <code>vim.cmd</code> to call vimscript commands (or expressions) that don\'t have a lua equivalent.</p>\n\n<p>One interestings thing you should know is <code>vim.cmd</code> can execute multiple lines of vimscript. It means that we can do lots of things in a single call.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">cmd</span> <span class="s">[[\n  syntax enable\n  colorscheme rubber\n]]</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>So anything that you can\'t "translate" to lua you can put it in a string and pass that to <code>vim.cmd</code>.</p>\n\n<p>I told you we can execute any vim command, right? I feel compelled to tell you this includes the <code>source</code> command. For those who don\'t know, <code>source</code> allows us to call other files written in vimscript. For example, if you have lots of keybindings writing in vimscript but don\'t wish to convert them to lua right now, you can create a script called <code>keymaps.vim</code> and call it.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">cmd</span> <span class="s1">\'source ~/.config/nvim/keymaps.vim\'</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<h2>\n  <a name="keybindings" href="#keybindings">\n  </a>\n  Keybindings\n</h2>\n\n<p>No, we don\'t need vimscript for this. We can do it in lua.</p>\n\n<p>We can create our keybindings using <code>vim.keymap.set</code>. This functions takes 4 arguments.</p>\n\n<ul>\n<li>Mode. But not the name of the mode, we need the abbreviation. You can find a list of valid options <a href="https://github.com/nanotee/nvim-lua-guide#defining-mappings">here</a>.</li>\n<li>Key we want to bind.</li>\n<li>Action we want to execute.</li>\n<li>Extra arguments. These are the same options we would use in vimscript, you can find the list <a href="https://neovim.io/doc/user/map.html#:map-arguments">here</a>. Also, check the documentation <a href="https://neovim.io/doc/user/lua.html#vim.keymap.set()">:help vim.keymap.set()</a>.</li>\n</ul>\n\n<p>So if we wanted to translate this to lua.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code>nnoremap <span class="p">&lt;</span>Leader<span class="p">&gt;</span><span class="k">w</span> <span class="p">:</span><span class="k">write</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>We would have to do this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">\'n\'</span><span class="p">,</span> <span class="s1">\'&lt;Leader&gt;w\'</span><span class="p">,</span> <span class="s1">\':write&lt;CR&gt;\'</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>By default our keybindings will be "non recursive", it means that we don\'t have to worry about infinite loops. This opens the possibility to create alternatives of built-in keybindings. For example, we could center the screen after making a search with <code>*</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">\'n\'</span><span class="p">,</span> <span class="s1">\'*\'</span><span class="p">,</span> <span class="s1">\'*zz\'</span><span class="p">,</span> <span class="p">{</span><span class="n">desc</span> <span class="o">=</span> <span class="s1">\'Search and center screen\'</span><span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>In here we are using <code>*</code> in the key and the action, and we won\'t have any conflict.</p>\n\n<p>But sometimes we do need recursive bindings, most of the time when the action we want to execute was created by a plugin. In this case we can use <code>remap = true</code> in the last parameter.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">\'n\'</span><span class="p">,</span> <span class="s1">\'&lt;leader&gt;e\'</span><span class="p">,</span> <span class="s1">\'%\'</span><span class="p">,</span> <span class="p">{</span><span class="n">remap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="s1">\'Go to matching pair\'</span><span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Now the best part, <code>vim.keymap.set</code> can use a lua function as the action.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">\'n\'</span><span class="p">,</span> <span class="s1">\'Q\'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>\n  <span class="nb">print</span><span class="p">(</span><span class="s1">\'Hello\'</span><span class="p">)</span>\n<span class="k">end</span><span class="p">,</span> <span class="p">{</span><span class="n">desc</span> <span class="o">=</span> <span class="s1">\'Say hello\'</span><span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Let\'s talk about the <code>desc</code> option. This allows us to add a description to our keybindings. We can read these description if we use the command <code>:map &lt;keybinding&gt;</code>.</p>\n\n<p>So executing <code>:map *</code> will show us.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>n  *           * *zz\n                 Search and center screen\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>It becomes specially useful when using binding lua functions. If we inspect our <code>Q</code> mapping with <code>:map Q</code> we will get.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>n  Q           * &lt;Lua function 50&gt;\n                 Say hello\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Notice we can\'t see the source for our function but at least we see the description and know what it can do. It is worth mention that plugins can read this property and show it with a nice presentation.</p>\n\n<h2>\n  <a name="user-commands" href="#user-commands">\n  </a>\n  User commands\n</h2>\n\n<p>Since version v0.7 we can create our own "ex-commands" using lua, with the function <code>vim.api.nvim_create_user_command</code>.</p>\n\n<p><code>nvim_create_user_command</code> expects three arguments:</p>\n\n<ul>\n<li>Name of the command. It <strong>must</strong> begin with an uppercase letter.</li>\n<li>Command. Can be a string or a lua function.</li>\n<li>Attributes. A lua table with the options for our command. You can find details in the documentation <a href="https://neovim.io/doc/user/api.html#nvim_create_user_command()">:help nvim_create_user_command()</a> and also <a href="https://neovim.io/doc/user/map.html#command-attributes">:help command-attributes</a>.</li>\n</ul>\n\n<p>Say we have this command in vimscript.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code>command<span class="p">!</span> <span class="p">-</span>bang ProjectFiles <span class="k">call</span> fzf#<span class="k">vim</span>#<span class="k">files</span><span class="p">(</span><span class="s1">\'~/projects\'</span><span class="p">,</span> <span class="p">&lt;</span>bang<span class="p">&gt;</span><span class="m">0</span><span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Using lua we have the possibility of using the vimscript command in a string.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_user_command</span><span class="p">(</span>\n  <span class="s1">\'ProjectFiles\'</span><span class="p">,</span>\n  <span class="s2">"call fzf#vim#files(\'~/projects\', &lt;bang&gt;0)"</span><span class="p">,</span>\n  <span class="p">{</span><span class="n">bang</span> <span class="o">=</span> <span class="kc">true</span><span class="p">}</span>\n<span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Or, we could use a lua function.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_user_command</span><span class="p">(</span>\n  <span class="s1">\'ProjectFiles\'</span><span class="p">,</span>\n  <span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>\n    <span class="n">vim</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">\'fzf#vim#files\'</span><span class="p">,</span> <span class="s1">\'~/projects\'</span><span class="p">,</span> <span class="n">input</span><span class="p">.</span><span class="n">bang</span><span class="p">)</span>\n  <span class="k">end</span><span class="p">,</span>\n  <span class="p">{</span><span class="n">bang</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="s1">\'Search projects folder\'</span><span class="p">}</span>\n<span class="p">)</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Yes, we can also add a description to user commands. We read these descriptions using the command <code>:command &lt;name&gt;</code>. But they will only appear if our command is bound to a lua function. So the command <code>:command ProjectFiles</code> will show this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>    Name              Args Address Complete    Definition\n!   ProjectFiles      0                        Search projects folder\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>If the command had been vimscript expression the that expression will appear in the <code>Definition</code> column.</p>\n\n<h2>\n  <a name="autocommands" href="#autocommands">\n  </a>\n  Autocommands\n</h2>\n\n<p>With autocommands we execute functions and expressions on certain events. See <a href="https://neovim.io/doc/user/autocmd.html#events">:help events</a> for a list of built-in events.</p>\n\n<p>If we wanted to modify the <code>rubber</code> colorscheme a little bit we would do something like this.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight viml"><code>augroup highlight_cmds\n  autocmd<span class="p">!</span>\n  autocmd <span class="nb">ColorScheme</span> rubber <span class="nb">highlight</span> String guifg<span class="p">=</span><span class="mh">#FFEB95</span>\naugroup END\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<blockquote>\n<p>This block should be executed before calling the <code>colorscheme</code> command.</p>\n</blockquote>\n\n<p>This would be the equivalent in lua.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">augroup</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_augroup</span><span class="p">(</span><span class="s1">\'highlight_cmds\'</span><span class="p">,</span> <span class="p">{</span><span class="n">clear</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>\n\n<span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_autocmd</span><span class="p">(</span><span class="s1">\'ColorScheme\'</span><span class="p">,</span> <span class="p">{</span>\n  <span class="n">pattern</span> <span class="o">=</span> <span class="s1">\'rubber\'</span><span class="p">,</span>\n  <span class="n">group</span> <span class="o">=</span> <span class="n">augroup</span><span class="p">,</span>\n  <span class="n">command</span> <span class="o">=</span> <span class="s1">\'highlight String guifg=#FFEB95\'</span>\n<span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Notice here we are using an option called <code>command</code>, this can only execute vimscript. If we wanted to use a lua function we need to replace <code>command</code> with an option called <code>callback</code>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">augroup</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_augroup</span><span class="p">(</span><span class="s1">\'highlight_cmds\'</span><span class="p">,</span> <span class="p">{</span><span class="n">clear</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>\n\n<span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_create_autocmd</span><span class="p">(</span><span class="s1">\'ColorScheme\'</span><span class="p">,</span> <span class="p">{</span>\n  <span class="n">pattern</span> <span class="o">=</span> <span class="s1">\'rubber\'</span><span class="p">,</span>\n  <span class="n">group</span> <span class="o">=</span> <span class="n">augroup</span><span class="p">,</span>\n  <span class="n">desc</span> <span class="o">=</span> <span class="s1">\'Change string highlight\'</span><span class="p">,</span>\n  <span class="n">callback</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>\n    <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_set_hl</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">\'String\'</span><span class="p">,</span> <span class="p">{</span><span class="n">fg</span> <span class="o">=</span> <span class="s1">\'#FFEB95\'</span><span class="p">})</span>\n  <span class="k">end</span>\n<span class="p">})</span>\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Just like the previous apis we can add a description for autocommands. To inspect an autocommand use the command <code>:autocmd &lt;event&gt; &lt;pattern&gt;</code>. But just like user commands they will only be available for inspection when using a lua function. If we check with <code>:autocmd ColorScheme rubber</code> will get.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>ColorScheme\n    rubber    Change string highlight\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>To know more details about autocommands checkout the documentation, see <a href="https://neovim.io/doc/user/api.html#nvim_create_autocmd()">:help nvim_create_autocmd()</a> and <a href="https://neovim.io/doc/user/autocmd.html#autocommand">:help autocmd</a>.</p>\n\n<h2>\n  <a name="plugin-manager" href="#plugin-manager">\n  </a>\n  Plugin manager\n</h2>\n\n<p>You might want a plugin manager that is written in lua, just because. It appears that right now these are your options:</p>\n\n<ul>\n<li><a href="https://github.com/savq/paq-nvim/">paq</a></li>\n</ul>\n\n<p>A plugin manager that is simple and fast. I\'m serious, this thing has less than 300 lines of code. It was created to download, update and remove plugins. That\'s it. If you don\'t need anything else, look no further, this is the plugin manager you want.</p>\n\n<ul>\n<li><a href="https://github.com/wbthomason/packer.nvim">packer</a></li>\n</ul>\n\n<p>If you want more features <code>packer</code> is the alternative. It has the basic features you would expect, it offers lazy-loading capabilities, has support for <code>luarocks</code> (which is like a package manager for lua), it can handle "local plugins". And does other things I don\'t understand, but the point is that is a feature complete plugin manager.</p>\n\n<ul>\n<li><a href="https://github.com/kristijanhusak/vim-packager">vim-packager</a></li>\n</ul>\n\n<p>This one is not written in lua but I want to add it because it does offer a lua api. It offers more features than <code>paq</code> but not as much a <code>packer</code>, so if you are looking for a middle ground between those two, this might be a good choice.</p>\n\n<h2>\n  <a name="conclusion" href="#conclusion">\n  </a>\n  Conclusion\n</h2>\n\n<p>Recap time. We learned how to use lua from vimscript. We now know how to use vimscript from lua. We have the tools to activate, deactivate and modify all sorts of options and variables in neovim. We got to know the methods we have available to create our keymaps. We learned about commands and autocommands. We figure out how to use plugin managers that aren\'t written in lua, and saw a few alternatives that are written in lua. I say we are ready to use lua in neovim.</p>\n\n<p>For those who want to see a real world usage or whatever, I\'ll share a link to my current config in github:</p>\n\n<ul>\n<li><a href="https://github.com/VonHeikemen/dotfiles/tree/057f4d604e31ad121c4b4b36fd7e4148483d50c8/my-configs/neovim">neovim (v0.6)</a></li>\n<li><a href="https://github.com/VonHeikemen/dotfiles/tree/master/my-configs/neovim">neovim (v0.7+)</a></li>\n</ul>\n\n<h2>\n  <a name="sources" href="#sources">\n  </a>\n  Sources\n</h2>\n\n<ul>\n<li><a href="https://learnxinyminutes.com/docs/lua/">learn x in y minutes: where X=lua</a></li>\n<li><a href="https://github.com/nanotee/nvim-lua-guide">nvim-lua-guide</a></li>\n<li><a href="https://neovim.io/doc/user/lua.html#:lua-heredoc">:help lua-heredoc</a></li>\n<li><a href="https://neovim.io/doc/user/lua.html#lua-vim-variables">:help lua-vim-variables</a></li>\n<li><a href="https://neovim.io/doc/user/lua.html#lua-stdlib">:help lua-stdlib</a></li>\n<li><a href="https://neovim.io/doc/user/usr_41.html#function-list">:help function-list</a></li>\n<li><a href="https://github.com/curist/dotvim/blob/98b161f0759d3316fcf6a776d03665d6ab4827ee/bundles.lua">curist\'s bundle.lua</a></li>\n</ul>\n\n\n<hr>\n\n<p>Thank you for your time. If you find this article useful and want to support my efforts, consider leaving a tip in <a href="https://www.buymeacoffee.com/vonheikemen">buy me a coffee ☕</a>.</p>\n\n<p><a href="https://www.buymeacoffee.com/vonheikemen"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--IF_mutQQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/vonheikemen/image/upload/v1618466522/buy-me-coffee_ah0uzh.png" alt="buy me a coffee" loading="lazy" width="262" height="60"></a></p>\n\n',a.body_markdown="---\ntitle: Everything you need to know to configure neovim using lua\npublished: true\ndescription: Your first steps into a lua configuration\ntags: #vim #shell #neovim\ncanonical_url: https://vonheikemen.github.io/devlog/tools/configuring-neovim-using-lua/\n//cover_image: https://direct_url_to_image.jpg\n---\n\n> Pueden leer la versión en español [aquí](https://dev.to/vonheikemen/todo-lo-que-necesitan-saber-para-configurar-neovim-usando-lua-2fon).\n\nAfter a long time in development neovim 0.5 was finally released as a stable version. Among the new exciting features we have better lua support and the promise of a stable api to create our configuration using this language. So today I'm going to share with you everything I learned while I was migrating my own configuration from vimscript to lua.\n\nI'm going to talk about the things we can do with lua and its interaction with vimscript. I will be showing a lot of examples but I will not tell you what options you should set with what value. Also, this won't be a tutorial on \"how to turn neovim into an IDE\", I'll avoid anything that is language specific. What I want to do is teach you enough about lua and the neovim api so you can migrate your own configuration.\n\nI will assume your operating system is linux (or something close to it) and that your configuration is located at `~/.config/nvim/init.vim`. Everything that I will show should work on every system in which neovim can be installed, just keep in mind that the path to the `init.vim` file might be different in your case.\n\nLet us begin.\n\n## First steps\n\nThe first thing you need to know is that we can embed lua code directly in `init.vim`. So we can migrate our config piece by piece and only change from `init.vim` to `init.lua` when we are ready.\n\nLet's do the \"hello world\" to test that everything works as expected. Try this in your `init.vim`.\n\n```vim\nlua <<EOF\nprint('hello from lua')\nEOF\n```\n\nAfter \"sourcing\" the file or restarting neovim the message `hello from lua` should appear right below your statusline. In here we are using something called `lua-heredoc`, so everything that's between `<<EOF ... EOF` will be considered a lua script and will be executed by the `lua` command. This is useful when we want to execute multiple lines of code but it's not necessary when we only need one. This is valid.\n\n```vim\nlua print('this also works')\n```\n\nBut if we are going to call lua code from vimscript I say we use a real script. In lua we can do this by using the `require` function. For this to work we need to create a `lua` folder somewhere in the `runtimepath` of neovim.\n\nYou'll probably want to use the same folder where `init.vim` is located, so we will create `~/.config/nvim/lua`, and inside that we'll create a script called `basic.lua`. For now we will only print a message.\n\n```lua\nprint('hello from ~/config/nvim/lua/basic.lua')\n```\n\nNow from our `init.vim` we can call it like this.\n\n```vim\nlua require('basic')\n```\n\nWhen we do this neovim will search in every directory in the `runtimepath` for a folder called `lua` and inside that it'll look for `basic.lua`. Neovim will run the last script that meets those conditions.\n\nIf you go around and check other people's code you'll notice that they use a `.` as a path separator. For example, let's say they have the file `~/.config/nvim/lua/usermod/settings.lua`. If they want to call `settings.lua` they do this.\n\n```lua\nrequire('usermod.settings')\n```\n\nIs a very common convention. Just remember that the dot is a path separator.\n\nWith all this knowledge we are ready to begin our configuration using lua.\n\n## Editor settings\n\nEach option in neovim is available to us in the global variable called `vim`... well more than just a variable try think of this as a global module. With `vim` we have access to the editor's settings, we also have the neovim api and even a set of helper functions (a standard library if you will). For now, we only need to care about something they call \"meta-accessors\", is what we'll use to access all the options we need.\n\n### Scopes\n\nJust like in vimscript, in lua we have different scopes for each option. We have global settings, window settings, buffer settings and a few others. Each one has its own namespace inside the `vim` module.\n\n* vim.o\n\nGets or sets general settings.\n\n```lua\nvim.o.background = 'light'\n```\n\n* vim.wo\n\nGets or sets window-scoped options.\n\n```lua\nvim.wo.colorcolumn = '80'\n```\n\n* vim.bo\n\nGets or sets buffer-scoped options.\n\n```lua\nvim.bo.filetype = 'lua'\n```\n\n* vim.g\n\nGets or sets global variables. This is usually the namespace where you'll find variables set by plugins. The only one I know isn't tied to a plugin is the leader key.\n\n```lua\n-- use space as a the leader key\nvim.g.mapleader = ' '\n```\n\nYou should know that some variable names in vimscript are not valid in lua. We still have access to them but we can't use the dot notation. For example, [vim-zoom](https://github.com/dhruvasagar/vim-zoom) has a variable called `zoom#statustext` and in vimscript we use it like this.\n\n```vim\nlet g:zoom#statustext = 'Z'\n```\n\nIn lua we would have to do this.\n\n```lua\nvim.g['zoom#statustext'] = 'Z'\n```\n\nAs you might have guessed this also gives us an oportunity to access properties which have the name of keywords. You may find yourselves in a situation where you need to access a property called `for`, `do` or `end` which are reserved keywords, in those cases remember this bracket syntax.\n\n* vim.env\n\nGets or sets environment variables.\n\n```lua\nvim.env.FZF_DEFAULT_OPTS = '--layout=reverse'\n```\n\nAs far as I know if you make a change in an environment variables the change will only apply in the active neovim session.\n\nBut now how do we know which \"scope\" we need to use when we're writting our config? Don't worry about that, think of `vim.o` and company just as a way to read values. When it's time set values we can use another method.\n\n### vim.opt\n\nWith `vim.opt` we can set global, window and buffer settings.\n\n```lua\n-- buffer-scoped\nvim.opt.autoindent = true\n\n-- window-scoped\nvim.opt.cursorline = true\n\n-- global scope\nvim.opt.autowrite = true\n```\n\nWhen we use it like this `vim.opt` acts like the `:set` command in vimscript, it give us a consistent way to modify neovim's options.\n\nA funny thing you can do is assign `vim.opt` to a variable called `set`.\n\nSay we have this piece of vimscript.\n\n```vim\n\" Set the behavior of tab\nset tabstop=2\nset shiftwidth=2\nset softtabstop=2\nset expandtab\n```\n\nWe could translate this easily in lua like this.\n\n```lua\nlocal set = vim.opt\n\n-- Set the behavior of tab\nset.tabstop = 2\nset.shiftwidth = 2\nset.softtabstop = 2\nset.expandtab = true\n```\n\n> When you declare a variable do not forget the `local` keyword. In lua variables are global by default (that includes functions).\n\nAnyway, what about global variables or the environment variables? For those you should keep using `vim.g` and `vim.env` respectively\n\nWhat's interesting about `vim.opt` is that each property is a kind of special object, they are \"meta-tables\". It means that these objects implement their own behavior for certain common operations.\n\nIn the first example we had something like this: `vim.opt.autoindent = true`, and now you might think you can inspect the current value by doing this.\n\n```lua\nprint(vim.opt.autoindent)\n```\n\nYou won't get the value you expect, `print` will tell you `vim.opt.autoindent` is a table. If you want to know the value of an option you'll need to use the `:get()` method.\n\n```lua\nprint(vim.opt.autoindent:get())\n```\n\nIf you really, really want to know what's inside `vim.out.autoindent` you need to use `vim.inspect`.\n\n```lua\nprint(vim.inspect(vim.opt.autoindent))\n```\n\nOr even better, if you have version v0.7 you can inspect the value using the command `lua =`.\n\n```vim\n:lua = vim.opt.autoindent\n```\n\nNow that will show you the internal state of this property.\n\n### Types of data\n\nEven when we assign a value inside `vim.opt` there is a little bit of magic going on in the background. I think is important to know how `vim.opt` can handle different types of data and compare it with vimscript.\n\n* Booleans\n\nThese might not seem like a big deal but there is still a difference that is worth mention.\n\nIn vimscript we can enable or disable an option like this.\n\n```vim\nset cursorline\nset nocursorline\n```\n\nThis is the equivalent in lua.\n\n```lua\nvim.opt.cursorline = true\nvim.opt.cursorline = false\n```\n\n* Lists\n\nFor some options neovim expects a comma separated list. In this case we could provide it as a string ourselves.\n\n```lua\nvim.opt.wildignore = '*/cache/*,*/tmp/*'\n```\n\nOr we could use a table.\n\n```lua\nvim.opt.wildignore = {'*/cache/*', '*/tmp/*'}\n```\n\nIf you check the content of `vim.o.wildignore` you'll notice is the thing we want `*/cache/*,*/tmp/*`. If you really want to be sure you can check with this command.\n\n```vim\n:set wildignore?\n```\n\nYou'll get the same result.\n\nBut the magic does not end there. Sometimes we don't need to override the list, sometimes we need to add an item or maybe delete it. To makes things easier `vim.opt` offers support for the following operations:\n\n**Add an item to the end of the list**\n\nLet's take `errorformat` as an example. If we want to add to this list using vimscript we do this.\n\n```vim\nset errorformat+=%f\\|%l\\ col\\ %c\\|%m\n```\n\nIn lua we have a couple of ways to achieve the same goal:\n\nUsing the `+` operator.\n\n```lua\nvim.opt.errorformat = vim.opt.errorformat + '%f|%l col %c|%m'\n```\n\nOr the `:append` method.\n\n```lua\nvim.opt.errorformat:append('%f|%l col %c|%m')\n```\n\n**Add to the beginning**\n\nIn vimscript:\n\n```vim\nset errorformat^=%f\\|%l\\ col\\ %c\\|%m\n```\n\nLua:\n\n```lua\nvim.opt.errorformat = vim.opt.errorformat ^ '%f|%l col %c|%m'\n\n-- or try the equivalent\n\nvim.opt.errorformat:prepend('%f|%l col %c|%m')\n```\n\n**Delete an item**\n\nVimscript:\n\n```vim\nset errorformat-=%f\\|%l\\ col\\ %c\\|%m\n```\n\nLua:\n\n```lua\nvim.opt.errorformat = vim.opt.errorformat - '%f|%l col %c|%m'\n\n-- or the equivalent\n\nvim.opt.errorformat:remove('%f|%l col %c|%m')\n```\n\n* Pairs\n\nSome options expect a list of key-value pairs. To ilustrate this we'll use `listchars`.\n\n```vim\nset listchars=tab:▸\\ ,eol:↲,trail:·\n```\n\nIn lua we can use tables for this too.\n\n```lua\nvim.opt.listchars = {eol = '↲', tab = '▸ ', trail = '·'}\n```\n\n> Note: to actually see this on your screen you need to enable the `list` option. See [:help listchars](https://neovim.io/doc/user/options.html#'listchars').\n\nSince we are still using tables this option also supports the same operations mentioned in the previous section.\n\n## Calling vim functions\n\nVimscript like any other programming language it has its own built-in functions ([many functions](https://neovim.io/doc/user/usr_41.html#function-list)) and thanks to the `vim` module we can call them throught `vim.fn`. Just like `vim.opt`, `vim.fn` is a meta-table,  but this one is meant to provide a convenient syntax for us to call vim functions. We use it to call built-in functions, user defined functions and even functions of plugins that are not written in lua.\n\nWe could for example check the neovim version like this:\n\n```lua\nif vim.fn.has('nvim-0.7') == 1 then\n  print('we got neovim 0.7')\nend\n```\n\nWait, hold up, why are we comparing the result of `has` with a `1`? Ah, well, it turns out vimscript only included booleans in the `7.4.1154` version. So functions like `has` return `0` or `1`, and in lua both are truthy.\n\nI've already mentioned that vimscript can have variable names that are not valid in lua, in that case you know you can use square brackets like this.\n\n```lua\nvim.fn['fzf#vim#files']('~/projects', false)\n```\n\nAnother way we can solve this is by using `vim.call`.\n\n```lua\nvim.call('fzf#vim#files', '~/projects', false)\n```\n\nThose two do the exact same thing. In practice `vim.fn.somefunction()` and `vim.call('somefunction')` have the same effect.\n\nNow let me show you something cool. In this particular case the lua-vimscript integration is so good we can use a plugin manager without any special adapters.\n\n### vim-plug in lua\n\nI know there is a lot of people out there who use [vim-plug](https://github.com/junegunn/vim-plug/), you might think you need to migrate to a plugin manager that is written in lua, but that's not the case. We can use `vim.fn` and `vim.call` to bring vim-plug to lua.\n\n```lua\nlocal Plug = vim.fn['plug#']\n\nvim.call('plug#begin', '~/.config/nvim/plugged')\n\n-- List of plugins goes here\n-- ....\n\nvim.call('plug#end')\n```\n\nThose 3 lines of code are the only thing you need. You can try it, this works.\n\n```lua\nlocal Plug = vim.fn['plug#']\n\nvim.call('plug#begin', '~/.config/nvim/plugged')\n\nPlug 'wellle/targets.vim'\nPlug 'tpope/vim-surround'\nPlug 'tpope/vim-repeat'\n\nvim.call('plug#end')\n```\n\nBefore you say anything, yes, all of that is valid lua. If a function only receives a single argument, and that argument is a string or a table, you can omit the parenthesis.\n\nIf you use the second argument of `Plug` you'll need the parenthesis and the second argument must be a table. Let me show you. If you have this in vimscript.\n\n```vim\nPlug 'scrooloose/nerdtree', {'on': 'NERDTreeToggle'}\n```\n\nIn lua you'll need to do this.\n\n```lua\nPlug('scrooloose/nerdtree', {on = 'NERDTreeToggle'})\n```\n\nUnfortunately `vim-plug` has a couple of options that will cause an error if we use this syntax, those are `for` and `do`. In this case we need to wrap the key in quotes and square brackets.\n\n```lua\nPlug('junegunn/goyo.vim', {['for'] = 'markdown'})\n```\n\nYou might know that the `do` option takes a string or a function which will be executed when the plugin is updated or installed. But what you might not know is that we are not forced to use a \"vim function\", we can use lua function and it'll work just fine.\n\n```lua\nPlug('VonHeikemen/rubber-themes.vim', {\n  ['do'] = function()\n    vim.opt.termguicolors = true\n    vim.cmd('colorscheme rubber')\n  end\n})\n```\n\nThere you have it. You don't need to use a plugin manager written in lua if you don't want to.\n\n## Vimscript is still our friend\n\nYou might have notice in that last example I used `vim.cmd` to set the color scheme, this is because there are still things we can't do with lua. And so what we do is use `vim.cmd` to call vimscript commands (or expressions) that don't have a lua equivalent.\n\nOne interestings thing you should know is `vim.cmd` can execute multiple lines of vimscript. It means that we can do lots of things in a single call.\n\n```lua\nvim.cmd [[\n  syntax enable\n  colorscheme rubber\n]]\n```\n\nSo anything that you can't \"translate\" to lua you can put it in a string and pass that to `vim.cmd`.\n\nI told you we can execute any vim command, right? I feel compelled to tell you this includes the `source` command. For those who don't know, `source` allows us to call other files written in vimscript. For example, if you have lots of keybindings writing in vimscript but don't wish to convert them to lua right now, you can create a script called `keymaps.vim` and call it.\n\n```lua\nvim.cmd 'source ~/.config/nvim/keymaps.vim'\n```\n\n## Keybindings\n\nNo, we don't need vimscript for this. We can do it in lua.\n\nWe can create our keybindings using `vim.keymap.set`. This functions takes 4 arguments.\n\n* Mode. But not the name of the mode, we need the abbreviation. You can find a list of valid options [here](https://github.com/nanotee/nvim-lua-guide#defining-mappings).\n* Key we want to bind.\n* Action we want to execute.\n* Extra arguments. These are the same options we would use in vimscript, you can find the list [here](https://neovim.io/doc/user/map.html#:map-arguments). Also, check the documentation [:help vim.keymap.set()](https://neovim.io/doc/user/lua.html#vim.keymap.set()).\n\nSo if we wanted to translate this to lua.\n\n```vim\nnnoremap <Leader>w :write<CR>\n```\n\nWe would have to do this.\n\n```lua\nvim.keymap.set('n', '<Leader>w', ':write<CR>')\n```\n\nBy default our keybindings will be \"non recursive\", it means that we don't have to worry about infinite loops. This opens the possibility to create alternatives of built-in keybindings. For example, we could center the screen after making a search with `*`.\n\n```lua\nvim.keymap.set('n', '*', '*zz', {desc = 'Search and center screen'})\n```\n\nIn here we are using `*` in the key and the action, and we won't have any conflict.\n\nBut sometimes we do need recursive bindings, most of the time when the action we want to execute was created by a plugin. In this case we can use `remap = true` in the last parameter.\n\n```lua\nvim.keymap.set('n', '<leader>e', '%', {remap = true, desc = 'Go to matching pair'})\n```\n\nNow the best part, `vim.keymap.set` can use a lua function as the action.\n\n```lua\nvim.keymap.set('n', 'Q', function()\n  print('Hello')\nend, {desc = 'Say hello'})\n```\n\nLet's talk about the `desc` option. This allows us to add a description to our keybindings. We can read these description if we use the command `:map <keybinding>`.\n\nSo executing `:map *` will show us.\n\n```\nn  *           * *zz\n                 Search and center screen\n```\n\nIt becomes specially useful when using binding lua functions. If we inspect our `Q` mapping with `:map Q` we will get.\n\n```\nn  Q           * <Lua function 50>\n                 Say hello\n```\n\nNotice we can't see the source for our function but at least we see the description and know what it can do. It is worth mention that plugins can read this property and show it with a nice presentation.\n\n## User commands\n\nSince version v0.7 we can create our own \"ex-commands\" using lua, with the function `vim.api.nvim_create_user_command`.\n\n`nvim_create_user_command` expects three arguments:\n\n* Name of the command. It **must** begin with an uppercase letter.\n* Command. Can be a string or a lua function.\n* Attributes. A lua table with the options for our command. You can find details in the documentation [:help nvim_create_user_command()](https://neovim.io/doc/user/api.html#nvim_create_user_command()) and also [:help command-attributes](https://neovim.io/doc/user/map.html#command-attributes).\n\nSay we have this command in vimscript.\n\n```vim\ncommand! -bang ProjectFiles call fzf#vim#files('~/projects', <bang>0)\n```\n\nUsing lua we have the possibility of using the vimscript command in a string.\n\n```lua\nvim.api.nvim_create_user_command(\n  'ProjectFiles',\n  \"call fzf#vim#files('~/projects', <bang>0)\",\n  {bang = true}\n)\n```\n\nOr, we could use a lua function.\n\n```lua\nvim.api.nvim_create_user_command(\n  'ProjectFiles',\n  function(input)\n    vim.call('fzf#vim#files', '~/projects', input.bang)\n  end,\n  {bang = true, desc = 'Search projects folder'}\n)\n```\n\nYes, we can also add a description to user commands. We read these descriptions using the command `:command <name>`. But they will only appear if our command is bound to a lua function. So the command `:command ProjectFiles` will show this.\n\n```\n    Name              Args Address Complete    Definition\n!   ProjectFiles      0                        Search projects folder\n```\n\nIf the command had been vimscript expression the that expression will appear in the `Definition` column.\n\n## Autocommands\n\nWith autocommands we execute functions and expressions on certain events. See [:help events](https://neovim.io/doc/user/autocmd.html#events) for a list of built-in events.\n\nIf we wanted to modify the `rubber` colorscheme a little bit we would do something like this.\n\n```vim\naugroup highlight_cmds\n  autocmd!\n  autocmd ColorScheme rubber highlight String guifg=#FFEB95\naugroup END\n```\n\n> This block should be executed before calling the `colorscheme` command.\n\nThis would be the equivalent in lua.\n\n```lua\nlocal augroup = vim.api.nvim_create_augroup('highlight_cmds', {clear = true})\n\nvim.api.nvim_create_autocmd('ColorScheme', {\n  pattern = 'rubber',\n  group = augroup,\n  command = 'highlight String guifg=#FFEB95'\n})\n```\n\nNotice here we are using an option called `command`, this can only execute vimscript. If we wanted to use a lua function we need to replace `command` with an option called `callback`.\n\n```lua\nlocal augroup = vim.api.nvim_create_augroup('highlight_cmds', {clear = true})\n\nvim.api.nvim_create_autocmd('ColorScheme', {\n  pattern = 'rubber',\n  group = augroup,\n  desc = 'Change string highlight',\n  callback = function()\n    vim.api.nvim_set_hl(0, 'String', {fg = '#FFEB95'})\n  end\n})\n```\n\nJust like the previous apis we can add a description for autocommands. To inspect an autocommand use the command `:autocmd <event> <pattern>`. But just like user commands they will only be available for inspection when using a lua function. If we check with `:autocmd ColorScheme rubber` will get.\n\n```\nColorScheme\n    rubber    Change string highlight\n```\n\nTo know more details about autocommands checkout the documentation, see [:help nvim_create_autocmd()](https://neovim.io/doc/user/api.html#nvim_create_autocmd()) and [:help autocmd](https://neovim.io/doc/user/autocmd.html#autocommand).\n\n## Plugin manager\n\nYou might want a plugin manager that is written in lua, just because. It appears that right now these are your options:\n\n* [paq](https://github.com/savq/paq-nvim/)\n\nA plugin manager that is simple and fast. I'm serious, this thing has less than 300 lines of code. It was created to download, update and remove plugins. That's it. If you don't need anything else, look no further, this is the plugin manager you want.\n\n* [packer](https://github.com/wbthomason/packer.nvim)\n\nIf you want more features `packer` is the alternative. It has the basic features you would expect, it offers lazy-loading capabilities, has support for `luarocks` (which is like a package manager for lua), it can handle \"local plugins\". And does other things I don't understand, but the point is that is a feature complete plugin manager.\n\n* [vim-packager](https://github.com/kristijanhusak/vim-packager)\n\nThis one is not written in lua but I want to add it because it does offer a lua api. It offers more features than `paq` but not as much a `packer`, so if you are looking for a middle ground between those two, this might be a good choice.\n\n## Conclusion\n\nRecap time. We learned how to use lua from vimscript. We now know how to use vimscript from lua. We have the tools to activate, deactivate and modify all sorts of options and variables in neovim. We got to know the methods we have available to create our keymaps. We learned about commands and autocommands. We figure out how to use plugin managers that aren't written in lua, and saw a few alternatives that are written in lua. I say we are ready to use lua in neovim.\n\nFor those who want to see a real world usage or whatever, I'll share a link to my current config in github:\n\n* [neovim (v0.6)](https://github.com/VonHeikemen/dotfiles/tree/057f4d604e31ad121c4b4b36fd7e4148483d50c8/my-configs/neovim)\n* [neovim (v0.7+)](https://github.com/VonHeikemen/dotfiles/tree/master/my-configs/neovim)\n\n## Sources\n\n* [learn x in y minutes: where X=lua](https://learnxinyminutes.com/docs/lua/)\n* [nvim-lua-guide](https://github.com/nanotee/nvim-lua-guide)\n* [:help lua-heredoc](https://neovim.io/doc/user/lua.html#:lua-heredoc)\n* [:help lua-vim-variables](https://neovim.io/doc/user/lua.html#lua-vim-variables)\n* [:help lua-stdlib](https://neovim.io/doc/user/lua.html#lua-stdlib)\n* [:help function-list](https://neovim.io/doc/user/usr_41.html#function-list)\n* [curist's bundle.lua](https://github.com/curist/dotvim/blob/98b161f0759d3316fcf6a776d03665d6ab4827ee/bundles.lua)\n\n---\n\nThank you for your time. If you find this article useful and want to support my efforts, consider leaving a tip in [buy me a coffee ☕](https://www.buymeacoffee.com/vonheikemen).\n\n[![buy me a coffee](https://res.cloudinary.com/vonheikemen/image/upload/v1618466522/buy-me-coffee_ah0uzh.png)](https://www.buymeacoffee.com/vonheikemen)",a.user={name:"Heiker",username:"vonheikemen",twitter_username:n,github_username:"VonHeikemen",website_url:"https://vonheikemen.github.io/devlog/",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--BbSJZtOQ--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/65519/d401e4a8-cfe6-4c6d-a06b-8265b5f0fcc0.jpg",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--ZkVFP3Z5--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/65519/d401e4a8-cfe6-4c6d-a06b-8265b5f0fcc0.jpg"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:a}},error:n,state:{currentArticle:a},serverRendered:!0,routePath:"/vonheikemen/778660",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:n}}}}(null,"2021-08-02T00:28:53Z",{})</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
