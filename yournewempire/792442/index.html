<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Deploy NFTs with Truffle, IPFS OpenSea & Polygon</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Using Nuxt.js fetch() hook to build dev.to with a new look"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/nuxtstop/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600&display=swap"><link rel="preload" href="/nuxtstop/_nuxt/f6e87fb.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/6474719.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/9b75090.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/18df600.js" as="script"><link rel="preload" href="/nuxtstop/_nuxt/dc9ce94.js" as="script"><style data-vue-ssr-id="c650fd98:0 af4684f0:0 a9c71758:0 dcafa518:0 4b9cec49:0 b093d766:0 9d98bcb4:0 6b6a11ea:0 0248ed80:0 ea8e4264:0">html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{border:0 solid #e0e0e0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre{margin:0}button{background:0 0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}hr{border-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:inherit;opacity:.5}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder,textarea::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:sans-serif}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;font-family:inherit;font-size:100%}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;overflow:auto;word-break:break-word;white-space:normal}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{height:100%;font-size:18px;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}@media(min-width:640px){html{font-size:20px}}body{height:100%;min-width:320px;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:400;line-height:1.5;color:#000;background-color:#eff4f7;-webkit-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility;font-synthesis:none;font-kerning:normal;font-feature-settings:"normal","kern";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}h1,h2,h3,h4,h5,h6{color:#000;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;font-feature-settings:"normal";line-height:1.2}pre{background:#29292e;border-radius:2px;overflow:auto;padding:1rem;color:#eff1f9;line-height:1.42em;font-size:13px}@media screen and (min-width:380px){pre{font-size:15px}}pre code{background:#29292e;color:#eff0f9;white-space:pre}div.highlight pre.highlight code{font-size:inherit;padding:0}div.inner-comment div.body div.highlight pre.highlight{background:#29292e}div.inner-comment div.body div.highlight pre.highlight code{font-size:inherit;white-space:inherit;background:inherit;color:inherit}.highlight .hll{background-color:#49483e}.highlight{background:#29292e;color:#f8f8f2}.highlight .c{color:grey}.highlight .err{text-shadow:0 0 7px #f9690e}.highlight .k{color:#f39c12}.highlight .l{color:plum}.highlight .n{color:#f8f8f2}.highlight .o{color:#f9690e}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:grey}.highlight .gd{color:#f9690e}.highlight .ge{font-style:italic}.highlight .gi{color:#7ed07e}.highlight .gs{font-weight:700}.highlight .gu{color:grey}.highlight .kc,.highlight .kd{color:#f39c12}.highlight .kn{color:#f9690e}.highlight .kp,.highlight .kr,.highlight .kt{color:#f39c12}.highlight .ld{color:#f2ca27}.highlight .m{color:plum}.highlight .s{color:#f2ca27}.highlight .na{color:#7ed07e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#7ed07e}.highlight .no{color:#f39c12}.highlight .nd{color:#7ed07e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#7ed07e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#7ed07e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f9690e}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f9690e}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:plum}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#f2ca27}.highlight .se{color:plum}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#f2ca27}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#7ed07e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:plum}.vue-content-placeholders-heading__img,.vue-content-placeholders-heading__subtitle,.vue-content-placeholders-heading__title,.vue-content-placeholders-img,.vue-content-placeholders-text__line{background:#bfcdec!important}.vue-content-placeholders-is-animated .vue-content-placeholders-heading__img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle:before,.vue-content-placeholders-is-animated .vue-content-placeholders-heading__title:before,.vue-content-placeholders-is-animated .vue-content-placeholders-img:before,.vue-content-placeholders-is-animated .vue-content-placeholders-text__line:before{background:linear-gradient(90deg,transparent 0,#d3ddf9 15%,transparent 30%)!important}header[data-v-27046cca]{max-width:1280px;margin:auto;padding:1rem;height:6rem;border-bottom:1px solid rgba(0,0,0,.2)}header .logo-wrapper[data-v-27046cca],header[data-v-27046cca]{display:flex;align-items:center;justify-content:space-between}header .logo-wrapper[data-v-27046cca]{margin:0 .5rem}header .logo-wrapper svg[data-v-27046cca]{width:3rem;height:100%}header .logo-wrapper .name-wrapper[data-v-27046cca]{margin-left:.6em}header .logo-wrapper .name-wrapper .subtitle[data-v-27046cca]{font-size:1rem}header .logo-wrapper .name-wrapper .app-name[data-v-27046cca]{font-weight:700;font-size:2.25rem;line-height:1.25}header nav[data-v-27046cca]{letter-spacing:-.025rem;font-weight:600;text-transform:uppercase}header nav ul[data-v-27046cca]{display:flex}header nav ul li[data-v-27046cca]{margin:0 .5rem}header nav ul li a[data-v-27046cca]{box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;padding:.25rem 1rem;border-radius:.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header nav ul li a[data-v-27046cca]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header nav ul li a.nuxt-link-exact-active[data-v-27046cca]{cursor:default}header nav ul li a.nuxt-link-exact-active[data-v-27046cca],header nav ul li a[data-v-27046cca]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}.page-wrapper[data-v-10d06ee8]{max-width:1280px;margin:auto;padding:1rem}.article-content-wrapper[data-v-10d06ee8]{display:flex;flex-direction:column;align-items:center;margin:auto auto 2rem}@media(min-width:1024px){.article-content-wrapper[data-v-10d06ee8]{align-items:normal;flex-direction:row}}.article-content-wrapper .article-block[data-v-10d06ee8]{width:100%;max-width:880px}@media(min-width:1024px){.article-content-wrapper .article-block[data-v-10d06ee8]{margin-right:1rem;width:66.66666%;margin-bottom:2rem}}.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{max-width:880px;width:100%;position:relative}@media(min-width:1024px){.article-content-wrapper .aside-username-wrapper[data-v-10d06ee8]{display:block;width:33.33333%}}.article-content-wrapper .aside-username-wrapper .aside-username-block[data-v-10d06ee8]{position:-webkit-sticky;position:sticky;top:1rem}@media(min-width:1280px){.comments-block[data-v-10d06ee8]{margin:.5rem}}article[data-v-70afb46a]{padding:.5rem;border-radius:1rem}header h1[data-v-70afb46a],header[data-v-70afb46a]{margin-bottom:1rem}header h1[data-v-70afb46a]{font-size:2.25rem;letter-spacing:-.025rem}header .tags[data-v-70afb46a]{display:flex;flex-wrap:wrap;margin-bottom:1.5rem}header .tags .tag[data-v-70afb46a]{font-weight:500;line-height:1;padding:.5rem;margin:0 .5rem .5rem 0;border-radius:.25rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db}header .tags .tag[data-v-70afb46a]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}header .tags .tag[data-v-70afb46a]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}header .image-wrapper[data-v-70afb46a]{position:relative;padding-bottom:56.25%;background-color:#d4dfe8;margin-bottom:1.5rem;border-radius:.5rem;overflow:hidden}@media(min-width:834px){header .image-wrapper[data-v-70afb46a]{margin-bottom:1.5rem}}header .image-wrapper img[data-v-70afb46a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}header .meta[data-v-70afb46a]{line-height:1;font-size:.875rem;text-transform:uppercase;font-weight:500;letter-spacing:-.025rem;display:flex;align-items:center;justify-content:space-between}header .meta .scl[data-v-70afb46a]{display:flex}header .meta .scl span[data-v-70afb46a]{display:flex;align-items:center;margin-right:1rem}header .meta .scl span svg[data-v-70afb46a]{margin-right:.25rem}header .meta .scl .comments[data-v-70afb46a]{cursor:pointer}[data-v-70afb46a] .content .ltag__user{display:none}[data-v-70afb46a] .content iframe{max-width:100%}[data-v-70afb46a] .content h1{font-size:1.875rem}[data-v-70afb46a] .content h1,[data-v-70afb46a] .content h2{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h2{font-size:1.5rem}[data-v-70afb46a] .content h3{font-size:1.25rem}[data-v-70afb46a] .content h3,[data-v-70afb46a] .content h4{margin-top:2rem;margin-bottom:1rem;letter-spacing:-.025rem}[data-v-70afb46a] .content h4{font-size:1rem}[data-v-70afb46a] .content a{color:#6e87d2}[data-v-70afb46a] .content p{margin-bottom:1rem;line-height:1.4}[data-v-70afb46a] .content p code{background-color:#d2f3e1;border-radius:.25rem;padding:.25rem}[data-v-70afb46a] .content img{width:100%;border-radius:.5rem}[data-v-70afb46a] .content .highlight{margin-bottom:1rem;border-radius:.5rem}[data-v-70afb46a] .content ul{list-style:numeral;margin-bottom:1rem}[data-v-70afb46a] .content ul li p{margin-bottom:0}[data-v-70afb46a] .content ol{margin-bottom:1rem}aside[data-v-37984f8c]{padding:1rem;background-color:#dfe8ef;border-radius:1rem}aside .username-heading[data-v-37984f8c]{display:flex;margin-bottom:1rem}aside .username-heading[data-v-37984f8c]:hover{color:#6e87d2}aside .username-heading img[data-v-37984f8c]{width:3rem;height:3rem;border-radius:50%;margin-right:1rem}aside .username-heading .text[data-v-37984f8c]{display:flex;flex-direction:column;justify-content:center}aside .username-heading .text a[data-v-37984f8c]{line-height:1}aside .username-heading .text a[data-v-37984f8c]:first-child{font-size:1.25rem;font-weight:500;letter-spacing:-.025rem;margin-bottom:.25rem}aside .username-heading .text a[data-v-37984f8c]:last-child{color:#999;font-size:.875rem}aside .username-heading.loading[data-v-37984f8c]{display:block}aside .f-button[data-v-37984f8c]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}aside .f-button[data-v-37984f8c]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}aside .f-button[data-v-37984f8c]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}aside .info>div[data-v-37984f8c]{margin-bottom:.5rem}aside .info .title[data-v-37984f8c]{font-size:.666666rem;letter-spacing:-.0125rem;font-weight:500;color:#999;text-transform:uppercase;margin-bottom:.1rem}aside .info .content[data-v-37984f8c]{font-size:.875rem;line-height:1.4}.add-comment[data-v-8c4375bc]{display:block;width:100%;padding:.5rem;border-radius:.5rem;box-shadow:-4px -4px 8px #f8fafe,4px 4px 8px #ced2db;text-transform:uppercase;text-align:center;font-weight:600;letter-spacing:-.025rem;margin-bottom:1rem}.add-comment[data-v-8c4375bc]:hover{background:linear-gradient(135deg,rgba(0,0,0,.09),hsla(0,0%,100%,0))}.add-comment[data-v-8c4375bc]:active{background:0 0;box-shadow:inset -4px -4px 8px #f0f3f9,inset 4px 4px 8px #ced2db,inset -1px -1px 4px #8e8e8e}footer[data-v-22cb8fd0]{padding:2rem;text-align:center;display:flex;align-items:center;justify-content:center}footer span[data-v-22cb8fd0]{display:inline-block;line-height:1;text-transform:uppercase;letter-spacing:-.025rem;font-size:.75rem;font-weight:500}footer a svg[data-v-22cb8fd0]{width:3rem;height:3rem;margin:0 .5rem}footer a .nuxt-icon[data-v-22cb8fd0]{width:2.5rem;height:2.5rem;margin:0 .25rem}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div><header data-v-27046cca><a href="/nuxtstop/" class="logo-wrapper nuxt-link-active" data-v-27046cca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-27046cca><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-27046cca></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-27046cca></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-27046cca></path></svg> <div class="name-wrapper" data-v-27046cca><span class="app-name" data-v-27046cca>Nuxtstop</span> <p class="subtitle" data-v-27046cca>For all things nuxt.js</p></div></a> <nav data-v-27046cca><ul data-v-27046cca><li data-v-27046cca><a href="/nuxtstop/" class="nuxt-link-active" data-v-27046cca>
          New
        </a></li><li data-v-27046cca><a href="/nuxtstop/top" data-v-27046cca>
          Top
        </a></li></ul></nav></header> <div class="page-wrapper" data-v-10d06ee8><div class="article-content-wrapper" data-v-10d06ee8><article data-fetch-key="data-v-70afb46a:0" class="article-block" data-v-70afb46a data-v-10d06ee8><header data-v-70afb46a><h1 data-v-70afb46a>Deploy NFTs with Truffle, IPFS OpenSea & Polygon</h1> <div class="tags" data-v-70afb46a><a href="/nuxtstop/t/javascript" class="tag" data-v-70afb46a>
          #javascript
        </a><a href="/nuxtstop/t/solidity" class="tag" data-v-70afb46a>
          #solidity
        </a><a href="/nuxtstop/t/opensea" class="tag" data-v-70afb46a>
          #opensea
        </a><a href="/nuxtstop/t/ethereum" class="tag" data-v-70afb46a>
          #ethereum
        </a></div> <div class="image-wrapper" data-v-70afb46a><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0380aRPm--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kidy47ixd0va1c8azxu2.png" alt="Deploy NFTs with Truffle, IPFS OpenSea & Polygon" data-v-70afb46a></div> <div class="meta" data-v-70afb46a><div class="scl" data-v-70afb46a><span data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M16.4444 3C14.6733 3 13.0333 3.94162 12 5.34C10.9667 3.94162 9.32667 3 7.55556 3C4.49222 3 2 5.52338 2 8.625C2 14.8024 11.0267 20.586 11.4122 20.829C11.5922 20.9426 11.7956 21 12 21C12.2044 21 12.4078 20.9426 12.5878 20.829C12.9733 20.586 22 14.8024 22 8.625C22 5.52338 19.5078 3 16.4444 3Z" fill="#FF0000" data-v-70afb46a data-v-70afb46a></path></svg>
            63
          </span> <span class="comments" data-v-70afb46a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-70afb46a data-v-70afb46a><path d="M6.11765 22H4.94118L5.64706 21.05C6.11765 20.3969 6.41176 19.5656 6.58824 18.5563C3.64706 17.1906 2 14.6375 2 11.3125C2 6.20625 5.82353 3 12 3C18.1765 3 22 6.20625 22 11.3125C22 16.5375 18.2353 19.625 12 19.625H11.5882C10.6471 20.7531 9 22 6.11765 22ZM12 4.1875C6.47059 4.1875 3.17647 6.85937 3.17647 11.3125C3.17647 15.1125 5.47059 16.8938 7.41177 17.6656L7.82353 17.8437L7.76471 18.3187C7.64706 19.2687 7.47059 20.1 7.11765 20.8125C9.05882 20.575 10.1765 19.5656 10.8235 18.7344L11 18.4969H12C19.9412 18.4969 20.8235 13.5094 20.8235 11.3719C20.8235 6.85938 17.5294 4.1875 12 4.1875Z" fill="black" data-v-70afb46a data-v-70afb46a></path></svg>
            34
          </span></div> <time data-v-70afb46a>Sep 12 '21</time></div></header> <div class="content" data-v-70afb46a><h2>
  <a name="intro-to-me-my-first-post" href="#intro-to-me-my-first-post">
  </a>
  Intro to me. My first post
</h2>

<p>Hello, I have been learning Information Technology all my life (21 now), it's my <em>profession</em>. For the past 18 months, studying JS and Solidity has been ideal. Considering the position I was in, which was 2 years of messing with industries I had no interest in, programming has helped me hugely with my adult life. It has provided me meaning and something to structure my life with/around, and taught me to organise my life. I was confused after leaving college in 2018, finishing my course in IT, but having no clue of where I was going to be. As I was growing up, I was scared of anything more than simple, like programming. I was not <strong>curious</strong> to learn anything and would be anxious of what others thought of me when I succeeded/failed. Slowly, I came out of this hole. This required me to be more self-aware. I learn't my skills, starting in small baby steps (helloWorld.js, print to console and all that :D.) which is definitely the way to go. Patience was key. With experience in React.js and Express.js, as well as Solidity, I am aiming for a career as a full-stack blockchain app dev. </p>

<h2>
  <a name="the-old-github-repo" href="#the-old-github-repo">
  </a>
  <a href="https://github.com/YourNewEmpire/Truffle-Tutorial-ERC721">The OLD GitHub Repo</a>
</h2>

<h2>
  <a name="the-new-hardhat-repo-with-metatxs-on-polygon" href="#the-new-hardhat-repo-with-metatxs-on-polygon">
  </a>
  <a href="https://github.com/YourNewEmpire/Hardhat-Opensea-ERC721">The New Hardhat repo with MetaTXs on Polygon</a>
</h2>

<h2>
  <a name="a-new-hardhat-repo-with-metatxs-and-erc1155-support" href="#a-new-hardhat-repo-with-metatxs-and-erc1155-support">
  </a>
  <a href="https://github.com/YourNew%20on%20Polygon%20Empire/Hardhat-Opensea-Boilerplate">A New Hardhat repo with MetaTXs and ERC1155 support</a>
</h2>

<h2>
  <a name="here-you-will-learn-the-basics-of-deploying-a-simple-erc721-contract-to-the-mumbai-testnet-and-how-it-all-works" href="#here-you-will-learn-the-basics-of-deploying-a-simple-erc721-contract-to-the-mumbai-testnet-and-how-it-all-works">
  </a>
  Here you will learn the basics of deploying a simple ERC-721 contract to the <a href="https://mumbai.polygonscan.com/">Mumbai</a> testnet and how it all works.
</h2>

<p>Feel free to skip through the guide, taking only what you need and moving on. However, this is not a 'do this, then do this' tutorial (or whatever the slang is for that). I want to explain what is going on in the code, creating some knowledge for you, albeit with basic tools. Prepare for this to get verbose.</p>

<p>This is inspired by the <a href="https://docs.opensea.io/docs/developer-tutorials">ERC-721 Opensea Tutorial</a>, as well as the <a href="https://docs.openzeppelin.com/contracts/4.x/erc721">Openzeppelin ERC-721 Tutorial</a>. I plan on building my own tutorial with additional detail, and smoother guidance. You could just delegate the deploying and minting to Opensea with their frontend, but this is a basic start for developers to build project ideas off of.</p>

<p>I have found that the following are great for delving into Solidity: <a href="https://cryptodevhub.io/wiki/">CryptoDevHub</a> for direction and <a href="https://solidity-by-example.org/">Solidity By Example</a> for code examples.</p>

<p>This project uses the <a href="https://www.trufflesuite.com/docs/truffle/overview">Truffle</a> dev framework, as it is easy to begin with, and will give you experience with a node.js environment. Hardhat is preferred in the community. However, my knowledge of hardhat isn't up to standard at this moment. For the scope of this tutorial, Truffle will do nicely, but a Hardhat tutorial is due in the future. If you have 0 knowledge in solidity, you can always check out <a href="//remix.ethereum.org">Remix</a> for a quicker, smaller dev tool in the browser to get pracitising the basics of solidity.</p>

<p>My next tutorial will be focused on <a href="https://docs.openzeppelin.com/contracts/4.x/erc1155">ERC-1155</a>, the improvement on ERC-721. This newer standard allows the developer to have multiple collections of fungible and non-fungible tokens in 1 contract, reducing gas.</p>

<h2>
  <a name="token-metadata-storage" href="#token-metadata-storage">
  </a>
  Token Metadata Storage
</h2>

<p>I will be using Pinata for fast, simple uploads to IPFS. This is a third-party service. Although, In future, I would recommend grabbing <a href="https://docs.ipfs.io/">IPFS for desktop</a> so that you can run a node on a Raspberry pi or such. At the time of writing this, the performance of the IPFS network has been fluctuating. Hosting an IPFS node would be the super professional way, but out of the scope of this tutorial. You may be interested in an alternative like <a href="https://www.arweave.org/">Arweave</a>. Arweave is similar to IPFS in that its a distributed network. However, Arweave use a <em><a href="https://www.arweave.org/technology">Blockweave</a></em> approach, more similar to a chain. Basically, you can pay gas to store immutable files.</p>

<p>Let us go through some prerequisites that you will need, and links to learn more about the tools you will be using. Previous coding knowledge is a big bonus. I am using <strong>Windows 10</strong> with default cmd, not ps, but MACos and most Linux distros should function the same for this tutorial. </p>

<h2>
  <a name="prerequisites" href="#prerequisites">
  </a>
  Prerequisites
</h2>

<ul>
<li>Basic/intermediate knowledge of the Ethereum blockchain (from an app developer view)</li>
<li>Basics of Solidity, the most popular language for ethereum contracts. This includes the trusted ERC interfaces for contracts to extend, provided by <a href="https://docs.openzeppelin.com/openzeppelin/">OpenZeppelin</a>.</li>
<li>Node JS installed on your OS. Intermediate knowledge of JavaScript, node.js in particular.</li>
<li>Truffle CLI installed on your OS. Basics of Truffle dev tool</li>
<li>Basics of IPFS</li>
<li>
<strong>VS Code</strong> or another text editor IDE like atom , sublime text or eclipse</li>
<li>MetaMask browser extension, with Polygon Mumbai testnet configured. You can make a new wallet when installing it on another/new browser, to avoid using your main.</li>
<li>Git CLI for cloning the repo.</li>
<li>Create an account at <a href="https://www.pinata.cloud/">Pinata</a> for 1gb of metadata storage. </li>
<li>Create an account at <a href="https://rpc.maticvigil.com/">MaticVigil</a> for a polygon (<em>fka matic</em>) node url. Easiest third-party polygon node.</li>
</ul>

<h2>
  <a name="links" href="#links">
  </a>
  Links
</h2>

<ul>
<li><a href="https://ethereum.org/en/developers/docs/">Eth docs for devs</a></li>
<li><a href="https://docs.soliditylang.org/en/v0.8.0/">Solidity</a></li>
<li><a href="https://docs.openzeppelin.com/contracts/4.x/erc721">OpenZeppelin's ERC-721 docs</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JS docs</a></li>
<li><a href="https://nodejs.org/en/">Node.js</a></li>
<li><a href="https://www.trufflesuite.com/docs/truffle/overview">Truffle docs</a></li>
<li>
<a href="//docs.ipfs.io">IPFS docs</a> + <a href="https://www.pinata.cloud/">Pinata</a>
</li>
<li><a href="https://code.visualstudio.com/">VS code dl</a></li>
<li><a href="https://metamask.io/download">Metamask</a></li>
<li><a href="https://docs.matic.network/docs/develop/network-details/network">Configure matic networks on Metamask</a></li>
<li><a href="https://git-scm.com/">Git</a></li>
</ul>

<p>If you dont have all of these, or none, I would start by installing Node and then the rest (Truffle framework uses node.js and requires node to install it). Once you have node, you can enter <code>npm i -g truffle</code> in a fresh terminal.</p>

<h2>
  <a name="setup-environment" href="#setup-environment">
  </a>
  Setup Environment
</h2>

<p>You could start entering <code>git</code> into the console. Then, check <code>node</code> as well. With that, boot VS Code, make a new workspace or folder. Open a new terminal in the folder and clone <a href="https://github.com/YourNewEmpire/Truffle-Tutorial-ERC721">The Repo</a> with <code>git clone https://github.com/YourNewEmpire/Truffle-Tutorial-ERC721</code>. Once its cloned, enter <code>npm install</code> to install all the modules we need for this project, rudimentary npm at work here.</p>

<p>Create the file '.env' in the roof the project. This file will hold your wallet seed phrase/mnemonic and free matic node url for your scripts. Write the following lines in the file<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>MNEMONIC=
NODE_KEY=
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<h2>
  <a name="wallet" href="#wallet">
  </a>
  Wallet
</h2>

<p>To begin, lets configure metamask to connect with the mumbai testnet. <a href="https://docs.matic.network/docs/develop/network-details/network">Go here</a> to find the network details of matic/mumbai. Select the Mumbai Testnet and copy name, chainid, any 1 of the rpc urls, MATIC as the currency. Type them into your metamask here<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8suwY0pY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rncz8yrzxlznp2u1biwb.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8suwY0pY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rncz8yrzxlznp2u1biwb.png" alt="metamasknetworks" loading="lazy" width="362" height="601"></a><br>
This can be cumbersome, as metamask will close when you interact with the site again. It can be easier to type them in manually. </p>

<p>Lets get your wallet seed phrase for the environment variables so we can send transactions. Click your avatar in the top right, then settings.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--RiH2XX8K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nk8jsm7cw3tzjo9cuzpq.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--RiH2XX8K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nk8jsm7cw3tzjo9cuzpq.png" alt="metamask1" loading="lazy" width="356" height="596"></a><br>
Scroll to find Security & Privacy. Then click the red Reveal Seed button, with your password ready.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--bAOS_3QF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1pwzitvwx9fax2qprox3.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--bAOS_3QF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1pwzitvwx9fax2qprox3.png" alt="metamaskprivatekey" loading="lazy" width="358" height="602"></a></p>

<p>Copy the seed phrase, paste it into your .env, <code>MNEMONIC=private key here</code>. <strong>Now you can use this var in your deploying and minting scripts</strong>. They are already binded in the JS scripts using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">Template Literals</a> </p>

<p>You will need your eth address for the web3 scripts when minting items to yourself. Copy your address from here<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ZGZUCLKb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eiuazj5ugco5oxtni48c.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ZGZUCLKb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eiuazj5ugco5oxtni48c.png" alt="metamaskaddress" loading="lazy" width="363" height="606"></a><br>
Go to <code>truffle-tutorial\scripts\mint.js</code> in your project. Finally, paste your address into line 14 <code>const OWNER_ADDRESS = "HERE with the string quotes"</code>.</p>

<p>Head over to <a href="https://faucet.matic.network">Matic Faucet</a>, </p>
<h2>
  <a name="maticmumbai-node-url" href="#maticmumbai-node-url">
  </a>
  Matic/Mumbai node url.
</h2>

<p>Creating an account at <a href="https://rpc.maticvigil.com/">MaticVigil</a> will give you a dedicated rpc url key for smooth contract interactions.</p>

<p>Once logged in and on the Dashboard, you can Create a new app, this should appear straight away on your Dashboard. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oObAzB-0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oxryvhl5nb6t13jnvaqu.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oObAzB-0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oxryvhl5nb6t13jnvaqu.png" alt="maticvigildashboard" loading="lazy" width="880" height="307"></a></p>

<p>Copy the App Id:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--pEcFtQ2u--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z3sxldswfpj2i9e6cly5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--pEcFtQ2u--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z3sxldswfpj2i9e6cly5.png" alt="maticvigilapps" loading="lazy" width="880" height="492"></a></p>

<p>Paste it into your .env <code>NODE_URL=key</code>. </p>

<p>Ok. With your environment setup, let's move on to getting token metadata ready for when tokens are minted </p>
<h2>
  <a name="metadata-format-for-opensea" href="#metadata-format-for-opensea">
  </a>
  Metadata format for Opensea
</h2>

<p>To begin here, let's look at minting NFTs at the contract level.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>    function mintItem(address player, string memory tokenURI)
        public
        onlyOwner
        returns (uint256)
    {
        _tokenIds.increment();
        uint256 newItemId = _tokenIds.current();
        _mint(player, newItemId);
        _setTokenURI(newItemId, tokenURI);
        return newItemId;
    }

</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The mint function takes 2 arguments. The important one is the tokenURI. The mintItem function calls the <code>_setTokenURI</code> function, which takes in the id (index), which was just assigned and the <a href="https://whatis.techtarget.com/definition/URI-Uniform-Resource-Identifier">URI</a>. The URI is just a link to the token resource. In our case, it's on IPFS.</p>

<p>The point here is that Opensea will be querying that tokenURI through the method <code>tokenURI</code>, part of the ERC-721 standard interface.</p>

<p>You could also set a baseURI, as mentioned <a href="https://docs.openzeppelin.com/contracts/3.x/api/token/erc721#ERC721-baseURI--">here</a>  in the OZ docs. This will be the prefix for token URIs, so that when you mint or query an NFT, you can just pass the id, and the prefix does the rest of the URI format.</p>

<p>So how does Opensea deal with a resource once it's got a URI to fetch? Here is where Opensea's <a href="https://docs.opensea.io/docs/metadata-standards#metadata-structure">Metadata Standards</a> get introduced. Following these standards are required for Opensea to read and display your metadata, you do not want a blank image for an NFT.</p>

<p>Every token URI is gonna be a JSON file looking something like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>{
  "description": "Friendly OpenSea Creature that enjoys long swims in the ocean.", 
  "external_url": "https://openseacreatures.io/3", 
  "image": "https://storage.googleapis.com/opensea-prod.appspot.com/puffs/3.png", 
  "name": "Dave Starbelly",
  "attributes": [ ... ], 
}
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Opensea is specifically looking for the names above, 'image', 'name' etc. </p>

<p>I will be using Name, Desc and Image. If you want to try audio and video, <strong>animation_url</strong> is the one as mentioned in the standards page I linked above. The image or animation url will point to another resource, also on IPFS. <strong>This is the image or video that will appear on Opensea</strong></p>

<p>As well as NFT metadata, there is <strong>Collection</strong> metadata fetched from the <code>contractUri()</code> function in the GameItem.sol contract. Each NFT contract is a Collection. Each minted token on the contract is an NFT. We will need to upload metadata for the Collection in the form of, image, name, desc. </p>

<h2>
  <a name="create-and-upload-token-metadata" href="#create-and-upload-token-metadata">
  </a>
  Create and upload token metadata
</h2>

<p>Now that we know the guidance on NFT metadata, we shall write some up before deploying any contracts. Because of IPFS, I have decided to organise my folders, separating collection data from nft data. I follow this pattern because I usually mint more than 1 nft, therefore I want to upload my media in folders. Feel free to organise them in any way you want.</p>

<p>Start by creating 2 folders in the root of the project. collection-data and nft-data, you should consider adding this to gitignore if you ever push this to GitHub. Within collection-data, have your collection image and json file like so:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zzZu-rxC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ce6xs2o1ib1tgctlpqay.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zzZu-rxC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ce6xs2o1ib1tgctlpqay.png" alt="collection-data-image" loading="lazy" width="778" height="469"></a></p>

<p>Of course, use your own values. The external_link is not crucial, but worth testing, and say if you leave name empty, Opensea will make a name. </p>

<p>As you may notice the image value is empty. We need to upload the collection image first, to get the image URI for the JSON file to point to, which we will upload next. Despite that they are together in a folder in the project, the image needs to be uploaded before the json.</p>

<p>Once you have your test collection image ready, open up Pinata IPFS from the prerequisites and upload it. After logging in, you will land straight at the uploading page. Click <em>Upload a File</em> and pick the collection image from your project in the file explorer.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--mZEosfWj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0v3z6ltxw4sewjfem6m.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--mZEosfWj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0v3z6ltxw4sewjfem6m.png" alt="collection-image-upload" loading="lazy" width="880" height="477"></a></p>

<p>In your dashboard, you will see the file has a CID or Content Identifier. As described in the <a href="https://docs.ipfs.io/concepts/content-addressing/">IPFS docs</a>, the CID is an address/hash based on the content, not a location. Not necessarily important for us but interesting nonetheless. </p>

<p>Clicking on the image will send you to a pinata gateway url. I have had my best experiences in using this URI format: <code>https://ipfs.io/ipfs/your-collection-cid</code>. Copy this, and your CID from Pinata and paste it into the collection JSON in your project:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>{
      "name": "Collection Name",
      "description": "A test collection for ERC721 tutorial",
      "image": 
"https://ipfs.io/ipfs/QmQ2CPtFwRxoASHmiqbTPSfuPr91NfbMw2fjPtgvz55LPL"
}
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>You can do the same for your nft-data. Upload the test nft image first, then copy and paste the cid into 'nft.json'. The JSON may look like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>{
    "name": "Example Coffee #1",
    "description": "I am a coffee but, this .jpg extension allows me to be warm forever.",
    "image": "https://ipfs.io/ipfs/QmSXSHaUDJTorFReSJA24HjruRo2yqYbxPUSbxG7xTi31c"
}
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Finally, you can upload your JSON files for both collection, and nft[s]. When minting <strong>multiple</strong> NFTs, I like to upload all my media in one folder, so the uri will look like: <code>https://ipfs.io/ipfs/folder-hash/nft1.jpg</code>. However, for this post I shall upload 1 jpg.</p>

<p>With that, we are done with the metadata. You will need the collection and NFT JSON CIDs for the next stage, when we will deploy and mint, ooh exciting.</p>

<h2>
  <a name="deploying-and-minting-the-nft" href="#deploying-and-minting-the-nft">
  </a>
  Deploying and Minting the NFT
</h2>

<p>With the metadata and environment all set, we can begin this stage by viewing the GameItem.sol in the contracts folder of the project. It will look like this<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>pragma solidity ^0.8.0;

import "../node_modules/@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol";
import "../node_modules/@openzeppelin/contracts/utils/Counters.sol";
import "../node_modules/@openzeppelin/contracts/access/Ownable.sol";

contract GameItem is ERC721URIStorage, Ownable {
    using Counters for Counters.Counter;
    Counters.Counter private _tokenIds;

    // set contract name and ticker. 
    constructor() ERC721("Contract Name", "TIC") {}

    //get the current supply of tokens
    function totalSupply() public view returns (uint256) {
        return _tokenIds.current();
    }

    // for opensea collection 
    function contractURI() public pure returns (string memory) {
        return "https://ipfs.io/ipfs/your-collection-ipfshash";
    }


    function mintItem(address player, string memory tokenURI)
        public
        onlyOwner
        returns (uint256)
    {
        _tokenIds.increment();
        uint256 newItemId = _tokenIds.current();
        _mint(player, newItemId);
        _setTokenURI(newItemId, tokenURI);
        return newItemId;
    }

}

</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>If you are new to Solidity, there is a bit to talk about here. Starting with pragma. Pragma simply sets the solidity compiler version to use when compiling the file. The project is using 0.8.0, the highest minor version of Solidity available, which can be set in the truffle-config.js.</p>

<p>We are then importing Ownable, for modifying function calls to owners only (you, the deployer), then Counters for the tokenId's, this is a trusted utility for keeping track of tokens safely. ERC721URIStorage inherits the classic ERC721 interface, and adds some token URI help to the contract, recently added in Openzeppelin version 4.x . You should definitely have a look at these libraries, and abstract contracts, as they are great examples for building your own interfaces.</p>

<p>The most important bit for us, is the contractURI function. As I was saying earlier, 1 ERC-721 contract is 1 collection. This function returns a string that is the URI to your collection JSON. Opensea will call this method when displaying your collection on their frontend. </p>

<p><strong>Copy your collection JSON ipfs URI into the return statement</strong>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>function contractURI() public pure returns (string memory) {
        return "https://ipfs.io/ipfs/your-collection-ipfshash";
    }
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Optionally, you may set the ticker and the token/contract name in the Constructor function. This function is ran once at deployment for initialising something. In our case, its inheriting ERC-721 through ERC721URIStorage, expecting ticker and name arguments. This a test, so I shall leave it default.</p>

<p>Providing your wallet phrase and node url are in the .env file, we can now deploy this contract. Open a new terminal in the project and enter <code>truffle develop</code>. Powershell might need the <code>npx</code> prefix. This command will prep the truffle cli for deploying, compiling and more. You could enter <code>compile</code> for a single compile without having to deploy, but when you deploy, truffle will compile anyway. </p>

<p>To deploy run <code>migrate --network mumbai</code> in the terminal. ** You may experience errors here**, especially with specific environments. These tools are certainly not perfect. A good troubleshoot would be to run migrate --network development to eliminate where the error is.</p>

<p>I got this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>Starting migrations...
======================
> Network name:    'mumbai'
> Network id:      80001
> Block gas limit: 20000000 (0x1312d00)


1_initial_migration.js
======================

   Replacing 'Migrations'
   ----------------------
   > transaction hash:    0x4f703c7184a36b92af5fdd5d7751a7ed444670031475dfc90009927b96949d82
   > Blocks: 2            Seconds: 8
   > contract address:    0xb6e5A1B174C1CA435cB43Cf61fF9064F87f5f0Ec
   > block number:        18792256
   > block timestamp:     1631363185
   > account:             0x5f4c3843495Babe89cB3516cEbD8840024e741fa
   > balance:             1.408520183748380055
   > gas used:            245600 (0x3bf60)
   > gas price:           3 gwei
   > value sent:          0 ETH
   > total cost:          0.0007368 ETH

   Pausing for 2 confirmations...
   ------------------------------
   > confirmation number: 2 (block: 18792258)

   > Saving migration to chain.
   > Saving artifacts
   -------------------------------------
   > Total cost:           0.0007368 ETH


2_deploy_token.js
=================

   Replacing 'GameItem'
   --------------------
   > transaction hash:    0x2a0bc70f5c77c9c28e4a237de7adf72bac55c5d05d744a013c1dbd67fd1f245b
   > Blocks: 2            Seconds: 4
   > contract address:    0x87E67eBEBb785060d4Ed85Bff7E67dEc9Efa87F4
   > block number:        18792264
   > block timestamp:     1631363201
   > account:             0x5f4c3843495Babe89cB3516cEbD8840024e741fa
   > balance:             1.400152706748380055
   > gas used:            2743246 (0x29dbce)
   > gas price:           3 gwei
   > value sent:          0 ETH
   > total cost:          0.008229738 ETH

   Pausing for 2 confirmations...
   ------------------------------
   > confirmation number: 2 (block: 18792266)

   > Saving migration to chain.
   > Saving artifacts
   -------------------------------------
   > Total cost:         0.008229738 ETH


Summary
=======
> Total deployments:   2
> Final cost:          0.008966538 ETH


- Blocks: 0            Seconds: 0
- Saving migration to chain.
- Blocks: 0            Seconds: 0
- Saving migration to chain.
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>Do not close the terminal, we are not done here. Above you can see that Truffle ran the Migration script, to deploy the Migrations.sol contract, which is follwed by the token script. This is truffle's way of deploying contracts. You could order more deployments by creating more js scripts in the migrations folder of the project. If you're deployment was successful, very well done to you, you have deployed your contract.</p>

<p>We need the token contract address for minting, and you could get this from the Mumbai Tesnet <a href="https://mumbai.polygonscan.com/">Block Explorer</a>, under your address. Conveniently, the address was printed to the console by truffle after deployment to the blockchain. </p>

<p>Copy the <code>contract address: your token address</code> line from the console under the 2_deploy_token.js log. Paste this into your scripts/mint.js file on line 13 like so:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>const NFT_CONTRACT_ADDRESS = "0x87E67eBEBb785060d4Ed85Bff7E67dEc9Efa87F4"
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>The web3 script will need this constant variable for instantiating the contract, to call/send methods on it. </p>

<p>The script will also need YOUR account address in the OWNER_ADDRESS variable to mint to YOU, and for you to send this transaction.</p>

<p>You may notice that we are reading the contract artifact JSON with fs:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>let rawdata = fs.readFileSync(path.resolve(__dirname, "../build/contracts/GameItem.json"));
let contractAbi = JSON.parse(rawdata);
const NFT_ABI = contractAbi.abi
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p><strong>This might need to be reworked for Linux and MACos. I am not super experienced with linux file systems</strong>. All the script is doing here is reading the contract ABI from another file in the project</p>

<p>Web3.js will need this JSON for reference when calling/sending. Therefore, if you compiled a completely different contract in the same project, you would overwrite the artifacts. <strong>Make a new project for new contracts after you're finished with this one</strong></p>

<p>For the final requirement of this script, you need the CID hash of the NFT JSON you uploaded to Pinata IPFS earlier for the argument of the mintItem function. Paste it into your script here on line 43:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>await nftContract.methods
.mintItem(OWNER_ADDRESS, `https://ipfs.io/ipfs/your-tokenjson-cid`)
.send({ from: OWNER_ADDRESS })
.then(console.log('minted'))
.catch(error => console.log(error));
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>



<p>With the script ready, run <code>node scripts/mint.js</code> in the project terminal. You can open a new terminal to do this or press CTRL+C to exit the truffle cli in the current terminal.</p>

<p>Provided that there are no errors here, 'Minted' should be printed to console and you can check your account on the block explorer to ensure that it was minted. Post any errors in the comments and google them.</p>

<p>With your Metamask logged in on your browser, let's view our NFT on Opensea via an existing contract. Go to the <a href="https://testnets.opensea.io/">Opensea Testnet</a> frontend. Open the profile icon dropdown to sign in, then click My Collections:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--6HSj9GE1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ez7y9tgx2akd7qrpqsnn.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--6HSj9GE1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ez7y9tgx2akd7qrpqsnn.png" alt="Opensea-Home" loading="lazy" width="880" height="358"></a></p>

<p>Next, tap the 3 dots menu icon, next to Create a Collection, then 'import an existing contract'. You will then be asked whether the nft is on a mainnet, testnet. Select <strong>testnet</strong> of course.</p>

<p>Now you can pass your nft contract address into the field, and select 'Mumbai' in the dropdown on the left like so: </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--lQdmGD87--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/g9lnnmdgrxvhjbkziftd.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--lQdmGD87--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/g9lnnmdgrxvhjbkziftd.png" alt="Existing-contract-opensea" loading="lazy" width="880" height="187"></a></p>

<p>You may receive the following message: 'We couldn't find this contract. Please ensure that this is a valid ERC721 or ERC1155 contract deployed on Mumbai and that you have already minted items on the contract'.</p>

<p>This is a common issue, as Opensea will display your tokens when they can. As long as you can see the token contract and transactions on Polygon Scan, you know it is a valid ERC-721 contract and has minted 1 item. <a href="https://forum.openzeppelin.com/t/how-to-view-nft-deployed-and-minted-on-mumbai-testnet-on-opensea-testnet/10299">Some dev's</a> have waited 24 hours + to get their NFTs to appear.</p>

<p>Here is <a href="https://testnets.opensea.io/assets/mumbai/0x87e67ebebb785060d4ed85bff7e67dec9efa87f4/1">my NFT</a>. I made the mistake of not adding the collection hash to the contractURI function in my first attempt. Despite redeploying the contract with the fix, Opensea still cant read the collection metadata. Fortunately, you can change this by editing the collection. At least my 'Example Coffee' NFT metadata worked.</p>

<h2>
  <a name="final-notes-and-conclusion" href="#final-notes-and-conclusion">
  </a>
  Final notes and Conclusion
</h2>

<p>With all the action behind us, let's have a review.</p>

<p>You have learnt a simple way of deploying ERC-721 tokens to the Polygon testnet, nice. You can repeat this process for Matic mainnet, providing you have MATIC tokens on your mainnet balance, and you edit your mint script to instantiate with the <code>MATIC</code> keyword as oppose to <code>MUMBAI</code> on line 31 of mint.js. </p>

<p>There are few extras that I missed for this tutorial. </p>

<p>Firstly, I could have verified the contracts for a more professional look. Although, it is easier to do this in Hardhat, despite the fact that I cannot get a working example with Hardhat yet. Truffle requires more configuration for verifying contracts, therefore I will leave this for the next tutorial. </p>

<p>Optionally, you can add extra code to your contract to avoid gas fees when selling items from Opensea. <a href="https://docs.opensea.io/docs/polygon-basic-integration">The Opensea documentation</a> explains how to work it. Simply, you set Opensea's matic contract address as your operator for your contract. With this, Opensea can transfer NFTs for you, saving you, or any owner gas.</p>

<p>In addition to these extras, you might want to check out <a href="https://support.opensea.io/hc/en-us/articles/1500012270982-What-is-Freezing-Metadata-#:~:text=Freezing%20your%20metadata%20will%20permanently,never%20be%20lost%20or%20missing.">freezing your metadata</a> in production. This is a feature by Opensea to stop mutable metadata. NFT buyers and sellers will be  comforted to see that their metadata is frozen.</p>

<p>Finally, I would like to guide you towards bigger and better tutorials with these links:</p>

<ul>
<li><a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md">ERC-721 doc - The old standard we used</a></li>
<li><a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1155.md">ERC-1155 doc - The improved community standard for fungible AND non-fungibles</a></li>
<li><a href="https://www.youtube.com/watch?v=tBMk1iZa85Y">Filip from Moralis on ERC-1155</a></li>
</ul>

<h2>
  <a name="i-wish-you-the-best-and-hope-you-learnt-something" href="#i-wish-you-the-best-and-hope-you-learnt-something">
  </a>
  I wish you the best and hope you learn't something.
</h2>

<h2>
  <a name="edit" href="#edit">
  </a>
  Edit
</h2>

<h3>
  <a name="new-hardhat-repo-with-opensea-metatxs-and-support-for-erc1155721" href="#new-hardhat-repo-with-opensea-metatxs-and-support-for-erc1155721">
  </a>
  <a href="https://github.com/YourNewEmpire/Hardhat-OpenSea-Boilerplate">New Hardhat repo with OpenSea MetaTXs and support for ERC-1155/721</a>
</h3>

</div></article> <div class="aside-username-wrapper" data-v-10d06ee8><aside class="aside-username-block" data-v-37984f8c data-v-10d06ee8><div class="username-heading loading" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-heading" data-v-37984f8c><div class="vue-content-placeholders-heading__img"></div> <div class="vue-content-placeholders-heading__content"><div class="vue-content-placeholders-heading__title"></div> <div class="vue-content-placeholders-heading__subtitle"></div></div></div></div></div> <div class="info" data-v-37984f8c><div class="vue-content-placeholders vue-content-placeholders-is-animated" data-v-37984f8c><div class="vue-content-placeholders-text" data-v-37984f8c><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div><div class="vue-content-placeholders-text__line"></div></div></div></div></aside></div></div> <div class="comments-block" data-v-8c4375bc data-v-10d06ee8><!----> <a href="https://dev.to/yournewempire/deploy-nfts-with-truffle-ipfs-opensea-polygon-5581" target="_blank" rel="nofollow noopener noreferer" class="add-comment" data-v-8c4375bc>
    Add comment
  </a></div></div> <footer data-v-22cb8fd0><span data-v-22cb8fd0>Built with</span> <a href="https://nuxtjs.org" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="nuxt-icon" data-v-22cb8fd0 data-v-22cb8fd0><path d="M13.5599 8.54348L12.8055 9.87164L10.2257 5.3282L2.306 19.274H7.66815C7.66815 20.0075 8.25298 20.6021 8.97441 20.6021H2.306C1.83937 20.6021 1.40822 20.3489 1.17494 19.9379C0.941664 19.527 0.941687 19.0208 1.175 18.6099L9.09469 4.66412C9.32802 4.25316 9.75926 4 10.226 4C10.6926 4 11.1239 4.25316 11.3572 4.66412L13.5599 8.54348V8.54348Z" fill="#00C58E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M19.2769 18.6099L14.3143 9.87165L13.5599 8.54348L12.8055 9.87165L7.84343 18.6099C7.61011 19.0208 7.61009 19.527 7.84337 19.9379C8.07665 20.3489 8.50779 20.6021 8.97443 20.6021H18.1443C18.611 20.6021 19.0424 20.3491 19.2758 19.9382C19.5092 19.5272 19.5092 19.0209 19.2758 18.6099H19.2769ZM8.97443 19.274L13.5599 11.1998L18.1443 19.274H8.97443H8.97443Z" fill="#2F495E" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M22.825 19.938C22.5917 20.3489 22.1606 20.6021 21.694 20.6021H18.1443C18.8657 20.6021 19.4505 20.0075 19.4505 19.274H21.6913L15.3331 8.07696L14.3142 9.87164L13.5599 8.54348L14.2021 7.41287C14.4354 7.00192 14.8667 6.74875 15.3334 6.74875C15.8001 6.74875 16.2313 7.00192 16.4646 7.41287L22.825 18.6099C23.0583 19.0208 23.0583 19.5271 22.825 19.938V19.938Z" fill="#108775" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a> <span data-v-22cb8fd0>&</span> <a href="https://docs.dev.to/api" rel="nofollow noopener" target="_blank" data-v-22cb8fd0><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb8fd0 data-v-22cb8fd0><path d="M1.5726 5.13748C1.42945 5.20622 1.2411 5.36661 1.15822 5.48117C1 5.69503 1 5.74849 1 11.8739C1 17.9993 1 18.0528 1.15822 18.2667C1.2411 18.3812 1.42945 18.5416 1.5726 18.6104C1.8137 18.7402 2.46164 18.7478 12 18.7478C21.5384 18.7478 22.1863 18.7402 22.4274 18.6104C22.5706 18.5416 22.7589 18.3812 22.8418 18.2667C23 18.0528 23 17.9993 23 11.8739C23 5.74849 23 5.69503 22.8418 5.48117C22.7589 5.36661 22.5706 5.20622 22.4274 5.13748C22.1863 5.00764 21.5384 5 12 5C2.46164 5 1.8137 5.00764 1.5726 5.13748ZM7.7055 8.2613C8.0822 8.45989 8.59454 9.0098 8.77536 9.40694C8.89589 9.66664 8.91095 9.94922 8.91095 12.0649C8.91095 14.3104 8.90344 14.4478 8.75275 14.7839C8.51919 15.288 8.16506 15.6546 7.68288 15.899C7.26096 16.1052 7.22328 16.1128 5.7315 16.1358L4.20206 16.1663V12.1031V8.04744L5.80684 8.07035C7.27602 8.09327 7.42672 8.10854 7.7055 8.2613ZM13.6952 8.89521V9.73538H12.4521H11.2089V10.4991V11.2629H11.9623H12.7158V12.1031V12.9432H11.9623H11.2089V13.707V14.4708H12.4521H13.6952V15.3109V16.151H12C10.1315 16.151 10.0411 16.1358 9.67191 15.6928L9.47603 15.4484V12.1336C9.47603 8.46752 9.46851 8.49807 9.95069 8.20783C10.1692 8.07035 10.3425 8.05508 11.9473 8.05508H13.6952V8.89521ZM16.5658 10.3769C16.8897 11.6295 17.1685 12.6912 17.176 12.7293C17.1911 12.7675 17.4699 11.7441 17.8014 10.461C18.1254 9.17017 18.4343 8.1009 18.4795 8.08563C18.5247 8.06271 18.9541 8.06271 19.4288 8.07035L20.3028 8.09327L19.376 11.6219C18.8713 13.5542 18.4117 15.2269 18.3664 15.3261C18.0123 16.0135 17.274 16.3343 16.7164 16.0441C16.4528 15.899 16.0911 15.4865 15.9705 15.1887C15.9254 15.0665 15.4884 13.4549 15.0062 11.6142C14.524 9.76593 14.1171 8.20783 14.0945 8.15437C14.0644 8.07035 14.2301 8.05508 15.0212 8.07035L15.9856 8.09327L16.5658 10.3769Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path><path d="M5.93491 12.103V14.4707H6.27394C6.66574 14.4707 7.01983 14.3103 7.1404 14.0965C7.18559 14.0048 7.21575 13.2105 7.21575 12.0648V10.1783L6.99725 9.95683C6.80133 9.76591 6.71847 9.73535 6.35683 9.73535H5.93491V12.103Z" fill="black" data-v-22cb8fd0 data-v-22cb8fd0></path></svg></a></footer></div></div></div><script>window.__NUXT__=function(e,t,n,o){return t.type_of="article",t.id=792442,t.title="Deploy NFTs with Truffle, IPFS OpenSea & Polygon",t.description="Intro to me. My first post   Hello, I have been learning Information Technology all my life...",t.readable_publish_date="Sep 12 '21",t.slug="deploy-nfts-with-truffle-ipfs-opensea-polygon-5581",t.path="/yournewempire/deploy-nfts-with-truffle-ipfs-opensea-polygon-5581",t.url=n,t.comments_count=34,t.public_reactions_count=63,t.collection_id=e,t.published_timestamp=o,t.positive_reactions_count=63,t.cover_image="https://res.cloudinary.com/practicaldev/image/fetch/s--0380aRPm--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kidy47ixd0va1c8azxu2.png",t.social_image="https://res.cloudinary.com/practicaldev/image/fetch/s--oHw5Z1aq--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kidy47ixd0va1c8azxu2.png",t.canonical_url=n,t.created_at="2021-08-15T13:03:06Z",t.edited_at="2022-02-05T19:38:58Z",t.crossposted_at=e,t.published_at=o,t.last_comment_at="2022-02-10T12:53:22Z",t.reading_time_minutes=16,t.tag_list="javascript, solidity, opensea, ethereum",t.tags=["javascript","solidity","opensea","ethereum"],t.body_html='<h2>\n  <a name="intro-to-me-my-first-post" href="#intro-to-me-my-first-post">\n  </a>\n  Intro to me. My first post\n</h2>\n\n<p>Hello, I have been learning Information Technology all my life (21 now), it\'s my <em>profession</em>. For the past 18 months, studying JS and Solidity has been ideal. Considering the position I was in, which was 2 years of messing with industries I had no interest in, programming has helped me hugely with my adult life. It has provided me meaning and something to structure my life with/around, and taught me to organise my life. I was confused after leaving college in 2018, finishing my course in IT, but having no clue of where I was going to be. As I was growing up, I was scared of anything more than simple, like programming. I was not <strong>curious</strong> to learn anything and would be anxious of what others thought of me when I succeeded/failed. Slowly, I came out of this hole. This required me to be more self-aware. I learn\'t my skills, starting in small baby steps (helloWorld.js, print to console and all that :D.) which is definitely the way to go. Patience was key. With experience in React.js and Express.js, as well as Solidity, I am aiming for a career as a full-stack blockchain app dev. </p>\n\n<h2>\n  <a name="the-old-github-repo" href="#the-old-github-repo">\n  </a>\n  <a href="https://github.com/YourNewEmpire/Truffle-Tutorial-ERC721">The OLD GitHub Repo</a>\n</h2>\n\n<h2>\n  <a name="the-new-hardhat-repo-with-metatxs-on-polygon" href="#the-new-hardhat-repo-with-metatxs-on-polygon">\n  </a>\n  <a href="https://github.com/YourNewEmpire/Hardhat-Opensea-ERC721">The New Hardhat repo with MetaTXs on Polygon</a>\n</h2>\n\n<h2>\n  <a name="a-new-hardhat-repo-with-metatxs-and-erc1155-support" href="#a-new-hardhat-repo-with-metatxs-and-erc1155-support">\n  </a>\n  <a href="https://github.com/YourNew%20on%20Polygon%20Empire/Hardhat-Opensea-Boilerplate">A New Hardhat repo with MetaTXs and ERC1155 support</a>\n</h2>\n\n<h2>\n  <a name="here-you-will-learn-the-basics-of-deploying-a-simple-erc721-contract-to-the-mumbai-testnet-and-how-it-all-works" href="#here-you-will-learn-the-basics-of-deploying-a-simple-erc721-contract-to-the-mumbai-testnet-and-how-it-all-works">\n  </a>\n  Here you will learn the basics of deploying a simple ERC-721 contract to the <a href="https://mumbai.polygonscan.com/">Mumbai</a> testnet and how it all works.\n</h2>\n\n<p>Feel free to skip through the guide, taking only what you need and moving on. However, this is not a \'do this, then do this\' tutorial (or whatever the slang is for that). I want to explain what is going on in the code, creating some knowledge for you, albeit with basic tools. Prepare for this to get verbose.</p>\n\n<p>This is inspired by the <a href="https://docs.opensea.io/docs/developer-tutorials">ERC-721 Opensea Tutorial</a>, as well as the <a href="https://docs.openzeppelin.com/contracts/4.x/erc721">Openzeppelin ERC-721 Tutorial</a>. I plan on building my own tutorial with additional detail, and smoother guidance. You could just delegate the deploying and minting to Opensea with their frontend, but this is a basic start for developers to build project ideas off of.</p>\n\n<p>I have found that the following are great for delving into Solidity: <a href="https://cryptodevhub.io/wiki/">CryptoDevHub</a> for direction and <a href="https://solidity-by-example.org/">Solidity By Example</a> for code examples.</p>\n\n<p>This project uses the <a href="https://www.trufflesuite.com/docs/truffle/overview">Truffle</a> dev framework, as it is easy to begin with, and will give you experience with a node.js environment. Hardhat is preferred in the community. However, my knowledge of hardhat isn\'t up to standard at this moment. For the scope of this tutorial, Truffle will do nicely, but a Hardhat tutorial is due in the future. If you have 0 knowledge in solidity, you can always check out <a href="//remix.ethereum.org">Remix</a> for a quicker, smaller dev tool in the browser to get pracitising the basics of solidity.</p>\n\n<p>My next tutorial will be focused on <a href="https://docs.openzeppelin.com/contracts/4.x/erc1155">ERC-1155</a>, the improvement on ERC-721. This newer standard allows the developer to have multiple collections of fungible and non-fungible tokens in 1 contract, reducing gas.</p>\n\n<h2>\n  <a name="token-metadata-storage" href="#token-metadata-storage">\n  </a>\n  Token Metadata Storage\n</h2>\n\n<p>I will be using Pinata for fast, simple uploads to IPFS. This is a third-party service. Although, In future, I would recommend grabbing <a href="https://docs.ipfs.io/">IPFS for desktop</a> so that you can run a node on a Raspberry pi or such. At the time of writing this, the performance of the IPFS network has been fluctuating. Hosting an IPFS node would be the super professional way, but out of the scope of this tutorial. You may be interested in an alternative like <a href="https://www.arweave.org/">Arweave</a>. Arweave is similar to IPFS in that its a distributed network. However, Arweave use a <em><a href="https://www.arweave.org/technology">Blockweave</a></em> approach, more similar to a chain. Basically, you can pay gas to store immutable files.</p>\n\n<p>Let us go through some prerequisites that you will need, and links to learn more about the tools you will be using. Previous coding knowledge is a big bonus. I am using <strong>Windows 10</strong> with default cmd, not ps, but MACos and most Linux distros should function the same for this tutorial. </p>\n\n<h2>\n  <a name="prerequisites" href="#prerequisites">\n  </a>\n  Prerequisites\n</h2>\n\n<ul>\n<li>Basic/intermediate knowledge of the Ethereum blockchain (from an app developer view)</li>\n<li>Basics of Solidity, the most popular language for ethereum contracts. This includes the trusted ERC interfaces for contracts to extend, provided by <a href="https://docs.openzeppelin.com/openzeppelin/">OpenZeppelin</a>.</li>\n<li>Node JS installed on your OS. Intermediate knowledge of JavaScript, node.js in particular.</li>\n<li>Truffle CLI installed on your OS. Basics of Truffle dev tool</li>\n<li>Basics of IPFS</li>\n<li>\n<strong>VS Code</strong> or another text editor IDE like atom , sublime text or eclipse</li>\n<li>MetaMask browser extension, with Polygon Mumbai testnet configured. You can make a new wallet when installing it on another/new browser, to avoid using your main.</li>\n<li>Git CLI for cloning the repo.</li>\n<li>Create an account at <a href="https://www.pinata.cloud/">Pinata</a> for 1gb of metadata storage. </li>\n<li>Create an account at <a href="https://rpc.maticvigil.com/">MaticVigil</a> for a polygon (<em>fka matic</em>) node url. Easiest third-party polygon node.</li>\n</ul>\n\n<h2>\n  <a name="links" href="#links">\n  </a>\n  Links\n</h2>\n\n<ul>\n<li><a href="https://ethereum.org/en/developers/docs/">Eth docs for devs</a></li>\n<li><a href="https://docs.soliditylang.org/en/v0.8.0/">Solidity</a></li>\n<li><a href="https://docs.openzeppelin.com/contracts/4.x/erc721">OpenZeppelin\'s ERC-721 docs</a></li>\n<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JS docs</a></li>\n<li><a href="https://nodejs.org/en/">Node.js</a></li>\n<li><a href="https://www.trufflesuite.com/docs/truffle/overview">Truffle docs</a></li>\n<li>\n<a href="//docs.ipfs.io">IPFS docs</a> + <a href="https://www.pinata.cloud/">Pinata</a>\n</li>\n<li><a href="https://code.visualstudio.com/">VS code dl</a></li>\n<li><a href="https://metamask.io/download">Metamask</a></li>\n<li><a href="https://docs.matic.network/docs/develop/network-details/network">Configure matic networks on Metamask</a></li>\n<li><a href="https://git-scm.com/">Git</a></li>\n</ul>\n\n<p>If you dont have all of these, or none, I would start by installing Node and then the rest (Truffle framework uses node.js and requires node to install it). Once you have node, you can enter <code>npm i -g truffle</code> in a fresh terminal.</p>\n\n<h2>\n  <a name="setup-environment" href="#setup-environment">\n  </a>\n  Setup Environment\n</h2>\n\n<p>You could start entering <code>git</code> into the console. Then, check <code>node</code> as well. With that, boot VS Code, make a new workspace or folder. Open a new terminal in the folder and clone <a href="https://github.com/YourNewEmpire/Truffle-Tutorial-ERC721">The Repo</a> with <code>git clone https://github.com/YourNewEmpire/Truffle-Tutorial-ERC721</code>. Once its cloned, enter <code>npm install</code> to install all the modules we need for this project, rudimentary npm at work here.</p>\n\n<p>Create the file \'.env\' in the roof the project. This file will hold your wallet seed phrase/mnemonic and free matic node url for your scripts. Write the following lines in the file<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>MNEMONIC=\nNODE_KEY=\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<h2>\n  <a name="wallet" href="#wallet">\n  </a>\n  Wallet\n</h2>\n\n<p>To begin, lets configure metamask to connect with the mumbai testnet. <a href="https://docs.matic.network/docs/develop/network-details/network">Go here</a> to find the network details of matic/mumbai. Select the Mumbai Testnet and copy name, chainid, any 1 of the rpc urls, MATIC as the currency. Type them into your metamask here<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8suwY0pY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rncz8yrzxlznp2u1biwb.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8suwY0pY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rncz8yrzxlznp2u1biwb.png" alt="metamasknetworks" loading="lazy" width="362" height="601"></a><br>\nThis can be cumbersome, as metamask will close when you interact with the site again. It can be easier to type them in manually. </p>\n\n<p>Lets get your wallet seed phrase for the environment variables so we can send transactions. Click your avatar in the top right, then settings.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--RiH2XX8K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nk8jsm7cw3tzjo9cuzpq.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--RiH2XX8K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nk8jsm7cw3tzjo9cuzpq.png" alt="metamask1" loading="lazy" width="356" height="596"></a><br>\nScroll to find Security &amp; Privacy. Then click the red Reveal Seed button, with your password ready.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--bAOS_3QF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1pwzitvwx9fax2qprox3.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--bAOS_3QF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1pwzitvwx9fax2qprox3.png" alt="metamaskprivatekey" loading="lazy" width="358" height="602"></a></p>\n\n<p>Copy the seed phrase, paste it into your .env, <code>MNEMONIC=private key here</code>. <strong>Now you can use this var in your deploying and minting scripts</strong>. They are already binded in the JS scripts using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">Template Literals</a> </p>\n\n<p>You will need your eth address for the web3 scripts when minting items to yourself. Copy your address from here<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ZGZUCLKb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eiuazj5ugco5oxtni48c.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ZGZUCLKb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eiuazj5ugco5oxtni48c.png" alt="metamaskaddress" loading="lazy" width="363" height="606"></a><br>\nGo to <code>truffle-tutorial\\scripts\\mint.js</code> in your project. Finally, paste your address into line 14 <code>const OWNER_ADDRESS = "HERE with the string quotes"</code>.</p>\n\n<p>Head over to <a href="https://faucet.matic.network">Matic Faucet</a>, </p>\n<h2>\n  <a name="maticmumbai-node-url" href="#maticmumbai-node-url">\n  </a>\n  Matic/Mumbai node url.\n</h2>\n\n<p>Creating an account at <a href="https://rpc.maticvigil.com/">MaticVigil</a> will give you a dedicated rpc url key for smooth contract interactions.</p>\n\n<p>Once logged in and on the Dashboard, you can Create a new app, this should appear straight away on your Dashboard. </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oObAzB-0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oxryvhl5nb6t13jnvaqu.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oObAzB-0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oxryvhl5nb6t13jnvaqu.png" alt="maticvigildashboard" loading="lazy" width="880" height="307"></a></p>\n\n<p>Copy the App Id:<br>\n<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--pEcFtQ2u--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z3sxldswfpj2i9e6cly5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--pEcFtQ2u--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z3sxldswfpj2i9e6cly5.png" alt="maticvigilapps" loading="lazy" width="880" height="492"></a></p>\n\n<p>Paste it into your .env <code>NODE_URL=key</code>. </p>\n\n<p>Ok. With your environment setup, let\'s move on to getting token metadata ready for when tokens are minted </p>\n<h2>\n  <a name="metadata-format-for-opensea" href="#metadata-format-for-opensea">\n  </a>\n  Metadata format for Opensea\n</h2>\n\n<p>To begin here, let\'s look at minting NFTs at the contract level.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>    function mintItem(address player, string memory tokenURI)\n        public\n        onlyOwner\n        returns (uint256)\n    {\n        _tokenIds.increment();\n        uint256 newItemId = _tokenIds.current();\n        _mint(player, newItemId);\n        _setTokenURI(newItemId, tokenURI);\n        return newItemId;\n    }\n\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The mint function takes 2 arguments. The important one is the tokenURI. The mintItem function calls the <code>_setTokenURI</code> function, which takes in the id (index), which was just assigned and the <a href="https://whatis.techtarget.com/definition/URI-Uniform-Resource-Identifier">URI</a>. The URI is just a link to the token resource. In our case, it\'s on IPFS.</p>\n\n<p>The point here is that Opensea will be querying that tokenURI through the method <code>tokenURI</code>, part of the ERC-721 standard interface.</p>\n\n<p>You could also set a baseURI, as mentioned <a href="https://docs.openzeppelin.com/contracts/3.x/api/token/erc721#ERC721-baseURI--">here</a>  in the OZ docs. This will be the prefix for token URIs, so that when you mint or query an NFT, you can just pass the id, and the prefix does the rest of the URI format.</p>\n\n<p>So how does Opensea deal with a resource once it\'s got a URI to fetch? Here is where Opensea\'s <a href="https://docs.opensea.io/docs/metadata-standards#metadata-structure">Metadata Standards</a> get introduced. Following these standards are required for Opensea to read and display your metadata, you do not want a blank image for an NFT.</p>\n\n<p>Every token URI is gonna be a JSON file looking something like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>{\n  "description": "Friendly OpenSea Creature that enjoys long swims in the ocean.", \n  "external_url": "https://openseacreatures.io/3", \n  "image": "https://storage.googleapis.com/opensea-prod.appspot.com/puffs/3.png", \n  "name": "Dave Starbelly",\n  "attributes": [ ... ], \n}\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Opensea is specifically looking for the names above, \'image\', \'name\' etc. </p>\n\n<p>I will be using Name, Desc and Image. If you want to try audio and video, <strong>animation_url</strong> is the one as mentioned in the standards page I linked above. The image or animation url will point to another resource, also on IPFS. <strong>This is the image or video that will appear on Opensea</strong></p>\n\n<p>As well as NFT metadata, there is <strong>Collection</strong> metadata fetched from the <code>contractUri()</code> function in the GameItem.sol contract. Each NFT contract is a Collection. Each minted token on the contract is an NFT. We will need to upload metadata for the Collection in the form of, image, name, desc. </p>\n\n<h2>\n  <a name="create-and-upload-token-metadata" href="#create-and-upload-token-metadata">\n  </a>\n  Create and upload token metadata\n</h2>\n\n<p>Now that we know the guidance on NFT metadata, we shall write some up before deploying any contracts. Because of IPFS, I have decided to organise my folders, separating collection data from nft data. I follow this pattern because I usually mint more than 1 nft, therefore I want to upload my media in folders. Feel free to organise them in any way you want.</p>\n\n<p>Start by creating 2 folders in the root of the project. collection-data and nft-data, you should consider adding this to gitignore if you ever push this to GitHub. Within collection-data, have your collection image and json file like so:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zzZu-rxC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ce6xs2o1ib1tgctlpqay.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zzZu-rxC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ce6xs2o1ib1tgctlpqay.png" alt="collection-data-image" loading="lazy" width="778" height="469"></a></p>\n\n<p>Of course, use your own values. The external_link is not crucial, but worth testing, and say if you leave name empty, Opensea will make a name. </p>\n\n<p>As you may notice the image value is empty. We need to upload the collection image first, to get the image URI for the JSON file to point to, which we will upload next. Despite that they are together in a folder in the project, the image needs to be uploaded before the json.</p>\n\n<p>Once you have your test collection image ready, open up Pinata IPFS from the prerequisites and upload it. After logging in, you will land straight at the uploading page. Click <em>Upload a File</em> and pick the collection image from your project in the file explorer.</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--mZEosfWj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0v3z6ltxw4sewjfem6m.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--mZEosfWj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0v3z6ltxw4sewjfem6m.png" alt="collection-image-upload" loading="lazy" width="880" height="477"></a></p>\n\n<p>In your dashboard, you will see the file has a CID or Content Identifier. As described in the <a href="https://docs.ipfs.io/concepts/content-addressing/">IPFS docs</a>, the CID is an address/hash based on the content, not a location. Not necessarily important for us but interesting nonetheless. </p>\n\n<p>Clicking on the image will send you to a pinata gateway url. I have had my best experiences in using this URI format: <code>https://ipfs.io/ipfs/your-collection-cid</code>. Copy this, and your CID from Pinata and paste it into the collection JSON in your project:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>{\n      "name": "Collection Name",\n      "description": "A test collection for ERC721 tutorial",\n      "image": \n"https://ipfs.io/ipfs/QmQ2CPtFwRxoASHmiqbTPSfuPr91NfbMw2fjPtgvz55LPL"\n}\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>You can do the same for your nft-data. Upload the test nft image first, then copy and paste the cid into \'nft.json\'. The JSON may look like this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>{\n    "name": "Example Coffee #1",\n    "description": "I am a coffee but, this .jpg extension allows me to be warm forever.",\n    "image": "https://ipfs.io/ipfs/QmSXSHaUDJTorFReSJA24HjruRo2yqYbxPUSbxG7xTi31c"\n}\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Finally, you can upload your JSON files for both collection, and nft[s]. When minting <strong>multiple</strong> NFTs, I like to upload all my media in one folder, so the uri will look like: <code>https://ipfs.io/ipfs/folder-hash/nft1.jpg</code>. However, for this post I shall upload 1 jpg.</p>\n\n<p>With that, we are done with the metadata. You will need the collection and NFT JSON CIDs for the next stage, when we will deploy and mint, ooh exciting.</p>\n\n<h2>\n  <a name="deploying-and-minting-the-nft" href="#deploying-and-minting-the-nft">\n  </a>\n  Deploying and Minting the NFT\n</h2>\n\n<p>With the metadata and environment all set, we can begin this stage by viewing the GameItem.sol in the contracts folder of the project. It will look like this<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>pragma solidity ^0.8.0;\n\nimport "../node_modules/@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol";\nimport "../node_modules/@openzeppelin/contracts/utils/Counters.sol";\nimport "../node_modules/@openzeppelin/contracts/access/Ownable.sol";\n\ncontract GameItem is ERC721URIStorage, Ownable {\n    using Counters for Counters.Counter;\n    Counters.Counter private _tokenIds;\n\n    // set contract name and ticker. \n    constructor() ERC721("Contract Name", "TIC") {}\n\n    //get the current supply of tokens\n    function totalSupply() public view returns (uint256) {\n        return _tokenIds.current();\n    }\n\n    // for opensea collection \n    function contractURI() public pure returns (string memory) {\n        return "https://ipfs.io/ipfs/your-collection-ipfshash";\n    }\n\n\n    function mintItem(address player, string memory tokenURI)\n        public\n        onlyOwner\n        returns (uint256)\n    {\n        _tokenIds.increment();\n        uint256 newItemId = _tokenIds.current();\n        _mint(player, newItemId);\n        _setTokenURI(newItemId, tokenURI);\n        return newItemId;\n    }\n\n}\n\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>If you are new to Solidity, there is a bit to talk about here. Starting with pragma. Pragma simply sets the solidity compiler version to use when compiling the file. The project is using 0.8.0, the highest minor version of Solidity available, which can be set in the truffle-config.js.</p>\n\n<p>We are then importing Ownable, for modifying function calls to owners only (you, the deployer), then Counters for the tokenId\'s, this is a trusted utility for keeping track of tokens safely. ERC721URIStorage inherits the classic ERC721 interface, and adds some token URI help to the contract, recently added in Openzeppelin version 4.x . You should definitely have a look at these libraries, and abstract contracts, as they are great examples for building your own interfaces.</p>\n\n<p>The most important bit for us, is the contractURI function. As I was saying earlier, 1 ERC-721 contract is 1 collection. This function returns a string that is the URI to your collection JSON. Opensea will call this method when displaying your collection on their frontend. </p>\n\n<p><strong>Copy your collection JSON ipfs URI into the return statement</strong>.<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>function contractURI() public pure returns (string memory) {\n        return "https://ipfs.io/ipfs/your-collection-ipfshash";\n    }\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Optionally, you may set the ticker and the token/contract name in the Constructor function. This function is ran once at deployment for initialising something. In our case, its inheriting ERC-721 through ERC721URIStorage, expecting ticker and name arguments. This a test, so I shall leave it default.</p>\n\n<p>Providing your wallet phrase and node url are in the .env file, we can now deploy this contract. Open a new terminal in the project and enter <code>truffle develop</code>. Powershell might need the <code>npx</code> prefix. This command will prep the truffle cli for deploying, compiling and more. You could enter <code>compile</code> for a single compile without having to deploy, but when you deploy, truffle will compile anyway. </p>\n\n<p>To deploy run <code>migrate --network mumbai</code> in the terminal. ** You may experience errors here**, especially with specific environments. These tools are certainly not perfect. A good troubleshoot would be to run migrate --network development to eliminate where the error is.</p>\n\n<p>I got this:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>Starting migrations...\n======================\n&gt; Network name:    \'mumbai\'\n&gt; Network id:      80001\n&gt; Block gas limit: 20000000 (0x1312d00)\n\n\n1_initial_migration.js\n======================\n\n   Replacing \'Migrations\'\n   ----------------------\n   &gt; transaction hash:    0x4f703c7184a36b92af5fdd5d7751a7ed444670031475dfc90009927b96949d82\n   &gt; Blocks: 2            Seconds: 8\n   &gt; contract address:    0xb6e5A1B174C1CA435cB43Cf61fF9064F87f5f0Ec\n   &gt; block number:        18792256\n   &gt; block timestamp:     1631363185\n   &gt; account:             0x5f4c3843495Babe89cB3516cEbD8840024e741fa\n   &gt; balance:             1.408520183748380055\n   &gt; gas used:            245600 (0x3bf60)\n   &gt; gas price:           3 gwei\n   &gt; value sent:          0 ETH\n   &gt; total cost:          0.0007368 ETH\n\n   Pausing for 2 confirmations...\n   ------------------------------\n   &gt; confirmation number: 2 (block: 18792258)\n\n   &gt; Saving migration to chain.\n   &gt; Saving artifacts\n   -------------------------------------\n   &gt; Total cost:           0.0007368 ETH\n\n\n2_deploy_token.js\n=================\n\n   Replacing \'GameItem\'\n   --------------------\n   &gt; transaction hash:    0x2a0bc70f5c77c9c28e4a237de7adf72bac55c5d05d744a013c1dbd67fd1f245b\n   &gt; Blocks: 2            Seconds: 4\n   &gt; contract address:    0x87E67eBEBb785060d4Ed85Bff7E67dEc9Efa87F4\n   &gt; block number:        18792264\n   &gt; block timestamp:     1631363201\n   &gt; account:             0x5f4c3843495Babe89cB3516cEbD8840024e741fa\n   &gt; balance:             1.400152706748380055\n   &gt; gas used:            2743246 (0x29dbce)\n   &gt; gas price:           3 gwei\n   &gt; value sent:          0 ETH\n   &gt; total cost:          0.008229738 ETH\n\n   Pausing for 2 confirmations...\n   ------------------------------\n   &gt; confirmation number: 2 (block: 18792266)\n\n   &gt; Saving migration to chain.\n   &gt; Saving artifacts\n   -------------------------------------\n   &gt; Total cost:         0.008229738 ETH\n\n\nSummary\n=======\n&gt; Total deployments:   2\n&gt; Final cost:          0.008966538 ETH\n\n\n- Blocks: 0            Seconds: 0\n- Saving migration to chain.\n- Blocks: 0            Seconds: 0\n- Saving migration to chain.\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>Do not close the terminal, we are not done here. Above you can see that Truffle ran the Migration script, to deploy the Migrations.sol contract, which is follwed by the token script. This is truffle\'s way of deploying contracts. You could order more deployments by creating more js scripts in the migrations folder of the project. If you\'re deployment was successful, very well done to you, you have deployed your contract.</p>\n\n<p>We need the token contract address for minting, and you could get this from the Mumbai Tesnet <a href="https://mumbai.polygonscan.com/">Block Explorer</a>, under your address. Conveniently, the address was printed to the console by truffle after deployment to the blockchain. </p>\n\n<p>Copy the <code>contract address: your token address</code> line from the console under the 2_deploy_token.js log. Paste this into your scripts/mint.js file on line 13 like so:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>const NFT_CONTRACT_ADDRESS = "0x87E67eBEBb785060d4Ed85Bff7E67dEc9Efa87F4"\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The web3 script will need this constant variable for instantiating the contract, to call/send methods on it. </p>\n\n<p>The script will also need YOUR account address in the OWNER_ADDRESS variable to mint to YOU, and for you to send this transaction.</p>\n\n<p>You may notice that we are reading the contract artifact JSON with fs:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>let rawdata = fs.readFileSync(path.resolve(__dirname, "../build/contracts/GameItem.json"));\nlet contractAbi = JSON.parse(rawdata);\nconst NFT_ABI = contractAbi.abi\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p><strong>This might need to be reworked for Linux and MACos. I am not super experienced with linux file systems</strong>. All the script is doing here is reading the contract ABI from another file in the project</p>\n\n<p>Web3.js will need this JSON for reference when calling/sending. Therefore, if you compiled a completely different contract in the same project, you would overwrite the artifacts. <strong>Make a new project for new contracts after you\'re finished with this one</strong></p>\n\n<p>For the final requirement of this script, you need the CID hash of the NFT JSON you uploaded to Pinata IPFS earlier for the argument of the mintItem function. Paste it into your script here on line 43:<br>\n</p>\n\n<div class="highlight js-code-highlight">\n<pre class="highlight plaintext"><code>await nftContract.methods\n.mintItem(OWNER_ADDRESS, `https://ipfs.io/ipfs/your-tokenjson-cid`)\n.send({ from: OWNER_ADDRESS })\n.then(console.log(\'minted\'))\n.catch(error =&gt; console.log(error));\n</code></pre>\n<div class="highlight__panel js-actions-panel">\n<div class="highlight__panel-action js-fullscreen-code-action">\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>\n    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>\n</svg>\n\n    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>\n    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>With the script ready, run <code>node scripts/mint.js</code> in the project terminal. You can open a new terminal to do this or press CTRL+C to exit the truffle cli in the current terminal.</p>\n\n<p>Provided that there are no errors here, \'Minted\' should be printed to console and you can check your account on the block explorer to ensure that it was minted. Post any errors in the comments and google them.</p>\n\n<p>With your Metamask logged in on your browser, let\'s view our NFT on Opensea via an existing contract. Go to the <a href="https://testnets.opensea.io/">Opensea Testnet</a> frontend. Open the profile icon dropdown to sign in, then click My Collections:</p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--6HSj9GE1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ez7y9tgx2akd7qrpqsnn.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--6HSj9GE1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ez7y9tgx2akd7qrpqsnn.png" alt="Opensea-Home" loading="lazy" width="880" height="358"></a></p>\n\n<p>Next, tap the 3 dots menu icon, next to Create a Collection, then \'import an existing contract\'. You will then be asked whether the nft is on a mainnet, testnet. Select <strong>testnet</strong> of course.</p>\n\n<p>Now you can pass your nft contract address into the field, and select \'Mumbai\' in the dropdown on the left like so: </p>\n\n<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--lQdmGD87--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/g9lnnmdgrxvhjbkziftd.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--lQdmGD87--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/g9lnnmdgrxvhjbkziftd.png" alt="Existing-contract-opensea" loading="lazy" width="880" height="187"></a></p>\n\n<p>You may receive the following message: \'We couldn\'t find this contract. Please ensure that this is a valid ERC721 or ERC1155 contract deployed on Mumbai and that you have already minted items on the contract\'.</p>\n\n<p>This is a common issue, as Opensea will display your tokens when they can. As long as you can see the token contract and transactions on Polygon Scan, you know it is a valid ERC-721 contract and has minted 1 item. <a href="https://forum.openzeppelin.com/t/how-to-view-nft-deployed-and-minted-on-mumbai-testnet-on-opensea-testnet/10299">Some dev\'s</a> have waited 24 hours + to get their NFTs to appear.</p>\n\n<p>Here is <a href="https://testnets.opensea.io/assets/mumbai/0x87e67ebebb785060d4ed85bff7e67dec9efa87f4/1">my NFT</a>. I made the mistake of not adding the collection hash to the contractURI function in my first attempt. Despite redeploying the contract with the fix, Opensea still cant read the collection metadata. Fortunately, you can change this by editing the collection. At least my \'Example Coffee\' NFT metadata worked.</p>\n\n<h2>\n  <a name="final-notes-and-conclusion" href="#final-notes-and-conclusion">\n  </a>\n  Final notes and Conclusion\n</h2>\n\n<p>With all the action behind us, let\'s have a review.</p>\n\n<p>You have learnt a simple way of deploying ERC-721 tokens to the Polygon testnet, nice. You can repeat this process for Matic mainnet, providing you have MATIC tokens on your mainnet balance, and you edit your mint script to instantiate with the <code>MATIC</code> keyword as oppose to <code>MUMBAI</code> on line 31 of mint.js. </p>\n\n<p>There are few extras that I missed for this tutorial. </p>\n\n<p>Firstly, I could have verified the contracts for a more professional look. Although, it is easier to do this in Hardhat, despite the fact that I cannot get a working example with Hardhat yet. Truffle requires more configuration for verifying contracts, therefore I will leave this for the next tutorial. </p>\n\n<p>Optionally, you can add extra code to your contract to avoid gas fees when selling items from Opensea. <a href="https://docs.opensea.io/docs/polygon-basic-integration">The Opensea documentation</a> explains how to work it. Simply, you set Opensea\'s matic contract address as your operator for your contract. With this, Opensea can transfer NFTs for you, saving you, or any owner gas.</p>\n\n<p>In addition to these extras, you might want to check out <a href="https://support.opensea.io/hc/en-us/articles/1500012270982-What-is-Freezing-Metadata-#:~:text=Freezing%20your%20metadata%20will%20permanently,never%20be%20lost%20or%20missing.">freezing your metadata</a> in production. This is a feature by Opensea to stop mutable metadata. NFT buyers and sellers will be  comforted to see that their metadata is frozen.</p>\n\n<p>Finally, I would like to guide you towards bigger and better tutorials with these links:</p>\n\n<ul>\n<li><a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md">ERC-721 doc - The old standard we used</a></li>\n<li><a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1155.md">ERC-1155 doc - The improved community standard for fungible AND non-fungibles</a></li>\n<li><a href="https://www.youtube.com/watch?v=tBMk1iZa85Y">Filip from Moralis on ERC-1155</a></li>\n</ul>\n\n<h2>\n  <a name="i-wish-you-the-best-and-hope-you-learnt-something" href="#i-wish-you-the-best-and-hope-you-learnt-something">\n  </a>\n  I wish you the best and hope you learn\'t something.\n</h2>\n\n<h2>\n  <a name="edit" href="#edit">\n  </a>\n  Edit\n</h2>\n\n<h3>\n  <a name="new-hardhat-repo-with-opensea-metatxs-and-support-for-erc1155721" href="#new-hardhat-repo-with-opensea-metatxs-and-support-for-erc1155721">\n  </a>\n  <a href="https://github.com/YourNewEmpire/Hardhat-OpenSea-Boilerplate">New Hardhat repo with OpenSea MetaTXs and support for ERC-1155/721</a>\n</h3>\n\n',t.body_markdown='## Intro to me. My first post\n\nHello, I have been learning Information Technology all my life (21 now), it\'s my _profession_. For the past 18 months, studying JS and Solidity has been ideal. Considering the position I was in, which was 2 years of messing with industries I had no interest in, programming has helped me hugely with my adult life. It has provided me meaning and something to structure my life with/around, and taught me to organise my life. I was confused after leaving college in 2018, finishing my course in IT, but having no clue of where I was going to be. As I was growing up, I was scared of anything more than simple, like programming. I was not **curious** to learn anything and would be anxious of what others thought of me when I succeeded/failed. Slowly, I came out of this hole. This required me to be more self-aware. I learn\'t my skills, starting in small baby steps (helloWorld.js, print to console and all that :D.) which is definitely the way to go. Patience was key. With experience in React.js and Express.js, as well as Solidity, I am aiming for a career as a full-stack blockchain app dev. \n\n## [The OLD GitHub Repo](https://github.com/YourNewEmpire/Truffle-Tutorial-ERC721)\n##[The New Hardhat repo with MetaTXs on Polygon](https://github.com/YourNewEmpire/Hardhat-Opensea-ERC721)\n\n##[A New Hardhat repo with MetaTXs and ERC1155 support](https://github.com/YourNew on Polygon Empire/Hardhat-Opensea-Boilerplate)\n\n## Here you will learn the basics of deploying a simple ERC-721 contract to the [Mumbai](https://mumbai.polygonscan.com/) testnet and how it all works.\n\nFeel free to skip through the guide, taking only what you need and moving on. However, this is not a \'do this, then do this\' tutorial (or whatever the slang is for that). I want to explain what is going on in the code, creating some knowledge for you, albeit with basic tools. Prepare for this to get verbose.\n\nThis is inspired by the [ERC-721 Opensea Tutorial](https://docs.opensea.io/docs/developer-tutorials), as well as the [Openzeppelin ERC-721 Tutorial](https://docs.openzeppelin.com/contracts/4.x/erc721). I plan on building my own tutorial with additional detail, and smoother guidance. You could just delegate the deploying and minting to Opensea with their frontend, but this is a basic start for developers to build project ideas off of.\n\nI have found that the following are great for delving into Solidity: [CryptoDevHub](https://cryptodevhub.io/wiki/) for direction and [Solidity By Example](https://solidity-by-example.org/) for code examples.\n\nThis project uses the [Truffle](https://www.trufflesuite.com/docs/truffle/overview) dev framework, as it is easy to begin with, and will give you experience with a node.js environment. Hardhat is preferred in the community. However, my knowledge of hardhat isn\'t up to standard at this moment. For the scope of this tutorial, Truffle will do nicely, but a Hardhat tutorial is due in the future. If you have 0 knowledge in solidity, you can always check out [Remix](remix.ethereum.org) for a quicker, smaller dev tool in the browser to get pracitising the basics of solidity.\n\nMy next tutorial will be focused on [ERC-1155](https://docs.openzeppelin.com/contracts/4.x/erc1155), the improvement on ERC-721. This newer standard allows the developer to have multiple collections of fungible and non-fungible tokens in 1 contract, reducing gas.\n\n\n## Token Metadata Storage\nI will be using Pinata for fast, simple uploads to IPFS. This is a third-party service. Although, In future, I would recommend grabbing [IPFS for desktop](https://docs.ipfs.io/) so that you can run a node on a Raspberry pi or such. At the time of writing this, the performance of the IPFS network has been fluctuating. Hosting an IPFS node would be the super professional way, but out of the scope of this tutorial. You may be interested in an alternative like [Arweave](https://www.arweave.org/). Arweave is similar to IPFS in that its a distributed network. However, Arweave use a *[Blockweave](https://www.arweave.org/technology)* approach, more similar to a chain. Basically, you can pay gas to store immutable files.\n\nLet us go through some prerequisites that you will need, and links to learn more about the tools you will be using. Previous coding knowledge is a big bonus. I am using **Windows 10** with default cmd, not ps, but MACos and most Linux distros should function the same for this tutorial. \n\n## Prerequisites\n* Basic/intermediate knowledge of the Ethereum blockchain (from an app developer view)\n* Basics of Solidity, the most popular language for ethereum contracts. This includes the trusted ERC interfaces for contracts to extend, provided by [OpenZeppelin](https://docs.openzeppelin.com/openzeppelin/).\n* Node JS installed on your OS. Intermediate knowledge of JavaScript, node.js in particular.\n* Truffle CLI installed on your OS. Basics of Truffle dev tool\n* Basics of IPFS\n* **VS Code** or another text editor IDE like atom , sublime text or eclipse\n* MetaMask browser extension, with Polygon Mumbai testnet configured. You can make a new wallet when installing it on another/new browser, to avoid using your main.\n* Git CLI for cloning the repo.\n* Create an account at [Pinata](https://www.pinata.cloud/) for 1gb of metadata storage. \n* Create an account at [MaticVigil](https://rpc.maticvigil.com/) for a polygon (_fka matic_) node url. Easiest third-party polygon node.\n\n## Links\n* [Eth docs for devs](https://ethereum.org/en/developers/docs/)\n* [Solidity](https://docs.soliditylang.org/en/v0.8.0/)\n* [OpenZeppelin\'s ERC-721 docs](https://docs.openzeppelin.com/contracts/4.x/erc721)\n* [JS docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript)\n* [Node.js](https://nodejs.org/en/)\n* [Truffle docs](https://www.trufflesuite.com/docs/truffle/overview)\n* [IPFS docs](docs.ipfs.io) + [Pinata](https://www.pinata.cloud/)\n* [VS code dl](https://code.visualstudio.com/)\n* [Metamask](https://metamask.io/download)\n* [Configure matic networks on Metamask] (https://docs.matic.network/docs/develop/network-details/network)\n* [Git](https://git-scm.com/)\n\nIf you dont have all of these, or none, I would start by installing Node and then the rest (Truffle framework uses node.js and requires node to install it). Once you have node, you can enter `npm i -g truffle` in a fresh terminal.\n\n## Setup Environment\nYou could start entering `git` into the console. Then, check `node` as well. With that, boot VS Code, make a new workspace or folder. Open a new terminal in the folder and clone [The Repo](https://github.com/YourNewEmpire/Truffle-Tutorial-ERC721) with `git clone https://github.com/YourNewEmpire/Truffle-Tutorial-ERC721`. Once its cloned, enter `npm install` to install all the modules we need for this project, rudimentary npm at work here.\n\nCreate the file \'.env\' in the roof the project. This file will hold your wallet seed phrase/mnemonic and free matic node url for your scripts. Write the following lines in the file\n```\nMNEMONIC=\nNODE_KEY=\n```\n\n## Wallet\nTo begin, lets configure metamask to connect with the mumbai testnet. [Go here](https://docs.matic.network/docs/develop/network-details/network) to find the network details of matic/mumbai. Select the Mumbai Testnet and copy name, chainid, any 1 of the rpc urls, MATIC as the currency. Type them into your metamask here\n![metamasknetworks](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rncz8yrzxlznp2u1biwb.png)\nThis can be cumbersome, as metamask will close when you interact with the site again. It can be easier to type them in manually. \n\nLets get your wallet seed phrase for the environment variables so we can send transactions. Click your avatar in the top right, then settings.\n\n![metamask1](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nk8jsm7cw3tzjo9cuzpq.png)\nScroll to find Security & Privacy. Then click the red Reveal Seed button, with your password ready.\n\n![metamaskprivatekey](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1pwzitvwx9fax2qprox3.png)\n\n\nCopy the seed phrase, paste it into your .env, `MNEMONIC=private key here`. **Now you can use this var in your deploying and minting scripts**. They are already binded in the JS scripts using [Template Literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals) \n\nYou will need your eth address for the web3 scripts when minting items to yourself. Copy your address from here\n![metamaskaddress](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eiuazj5ugco5oxtni48c.png)\nGo to ``truffle-tutorial\\scripts\\mint.js`` in your project. Finally, paste your address into line 14 ``const OWNER_ADDRESS = "HERE with the string quotes" ``.\n\nHead over to [Matic Faucet](https://faucet.matic.network), \n\n## Matic/Mumbai node url.\n\nCreating an account at [MaticVigil](https://rpc.maticvigil.com/) will give you a dedicated rpc url key for smooth contract interactions.\n\nOnce logged in and on the Dashboard, you can Create a new app, this should appear straight away on your Dashboard. \n\n![maticvigildashboard](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oxryvhl5nb6t13jnvaqu.png)\n\nCopy the App Id:\n![maticvigilapps](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/z3sxldswfpj2i9e6cly5.png)\n\nPaste it into your .env `NODE_URL=key`. \n\nOk. With your environment setup, let\'s move on to getting token metadata ready for when tokens are minted \n\n## Metadata format for Opensea\n\nTo begin here, let\'s look at minting NFTs at the contract level.\n```\n    function mintItem(address player, string memory tokenURI)\n        public\n        onlyOwner\n        returns (uint256)\n    {\n        _tokenIds.increment();\n        uint256 newItemId = _tokenIds.current();\n        _mint(player, newItemId);\n        _setTokenURI(newItemId, tokenURI);\n        return newItemId;\n    }\n\n```\nThe mint function takes 2 arguments. The important one is the tokenURI. The mintItem function calls the `_setTokenURI` function, which takes in the id (index), which was just assigned and the [URI](https://whatis.techtarget.com/definition/URI-Uniform-Resource-Identifier). The URI is just a link to the token resource. In our case, it\'s on IPFS.\n\nThe point here is that Opensea will be querying that tokenURI through the method `tokenURI`, part of the ERC-721 standard interface.\n\nYou could also set a baseURI, as mentioned [here](https://docs.openzeppelin.com/contracts/3.x/api/token/erc721#ERC721-baseURI--)  in the OZ docs. This will be the prefix for token URIs, so that when you mint or query an NFT, you can just pass the id, and the prefix does the rest of the URI format.\n\n\nSo how does Opensea deal with a resource once it\'s got a URI to fetch? Here is where Opensea\'s [Metadata Standards](https://docs.opensea.io/docs/metadata-standards#metadata-structure) get introduced. Following these standards are required for Opensea to read and display your metadata, you do not want a blank image for an NFT.\n\nEvery token URI is gonna be a JSON file looking something like this:\n\n```\n{\n  "description": "Friendly OpenSea Creature that enjoys long swims in the ocean.", \n  "external_url": "https://openseacreatures.io/3", \n  "image": "https://storage.googleapis.com/opensea-prod.appspot.com/puffs/3.png", \n  "name": "Dave Starbelly",\n  "attributes": [ ... ], \n}\n```\n \nOpensea is specifically looking for the names above, \'image\', \'name\' etc. \n\nI will be using Name, Desc and Image. If you want to try audio and video, **animation_url** is the one as mentioned in the standards page I linked above. The image or animation url will point to another resource, also on IPFS. **This is the image or video that will appear on Opensea**\n\nAs well as NFT metadata, there is **Collection** metadata fetched from the `contractUri()` function in the GameItem.sol contract. Each NFT contract is a Collection. Each minted token on the contract is an NFT. We will need to upload metadata for the Collection in the form of, image, name, desc. \n\n\n## Create and upload token metadata\n\nNow that we know the guidance on NFT metadata, we shall write some up before deploying any contracts. Because of IPFS, I have decided to organise my folders, separating collection data from nft data. I follow this pattern because I usually mint more than 1 nft, therefore I want to upload my media in folders. Feel free to organise them in any way you want.\n\nStart by creating 2 folders in the root of the project. collection-data and nft-data, you should consider adding this to gitignore if you ever push this to GitHub. Within collection-data, have your collection image and json file like so:\n\n![collection-data-image](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ce6xs2o1ib1tgctlpqay.png)\n\nOf course, use your own values. The external_link is not crucial, but worth testing, and say if you leave name empty, Opensea will make a name. \n\nAs you may notice the image value is empty. We need to upload the collection image first, to get the image URI for the JSON file to point to, which we will upload next. Despite that they are together in a folder in the project, the image needs to be uploaded before the json.\n\nOnce you have your test collection image ready, open up Pinata IPFS from the prerequisites and upload it. After logging in, you will land straight at the uploading page. Click _Upload a File_ and pick the collection image from your project in the file explorer.\n\n![collection-image-upload](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0v3z6ltxw4sewjfem6m.png)\n\nIn your dashboard, you will see the file has a CID or Content Identifier. As described in the [IPFS docs](https://docs.ipfs.io/concepts/content-addressing/), the CID is an address/hash based on the content, not a location. Not necessarily important for us but interesting nonetheless. \n\nClicking on the image will send you to a pinata gateway url. I have had my best experiences in using this URI format: `https://ipfs.io/ipfs/your-collection-cid`. Copy this, and your CID from Pinata and paste it into the collection JSON in your project:\n```\n{\n      "name": "Collection Name",\n      "description": "A test collection for ERC721 tutorial",\n      "image": \n"https://ipfs.io/ipfs/QmQ2CPtFwRxoASHmiqbTPSfuPr91NfbMw2fjPtgvz55LPL"\n}\n```\n\nYou can do the same for your nft-data. Upload the test nft image first, then copy and paste the cid into \'nft.json\'. The JSON may look like this:\n\n```\n{\n    "name": "Example Coffee #1",\n    "description": "I am a coffee but, this .jpg extension allows me to be warm forever.",\n    "image": "https://ipfs.io/ipfs/QmSXSHaUDJTorFReSJA24HjruRo2yqYbxPUSbxG7xTi31c"\n}\n```\n\nFinally, you can upload your JSON files for both collection, and nft[s]. When minting **multiple** NFTs, I like to upload all my media in one folder, so the uri will look like: `https://ipfs.io/ipfs/folder-hash/nft1.jpg`. However, for this post I shall upload 1 jpg.\n\nWith that, we are done with the metadata. You will need the collection and NFT JSON CIDs for the next stage, when we will deploy and mint, ooh exciting.\n\n\n## Deploying and Minting the NFT\nWith the metadata and environment all set, we can begin this stage by viewing the GameItem.sol in the contracts folder of the project. It will look like this\n\n```\npragma solidity ^0.8.0;\n\nimport "../node_modules/@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol";\nimport "../node_modules/@openzeppelin/contracts/utils/Counters.sol";\nimport "../node_modules/@openzeppelin/contracts/access/Ownable.sol";\n\ncontract GameItem is ERC721URIStorage, Ownable {\n    using Counters for Counters.Counter;\n    Counters.Counter private _tokenIds;\n\n    // set contract name and ticker. \n    constructor() ERC721("Contract Name", "TIC") {}\n\n    //get the current supply of tokens\n    function totalSupply() public view returns (uint256) {\n        return _tokenIds.current();\n    }\n\n    // for opensea collection \n    function contractURI() public pure returns (string memory) {\n        return "https://ipfs.io/ipfs/your-collection-ipfshash";\n    }\n\n    \n    function mintItem(address player, string memory tokenURI)\n        public\n        onlyOwner\n        returns (uint256)\n    {\n        _tokenIds.increment();\n        uint256 newItemId = _tokenIds.current();\n        _mint(player, newItemId);\n        _setTokenURI(newItemId, tokenURI);\n        return newItemId;\n    }\n\n}\n\n```\n\nIf you are new to Solidity, there is a bit to talk about here. Starting with pragma. Pragma simply sets the solidity compiler version to use when compiling the file. The project is using 0.8.0, the highest minor version of Solidity available, which can be set in the truffle-config.js.\n\nWe are then importing Ownable, for modifying function calls to owners only (you, the deployer), then Counters for the tokenId\'s, this is a trusted utility for keeping track of tokens safely. ERC721URIStorage inherits the classic ERC721 interface, and adds some token URI help to the contract, recently added in Openzeppelin version 4.x . You should definitely have a look at these libraries, and abstract contracts, as they are great examples for building your own interfaces.\n\nThe most important bit for us, is the contractURI function. As I was saying earlier, 1 ERC-721 contract is 1 collection. This function returns a string that is the URI to your collection JSON. Opensea will call this method when displaying your collection on their frontend. \n\n**Copy your collection JSON ipfs URI into the return statement**. \n```  \nfunction contractURI() public pure returns (string memory) {\n        return "https://ipfs.io/ipfs/your-collection-ipfshash";\n    }\n```\nOptionally, you may set the ticker and the token/contract name in the Constructor function. This function is ran once at deployment for initialising something. In our case, its inheriting ERC-721 through ERC721URIStorage, expecting ticker and name arguments. This a test, so I shall leave it default.\n\nProviding your wallet phrase and node url are in the .env file, we can now deploy this contract. Open a new terminal in the project and enter `truffle develop`. Powershell might need the `npx` prefix. This command will prep the truffle cli for deploying, compiling and more. You could enter `compile` for a single compile without having to deploy, but when you deploy, truffle will compile anyway. \n\nTo deploy run `migrate --network mumbai` in the terminal. ** You may experience errors here**, especially with specific environments. These tools are certainly not perfect. A good troubleshoot would be to run migrate --network development to eliminate where the error is.\n\nI got this: \n```\nStarting migrations...\n======================\n> Network name:    \'mumbai\'\n> Network id:      80001\n> Block gas limit: 20000000 (0x1312d00)\n\n\n1_initial_migration.js\n======================\n\n   Replacing \'Migrations\'\n   ----------------------\n   > transaction hash:    0x4f703c7184a36b92af5fdd5d7751a7ed444670031475dfc90009927b96949d82\n   > Blocks: 2            Seconds: 8\n   > contract address:    0xb6e5A1B174C1CA435cB43Cf61fF9064F87f5f0Ec\n   > block number:        18792256\n   > block timestamp:     1631363185\n   > account:             0x5f4c3843495Babe89cB3516cEbD8840024e741fa\n   > balance:             1.408520183748380055\n   > gas used:            245600 (0x3bf60)\n   > gas price:           3 gwei\n   > value sent:          0 ETH\n   > total cost:          0.0007368 ETH\n\n   Pausing for 2 confirmations...\n   ------------------------------\n   > confirmation number: 2 (block: 18792258)\n\n   > Saving migration to chain.\n   > Saving artifacts\n   -------------------------------------\n   > Total cost:           0.0007368 ETH\n\n\n2_deploy_token.js\n=================\n\n   Replacing \'GameItem\'\n   --------------------\n   > transaction hash:    0x2a0bc70f5c77c9c28e4a237de7adf72bac55c5d05d744a013c1dbd67fd1f245b\n   > Blocks: 2            Seconds: 4\n   > contract address:    0x87E67eBEBb785060d4Ed85Bff7E67dEc9Efa87F4\n   > block number:        18792264\n   > block timestamp:     1631363201\n   > account:             0x5f4c3843495Babe89cB3516cEbD8840024e741fa\n   > balance:             1.400152706748380055\n   > gas used:            2743246 (0x29dbce)\n   > gas price:           3 gwei\n   > value sent:          0 ETH\n   > total cost:          0.008229738 ETH\n\n   Pausing for 2 confirmations...\n   ------------------------------\n   > confirmation number: 2 (block: 18792266)\n\n   > Saving migration to chain.\n   > Saving artifacts\n   -------------------------------------\n   > Total cost:         0.008229738 ETH\n\n\nSummary\n=======\n> Total deployments:   2\n> Final cost:          0.008966538 ETH\n\n\n- Blocks: 0            Seconds: 0\n- Saving migration to chain.\n- Blocks: 0            Seconds: 0\n- Saving migration to chain.\n```\nDo not close the terminal, we are not done here. Above you can see that Truffle ran the Migration script, to deploy the Migrations.sol contract, which is follwed by the token script. This is truffle\'s way of deploying contracts. You could order more deployments by creating more js scripts in the migrations folder of the project. If you\'re deployment was successful, very well done to you, you have deployed your contract.\n\nWe need the token contract address for minting, and you could get this from the Mumbai Tesnet [Block Explorer](https://mumbai.polygonscan.com/), under your address. Conveniently, the address was printed to the console by truffle after deployment to the blockchain. \n\nCopy the ` contract address: your token address` line from the console under the 2_deploy_token.js log. Paste this into your scripts/mint.js file on line 13 like so: \n```\nconst NFT_CONTRACT_ADDRESS = "0x87E67eBEBb785060d4Ed85Bff7E67dEc9Efa87F4"\n```\nThe web3 script will need this constant variable for instantiating the contract, to call/send methods on it. \n\nThe script will also need YOUR account address in the OWNER_ADDRESS variable to mint to YOU, and for you to send this transaction.\n\nYou may notice that we are reading the contract artifact JSON with fs:\n\n```\nlet rawdata = fs.readFileSync(path.resolve(__dirname, "../build/contracts/GameItem.json"));\nlet contractAbi = JSON.parse(rawdata);\nconst NFT_ABI = contractAbi.abi\n```\n**This might need to be reworked for Linux and MACos. I am not super experienced with linux file systems**. All the script is doing here is reading the contract ABI from another file in the project\n\nWeb3.js will need this JSON for reference when calling/sending. Therefore, if you compiled a completely different contract in the same project, you would overwrite the artifacts. **Make a new project for new contracts after you\'re finished with this one**\n\nFor the final requirement of this script, you need the CID hash of the NFT JSON you uploaded to Pinata IPFS earlier for the argument of the mintItem function. Paste it into your script here on line 43: \n\n```\nawait nftContract.methods\n.mintItem(OWNER_ADDRESS, `https://ipfs.io/ipfs/your-tokenjson-cid`)\n.send({ from: OWNER_ADDRESS })\n.then(console.log(\'minted\'))\n.catch(error => console.log(error));\n```\n\nWith the script ready, run `node scripts/mint.js` in the project terminal. You can open a new terminal to do this or press CTRL+C to exit the truffle cli in the current terminal.\n\nProvided that there are no errors here, \'Minted\' should be printed to console and you can check your account on the block explorer to ensure that it was minted. Post any errors in the comments and google them.\n\nWith your Metamask logged in on your browser, let\'s view our NFT on Opensea via an existing contract. Go to the [Opensea Testnet](https://testnets.opensea.io/) frontend. Open the profile icon dropdown to sign in, then click My Collections:\n\n![Opensea-Home](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ez7y9tgx2akd7qrpqsnn.png)\n\nNext, tap the 3 dots menu icon, next to Create a Collection, then \'import an existing contract\'. You will then be asked whether the nft is on a mainnet, testnet. Select **testnet** of course.\n\nNow you can pass your nft contract address into the field, and select \'Mumbai\' in the dropdown on the left like so: \n\n![Existing-contract-opensea](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/g9lnnmdgrxvhjbkziftd.png)\n\nYou may receive the following message: \'We couldn\'t find this contract. Please ensure that this is a valid ERC721 or ERC1155 contract deployed on Mumbai and that you have already minted items on the contract\'.\n\nThis is a common issue, as Opensea will display your tokens when they can. As long as you can see the token contract and transactions on Polygon Scan, you know it is a valid ERC-721 contract and has minted 1 item. [Some dev\'s](https://forum.openzeppelin.com/t/how-to-view-nft-deployed-and-minted-on-mumbai-testnet-on-opensea-testnet/10299) have waited 24 hours + to get their NFTs to appear.\n\nHere is [my NFT](https://testnets.opensea.io/assets/mumbai/0x87e67ebebb785060d4ed85bff7e67dec9efa87f4/1). I made the mistake of not adding the collection hash to the contractURI function in my first attempt. Despite redeploying the contract with the fix, Opensea still cant read the collection metadata. Fortunately, you can change this by editing the collection. At least my \'Example Coffee\' NFT metadata worked.\n\n## Final notes and Conclusion\nWith all the action behind us, let\'s have a review.\n\nYou have learnt a simple way of deploying ERC-721 tokens to the Polygon testnet, nice. You can repeat this process for Matic mainnet, providing you have MATIC tokens on your mainnet balance, and you edit your mint script to instantiate with the `MATIC` keyword as oppose to `MUMBAI` on line 31 of mint.js. \n\nThere are few extras that I missed for this tutorial. \n\nFirstly, I could have verified the contracts for a more professional look. Although, it is easier to do this in Hardhat, despite the fact that I cannot get a working example with Hardhat yet. Truffle requires more configuration for verifying contracts, therefore I will leave this for the next tutorial. \n\nOptionally, you can add extra code to your contract to avoid gas fees when selling items from Opensea. [The Opensea documentation](https://docs.opensea.io/docs/polygon-basic-integration) explains how to work it. Simply, you set Opensea\'s matic contract address as your operator for your contract. With this, Opensea can transfer NFTs for you, saving you, or any owner gas.\n\nIn addition to these extras, you might want to check out [freezing your metadata](https://support.opensea.io/hc/en-us/articles/1500012270982-What-is-Freezing-Metadata-#:~:text=Freezing%20your%20metadata%20will%20permanently,never%20be%20lost%20or%20missing.) in production. This is a feature by Opensea to stop mutable metadata. NFT buyers and sellers will be  comforted to see that their metadata is frozen.\n\nFinally, I would like to guide you towards bigger and better tutorials with these links:\n\n* [ERC-721 doc - The old standard we used](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md)\n* [ERC-1155 doc - The improved community standard for fungible AND non-fungibles](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1155.md)\n* [Filip from Moralis on ERC-1155](https://www.youtube.com/watch?v=tBMk1iZa85Y)\n\n## I wish you the best and hope you learn\'t something.\n\n\n## Edit\n###[New Hardhat repo with OpenSea MetaTXs and support for ERC-1155/721](https://github.com/YourNewEmpire/Hardhat-OpenSea-Boilerplate)\n\n',t.user={name:"Archie Smyth",username:"yournewempire",twitter_username:e,github_username:"YourNewEmpire",website_url:"https://archiesportfolio.vercel.app/",profile_image:"https://res.cloudinary.com/practicaldev/image/fetch/s--2FlAVjzD--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/597660/0334991f-76b2-4c72-b5ae-b642acf6214d.png",profile_image_90:"https://res.cloudinary.com/practicaldev/image/fetch/s--BUDQA0_n--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/597660/0334991f-76b2-4c72-b5ae-b642acf6214d.png"},{layout:"default",data:[{}],fetch:{"data-v-70afb46a:0":{article:t}},error:e,state:{currentArticle:t},serverRendered:!0,routePath:"/yournewempire/792442",config:{_app:{basePath:"/nuxtstop/",assetsPath:"/nuxtstop/_nuxt/",cdnURL:e}}}}(null,{},"https://dev.to/yournewempire/deploy-nfts-with-truffle-ipfs-opensea-polygon-5581","2021-09-12T13:38:23Z")</script><script src="/nuxtstop/_nuxt/f6e87fb.js" defer></script><script src="/nuxtstop/_nuxt/dc9ce94.js" defer></script><script src="/nuxtstop/_nuxt/6474719.js" defer></script><script src="/nuxtstop/_nuxt/9b75090.js" defer></script><script src="/nuxtstop/_nuxt/18df600.js" defer></script>
  </body>
</html>
